var ye=Object.defineProperty,he=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var J=(e,a,s)=>a in e?ye(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,R=(e,a)=>{for(var s in a||(a={}))be.call(a,s)&&J(e,s,a[s]);if(Y)for(var s of Y(a))ke.call(a,s)&&J(e,s,a[s]);return e},Z=(e,a)=>he(e,xe(a));import{W as A,X as $e,e as k,d as T,a8 as we,ak as Ie,w as j,a9 as Ve,o as t,c as n,q as f,s as I,D as $,$ as ee,aa as W,n as F,u,P as N,a1 as te,a2 as ae,a as r,F as V,l as E,i as Ce,x as C,V as B,z as Se,C as Te,T as Be,a5 as L,a0 as Me,t as ze}from"./vendor.241c16ad.js";import{_ as S,j as se,k as H,d as ne,l as P,m as O,o as Pe,I as le,h as Ae,p as Ee,T as je,q as oe,r as ie,s as Le,t as D,B as We,v as ce,w as de,x as Ne,y as Oe,z as ue,C as re,D as ve}from"./index.f50ad061.js";import{I as _e}from"./y.f9a54597.js";import{O as De}from"./OverlayPrompt.16f3add6.js";const Re={class:"margin fade-list-item",key:"margin1"},Fe={class:"margin fade-list-item",key:"margin2"},He=A({props:{modelValue:null,options:null},emits:["update:modelValue"],setup(e,{emit:a}){const s=e,c=$e("transitionState",null),l=k({get(){return s.modelValue},set(d){a("update:modelValue",d)}}),o=T(null),m=d=>{if(!(!d||!o.value))return s.options.align==="center"?d.offsetLeft+d.offsetWidth/2-o.value.offsetWidth/2:s.options.align==="end"?d.offsetLeft+d.offsetWidth-o.value.offsetWidth:d.offsetLeft},h=k(()=>{var d;return w.value,((d=o.value)==null?void 0:d.children)?Array(...o.value.children).filter(i=>!i.classList.contains("margin")):[]}),g=k(()=>{var d;return{"--position":((d=s.options)==null?void 0:d.align)||"start"}}),x=async(d,i)=>{var v;!i&&s.options.awaitTransition&&await se(()=>!c.running),d=Math.max(d||0,0),(v=o.value)==null||v.scroll({left:m(h.value[d]),behavior:i?"instant":"smooth"})};let y;const w=T(0);return we(async()=>{y=new MutationObserver(async()=>{w.value++}),y.observe(o.value,{subtree:!1,childList:!0}),await Ie(),await se(()=>h.value.length),setTimeout(()=>{const d=!s.options.immediate&&l.value&&l.value>0||!1;x(d?0:l.value,!0),j(l,i=>x(i),{immediate:d})})}),Ve(()=>y&&y.disconnect()),(d,i)=>(t(),n("div",{ref_key:"root",ref:o,class:"carousel flex-row no-scrollbar",style:F(u(g))},[f(W,{name:"fade-list"},{default:I(()=>{var v,_;return[((v=e.options)==null?void 0:v.overscroll)?(t(),n("div",Re)):$("",!0),ee(d.$slots,"default",{},void 0,!0),((_=e.options)==null?void 0:_.overscroll)?(t(),n("div",Fe)):$("",!0)]}),_:3})],4))}});var me=S(He,[["__scopeId","data-v-5e316723"]]);const fe=e=>(te("data-v-7b045f16"),e=e(),ae(),e),Ue={class:"wallet-selector"},qe=fe(()=>r("div",{class:"exit-background"},null,-1)),Ke=fe(()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[r("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})],-1)),Xe=[qe,Ke],Ge=A({props:{modelValue:String,default:String,exit:Boolean,active:Boolean},emits:["update:modelValue","selectWallet","exit"],setup(e,{emit:a}){const s=e,c=k({get(){return s.modelValue||s.default},set(o){a("update:modelValue",o)}}),l=k(()=>{var o;return(o=H(c.value))==null?void 0:o.key});return(o,m)=>(t(),n("div",Ue,[u(c)?(t(),n("button",{key:0,type:"button",onClick:m[0]||(m[0]=h=>o.$emit("selectWallet")),class:N(["tab",{active:e.active}])},[f(ne,{address:u(l)},null,8,["address"])],2)):$("",!0),e.exit?(t(),n("button",{key:1,class:"exit",type:"button",onClick:m[1]||(m[1]=h=>o.$emit("exit"))},Xe)):$("",!0)]))}});var Qe=S(Ge,[["__scopeId","data-v-7b045f16"]]);const Ye={class:"wallet-tabs"},Je=["onClick"],Ze=A({props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:a}){const s=e,c=k({get(){return s.modelValue},set(o){a("update:modelValue",o)}}),l=k(()=>P.value.findIndex(o=>o.id===c.value));return(o,m)=>(t(),n("div",Ye,[f(me,{modelValue:u(l),"onUpdate:modelValue":m[0]||(m[0]=h=>Ce(l)?l.value=h:null),options:{align:"center",overscroll:!0,immediate:!0}},{default:I(()=>[(t(!0),n(V,null,E(u(P),h=>(t(),n("button",{key:h.id,type:"button",onClick:g=>c.value=h.id,class:N(["tab",{active:h.id==u(c)}])},[f(ne,{address:h.key},null,8,["address"])],10,Je))),128))]),_:1},8,["modelValue"])]))}});var et=S(Ze,[["__scopeId","data-v-35e1b97b"]]);const tt={class:"icon-background"},at={props:["icon","img"],setup(e){return(a,s)=>(t(),n("div",tt,[e.img?(t(),C(O,{key:0,class:"page-logo",icon:e.img},null,8,["icon"])):(t(),C(O,{key:1,class:"page-logo placeholder",icon:e.icon},null,8,["icon"]))]))}};var ge=S(at,[["__scopeId","data-v-7bef1ba0"]]);const pe=e=>(te("data-v-9a5c4e1a"),e=e(),ae(),e),st=pe(()=>r("path",{d:"M24 24H0V0h24v24z",fill:"none",opacity:".87"},null,-1)),nt=pe(()=>r("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"},null,-1)),lt=[st,nt],ot={props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:a}){const s=e,c=k({get(){return s.modelValue},set(l){a("update:modelValue",l)}});return(l,o)=>(t(),n("button",{type:"button",class:"expand",onClick:o[0]||(o[0]=m=>c.value=!u(c))},[(t(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:N({expanded:u(c)})},lt,2))]))}};var it=S(ot,[["__scopeId","data-v-9a5c4e1a"]]);const ct={class:"actions-list flex-row"},dt=["onClick"],ut=A({props:{actions:null},setup(e){return(a,s)=>(t(),n("div",ct,[(t(!0),n(V,null,E(e.actions,c=>(t(),n("button",{key:c.name,onClick:c.run,type:"button",class:"action flex-row"},[f(O,{icon:c.icon},null,8,["icon"]),r("div",null,B(c.name),1)],8,dt))),128))]))}});var U=S(ut,[["__scopeId","data-v-7477f216"]]);const rt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFF"},vt=r("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),_t=r("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"},null,-1),mt=[vt,_t];function ft(e,a){return t(),n("svg",rt,mt)}var gt={render:ft};const pt={class:"flex-row"},yt={class:"flex-row",style:{flex:"1 1 0"}},ht={class:"content"},xt={class:"title"},bt={class:"secondary-text"},kt={props:["data"],setup(e){return(a,s)=>(t(),n("div",{class:N(["notification",{expanded:e.data.expanded}])},[r("div",pt,[r("div",yt,[f(ge,{icon:e.data.icon||u(gt),img:e.data.img},null,8,["icon","img"]),r("div",ht,[e.data.expanded?(t(),C(Pe,{key:0,class:"secondary-text",timestamp:e.data.timestamp},null,8,["timestamp"])):$("",!0),r("div",xt,B(e.data.title),1),r("div",bt,[ee(a.$slots,"default",{},void 0,!0)]),e.data.expanded?(t(),C(U,{key:1,actions:e.data.actions},null,8,["actions"])):$("",!0)])]),f(it,{modelValue:e.data.expanded,"onUpdate:modelValue":s[0]||(s[0]=c=>e.data.expanded=c)},null,8,["modelValue"])])],2))}};var $t=S(kt,[["__scopeId","data-v-7ece1c50"]]);const wt={class:"tx-card-extension"},It={key:0,class:"flex-row",style:{"justify-content":"space-between"}},Vt={key:0},Ct={key:1},St={key:1,class:"tags secondary-text no-scrollbar"},Tt={props:["tx"],setup(e){return k(()=>le.breakpoints.verticalLayout),(a,s)=>(t(),n("div",wt,[e.tx.tags.length||e.tx.data_size?(t(),n("div",It,[e.tx.tags.length?(t(),n("div",Vt,"Tags:")):$("",!0),e.tx.data_size?(t(),n("div",Ct,"Data: "+B(u(Ae)(e.tx.data_size)),1)):$("",!0)])):$("",!0),e.tx.tags.length?(t(),n("ul",St,[(t(!0),n(V,null,E(e.tx.tags,c=>(t(),n("li",null,B(c.name+" | "+c.value),1))),256))])):$("",!0)]))}};var Bt=S(Tt,[["__scopeId","data-v-5ee7fb30"]]);const Mt={class:"permission-card"},zt=L(" Share the public key "),Pt=L(" Share the arweave config "),At=L(" Sign data "),Et=L(" Decrypt data "),jt=A({props:{messageEntry:null},setup(e){const a=e,s=T(null),c=k(()=>{var g,x,y,w;if(((g=s.value)==null?void 0:g.method)!=="signTransaction")return;const m=(y=(x=s.value)==null?void 0:x.params)==null?void 0:y[0],h=(w=m.tags)==null?void 0:w.map(({name:d,value:i})=>({name:window.atob(d),value:window.atob(i)}));return Z(R({},m),{tags:h})});j(()=>a.messageEntry,async()=>{s.value=await Ee(a.messageEntry)},{immediate:!0});const l=[{name:"Accept",icon:_e,run:()=>a.messageEntry.status="accepted"},{name:"Reject",icon:oe,run:()=>a.messageEntry.status="rejected"}],o=[{name:"Pending",icon:ie,run:()=>{}}];return(m,h)=>{var g,x,y,w,d;return Se((t(),n("div",Mt,[((g=s.value)==null?void 0:g.method)==="signTransaction"?(t(),n(V,{key:0},[f(je,{tx:u(c)},null,8,["tx"]),f(Bt,{tx:u(c)},null,8,["tx"])],64)):((x=s.value)==null?void 0:x.method)==="getPublicKey"?(t(),n(V,{key:1},[zt],64)):((y=s.value)==null?void 0:y.method)==="getArweaveConfig"?(t(),n(V,{key:2},[Pt],64)):((w=s.value)==null?void 0:w.method)==="sign"?(t(),n(V,{key:3},[At],64)):((d=s.value)==null?void 0:d.method)==="decrypt"?(t(),n(V,{key:4},[Et],64)):$("",!0),f(Be,{name:"fade",mode:"out-in"},{default:I(()=>[e.messageEntry.status?(t(),C(U,{key:1,actions:o})):(t(),C(U,{key:0,actions:l}))]),_:1})],512)),[[Te,s.value]])}}});var Lt=S(jt,[["__scopeId","data-v-0e1a76fc"]]);const Wt={class:"flex-column no-scrollbar"},Nt=["disabled","onClick"],Ot=L(" Apply "),Dt=A({props:{state:null,walletId:null},setup(e){const a=e,s={connect:"Connect automatically",signTransaction:"Sign transaction",getPublicKey:"Share public key",sign:"Sign arbitrary data",decrypt:"Decrypt data",getArweaveConfig:"Share arweave gateway configuration"},c=i=>Object.getOwnPropertyNames(Object.getPrototypeOf((i==null?void 0:i.messageRunner)||{})).filter(v=>{var _;return!((_=i==null?void 0:i.messageRunner.getMethodMetadata(v))==null?void 0:_.unavailable)&&v!=="constructor"&&v!=="getMethodMetadata"}).map(v=>{var _;return{name:v,displayName:s[v]||v,disabled:(_=i==null?void 0:i.messageRunner.getMethodMetadata(v))==null?void 0:_.userIntent}}),l=k(()=>H(a.walletId)),o=k(()=>[...c(l.value)]),m=i=>g.value&&(g.value[i]=!g.value[i]),h=Le("connectionSettings:",a.state.origin,{}),g=T(void 0),x=T(void 0);j(l,i=>{var v,_,M;!(i==null?void 0:i.uuid)||((v=h.state).value||(v.value={}),x.value=(_=h.state.value)[M=i.uuid]||(_[M]={}),g.value=R({},x.value))},{immediate:!0});const y=([i,v])=>{var M;const _=((M=x.value)==null?void 0:M[i])||!1;if(v!==_)return!0},w=k(()=>g.value?Object.entries(g.value).find(y):!1),d=()=>{if(!g.value||!x.value)return!1;Object.entries(g.value).filter(y).forEach(([i,v])=>x.value&&(x.value[i]=v))};return(i,v)=>(t(),n("div",Wt,[(t(!0),n(V,null,E(u(o),_=>(t(),n("button",{key:_.name,disabled:_.disabled,class:"row method",onClick:M=>m(_.name)},[r("div",null,B(_.displayName),1),f(D,{vector:g.value[_.name]?1:-1,axis:"y"},{default:I(()=>[(t(),n("div",{key:g.value[_.name]},B(g.value[_.name]?"Allow":"Ask"),1))]),_:2},1032,["vector"])],8,Nt))),128)),f(D,null,{default:I(()=>[u(w)?(t(),C(We,{key:0,onClick:v[0]||(v[0]=_=>d())},{default:I(()=>[Ot]),_:1})):$("",!0)]),_:1})]))}});var Rt=S(Dt,[["__scopeId","data-v-81b70f2e"]]);const Ft={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#fff"},Ht=r("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Ut=r("path",{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},null,-1),qt=[Ht,Ut];function Kt(e,a){return t(),n("svg",Ft,qt)}var Xt={render:Kt};const Gt={class:"connection-card flex-column no-scrollbar"},Qt={class:"flex-row"},Yt=["disabled"],Jt={style:{"min-width":"0"}},Zt={class:"ellipsis"},ea={class:"secondary-text ellipsis"},ta={class:"flex-column",style:{flex:"1 1 0"}},aa={class:"container"},sa={class:"page-container",key:"0"},na={key:0},la={class:"status fade-list-item",key:"1"},oa={key:1},ia=A({props:{state:null},setup(e){var K;const a=e,s=Me(),c=(K=P.value[0])==null?void 0:K.id;k(()=>P.value.map(p=>p.key));const l=T(a.state.walletId||c);k(()=>H(c));const o=[{name:"Requests",color:"var(--orange)"},{name:"Permissions",color:"var(--green)"}],m=T(l.value?o[0].name:null);j(()=>a.state.walletId,p=>{!p||(y.value=!1,l.value=p,m.value=o[0].name)});const h=()=>a.state.walletId=!1,g=()=>{y.value=!1,a.state.walletId=l.value+""},x=()=>{var p;!a.state.walletId||(l.value!==(a.state.walletId||((p=P.value[0])==null?void 0:p.id))&&d.value++,y.value=!1,l.value=a.state.walletId)},y=T(!a.state.walletId),w=k(()=>y.value&&P.value.length>1),d=T(0),i=()=>{var p,b;if(!y.value){y.value=!0;return}l.value!==(a.state.walletId||((p=P.value[0])==null?void 0:p.id))&&d.value++,l.value=a.state.walletId||((b=P.value[0])==null?void 0:b.id),y.value=!1},v=k(()=>{var b;const p=a.state.walletId?`Switch to ${l.value}`:`Connect to ${((b=a.state.appInfo)==null?void 0:b.name)||a.state.origin} from the account ${l.value}`;return{title:a.state.walletId?"Switch":"Connect",timestamp:Date.now(),actions:[{name:"Connect",icon:_e,run:g},{name:a.state.walletId?"Cancel":"Switch",icon:oe,run:a.state.walletId?x:i}],expanded:!0,content:p}}),_=k(()=>{var p;return l.value!==a.state.walletId?[]:(p=a.state.messageQueue)==null?void 0:p.filter(b=>!b.fulfilled)});ze(le.breakpoints,"verticalLayout");const M=T(null),q=(p,b)=>M.value=p-b;return j(()=>o.findIndex(p=>p.name===m.value),q),j(()=>P.value.findIndex(p=>p.id===l.value),q),(p,b)=>{var X,G;return t(),n("div",Gt,[r("div",Qt,[r("button",{type:"button",class:"info flex-row",onClick:b[0]||(b[0]=(...z)=>u(ce)&&u(ce)(...z)),disabled:!u(de)(e.state.origin,e.state.session)},[f(ge,{img:(X=e.state.appInfo)==null?void 0:X.logo,icon:u(ie)},null,8,["img","icon"]),r("div",Jt,[r("div",Zt,B(((G=e.state.appInfo)==null?void 0:G.name)||"Connector"),1),r("div",ea,B(e.state.origin),1)]),u(de)(e.state.origin,e.state.session)?(t(),C(O,{key:0,icon:u(Xt)},null,8,["icon"])):$("",!0)],8,Yt),f(Qe,{modelValue:e.state.walletId,"onUpdate:modelValue":b[1]||(b[1]=z=>e.state.walletId=z),default:u(c),exit:!0,active:!u(w),onSelectWallet:i,onExit:h},null,8,["modelValue","default","active"])]),r("div",ta,[f(Ne,{tabs:o,modelValue:m.value,"onUpdate:modelValue":b[2]||(b[2]=z=>m.value=z),disabled:!l.value},null,8,["modelValue","disabled"]),r("div",aa,[f(D,{vector:M.value,axis:"x"},{default:I(()=>[u(P).length?(t(),n("div",{class:"container-scroll",key:d.value},[f(W,{name:"fade-list"},{default:I(()=>[u(w)?(t(),C(et,{modelValue:l.value,"onUpdate:modelValue":b[3]||(b[3]=z=>l.value=z),class:"fade-list-item",key:"-1"},null,8,["modelValue"])):$("",!0),r("div",sa,[f(D,{vector:M.value,axis:"x"},{default:I(()=>[(t(),n("div",{key:(l.value||"")+m.value,class:"content"},[m.value==="Requests"?(t(),n("div",na,[f(W,{name:"fade-list"},{default:I(()=>{var z;return[r("div",{class:"fade-list-item",key:"0",style:F({padding:0,border:0,outline:"0.5px solid var(--border)"})},null,4),((z=u(_))==null?void 0:z.length)===0&&e.state.walletId&&e.state.walletId===l.value?(t(),n("div",la,"Connected")):$("",!0),l.value!==e.state.walletId?(t(),C($t,{data:u(v),class:"fade-list-item",key:"2"},{default:I(()=>[L(B(u(v).content),1)]),_:1},8,["data"])):$("",!0),(t(!0),n(V,null,E(u(_),Q=>(t(),C(Lt,{key:Q.uuid,messageEntry:Q,style:{padding:"var(--spacing)"},class:"flex-column fade-list-item"},null,8,["messageEntry"]))),128))]}),_:1})])):m.value==="Permissions"?(t(),n("div",oa,[f(W,{name:"fade-list"},{default:I(()=>[r("div",{class:"fade-list-item",key:"0",style:F({padding:0,border:0,outline:"0.5px solid var(--border)"})},null,4),f(Rt,{state:e.state,walletId:l.value,class:"fade-list-item",key:"2"},null,8,["state","walletId"])]),_:1})])):$("",!0)]))]),_:1},8,["vector"])])]),_:1})])):(t(),C(De,{key:0,options:{action:{icon:u(Oe),name:"Add wallet",run:()=>u(s).push("/add")}}},null,8,["options"]))]),_:1},8,["vector"])])])])}}});var ca=S(ia,[["__scopeId","data-v-36576eaf"]]);const da={class:"connect flex-column"},ua={class:"bottom-info secondary-text",style:{opacity:"0.0","pointer-events":"none"}},ra=A({setup(e){const a=T(ue.value.findIndex(s=>s.origin===re.origin&&s.session===re.session));return(s,c)=>(t(),n("div",da,[f(me,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=l=>a.value=l),options:{align:"start",overscroll:!0},class:"connectors"},{default:I(()=>[(t(!0),n(V,null,E(u(ue),l=>(t(),n("div",{key:l.session,class:"connection-card-container fade-list-item"},[f(ca,{state:l,class:"box"},null,8,["state"])]))),128))]),_:1},8,["modelValue"]),r("div",ua,[r("div",null,"All Channels "+B(Object.keys(u(ve)).length),1),(t(!0),n(V,null,E(u(ve),(l,o)=>(t(),n("div",{key:o},B(l),1))),128))])]))}});var pa=S(ra,[["__scopeId","data-v-7c3f5fef"]]);export{pa as default};
//# sourceMappingURL=Connect.1ce5cbd5.js.map
