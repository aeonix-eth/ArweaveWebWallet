import{l as j,d as A,e as l,o as n,y as b,x as m,a as s,R as V,u as e,r as Q,w as R,c as r,s as h,Y as p,C as Y,D as K,a9 as O,a2 as X,E as u,a7 as w,af as L,P as q,ak as Z,p as ee,a3 as te,a4 as ae}from"./vendor.eb613411.js";import{_ as z,a as se,A as C,B as ne,u as oe,L as re,b as le,T as $,c as W,d as F,g as ie,I as de,F as ce,e as D,n as S,h as ue,f as _e,i as ve,j as he,k as H}from"./index.4fe06256.js";import{I as pe}from"./download.4aa962c3.js";import{P as U}from"./ProfilePreview.9ec325ff.js";import{O as me}from"./OverlayPrompt.eb45bd9a.js";const fe={class:"frame-scroller"},ye=["src"],ge=j({props:["src"],emits:["load"],setup(_,{emit:o}){const a=A(null),t=A(null),v=A(null),g=f=>{console.log(f),t.value=f.contentRect.width/f.contentRect.height},i=()=>{v.value=a.value&&a.value.naturalWidth/a.value.naturalHeight,o("load")},c=l(()=>t.value&&v.value&&t.value<v.value),x=l(()=>t.value&&v.value&&t.value>=v.value);return(f,B)=>(n(),b(se,{observe:"resize",onResize:g,class:V(["img",{x:e(c),y:e(x)}])},{default:m(()=>[s("div",fe,[s("img",{ref_key:"imgRef",ref:a,src:_.src,onLoad:i},null,40,ye)])]),_:1},8,["class"]))}});var xe=z(ge,[["__scopeId","data-v-3baf12d9"]]);const ke=w("Load large file"),be={key:"json",class:"selector data-container box"},we={class:"raw"},Ie=j({props:["tx"],setup(_){const o=_,a=Q({handler:void 0,payload:void 0,loaded:!1,intent:!1}),t=l(()=>C.gatewayURL+o.tx.id),v=l(()=>"https://arcode.studio/#/"+o.tx.id+"?theme=dark-blue&hideToolbar=true"),g=async()=>{if(!o.tx||o.tx.data?.size==="0"||o.tx.data?.size==null)return;const i=oe(o.tx.tags);if(i["Bundle-Version"])return a.loaded=!0,a.handler={is:L(re),attrs:{query:le({bundledIn:o.tx.id}),component:L($),componentProps:{options:{space:!0}},class:["column"]},containerAttrs:{class:["data-container","column-container"]}};if(i["Content-Type"]==="application/x.arweave-manifest+json"||i["Content-Type"]==="text/html"||i["Content-Type"]==="application/pdf")return a.handler={is:"iframe",attrs:{src:t.value,class:["hover"]},containerAttrs:{class:["iframe-container"]}};if(i["Content-Type"]?.split("/")[0]==="video")return a.handler={is:"iframe",attrs:{src:t.value},containerAttrs:{class:["iframe-container"]}};if(o.tx.data.size>104857600&&!a.intent)return a.handler="intent";if(i["Content-Type"]?.split("/")[0]==="image")return a.handler={is:L(xe),attrs:{src:t.value},containerAttrs:{class:["img-container"]}};if(i["App-Name"]==="SmartWeaveContract"||i["App-Name"]==="SmartWeaveContractSource")return a.handler={is:"iframe",attrs:{src:v.value},containerAttrs:{class:["iframe-container"]}};a.handler="raw";try{if(a.payload=(await W.api.get(o.tx.id)).data,a.payload[0]==="{")try{a.payload=JSON.stringify(JSON.parse(a.payload),null,2),a.handler="json"}catch{}}catch{}};return R(()=>o.tx.id,()=>{a.handler=void 0,a.payload=void 0,a.loaded=!1,a.intent=!1,g()},{immediate:!0}),R(()=>a.intent,()=>{a.intent&&g()}),(i,c)=>e(a).handler==="intent"?(n(),r("div",{key:0,onClick:c[0]||(c[0]=x=>e(a).intent=!0),class:"selector data-container box",style:{display:"flex","justify-content":"center","padding-top":"5em"}},[h(ne,{icon:e(pe)},{default:m(()=>[ke]),_:1},8,["icon"])])):e(a).handler==="json"||e(a).handler==="raw"?(n(),r("div",be,[s("pre",we,p(e(a).payload),1)])):e(a).handler?Y((n(),r("div",O({key:2},e(a).handler.containerAttrs,{class:"selector box"}),[(n(),b(X(e(a).handler.is),O(e(a).handler.attrs,{onLoad:c[1]||(c[1]=x=>e(a).loaded=!0)}),null,16))],16)),[[K,e(a).loaded]]):u("",!0)}});var Se=z(Ie,[["__scopeId","data-v-e9171198"]]);const y=_=>(te("data-v-76f06ed3"),_=_(),ae(),_),Ae={key:0,style:{position:"relative",width:"100%","min-height":"var(--current-vh)",color:"var(--element-secondary)"}},Ce={key:0},Te={key:1},Le={class:"meta flex-column"},De={class:"box",style:{padding:"0"}},Re={key:1,class:"spacer"},$e={key:2,class:"divider"},je=y(()=>s("h3",null,"Transaction",-1)),ze={class:"flex-column"},Be={key:0},Pe=["href"],Ne={key:1},Oe=["href"],qe={class:"secondary-text"},Fe=w("ID:\xA0"),He={key:3},Ue=y(()=>s("h3",null,"Bundle",-1)),Ve={class:"flex-column"},We={class:"secondary-text"},Ee=w("ID:\xA0"),Je={key:4},Ge=y(()=>s("h3",null,"Pending",-1)),Me={key:5},Qe=y(()=>s("h3",null,"Block",-1)),Ye={key:0,class:"secondary-text"},Ke=y(()=>s("div",{class:"spacer"},null,-1)),Xe={class:"secondary-text"},Ze=w("ID:\xA0"),et=y(()=>s("h3",null,"Data",-1)),tt=w(" Fee: "),at={key:6},st=y(()=>s("h3",null,"Tags",-1)),nt=[st],ot={key:0,style:{background:"var(--background2)","border-radius":"var(--border-radius)"}},rt=j({props:{txId:null},setup(_){const o=_,a=F(q(o,"txId")),t=a.state,v=a.queryStatus,g=l(()=>t.value?.bundledIn?.id),c=F(g).state,x=l(()=>t.value?.bundledIn?.id||o.txId),f=ie({params:x,query:async d=>(await W.transactions.getStatus(d)).status,completed:d=>!x.value||t.value?.block||d&&d!==404,seconds:30}).state,B=l(()=>t.value?.owner&&H(t.value?.owner.address)),E=l(()=>t.value?.recipient&&H(t.value?.recipient)),P=l(()=>t.value?.data?.size!=="0"),J=l(()=>!t.value?.block),G=l(()=>{if(!t.value?.block)return"";const d=new Date(t.value?.block.timestamp*1e3);return d.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})+" "+d.toLocaleTimeString()}),N=l(()=>S.value?.height&&t.value?.block?.height&&S.value?.height-t.value?.block?.height+1),I=l(()=>{if(!t.value?.tags)return;const d=[];for(const k of t.value?.tags)d.push({items:[{name:"",value:k.name,attrs:{disabled:!0}},{name:"",value:k.value,attrs:{disabled:!0}}]});return d}),M=q(de.breakpoints,"verticalContent"),T=A(0);return R(t,(d,k)=>{if(!!k){if(k?.bundledIn?.id===o.txId)return T.value=-1;T.value=1}}),(d,k)=>(n(),b(he,{vector:T.value,axis:"x"},{default:m(()=>[e(t)?(n(),b(ce,{key:_.txId},Z({left:m(()=>[s("div",Le,[s("div",De,[s("div",{class:"box-padding flex-column",style:ee([e(I).length&&"padding-bottom: 0"])},[h($,{tx:e(t),options:{half:!0}},null,8,["tx"]),e(t).recipient?(n(),b(U,{key:0,wallet:e(E)},null,8,["wallet"])):u("",!0),e(t).recipient?(n(),r("div",Re)):u("",!0),e(t).recipient?(n(),r("div",$e)):u("",!0),h(U,{wallet:e(B)},null,8,["wallet"]),s("div",null,[je,s("div",ze,[s("div",null,[e(P)?(n(),r("div",Be,[s("a",{href:e(C).gatewayURL+e(t).id,target:"_blank"},p(e(C).gatewayURLObject?.hostname),9,Pe)])):u("",!0),e(t).data?.type==="application/x.arweave-manifest+json"?(n(),r("div",Ne,[s("a",{href:e(C).gatewayURL+"tx/"+e(t).id+"/data.json",target:"_blank"},"Manifest",8,Oe)])):u("",!0)]),s("div",qe,[h(D,{address:e(t).id},{default:m(()=>[Fe]),_:1},8,["address"])])])]),e(t).bundledIn?.id?(n(),r("div",He,[Ue,s("div",Ve,[e(c)?(n(),b($,{key:0,tx:e(c),options:{space:!0}},null,8,["tx"])):u("",!0),s("div",We,[h(D,{address:e(t).bundledIn?.id},{default:m(()=>[Ee]),_:1},8,["address"])])])])):u("",!0),e(J)?(n(),r("div",Je,[Ge,s("div",null,"Status: "+p(e(f)?e(f):"..."),1)])):(n(),r("div",Me,[Qe,s("div",null,[w(" Height: "+p(e(t).block.height)+" ",1),e(S)?.height?(n(),r("span",Ye,"/ "+p(e(S).height)+" ("+p(e(N))+" confirmation"+p(e(N)>1?"s":"")+")",1)):u("",!0)]),s("div",null,p(e(G)),1),Ke,s("div",Xe,[h(D,{address:e(t).block.id},{default:m(()=>[Ze]),_:1},8,["address"])])])),s("div",null,[et,s("div",null,"Size: "+p(e(ue)(e(t).data.size)),1),s("div",null,[tt,h(_e,{ar:e(t).fee.ar},null,8,["ar"])])]),e(I).length?(n(),r("div",at,nt)):u("",!0)],4),e(I).length?(n(),r("div",ot,[h(ve,{schema:e(I),disabled:""},null,8,["schema"])])):u("",!0)])])]),_:2},[e(t)&&e(P)?{name:"right",fn:m(()=>[h(Se,{tx:e(t),class:V({inline:!e(M)})},null,8,["tx","class"])])}:void 0]),1024)):(n(),r("div",Ae,[h(me,{options:{icon:"loader"},class:"box"},{default:m(()=>[e(v).error?(n(),r("h2",Ce,p(e(v).error),1)):(n(),r("h2",Te,"Loading"))]),_:1})]))]),_:1},8,["vector"]))}});var _t=z(rt,[["__scopeId","data-v-76f06ed3"]]);export{_t as default};
//# sourceMappingURL=Tx.490aa666.js.map
