var ve=Object.defineProperty,_e=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var X=(e,a,n)=>a in e?ve(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,L=(e,a)=>{for(var n in a||(a={}))fe.call(a,n)&&X(e,n,a[n]);if(G)for(var n of G(a))ye.call(a,n)&&X(e,n,a[n]);return e},Y=(e,a)=>_e(e,me(a));import{C as Q}from"./Carousel.fca248d1.js";import{Y as z,e as h,o as t,c as s,u as o,R as J,x as m,G as k,a3 as ge,a4 as pe,a as f,y as I,F as w,p as E,i as xe,z as $,X as T,d as B,w as M,D as he,E as be,T as ke,a7 as O,a2 as Ie,t as we,ac as D,q as Z}from"./vendor.7383ae2c.js";import{_ as j,j as R,i as ee,k as A,l as N,I as te,h as $e,m as Ce,T as Ve,o as Se,p as ae,q as Pe,r as W,B as Te,s as se,t as ne,v as Be,w as je,x as le,y as oe,z as ie}from"./index.b962c0e2.js";import{I as ce}from"./y.f5fb70be.js";import{P as Ae}from"./ProfilePreview.9ac6d6ec.js";import{O as ue}from"./OverlayPrompt.ee5beede.js";const de=e=>(ge("data-v-7b045f16"),e=e(),pe(),e),ze={class:"wallet-selector"},Ee=de(()=>f("div",{class:"exit-background"},null,-1)),Me=de(()=>f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[f("path",{d:"M0 0h24v24H0V0z",fill:"none"}),f("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})],-1)),Oe=[Ee,Me],Re=z({props:{modelValue:String,default:String,exit:Boolean,active:Boolean},emits:["update:modelValue","selectWallet","exit"],setup(e,{emit:a}){const n=e,i=h({get(){return n.modelValue||n.default},set(r){a("update:modelValue",r)}}),l=h(()=>{var r;return(r=R(i.value))==null?void 0:r.key});return(r,y)=>(t(),s("div",ze,[o(i)?(t(),s("button",{key:0,type:"button",onClick:y[0]||(y[0]=u=>r.$emit("selectWallet")),class:J(["tab",{active:e.active}])},[m(ee,{address:o(l)},null,8,["address"])],2)):k("",!0),e.exit?(t(),s("button",{key:1,class:"exit",type:"button",onClick:y[1]||(y[1]=u=>r.$emit("exit"))},Oe)):k("",!0)]))}});var Ne=j(Re,[["__scopeId","data-v-7b045f16"]]);const We={class:"wallet-tabs"},Le=["onClick"],De=z({props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:a}){const n=e,i=h({get(){return n.modelValue},set(r){a("update:modelValue",r)}}),l=h(()=>A.value.findIndex(r=>r.id===i.value));return(r,y)=>(t(),s("div",We,[m(Q,{modelValue:o(l),"onUpdate:modelValue":y[0]||(y[0]=u=>xe(l)?l.value=u:null),options:{align:"center",overscroll:!0,immediate:!0}},{default:I(()=>[(t(!0),s(w,null,E(o(A),u=>(t(),s("button",{key:u.id,type:"button",onClick:v=>i.value=u.id,class:J(["tab",{active:u.id==o(i)}])},[m(ee,{address:u.key},null,8,["address"])],10,Le))),128))]),_:1},8,["modelValue"])]))}});var Ue=j(De,[["__scopeId","data-v-35e1b97b"]]);const qe={class:"icon-background"},Fe={props:["icon","img"],setup(e){return(a,n)=>(t(),s("div",qe,[e.img?(t(),$(N,{key:0,class:"page-logo",icon:e.img},null,8,["icon"])):(t(),$(N,{key:1,class:"page-logo placeholder",icon:e.icon},null,8,["icon"]))]))}};var He=j(Fe,[["__scopeId","data-v-7bef1ba0"]]);const Ke={class:"tx-card-extension"},Ge={key:0,class:"flex-row",style:{"justify-content":"space-between"}},Xe={key:0},Ye={key:1},Qe={key:1,class:"tags secondary-text no-scrollbar"},Je={props:["tx"],setup(e){return h(()=>te.breakpoints.verticalLayout),(a,n)=>(t(),s("div",Ke,[e.tx.tags.length||e.tx.data_size?(t(),s("div",Ge,[e.tx.tags.length?(t(),s("div",Xe,"Tags:")):k("",!0),e.tx.data_size?(t(),s("div",Ye,"Data: "+T(o($e)(e.tx.data_size)),1)):k("",!0)])):k("",!0),e.tx.tags.length?(t(),s("ul",Qe,[(t(!0),s(w,null,E(e.tx.tags,i=>(t(),s("li",null,T(i.name+" | "+i.value),1))),256))])):k("",!0)]))}};var Ze=j(Je,[["__scopeId","data-v-5ee7fb30"]]);const et={class:"actions-list flex-row"},tt=["onClick"],at=z({props:{actions:null},setup(e){return(a,n)=>(t(),s("div",et,[(t(!0),s(w,null,E(e.actions,i=>(t(),s("button",{key:i.name,onClick:i.run,type:"button",class:"action flex-row"},[m(N,{icon:i.icon},null,8,["icon"]),f("div",null,T(i.name),1)],8,tt))),128))]))}});var re=j(at,[["__scopeId","data-v-7477f216"]]);const st={class:"permission-card"},nt=O(" Share the public key "),lt=O(" Share the arweave config "),ot=O(" Sign data "),it=O(" Decrypt data "),ct=z({props:{messageEntry:null},setup(e){const a=e,n=B(null),i=h(()=>{var v,b,p,C;if(((v=n.value)==null?void 0:v.method)!=="signTransaction")return;const y=(p=(b=n.value)==null?void 0:b.params)==null?void 0:p[0],u=(C=y.tags)==null?void 0:C.map(({name:P,value:c})=>({name:window.atob(P),value:window.atob(c)}));return Y(L({},y),{tags:u})});M(()=>a.messageEntry,async()=>{n.value=await Ce(a.messageEntry)},{immediate:!0});const l=[{name:"Accept",icon:ce,run:()=>a.messageEntry.status="accepted"},{name:"Reject",icon:Se,run:()=>a.messageEntry.status="rejected"}],r=[{name:"Pending",icon:ae,run:()=>{}}];return(y,u)=>{var v,b,p,C,P;return he((t(),s("div",st,[((v=n.value)==null?void 0:v.method)==="signTransaction"?(t(),s(w,{key:0},[m(Ve,{tx:o(i)},null,8,["tx"]),m(Ze,{tx:o(i)},null,8,["tx"])],64)):((b=n.value)==null?void 0:b.method)==="getPublicKey"?(t(),s(w,{key:1},[nt],64)):((p=n.value)==null?void 0:p.method)==="getArweaveConfig"?(t(),s(w,{key:2},[lt],64)):((C=n.value)==null?void 0:C.method)==="sign"?(t(),s(w,{key:3},[ot],64)):((P=n.value)==null?void 0:P.method)==="decrypt"?(t(),s(w,{key:4},[it],64)):k("",!0),m(ke,{name:"fade",mode:"out-in"},{default:I(()=>[e.messageEntry.status?(t(),$(re,{key:1,actions:r})):(t(),$(re,{key:0,actions:l}))]),_:1})],512)),[[be,n.value]])}}});var ut=j(ct,[["__scopeId","data-v-0e1a76fc"]]);const dt={class:"flex-column no-scrollbar"},rt=["disabled","onClick"],vt=O(" Apply "),_t=z({props:{state:null,walletId:null},setup(e){const a=e,n={connect:"Connect automatically",signTransaction:"Sign transaction",getPublicKey:"Share public key",sign:"Sign arbitrary data",decrypt:"Decrypt data",getArweaveConfig:"Share arweave gateway configuration"},i=c=>Object.getOwnPropertyNames(Object.getPrototypeOf((c==null?void 0:c.messageRunner)||{})).filter(_=>{var d;return!((d=c==null?void 0:c.messageRunner.getMethodMetadata(_))==null?void 0:d.unavailable)&&_!=="constructor"&&_!=="getMethodMetadata"}).map(_=>{var d;return{name:_,displayName:n[_]||_,disabled:(d=c==null?void 0:c.messageRunner.getMethodMetadata(_))==null?void 0:d.userIntent}}),l=h(()=>R(a.walletId)),r=h(()=>[...i(l.value)]),y=c=>v.value&&(v.value[c]=!v.value[c]),u=Pe("connectionSettings:",a.state.origin,{}),v=B(void 0),b=B(void 0);M(l,c=>{var _,d,V;!(c==null?void 0:c.uuid)||((_=u.state).value||(_.value={}),b.value=(d=u.state.value)[V=c.uuid]||(d[V]={}),v.value=L({},b.value))},{immediate:!0});const p=([c,_])=>{var V;const d=((V=b.value)==null?void 0:V[c])||!1;if(_!==d)return!0},C=h(()=>v.value?Object.entries(v.value).find(p):!1),P=()=>{if(!v.value||!b.value)return!1;Object.entries(v.value).filter(p).forEach(([c,_])=>b.value&&(b.value[c]=_))};return(c,_)=>(t(),s("div",dt,[(t(!0),s(w,null,E(o(r),d=>(t(),s("button",{key:d.name,disabled:d.disabled,class:"row method",onClick:V=>y(d.name)},[f("div",null,T(d.displayName),1),m(W,{vector:v.value[d.name]?1:-1,axis:"y"},{default:I(()=>[(t(),s("div",{key:v.value[d.name]},T(v.value[d.name]?"Allow":"Ask"),1))]),_:2},1032,["vector"])],8,rt))),128)),m(W,null,{default:I(()=>[o(C)?(t(),$(Te,{key:0,onClick:_[0]||(_[0]=d=>P())},{default:I(()=>[vt]),_:1})):k("",!0)]),_:1})]))}});var mt=j(_t,[["__scopeId","data-v-81b70f2e"]]);const ft={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},yt=f("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),gt=f("path",{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},null,-1),pt=[yt,gt];function xt(e,a){return t(),s("svg",ft,pt)}var ht={render:xt};const bt={class:"connection-card flex-column no-scrollbar"},kt={class:"flex-row"},It=["disabled"],wt={style:{"min-width":"0"}},$t={class:"ellipsis"},Ct={class:"secondary-text ellipsis"},Vt={class:"flex-column",style:{flex:"1 1 0"}},St={class:"container"},Pt={class:"page-container",key:"0"},Tt={key:0},Bt={class:"status fade-list-item",key:"1"},jt={key:1},At=z({props:{state:null},setup(e){var q;const a=e,n=Ie(),i=(q=A.value[0])==null?void 0:q.id;h(()=>A.value.map(g=>g.key));const l=B(a.state.walletId||i),r=h(()=>R(l.value));h(()=>R(i));const y=[{name:"Requests",color:"var(--orange)"},{name:"Permissions",color:"var(--green)"}],u=B(l.value?y[0].name:null);M(()=>a.state.walletId,g=>{!g||(p.value=!1,l.value=g,u.value=y[0].name)});const v=()=>a.state.walletId=!1,b=()=>{p.value=!1,a.state.walletId=l.value+""},p=B(!a.state.walletId),C=h(()=>p.value&&A.value.length>1),P=B(0),c=()=>{var g,x;if(!p.value){p.value=!0;return}l.value!==(a.state.walletId||((g=A.value[0])==null?void 0:g.id))&&P.value++,l.value=a.state.walletId||((x=A.value[0])==null?void 0:x.id),p.value=!1},_=h(()=>({actions:[{name:a.state.walletId?"Switch":"Connect",icon:ce,run:b}],inline:!0})),d=h(()=>{var g;return l.value!==a.state.walletId?[]:(g=a.state.messageQueue)==null?void 0:g.filter(x=>!x.fulfilled)});we(te.breakpoints,"verticalLayout");const V=B(null),U=(g,x)=>V.value=g-x;return M(()=>y.findIndex(g=>g.name===u.value),U),M(()=>A.value.findIndex(g=>g.id===l.value),U),(g,x)=>{var F,H;return t(),s("div",bt,[f("div",kt,[f("button",{type:"button",class:"info flex-row",onClick:x[0]||(x[0]=(...S)=>o(se)&&o(se)(...S)),disabled:!o(ne)(e.state.origin,e.state.session)},[m(He,{img:(F=e.state.appInfo)==null?void 0:F.logo,icon:o(ae)},null,8,["img","icon"]),f("div",wt,[f("div",$t,T(((H=e.state.appInfo)==null?void 0:H.name)||"Connector"),1),f("div",Ct,T(e.state.origin),1)]),o(ne)(e.state.origin,e.state.session)?(t(),$(N,{key:0,icon:o(ht)},null,8,["icon"])):k("",!0)],8,It),m(Ne,{modelValue:e.state.walletId,"onUpdate:modelValue":x[1]||(x[1]=S=>e.state.walletId=S),default:o(i),exit:!0,active:!o(C),onSelectWallet:c,onExit:v},null,8,["modelValue","default","active"])]),f("div",Vt,[m(Be,{tabs:y,modelValue:u.value,"onUpdate:modelValue":x[2]||(x[2]=S=>u.value=S),disabled:!l.value},null,8,["modelValue","disabled"]),f("div",St,[m(W,{vector:V.value,axis:"x"},{default:I(()=>[o(A).length?(t(),s("div",{class:"container-scroll",key:P.value},[m(D,{name:"fade-list"},{default:I(()=>[o(C)?(t(),$(Ue,{modelValue:l.value,"onUpdate:modelValue":x[3]||(x[3]=S=>l.value=S),class:"fade-list-item",key:"-1"},null,8,["modelValue"])):k("",!0),f("div",Pt,[m(W,{vector:V.value,axis:"x"},{default:I(()=>[(t(),s("div",{key:(l.value||"")+u.value,class:"content"},[u.value==="Requests"?(t(),s("div",Tt,[m(D,{name:"fade-list"},{default:I(()=>{var S;return[f("div",{class:"fade-list-item",key:"0",style:Z({padding:0,border:0,outline:"0.5px solid var(--border)"})},null,4),((S=o(d))==null?void 0:S.length)===0&&e.state.walletId&&e.state.walletId===l.value?(t(),s("div",Bt,"Connected")):k("",!0),l.value!==e.state.walletId?(t(),$(ue,{options:o(_),class:"fade-list-item",key:"2"},{default:I(()=>[o(r)?(t(),$(Ae,{key:0,wallet:o(r)},null,8,["wallet"])):k("",!0)]),_:1},8,["options"])):k("",!0),(t(!0),s(w,null,E(o(d),K=>(t(),$(ut,{key:K.uuid,messageEntry:K,style:{padding:"var(--spacing)"},class:"flex-column fade-list-item"},null,8,["messageEntry"]))),128))]}),_:1})])):u.value==="Permissions"?(t(),s("div",jt,[m(D,{name:"fade-list"},{default:I(()=>[f("div",{class:"fade-list-item",key:"0",style:Z({padding:0,border:0,outline:"0.5px solid var(--border)"})},null,4),m(mt,{state:e.state,walletId:l.value,class:"fade-list-item",key:"2"},null,8,["state","walletId"])]),_:1})])):k("",!0)]))]),_:1},8,["vector"])])]),_:1})])):(t(),$(ue,{key:0,options:{action:{icon:o(je),name:"Add wallet",run:()=>o(n).push("/add")}}},null,8,["options"]))]),_:1},8,["vector"])])])])}}});var zt=j(At,[["__scopeId","data-v-2260253c"]]);const Et={class:"connect flex-column"},Mt={class:"bottom-info secondary-text",style:{opacity:"0.0","pointer-events":"none"}},Ot=z({setup(e){const a=B(le.value.findIndex(n=>n.origin===oe.origin&&n.session===oe.session));return(n,i)=>(t(),s("div",Et,[m(Q,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=l=>a.value=l),options:{align:"start",overscroll:!0},class:"connectors"},{default:I(()=>[(t(!0),s(w,null,E(o(le),l=>(t(),s("div",{key:l.session,class:"connection-card-container fade-list-item"},[m(zt,{state:l,class:"box"},null,8,["state"])]))),128))]),_:1},8,["modelValue"]),f("div",Mt,[f("div",null,"All Channels "+T(Object.keys(o(ie)).length),1),(t(!0),s(w,null,E(o(ie),(l,r)=>(t(),s("div",{key:r},T(l),1))),128))])]))}});var Ft=j(Ot,[["__scopeId","data-v-7c3f5fef"]]);export{Ft as default};
//# sourceMappingURL=Connect.c85fb934.js.map
