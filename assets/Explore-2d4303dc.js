import{d as q,o as _,h as g,b as s,i,a5 as ve,a6 as _e,e as A,c,a7 as he,E as ge,r as h,a as z,w as k,u as t,a8 as Z,t as y,a9 as pe,l as $,k as X,_ as ee,I as P,$ as te,aa as O,ab as J,M as b,K as me,ac as Q,ad as ae,g as C,ae as K,af as Y,ag as fe,z as j,T as se,ah as ye,Y as le,Z as oe,ai as xe,C as m,aj as be,ak as ke,al as we,H as $e,a2 as Ie,a1 as Be,B as Ce,j as D,am as qe,A as G,n as Te,an as Se,W as Qe,ao as Ae,ap as M}from"./index-18b98b8a.js";const Re={class:"profile-card flex-row row",style:{"align-items":"center"}},Ne={class:"address-icon-margin"},Le=q({__name:"ProfileCard",props:{wallet:null},setup(l){return(v,r)=>(_(),g("div",Re,[s("div",Ne,[i(ve,{address:l.wallet.key},null,8,["address"])]),i(_e,{wallet:l.wallet},null,8,["wallet"])]))}});const ze=A(Le,[["__scopeId","data-v-ba12ef0f"]]),Pe={class:"flex-row",style:{"align-items":"center","justify-content":"space-between","flex-wrap":"wrap"}},He={class:"flex-row",style:{"align-items":"center"}},Ve={key:0,style:{"text-align":"end",flex:"1 1 auto"}},Ee=q({__name:"BlockCardHeader",props:{block:null,active:{type:Boolean}},setup(l){const v=l,r=c(()=>v.block?.node?v.block.node:v.block),u=he({name:"single block header",awaitEffect:()=>e.value,query:async()=>r.value&&ge.blocks.get(r.value.id),processResult:a=>typeof a=="string"?JSON.parse(a):a,seconds:10,completed:a=>a}).state,e=h(!1);return(a,o)=>(_(),z(ee,{onIntersecting:o[0]||(o[0]=I=>e.value=!0)},{default:k(()=>[s("div",Pe,[s("h2",He,[i(Z,{icon:t(P).cube,class:"cube",glow:l.active},null,8,["icon","glow"]),s("span",null,"Block "+y(t(r).height),1)]),i(X,null,{default:k(()=>[t(u)?(_(),g("div",Ve,[s("div",null,y(t(u).txs?.length)+" Transactions | "+y(t(te)(t(u).block_size)),1),s("div",null,[i(pe,{timestamp:t(u).timestamp*1e3},null,8,["timestamp"])])])):$("",!0)]),_:1})])]),_:1}))}});const ne=A(Ee,[["__scopeId","data-v-05e41f21"]]),H=l=>(le("data-v-bb8d8341"),l=l(),oe(),l),Ue={class:"global-search"},Me={class:"input-container flex-row"},je={key:0,class:"results input-box"},De={class:"query-list input-box flex-column"},Ge={key:0,class:"flex-column"},We=H(()=>s("div",{class:"secondary-text"},"User",-1)),Fe=H(()=>s("div",null,null,-1)),Oe={key:1,class:"flex-column"},Je=H(()=>s("div",{class:"secondary-text"},"Block",-1)),Ke={class:"flex-column"},Ye=H(()=>s("div",{class:"secondary-text"},"Transactions",-1)),Ze=q({__name:"GlobalSearch",emits:["height"],setup(l,{emit:v}){const r=ye(),u=xe(),e=O(typeof r.query.q=="string"?r.query.q:r.query.q?.[0]??"",1e3),a=O("",1e3),o=h(!1),I=c(()=>J.metadata.isAddress(e.value)),T=c(()=>J.metadata.isBlock(e.value)),S=c(()=>{if(!b.value)return;const d=(Number.isInteger(parseFloat(e.value))||void 0)&&parseInt(e.value);return d!=null&&d>=0&&d<=b.value.height}),V=c(()=>({run:()=>{},icon:!a.value.length&&P.search,disabled:!0})),n=c(()=>I.value&&W?.state?.value?.length&&me(e.value)),f=()=>[m(c(()=>({owners:[e.value]})),"global search user"),m(c(()=>({recipients:[e.value]})),"global search user")],x=()=>[m(c(()=>({ids:[e.value]})),"global search id")],ce=()=>a.value?[m(c(()=>({tags:[{name:e.value,values:[a.value]}]})))]:[m(c(()=>({tags:[{name:"App-Name",values:["arweave-id"]},{name:"Name",values:[e.value]}]}))),m(c(()=>({tags:[{name:"App-Name",values:[e.value]}]}))),m(c(()=>e.value.toLowerCase()!==e.value?{tags:[{name:"App-Name",values:[e.value.toLowerCase()]}]}:void 0)),m(c(()=>({tags:[{name:"app",values:[e.value]}]}))),m(c(()=>e.value.toLowerCase()!==e.value?{tags:[{name:"app",values:[e.value.toLowerCase()]}]}:void 0))],ue=()=>B.value==="id"?{ids:[e.value]}:B.value==="height"?{height:{min:+e.value,max:+e.value}}:void 0,R=h([]),W=Q(R),N=h([]),ie=Q(N),L=h([]),re=Q(L),B=h(void 0),E=ae(c(ue)),U=c(()=>E.state.value?.[0]);C(()=>[e.value,a.value],(d,p)=>{o.value=!1,d[0]!=null&&r.query.q!==d[0]&&(d[0]?u.replace({query:{q:d[0]}}):u.replace({query:{}})),!d[0]&&p?.[0]&&(a.value=""),I.value?(R.value.length===0&&(R.value=f()),N.value.length===0&&(N.value=x()),L.value=[]):(R.value=[],N.value=[],(L.value.length===0||!!d[1]!=!!p?.[1])&&(L.value=ce()))},{immediate:!0}),C(()=>[S.value,T.value],(d,p)=>{d.some(w=>w)&&!U.value&&E.fetchQuery.query(),!d.some(w=>w)&&B.value&&(B.value=void 0,v("height",void 0)),S.value&&!p?.[0]&&(B.value="height"),T.value&&!p?.[1]&&(B.value="id")});const de=Q([ie,W,re]),F=h(0);return C(e,d=>F.value=d.length>0?1:-1,{immediate:!0,flush:"post"}),(d,p)=>(_(),g("div",Ue,[s("div",Me,[i(Y,{modelValue:t(e),"onUpdate:modelValue":p[0]||(p[0]=w=>K(e)?e.value=w:null),actions:[t(V)],placeholder:"Search - address, transaction id, username, app, tag"},null,8,["modelValue","actions"]),t(e)&&!t(I)?(_(),z(Y,{key:0,modelValue:t(a),"onUpdate:modelValue":p[1]||(p[1]=w=>K(a)?a.value=w:null),icon:t(P).label,placeholder:"Tag value"},null,8,["modelValue","icon"])):$("",!0)]),i(X,{axis:"y",vector:F.value},{default:k(()=>[t(e).length&&!o.value?(_(),g("div",je,[s("div",De,[t(n)?(_(),g("div",Ge,[We,i(ze,{wallet:t(n),compact:"true"},null,8,["wallet"]),Fe])):$("",!0),t(T)||t(S)?(_(),g("div",Oe,[Je,i(fe,{disabled:!t(U),run:()=>{v("height",t(U)?.node.height),o.value=!0}},{default:k(()=>[i(j,{query:t(E),itemName:"block",component:ne},null,8,["query"])]),_:1},8,["disabled","run"])])):$("",!0),s("div",Ke,[Ye,i(j,{query:t(de),component:se,"component-props":{options:{currentAddress:t(n)?.key}}},null,8,["query","component-props"])])])])):$("",!0)]),_:1},8,["vector"])]))}});const Xe=A(Ze,[["__scopeId","data-v-bb8d8341"]]),et={class:"container-scroll"},tt=q({__name:"BlockCard",props:{block:null,active:{type:Boolean}},setup(l){const v=l,r=h(!1),u=Q([m({block:{min:v.block.node.height,max:v.block.node.height}})],{});return(e,a)=>(_(),z(we,{class:"block-card"},{header:k(()=>[i(ne,be(ke(v)),null,16)]),default:k(()=>[s("div",et,[i(ee,{onIntersecting:a[0]||(a[0]=o=>r.value=!0)}),r.value?(_(),z(j,{key:0,query:t(u),component:se,componentProps:{options:{space:!0}}},null,8,["query"])):$("",!0)])]),_:1}))}});const at=A(tt,[["__scopeId","data-v-17ce9ac9"]]),st={class:"block-carousel"},lt={key:0,class:"block fade-list-item box flex-column",style:{"align-items":"center","justify-content":"center"}},ot=q({__name:"BlockCarousel",props:{height:null,onHeight:null,goTo:null},emits:["height"],setup(l,{emit:v}){const r=l,u=h(void 0),e=h(void 0),a=ae({},$e(r,"goTo")),o=c(()=>a.state.value&&[...a.state.value].reverse());C(()=>a.status.index,n=>{if(n==null)return u.value!=null&&(u.value=void 0);o.value?.length&&(u.value=o.value.length-1-n)},{immediate:!0,flush:"post"}),C(e,n=>n!=null&&o.value?.[n]&&v("height",o.value?.[n].node.height)),C(o,(n,f)=>{n?.length&&r.goTo==null&&(!f?.length&&n.length&&(u.value=n.length-1),f&&f.length!==n.length&&e.value===f.length-1&&setTimeout(()=>u.value=n.length-1,1e3))});const I=c(()=>b.value?.network?.includes("arlocal")),T=async()=>{await fetch(G.gatewayURL+"mine"),await a.updateQuery.getState(!0),setTimeout(()=>u.value=o.value.length-1,1e3)},S=n=>n.isIntersecting&&a?.fetchQuery.query(),V=n=>a.refreshSwitch.value=n.isIntersecting;return(n,f)=>(_(),g("div",st,[i(qe,{index:u.value,onIndex:f[0]||(f[0]=x=>e.value=x),options:{align:"center",overscroll:!0,immediate:!0},onStart:S,onEnd:V,class:"block-carousel"},{default:k(()=>[(_(!0),g(Ie,null,Be(t(o),x=>(_(),g("div",{key:x.node.id,class:Te(["block fade-list-item",{active:l.height&&l.height==x.node.height}])},[i(at,{block:x,active:l.height&&l.height==x.node.height,class:"box"},null,8,["block","active"])],2))),128)),t(I)&&t(o)?.length?(_(),g("div",lt,[i(Z,{icon:t(P).cube,style:{"font-size":"4em",opacity:"0.8"}},null,8,["icon"]),i(Ce,{onClick:T},{default:k(()=>[D("Mine new block")]),_:1})])):$("",!0)]),_:1},8,["index"])]))}});const nt=l=>(le("data-v-8bf68310"),l=l(),oe(),l),ct={class:"settings"},ut={class:"container"},it={class:"column"},rt={class:"group"},dt={style:{"text-transform":"capitalize"}},vt={class:"flex-column"},_t={class:"group"},ht=nt(()=>s("h2",null,"Weave State",-1)),gt={class:"flex-column"},pt=q({__name:"Explore",setup(l){const v=c(()=>G.gatewayURL&&new URL(G.gatewayURL).hostname),r=c(()=>{const e=b.value?.blocks,a=b.value?.height;if(e==null||a==null)return"";const o=100*Math.min(e/Math.max(a-1,1),1);return o===100?"":` (${Se(o,2)}% known)`}),u=h(void 0);return(e,a)=>(_(),g("div",ct,[s("div",ut,[s("div",it,[i(Xe,{onHeight:a[0]||(a[0]=o=>u.value=o),style:{"z-index":"2"}}),s("div",rt,[s("h2",null,[s("span",dt,y(t(v)),1),D(" Gateway State")]),s("div",vt,[s("div",null,"Peers: "+y(t(b)?.peers??"..."),1),s("div",null,"Pending Transactions: "+y(t(Ae)?.length??"..."),1),s("div",null,"Network Height: "+y(t(b)?.height??"...")+y(t(r)),1)])]),s("div",_t,[ht,s("div",gt,[s("div",null,"Weave Size: "+y(t(M)?.weave_size&&t(te)(t(M)?.weave_size)||"..."),1),s("div",null,[D("Endowment Pool: "),i(Qe,{winston:t(M)?.reward_pool},null,8,["winston"])])])])])]),i(ot,{height:t(b)?.height,goTo:u.value},null,8,["height","goTo"])]))}});const ft=A(pt,[["__scopeId","data-v-8bf68310"]]);export{ft as default};
//# sourceMappingURL=Explore-2d4303dc.js.map
