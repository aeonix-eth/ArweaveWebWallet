var ye=Object.defineProperty,he=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var Z=(e,a,s)=>a in e?ye(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,ee=(e,a)=>{for(var s in a||(a={}))ke.call(a,s)&&Z(e,s,a[s]);if(J)for(var s of J(a))we.call(a,s)&&Z(e,s,a[s]);return e},te=(e,a)=>he(e,xe(a));import{W as B,X as $e,e as x,d as S,a8 as be,ak as Ie,w as E,a9 as Ve,o as t,c as n,q as f,s as V,D as k,$ as ae,aa as j,n as D,u as d,P as N,a1 as F,a2 as H,a as r,F as $,k as A,i as Ce,x as T,V as C,z as Se,C as Te,T as ze,a5 as P,a0 as Me,t as Be}from"./vendor.864071fb.js";import{_ as b,j as se,k as O,d as ne,l as z,m as W,o as Ae,I as oe,h as Ee,p as Le,T as Pe,q as le,r as ie,C as We,s as U,t as ce,v as de,w as je,x as Ne,y as ue,z as re,D as ve}from"./index.a531c49a.js";import{I as _e}from"./y.dc90e8e0.js";const Re={class:"margin fade-list-item",key:"margin1"},De={class:"margin fade-list-item",key:"margin2"},Fe=B({props:{modelValue:null,options:null},emits:["update:modelValue"],setup(e,{emit:a}){const s=e,c=$e("transitionState",null),o=x({get(){return s.modelValue},set(l){a("update:modelValue",l)}}),i=S(null),m=l=>{if(!(!l||!i.value))return s.options.align==="center"?l.offsetLeft+l.offsetWidth/2-i.value.offsetWidth/2:s.options.align==="end"?l.offsetLeft+l.offsetWidth-i.value.offsetWidth:l.offsetLeft},y=x(()=>{var l;return _.value,((l=i.value)==null?void 0:l.children)?Array(...i.value.children).filter(w=>!w.classList.contains("margin")):[]}),h=x(()=>{var l;return{"--position":((l=s.options)==null?void 0:l.align)||"start"}}),u=async(l,w)=>{var M;!w&&s.options.awaitTransition&&await se(()=>!c.running),l=Math.max(l||0,0),(M=i.value)==null||M.scroll({left:m(y.value[l]),behavior:w?"instant":"smooth"})};let v;const _=S(0);return be(async()=>{v=new MutationObserver(async()=>{_.value++}),v.observe(i.value,{subtree:!1,childList:!0}),await Ie(),await se(()=>y.value.length),setTimeout(()=>{const l=!s.options.immediate&&o.value&&o.value>0||!1;u(l?0:o.value,!0),E(o,w=>u(w),{immediate:l})})}),Ve(()=>v&&v.disconnect()),(l,w)=>(t(),n("div",{ref_key:"root",ref:i,class:"carousel flex-row no-scrollbar",style:D(d(h))},[f(j,{name:"fade-list"},{default:V(()=>{var M,L;return[((M=e.options)==null?void 0:M.overscroll)?(t(),n("div",Re)):k("",!0),ae(l.$slots,"default",{},void 0,!0),((L=e.options)==null?void 0:L.overscroll)?(t(),n("div",De)):k("",!0)]}),_:3})],4))}});var me=b(Fe,[["__scopeId","data-v-5e316723"]]);const fe=e=>(F("data-v-7b045f16"),e=e(),H(),e),He={class:"wallet-selector"},Oe=fe(()=>r("div",{class:"exit-background"},null,-1)),Ue=fe(()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[r("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})],-1)),qe=[Oe,Ue],Ke=B({props:{modelValue:String,default:String,exit:Boolean,active:Boolean},emits:["update:modelValue","selectWallet","exit"],setup(e,{emit:a}){const s=e,c=x({get(){return s.modelValue||s.default},set(i){a("update:modelValue",i)}}),o=x(()=>{var i;return(i=O(c.value))==null?void 0:i.key});return(i,m)=>(t(),n("div",He,[d(c)?(t(),n("button",{key:0,type:"button",onClick:m[0]||(m[0]=y=>i.$emit("selectWallet")),class:N(["tab",{active:e.active}])},[f(ne,{address:d(o)},null,8,["address"])],2)):k("",!0),e.exit?(t(),n("button",{key:1,class:"exit",type:"button",onClick:m[1]||(m[1]=y=>i.$emit("exit"))},qe)):k("",!0)]))}});var Xe=b(Ke,[["__scopeId","data-v-7b045f16"]]);const Ge={class:"wallet-tabs"},Qe=["onClick"],Ye=B({props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:a}){const s=e,c=x({get(){return s.modelValue},set(i){a("update:modelValue",i)}}),o=x(()=>z.value.findIndex(i=>i.id===c.value));return(i,m)=>(t(),n("div",Ge,[f(me,{modelValue:d(o),"onUpdate:modelValue":m[0]||(m[0]=y=>Ce(o)?o.value=y:null),options:{align:"center",overscroll:!0,immediate:!0}},{default:V(()=>[(t(!0),n($,null,A(d(z),y=>(t(),n("button",{key:y.id,type:"button",onClick:h=>c.value=y.id,class:N(["tab",{active:y.id==d(c)}])},[f(ne,{address:y.key},null,8,["address"])],10,Qe))),128))]),_:1},8,["modelValue"])]))}});var Je=b(Ye,[["__scopeId","data-v-35e1b97b"]]);const Ze={class:"icon-background"},et={props:["icon","img"],setup(e){return(a,s)=>(t(),n("div",Ze,[e.img?(t(),T(W,{key:0,class:"page-logo",icon:e.img},null,8,["icon"])):(t(),T(W,{key:1,class:"page-logo placeholder",icon:e.icon},null,8,["icon"]))]))}};var ge=b(et,[["__scopeId","data-v-7bef1ba0"]]);const pe=e=>(F("data-v-9a5c4e1a"),e=e(),H(),e),tt=pe(()=>r("path",{d:"M24 24H0V0h24v24z",fill:"none",opacity:".87"},null,-1)),at=pe(()=>r("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"},null,-1)),st=[tt,at],nt={props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:a}){const s=e,c=x({get(){return s.modelValue},set(o){a("update:modelValue",o)}});return(o,i)=>(t(),n("button",{type:"button",class:"expand",onClick:i[0]||(i[0]=m=>c.value=!d(c))},[(t(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:N({expanded:d(c)})},st,2))]))}};var ot=b(nt,[["__scopeId","data-v-9a5c4e1a"]]);const lt={class:"actions-list flex-row"},it=["onClick"],ct={props:["actions"],setup(e){return(a,s)=>(t(),n("div",lt,[(t(!0),n($,null,A(e.actions,c=>(t(),n("button",{key:c.name,onClick:c.run,type:"button",class:"action flex-row"},[f(W,{icon:c.icon},null,8,["icon"]),r("div",null,C(c.name),1)],8,it))),128))]))}};var q=b(ct,[["__scopeId","data-v-99d382fa"]]);const dt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFF"},ut=r("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),rt=r("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"},null,-1),vt=[ut,rt];function _t(e,a){return t(),n("svg",dt,vt)}var mt={render:_t};const ft={class:"flex-row"},gt={class:"flex-row",style:{flex:"1 1 0"}},pt={class:"content"},yt={class:"title"},ht={class:"secondary-text"},xt={props:["data"],setup(e){return(a,s)=>(t(),n("div",{class:N(["notification",{expanded:e.data.expanded}])},[r("div",ft,[r("div",gt,[f(ge,{icon:e.data.icon||d(mt),img:e.data.img},null,8,["icon","img"]),r("div",pt,[e.data.expanded?(t(),T(Ae,{key:0,class:"secondary-text",timestamp:e.data.timestamp},null,8,["timestamp"])):k("",!0),r("div",yt,C(e.data.title),1),r("div",ht,[ae(a.$slots,"default",{},void 0,!0)]),e.data.expanded?(t(),T(q,{key:1,actions:e.data.actions},null,8,["actions"])):k("",!0)])]),f(ot,{modelValue:e.data.expanded,"onUpdate:modelValue":s[0]||(s[0]=c=>e.data.expanded=c)},null,8,["modelValue"])])],2))}};var kt=b(xt,[["__scopeId","data-v-7ece1c50"]]);const wt={class:"tx-card-extension"},$t={key:0,class:"flex-row",style:{"justify-content":"space-between"}},bt={key:0},It={key:1},Vt={key:1,class:"tags secondary-text"},Ct={props:["tx"],setup(e){return x(()=>oe.breakpoints.verticalLayout),(a,s)=>(t(),n("div",wt,[e.tx.tags.length||e.tx.data_size?(t(),n("div",$t,[e.tx.tags.length?(t(),n("div",bt,"Tags:")):k("",!0),e.tx.data_size?(t(),n("div",It,"Data: "+C(d(Ee)(e.tx.data_size)),1)):k("",!0)])):k("",!0),e.tx.tags.length?(t(),n("ul",Vt,[(t(!0),n($,null,A(e.tx.tags,c=>(t(),n("li",null,C(c.name+" | "+c.value),1))),256))])):k("",!0)]))}};var St=b(Ct,[["__scopeId","data-v-5ae3361a"]]);const Tt={class:"permission-card"},zt=P(" Share the public key "),Mt=P(" Share the arweave config "),Bt=P(" Sign data "),At=P(" Decrypt data "),Et=B({props:{messageEntry:null},setup(e){const a=e,s=S(null),c=x(()=>{var h,u,v,_;if(((h=s.value)==null?void 0:h.method)!=="signTransaction")return;const m=(v=(u=s.value)==null?void 0:u.params)==null?void 0:v[0],y=(_=m.tags)==null?void 0:_.map(({name:l,value:w})=>({name:window.atob(l),value:window.atob(w)}));return te(ee({},m),{tags:y})});E(()=>a.messageEntry,async()=>{s.value=await Le(a.messageEntry)},{immediate:!0});const o=[{name:"Accept",icon:_e,run:()=>a.messageEntry.status="accepted"},{name:"Reject",icon:le,run:()=>a.messageEntry.status="rejected"}],i=[{name:"Pending",icon:ie,run:()=>{}}];return(m,y)=>{var h,u,v,_,l;return Se((t(),n("div",Tt,[((h=s.value)==null?void 0:h.method)==="signTransaction"?(t(),n($,{key:0},[f(Pe,{tx:d(c)},null,8,["tx"]),f(St,{tx:d(c)},null,8,["tx"])],64)):((u=s.value)==null?void 0:u.method)==="getPublicKey"?(t(),n($,{key:1},[zt],64)):((v=s.value)==null?void 0:v.method)==="getArweaveConfig"?(t(),n($,{key:2},[Mt],64)):((_=s.value)==null?void 0:_.method)==="sign"?(t(),n($,{key:3},[Bt],64)):((l=s.value)==null?void 0:l.method)==="decrypt"?(t(),n($,{key:4},[At],64)):k("",!0),f(ze,{name:"fade",mode:"out-in"},{default:V(()=>[e.messageEntry.status?(t(),T(q,{key:1,actions:i})):(t(),T(q,{key:0,actions:o}))]),_:1})],512)),[[Te,s.value]])}}});var Lt=b(Et,[["__scopeId","data-v-0e1a76fc"]]);const Pt={class:"connection-card flex-column no-scrollbar"},Wt=["onClick"],jt=B({props:{state:null,walletId:null},setup(e){const a=e,s={connect:"Connect automatically",signTransaction:"Sign transaction",getPublicKey:"Share public key",sign:"Sign arbitrary data",decrypt:"Decrypt data",getArweaveConfig:"Share arweave gateway configuration"},c=u=>Object.getOwnPropertyNames(Object.getPrototypeOf((u==null?void 0:u.messageRunner)||{})).filter(v=>{var _,l;return!((_=u==null?void 0:u.messageRunner.getMethodMetadata(v))==null?void 0:_.unavailable)&&!((l=u==null?void 0:u.messageRunner.getMethodMetadata(v))==null?void 0:l.userIntent)&&v!=="constructor"&&v!=="getMethodMetadata"}),o=x(()=>O(a.walletId)),i=x(()=>[...c(o.value)]),m=u=>h.value&&(h.value[u]=!h.value[u]),y=new We("connectionSettings:",a.state.origin,{}),h=S(void 0);return E(o,u=>{var v,_,l;!(u==null?void 0:u.uuid)||((v=y.state).value||(v.value={}),h.value=(_=y.state.value)[l=u.uuid]||(_[l]={}),console.log(h.value))},{immediate:!0}),(u,v)=>(t(),n("div",Pt,[(t(!0),n($,null,A(d(i),_=>(t(),n("button",{key:_,class:"row method",onClick:l=>m(_)},[r("div",null,C(d(s)[_]||_),1),f(U,{vector:h.value[_]?1:-1,axis:"y"},{default:V(()=>[(t(),n("div",{key:h.value[_]},C(h.value[_]?"Allow":"Ask"),1))]),_:2},1032,["vector"])],8,Wt))),128))]))}});var Nt=b(jt,[["__scopeId","data-v-0b124835"]]);const Rt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#fff"},Dt=r("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Ft=r("path",{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},null,-1),Ht=[Dt,Ft];function Ot(e,a){return t(),n("svg",Rt,Ht)}var Ut={render:Ot};const qt=e=>(F("data-v-f8226c46"),e=e(),H(),e),Kt={class:"connection-card flex-column no-scrollbar"},Xt={class:"flex-row"},Gt=["disabled"],Qt={style:{"min-width":"0"}},Yt={class:"ellipsis"},Jt={class:"secondary-text ellipsis"},Zt={class:"flex-column",style:{flex:"1 1 0"}},ea={class:"container"},ta=qt(()=>r("div",null,"Add wallet",-1)),aa={class:"page-container",key:"0"},sa={key:0},na={class:"status fade-list-item",key:"1"},oa={key:1},la=B({props:{state:null},setup(e){var X;const a=e,s=Me(),c=(X=z.value[0])==null?void 0:X.id;x(()=>z.value.map(g=>g.key));const o=S(a.state.walletId||c);x(()=>O(c));const i=[{name:"Requests",color:"var(--orange)"},{name:"Permissions",color:"var(--green)"}],m=S(o.value?i[0].name:null);E(()=>a.state.walletId,g=>{!g||(v.value=!1,o.value=g,m.value=i[0].name)});const y=()=>a.state.walletId=!1,h=()=>{v.value=!1,a.state.walletId=o.value+""},u=()=>{var g;!a.state.walletId||(o.value!==(a.state.walletId||((g=z.value[0])==null?void 0:g.id))&&l.value++,v.value=!1,o.value=a.state.walletId)},v=S(!a.state.walletId),_=x(()=>v.value&&z.value.length>1),l=S(0),w=()=>{var g,p;if(!v.value){v.value=!0;return}o.value!==(a.state.walletId||((g=z.value[0])==null?void 0:g.id))&&l.value++,o.value=a.state.walletId||((p=z.value[0])==null?void 0:p.id),v.value=!1},M=x(()=>{var p;const g=a.state.walletId?`Switch to ${o.value}`:`Connect to ${((p=a.state.appInfo)==null?void 0:p.name)||a.state.origin} from the account ${o.value}`;return{title:a.state.walletId?"Switch":"Connect",timestamp:Date.now(),actions:[{name:"Connect",icon:_e,run:h},{name:a.state.walletId?"Cancel":"Switch",icon:le,run:a.state.walletId?u:w}],expanded:!0,content:g}}),L=x(()=>{var g;return o.value!==a.state.walletId?[]:(g=a.state.messageQueue)==null?void 0:g.filter(p=>!p.fulfilled)});Be(oe.breakpoints,"verticalLayout");const R=S(null),K=(g,p)=>R.value=g-p;return E(()=>i.findIndex(g=>g.name===m.value),K),E(()=>z.value.findIndex(g=>g.id===o.value),K),(g,p)=>{var G,Q;return t(),n("div",Kt,[r("div",Xt,[r("button",{type:"button",class:"info flex-row",onClick:p[0]||(p[0]=(...I)=>d(ce)&&d(ce)(...I)),disabled:!d(de)(e.state.origin,e.state.session)},[f(ge,{img:(G=e.state.appInfo)==null?void 0:G.logo,icon:d(ie)},null,8,["img","icon"]),r("div",Qt,[r("div",Yt,C(((Q=e.state.appInfo)==null?void 0:Q.name)||"Connector"),1),r("div",Jt,C(e.state.origin),1)]),d(de)(e.state.origin,e.state.session)?(t(),T(W,{key:0,icon:d(Ut)},null,8,["icon"])):k("",!0)],8,Gt),f(Xe,{modelValue:e.state.walletId,"onUpdate:modelValue":p[1]||(p[1]=I=>e.state.walletId=I),default:d(c),exit:!0,active:!d(_),onSelectWallet:w,onExit:y},null,8,["modelValue","default","active"])]),r("div",Zt,[f(je,{tabs:i,modelValue:m.value,"onUpdate:modelValue":p[2]||(p[2]=I=>m.value=I),disabled:!o.value},null,8,["modelValue","disabled"]),r("div",ea,[f(U,{vector:R.value,axis:"x"},{default:V(()=>[d(z).length?(t(),n("div",{class:"container-scroll",key:l.value},[f(j,{name:"fade-list"},{default:V(()=>[d(_)?(t(),T(Je,{modelValue:o.value,"onUpdate:modelValue":p[4]||(p[4]=I=>o.value=I),class:"fade-list-item",key:"-1"},null,8,["modelValue"])):k("",!0),r("div",aa,[f(U,{vector:R.value,axis:"x"},{default:V(()=>[(t(),n("div",{key:(o.value||"")+m.value,class:"content"},[m.value==="Requests"?(t(),n("div",sa,[f(j,{name:"fade-list"},{default:V(()=>{var I;return[r("div",{class:"fade-list-item",key:"0",style:D({padding:0,border:0,outline:"0.5px solid var(--border)"})},null,4),((I=d(L))==null?void 0:I.length)===0&&e.state.walletId&&e.state.walletId===o.value?(t(),n("div",na,"Connected")):k("",!0),o.value!==e.state.walletId?(t(),T(kt,{data:d(M),class:"fade-list-item",key:"2"},{default:V(()=>[P(C(d(M).content),1)]),_:1},8,["data"])):k("",!0),(t(!0),n($,null,A(d(L),Y=>(t(),T(Lt,{key:Y.uuid,messageEntry:Y,style:{padding:"var(--spacing)"},class:"flex-column fade-list-item"},null,8,["messageEntry"]))),128))]}),_:1})])):m.value==="Permissions"?(t(),n("div",oa,[f(j,{name:"fade-list"},{default:V(()=>[r("div",{class:"fade-list-item",key:"0",style:D({padding:0,border:0,outline:"0.5px solid var(--border)"})},null,4),f(Nt,{state:e.state,walletId:o.value,class:"fade-list-item",key:"2"},null,8,["state","walletId"])]),_:1})])):k("",!0)]))]),_:1},8,["vector"])])]),_:1})])):(t(),n("div",{key:0,class:"status flex-column",style:{color:"inherit",cursor:"pointer"},onClick:p[3]||(p[3]=I=>d(s).push("/add"))},[f(W,{icon:d(Ne),style:{"font-size":"3em","margin-top":"40%"}},null,8,["icon"]),ta]))]),_:1},8,["vector"])])])])}}});var ia=b(la,[["__scopeId","data-v-f8226c46"]]);const ca={class:"connect flex-column"},da={class:"bottom-info secondary-text",style:{opacity:"0.0","pointer-events":"none"}},ua=B({setup(e){const a=S(ue.value.findIndex(s=>s.origin===re.origin&&s.session===re.session));return(s,c)=>(t(),n("div",ca,[f(me,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=o=>a.value=o),options:{align:"start",overscroll:!0},class:"connectors"},{default:V(()=>[(t(!0),n($,null,A(d(ue),o=>(t(),n("div",{key:o.session,class:"connection-card-container fade-list-item"},[f(ia,{state:o,class:"box"},null,8,["state"])]))),128))]),_:1},8,["modelValue"]),r("div",da,[r("div",null,"All Channels "+C(Object.keys(d(ve)).length),1),(t(!0),n($,null,A(d(ve),(o,i)=>(t(),n("div",{key:i},C(o),1))),128))])]))}});var fa=b(ua,[["__scopeId","data-v-7c3f5fef"]]);export{fa as default};
//# sourceMappingURL=Connect.9c4ff41a.js.map
