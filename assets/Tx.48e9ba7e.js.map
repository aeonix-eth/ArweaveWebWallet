{"version":3,"file":"Tx.48e9ba7e.js","sources":["../../src/components/handlers/Img.vue","../../src/components/handlers/SmartWeave.vue","../../src/components/handlers/Selector.vue","../../src/views/Tx.vue"],"sourcesContent":["<template>\n\t<Observer observe=\"resize\" @resize=\"resize\" class=\"img\" :class=\"{ x, y }\">\n\t\t<div class=\"frame-scroller\">\n\t\t\t<img ref=\"imgRef\" :src=\"src\" @load=\"load\" />\n\t\t</div>\n\t</Observer>\n</template>\n\n\n\n<script setup>\nimport Observer from '@/components/function/Observer.vue'\nimport { ref, computed } from 'vue'\n\nconst props = defineProps(['src'])\nconst emit = defineEmits(['load'])\n\nconst imgRef = ref(null)\nconst elAspect = ref(null)\nconst imgAspect = ref(null)\n\nconst resize = (size) => {\n\tconsole.log(size)\n\telAspect.value = size.width / size.height\n}\n\nconst load = () => {\n\timgAspect.value = imgRef.value && imgRef.value.naturalWidth / imgRef.value.naturalHeight\n\temit('load')\n}\n\nconst x = computed(() => elAspect.value && imgAspect.value && elAspect.value < imgAspect.value)\nconst y = computed(() => elAspect.value && imgAspect.value && elAspect.value >= imgAspect.value)\n\n// Todo snap to center\n</script>\n\n\n\n<style scoped>\n.img {\n\twidth: 100%;\n\tmin-width: 0;\n\tflex: 1 1 0;\n\theight: var(--current-vh);\n}\n\n.verticalContent .img {\n\theight: auto;\n\twidth: 100%;\n}\n\n.verticalContent img {\n\theight: auto;\n\twidth: 100%;\n}\n\nimg {\n\tflex: 1 1 0;\n\tdisplay: block;\n\tobject-fit: cover;\n}\n\n.frame-scroller {\n\tdisplay: flex;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.img.x .frame-scroller {\n\toverflow-x: auto;\n\tflex-direction: row;\n}\n\n.img.x img {\n\theight: 100%;\n}\n\n.img.y .frame-scroller {\n\toverflow-y: auto;\n\tflex-direction: column;\n}\n\n.img.y img {\n\twidth: 100%;\n}\n</style>","<template>\n\t<div class=\"smart-weave\">\n\t\tSmartWeave Contract\n\t</div>\n</template>\n\n\n\n<script setup>\nimport SmartweaveStore from '@/store/SmartweaveStore'\nimport { watch } from 'vue'\n\nconst props = defineProps(['tx'])\n\nwatch(() => props.tx, (tx) => {\n\tconsole.log(tx)\n\tif (!tx) { return }\n\t// get contract info\n}, { immediate: true })\n</script>","<template>\n\t<div v-if=\"data.handler === 'iframe'\" v-show=\"data.loaded\" key=\"iframe\" class=\"selector iframe-container box\">\n\t\t<iframe class=\"iframe\" :src=\"gatewayLink\" @load=\"data.loaded = true\" />\n\t</div>\n\t<div v-else-if=\"data.handler === 'img'\" v-show=\"data.loaded\" key=\"img\" class=\"selector img-container box\">\n\t\t<Img :src=\"gatewayLink\" @load=\"data.loaded = true\" />\n\t</div>\n\t<div v-else-if=\"data.handler === 'smartweave'\" key=\"smartweave\" class=\"selector\">\n\t\t<SmartWeave :tx=\"tx\" />\n\t</div>\n\t<div v-else-if=\"data.handler === 'json' || data.handler === 'raw'\" key=\"json\" class=\"selector data-container box\">\n\t\t<pre class=\"raw\">{{ data.payload }}</pre>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport ArweaveStore, { arweave } from '@/store/ArweaveStore'\nimport Img from '@/components/handlers/Img.vue'\nimport SmartWeave from '@/components/handlers/SmartWeave.vue'\nimport { computed, reactive, watch } from 'vue'\nimport { unpackTags } from '@/functions/Transactions'\n\nconst props = defineProps(['tx'])\n\nconst data = reactive({\n\thandler: null,\n\tloaded: false,\n\tpayload: null,\n})\n\nconst gatewayLink = computed(() => ArweaveStore.gatewayURL + props.tx.id)\n\nwatch(() => props.tx, async () => {\n\tif (!props.tx) { return }\n\tdata.handler = null\n\tdata.loaded = false\n\tif (props.tx.data?.size === '0') {\n\t\treturn\n\t} else if (unpackTags(props.tx.tags)['Bundle-Version']) {\n\t\treturn\n\t} else if (props.tx.data?.type === 'application/x.arweave-manifest+json' || props.tx.data?.type === 'text/html' || props.tx.data?.type === 'application/pdf') {\n\t\tdata.handler = 'iframe'\n\t} else if (props.tx.data?.type?.split('/')[0] === 'image') {\n\t\tdata.handler = 'img'\n\t\t// } else if (props.tx.tags?.find(el => el.name === 'App-Name')?.value === 'SmartWeaveContract') {\n\t\t// \tdata.handler = 'smartweave'\n\t} else {\n\t\tdata.handler = 'raw'\n\t\ttry {\n\t\t\tdata.payload = await arweave.transactions.getData(props.tx.id, { decode: true, string: true })\n\t\t\tif (data.payload[0] === \"{\") {\n\t\t\t\ttry {\n\t\t\t\t\tdata.payload = JSON.stringify(JSON.parse(data.payload), null, 2)\n\t\t\t\t\tdata.handler = 'json'\n\t\t\t\t}\n\t\t\t\tcatch { }\n\t\t\t}\n\t\t} catch { }\n\t}\n}, { immediate: true })\n</script>\n\n\n\n<style scoped>\n.iframe-container,\n.img-container,\n.data-container {\n\twidth: 100%;\n\tpadding: 0;\n}\n\n.iframe-container,\n.img-container {\n\t/* height: var(--current-vh); */\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.data-container {\n\tmin-height: var(--current-vh);\n\tpadding: var(--spacing);\n}\n\n.iframe {\n\tflex: 1 1 0;\n\twidth: 100%;\n\theight: 100%;\n\tborder: 0;\n\topacity: 0.5;\n\ttransition: opacity 0.6s ease;\n}\n\n.iframe:hover {\n\topacity: 1;\n}\n\n.raw {\n\toverflow: auto;\n\tpadding: var(--spacing);\n\tmargin: 0;\n\twhite-space: pre-wrap;\n}\n</style>","<template>\n\t<FoldingLayout v-if=\"tx\">\n\t\t<template #left>\n\t\t\t<div class=\"meta flex-column\">\n\t\t\t\t<div class=\"card\">\n\t\t\t\t\t<div class=\"row flex-row\">\n\t\t\t\t\t\t<div class=\"item\" style=\"font-size:1.5em;\">\n\t\t\t\t\t\t\t<Amount :ar=\"tx.quantity.ar\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"row flex-row\">\n\t\t\t\t\t\t<div class=\"item\">\n\t\t\t\t\t\t\t<AddressIcon :address=\"tx.owner.address\" />\n\t\t\t\t\t\t\t<Address class=\"secondary-text\" :address=\"tx.owner.address\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"row flex-row\">\n\t\t\t\t\t\t<div class=\"item\">\n\t\t\t\t\t\t\t<AddressIcon :address=\"tx.recipient\" />\n\t\t\t\t\t\t\t<Address class=\"secondary-text\" :address=\"tx.recipient\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<h3>Properties</h3>\n\t\t\t\t<div class=\"card flex-column\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3>ID</h3>\n\t\t\t\t\t\t<div class=\"ellipsis\">{{ tx.id }}</div>\n\t\t\t\t\t\t<div v-if=\"isData\"><a :href=\"ArweaveStore.gatewayURL + tx.id\" target=\"_blank\">Link</a></div>\n\t\t\t\t\t\t<div v-if=\"tx.data?.type === 'application/x.arweave-manifest+json'\"><a :href=\"ArweaveStore.gatewayURL + 'tx/' + tx.id + '/data.json'\" target=\"_blank\">Manifest</a></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div v-if=\"isPending\">\n\t\t\t\t\t\t<h3>Pending</h3>\n\t\t\t\t\t\t<div v-if=\"status\">Status: {{ status }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t<h3>Block</h3>\n\t\t\t\t\t\t<div class=\"ellipsis\">{{ tx.block.id }}</div>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{{ tx.block.height }}\n\t\t\t\t\t\t\t<template v-if=\"networkInfo?.height\">/ {{ networkInfo.height }}</template>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div>{{ date }}</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3>Data</h3>\n\t\t\t\t\t\t<div>Data size {{ humanFileSize(tx.data.size) }}</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tFee\n\t\t\t\t\t\t\t<Amount :ar=\"tx.fee.ar\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<template v-if=\"tagsSchema.length\">\n\t\t\t\t\t<h3>Tags</h3>\n\t\t\t\t\t<div style=\"background: var(--background2); border-radius: var(--border-radius);\">\n\t\t\t\t\t\t<InputGrid :schema=\"tagsSchema\" disabled />\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\n\t\t\t\t<br v-if=\"verticalContent\" />\n\t\t\t</div>\n\t\t</template>\n\n\t\t<template #right v-if=\"isData\">\n\t\t\t<Selector :tx=\"tx\" :class=\"{ inline: !verticalContent }\" />\n\t\t</template>\n\t</FoldingLayout>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport Selector from '@/components/handlers/Selector.vue'\nimport FoldingLayout from '@/components/layout/FoldingLayout.vue'\nimport Address from '@/components/atomic/Address.vue'\nimport AddressIcon from '@/components/atomic/AddressIcon.vue'\nimport InputGrid from '@/components/atomic/InputGrid.vue'\nimport Amount from '@/components/composed/Amount.vue'\nimport ArweaveStore, { arweave, useWatchTx, networkInfo } from '@/store/ArweaveStore'\nimport BlockStore, { getCurrentHeight } from '@/store/BlockStore'\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { humanFileSize } from '@/functions/Utils'\nimport { watch, computed, ref, toRef } from 'vue'\n\nconst props = defineProps<{\n\ttxId: string\n}>()\n\nconst tx = useWatchTx(toRef(props, 'txId'))\n\nconst isData = computed(() => tx.value.data?.size != 0)\nconst isPending = computed(() => !tx.value.block)\nconst date = computed(() => {\n\tif (!tx.value.block) { return '' }\n\tconst dateObj = new Date(tx.value.block.timestamp * 1000)\n\treturn dateObj.toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' })\n\t\t+ ' ' + dateObj.toLocaleTimeString()\n})\nconst status = ref(null as any)\nconst currentBlock = toRef(BlockStore, 'currentHeight')\nconst tagsSchema = computed(() => {\n\tif (!tx.value.tags) { return }\n\tconst result = []\n\tfor (const tag of tx.value.tags) {\n\t\tresult.push({\n\t\t\titems: [\n\t\t\t\t{ name: '', value: tag.name, attrs: { disabled: true } },\n\t\t\t\t{ name: '', value: tag.value, attrs: { disabled: true } }\n\t\t\t]\n\t\t})\n\t}\n\treturn result\n})\nwatch(() => props.txId, async () => {\n\tgetCurrentHeight()\n\tarweave.transactions.getStatus(props.txId).then(s => status.value = s.status).catch(() => status.value = 'Not Found')\n}, { immediate: true })\nconst verticalContent = toRef(InterfaceStore.breakpoints, 'verticalContent')\n</script>\n\n\n\n<style scoped>\n.meta {\n\tmax-width: var(--column-large-width);\n\tpadding: var(--spacing);\n}\n\n.verticalContent .meta {\n\tmax-width: 100%;\n}\n\nh3 {\n\tmargin-bottom: 0;\n}\n\n.row {\n\tmin-height: 2em;\n\talign-items: flex-start;\n\tjustify-content: space-between;\n}\n\n.row > .item {\n\tflex: 1 1 0;\n\tmin-width: 0;\n\tmin-height: 200px;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.circle {\n\tflex: 0 0 auto;\n\twidth: 200px;\n\theight: 200px;\n\tfont-size: 1.5em;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tborder: 4px solid var(--border);\n\tborder-radius: 50%;\n}\n\n.address-icon {\n\twidth: 64px;\n\theight: 64px;\n\tmargin-bottom: 32px;\n\tborder-radius: var(--border-radius);\n}\n\n.address {\n\tmax-width: 100%;\n}\n\n.input-grid {\n\tpadding: var(--spacing) 0;\n\tbackground: var(--background2);\n\tborder: 0.5px solid var(--border);\n}\n\n.selector.inline {\n\tmin-height: var(--current-vh);\n}\n\n.verticalContent .selector.iframe-container {\n\tmin-height: 80vh;\n}\n</style>"],"names":[],"mappings":"maAiBA,KAAM,GAAS,EAAI,MACb,EAAW,EAAI,MACf,EAAY,EAAI,MAEhB,EAAS,AAAC,GAAS,CACxB,QAAQ,IAAI,GACZ,EAAS,MAAQ,EAAK,MAAQ,EAAK,QAG9B,EAAO,IAAM,CAClB,EAAU,MAAQ,EAAO,OAAS,EAAO,MAAM,aAAe,EAAO,MAAM,cAC3E,EAAK,SAGA,EAAI,EAAS,IAAM,EAAS,OAAS,EAAU,OAAS,EAAS,MAAQ,EAAU,OACnF,EAAI,EAAS,IAAM,EAAS,OAAS,EAAU,OAAS,EAAS,OAAS,EAAU,kUClB1F,SAAM,IAAM,EAAM,GAAI,AAAC,GAAO,CAE7B,AADA,QAAQ,IAAI,GACR,EAAC,GAEH,CAAE,UAAW,mUCQV,EAAO,EAAS,CACrB,QAAS,KACT,OAAQ,GACR,QAAS,OAGJ,EAAc,EAAS,IAAM,EAAa,WAAa,EAAM,GAAG,IAEtE,SAAM,IAAM,EAAM,GAAI,SAAY,iBACjC,GAAI,EAAC,EAAM,IACX,GAAK,QAAU,KACf,EAAK,OAAS,GACV,MAAM,GAAG,OAAT,cAAe,QAAS,KAErB,IAAI,EAAW,EAAM,GAAG,MAAM,kBACpC,OACM,GAAI,MAAM,GAAG,OAAT,cAAe,QAAS,uCAAyC,MAAM,GAAG,OAAT,cAAe,QAAS,aAAe,MAAM,GAAG,OAAT,cAAe,QAAS,kBAC1I,EAAK,QAAU,iBACL,SAAM,GAAG,OAAT,cAAe,OAAf,cAAqB,MAAM,KAAK,MAAO,QACjD,EAAK,QAAU,UAGT,CACN,EAAK,QAAU,MACf,GAAI,CAEH,GADA,EAAK,QAAU,KAAM,GAAQ,aAAa,QAAQ,EAAM,GAAG,GAAI,CAAE,OAAQ,GAAM,OAAQ,KACnF,EAAK,QAAQ,KAAO,IACvB,GAAI,CACH,EAAK,QAAU,KAAK,UAAU,KAAK,MAAM,EAAK,SAAU,KAAM,GAC9D,EAAK,QAAU,YAEhB,QAEA,MAED,CAAE,UAAW,mxCCgCV,EAAK,EAAW,EAAM,EAAO,SAE7B,EAAS,EAAS,WAAM,YAAG,MAAM,OAAT,cAAe,OAAQ,IAC/C,EAAY,EAAS,IAAM,CAAC,EAAG,MAAM,OACrC,EAAO,EAAS,IAAM,IACvB,CAAC,EAAG,MAAM,YAAgB,QACxB,GAAU,GAAI,MAAK,EAAG,MAAM,MAAM,UAAY,WAC7C,GAAQ,mBAAmB,OAAW,CAAE,KAAM,UAAW,MAAO,OAAQ,IAAK,YACjF,IAAM,EAAQ,uBAEZ,EAAS,EAAI,MACE,EAAM,EAAY,sBACjC,GAAa,EAAS,IAAM,IAC7B,CAAC,EAAG,MAAM,iBACR,GAAS,YACJ,KAAO,GAAG,MAAM,OACnB,KAAK,CACX,MAAO,CACN,CAAE,KAAM,GAAI,MAAO,EAAI,KAAM,MAAO,CAAE,SAAU,KAChD,CAAE,KAAM,GAAI,MAAO,EAAI,MAAO,MAAO,CAAE,SAAU,cAI7C,OAEF,IAAM,EAAM,KAAM,SAAY,OAE3B,aAAa,UAAU,EAAM,MAAM,KAAK,GAAK,EAAO,MAAQ,EAAE,QAAQ,MAAM,IAAM,EAAO,MAAQ,cACvG,CAAE,UAAW,UACV,GAAkB,EAAM,EAAe,YAAa"}