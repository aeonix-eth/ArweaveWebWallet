{"version":3,"file":"AddWallet.2433a06f.js","sources":["../../src/views/AddWallet.vue"],"sourcesContent":["<template>\n\t<div class=\"add-wallet flex-column\">\n\t\t<div class=\"card\">\n\t\t\t<h2 style=\"display:flex; justify-content:space-between;\">\n\t\t\t\t<span>Passphrase</span>\n\t\t\t\t<span>Key file</span>\n\t\t\t</h2>\n\t\t\t<div class=\"flex-column\">\n\t\t\t\t<InputData v-model=\"passphraseInput\" @files=\"importFile\" :disabled=\"isCreatingWallet\" placeholder=\"Import passphrase or key file\" />\n\t\t\t\t<div />\n\t\t\t\t<Button v-if=\"!isCreatingWallet && !passphraseInput.length\" @click=\"create()\" :disabled=\"passphraseInput.length && !isPassphrase\" :icon=\"LogoArweave\" class=\"main\">Create new wallet</Button>\n\t\t\t\t<Button v-else-if=\"isCreatingWallet\" :disabled=\"createdWallet == null\" @click=\"goToCreatedWallet\" :icon=\"createdWallet == null ? 'loader' : ''\" class=\"main\">{{ createdWallet == null ? 'Generating, write down the passphrase' : 'Passphrase saved? Click here to proceed' }}</Button>\n\t\t\t\t<Button v-else :disabled=\"!isPassphrase || isGeneratingWallet\" @click=\"confirmPassphrase\" class=\"main\">Import passphrase</Button>\n\t\t\t</div>\n\t\t\t<OverlayPrompt :options=\"popup\" />\n\t\t</div>\n\t\t<div class=\"card\" v-for=\"provider in hardwareProviders\" :key=\"provider.metadata.name\">\n\t\t\t<h2 class=\"flex-row\" style=\"align-items: center;\"><Icon :icon=\"provider.metadata.icon\" /><span>{{ provider.metadata.name }} Hardware Wallet</span></h2>\n\t\t\t<div class=\"flex-column\">\n\t\t\t\t<Button :disabled=\"!provider.metadata.isSupported\" @click=\"importProvider(provider)\" :icon=\"provider.metadata.icon\" class=\"main\">\n\t\t\t\t\t{{ !provider.metadata.isSupported\n\t\t\t\t\t\t? `${provider.metadata.name} not supported for this browser`\n\t\t\t\t\t\t: `Connect with ${provider.metadata.name}` }}\n\t\t\t\t</Button>\n\t\t\t\t<div class=\"flex-row\">\n\t\t\t\t\t<Button :icon=\"IconVerify\" @click=\"provider.metadata.verify\">Verify address</Button>\n\t\t\t\t\t<a :href=\"provider.metadata.link\" target=\"_blank\" class=\"reset\">\n\t\t\t\t\t\t<Button :icon=\"IconLaunch\">Purchase | affiliate link</Button>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"card\">\n\t\t\t<h2>Address Only</h2>\n\t\t\t<InputAddress v-model=\"targetInput\" :actions=\"[importAddressOnlyAction]\" />\n\t\t</div>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport InputData from '@/components/atomic/InputData.vue'\nimport InputAddress from '@/components/atomic/InputAddress.vue';\nimport Button from '@/components/atomic/Button.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport OverlayPrompt from '@/components/layout/OverlayPrompt.vue'\nimport { LedgerProvider } from '@/providers/Ledger'\nimport { arweave } from '@/store/ArweaveStore'\nimport { addWallet, addAddress, generateMnemonic, validateMnemonic, addMnemonic, addProvider } from '@/functions/Wallets'\nimport { computed, reactive, ref } from 'vue'\nimport { useRouter } from 'vue-router'\n\nimport LogoArweave from '@/assets/logos/arweave.svg?component'\nimport IconAddBox from '@/assets/icons/add_box.svg?component'\nimport IconLaunch from '@/assets/icons/launch.svg?component'\nimport IconVerify from '@/assets/icons/verify.svg?component'\n\nconst router = useRouter()\nconst passphraseInput = ref('')\nconst targetInput = ref('')\n// const maskAddress = (address) => { return address.match(/^[a-z0-9_-]{0,43}$/i) }\nconst popup = ref(undefined as undefined | object)\nconst isPassphrase = computed(() => passphraseInput.value.trim().split(/\\s+/g).length >= 12)\nconst isCreatingWallet = ref(false)\nconst isGeneratingWallet = ref(false)\nconst createdWallet = ref(null as null | string)\nconst create = async () => {\n\tisCreatingWallet.value = true\n\tpassphraseInput.value = await generateMnemonic()\n\tconst id = addMnemonic(passphraseInput.value)\n\tsetTimeout(async () => createdWallet.value = await id, 10000)\n}\nconst goToCreatedWallet = () => {\n\trouter.push({ name: 'EditWallet', query: { wallet: createdWallet.value } })\n}\nconst importPassphrase = async () => {\n\tisGeneratingWallet.value = true\n\tconst id = addMnemonic(passphraseInput.value)\n\tpopup.value = {\n\t\ticon: 'loader',\n\t\tmessage: 'importing',\n\t}\n\trouter.push({ name: 'EditWallet', query: { wallet: await id } })\n}\nconst confirmPassphrase = async () => {\n\tif (await validateMnemonic(passphraseInput.value)) { return importPassphrase() }\n\tpopup.value = {\n\t\tmessage: 'This passphrase is not valid, do you want to import it anyway?',\n\t\tactions: [\n\t\t\t{ name: 'Back', run: () => popup.value = undefined },\n\t\t\t{ name: 'Import Passphrase', run: () => importPassphrase() },\n\t\t]\n\t}\n}\nconst importFile = async (file: File[]) => {\n\tif (!file) { return }\n\tconst id = await addWallet(JSON.parse(await file[0].text()))\n\trouter.push({ name: 'EditWallet', query: { wallet: id } })\n}\nconst importProvider = async (provider: Provider) => {\n\tconst id = await addProvider(provider)\n\trouter.push({ name: 'EditWallet', query: { wallet: id } })\n}\nconst hardwareProviders = [LedgerProvider]\nconst importAddressOnlyAction = { icon: IconAddBox, run: async () => {\n\tconst id = await addAddress(targetInput.value)\n\trouter.push({ name: 'EditWallet', query: { wallet: id } })\n}}\n</script>\n\n\n\n<style scoped>\n.add-wallet {\n\twidth: 100%;\n\tmin-height: var(--current-vh);\n\tpadding: var(--spacing);\n\talign-items: center;\n}\n\n.card {\n\twidth: 100%;\n\tmax-width: var(--column-width);\n\toverflow: hidden;\n}\n\n.input-data {\n\ttext-align: center;\n}\n\n.button.main {\n\tbackground-image: radial-gradient(circle at center, #81a1c166, #81a1c133);\n\theight: 4em;\n\tfont-size: 1.1em;\n\twidth: 100%;\n}\n</style>"],"names":[],"mappings":"i9BA0DM,GAAS,IACT,EAAkB,EAAI,IACtB,EAAc,EAAI,IAElB,EAAQ,EAAI,QACZ,EAAe,EAAS,IAAM,EAAgB,MAAM,OAAO,MAAM,QAAQ,QAAU,IACnF,EAAmB,EAAI,IACvB,EAAqB,EAAI,IACzB,EAAgB,EAAI,MACpB,EAAS,SAAY,GACT,MAAQ,KACT,MAAQ,KAAM,UACxB,GAAK,EAAY,EAAgB,kBAC5B,SAAY,EAAc,MAAQ,KAAM,GAAI,MAElD,EAAoB,IAAM,GACxB,KAAK,CAAE,KAAM,aAAc,MAAO,CAAE,OAAQ,EAAc,UAE5D,EAAmB,SAAY,GACjB,MAAQ,QACrB,GAAK,EAAY,EAAgB,SACjC,MAAQ,CACb,KAAM,SACN,QAAS,eAEH,KAAK,CAAE,KAAM,aAAc,MAAO,CAAE,OAAQ,KAAM,OAEpD,EAAoB,SAAY,IACjC,KAAM,GAAiB,EAAgB,aAAiB,OACtD,MAAQ,CACb,QAAS,iEACT,QAAS,CACR,CAAE,KAAM,OAAQ,IAAK,IAAM,EAAM,MAAQ,QACzC,CAAE,KAAM,oBAAqB,IAAK,IAAM,QAIrC,EAAa,KAAO,IAAiB,IACtC,CAAC,cACC,GAAK,KAAM,GAAU,KAAK,MAAM,KAAM,GAAK,GAAG,WAC7C,KAAK,CAAE,KAAM,aAAc,MAAO,CAAE,OAAQ,MAE9C,EAAiB,KAAO,IAAuB,MAC9C,GAAK,KAAM,GAAY,KACtB,KAAK,CAAE,KAAM,aAAc,MAAO,CAAE,OAAQ,MAE9C,EAAoB,CAAC,GACrB,EAA0B,CAAE,KAAM,EAAY,IAAK,SAAY,MAC9D,GAAK,KAAM,GAAW,EAAY,SACjC,KAAK,CAAE,KAAM,aAAc,MAAO,CAAE,OAAQ"}