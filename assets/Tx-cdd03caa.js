import{d as D,r as L,c as d,o as n,a as f,w as _,b as s,n as K,u as t,_ as te,e as R,f as j,g as i,A as w,h as x,i as ae,j as N,k as u,B as se,L as F,t as y,l as C,m as v,p as ne,v as oe,q as le,s as O,x as re,y as T,z as ie,C as de,T as U,D as ce,E as P,I as ue,F as _e,G as E,H as J,J as pe,K as M,M as A,N as ve,O as he,P as ye,Q as me,R as fe,S as Q,U as V,V as ge,W as xe,X as be,Y as ke,Z as we}from"./index-d66edbef.js";const Ie={class:"frame-scroller"},Se=["src"],Te=D({__name:"Img",props:["src"],emits:["load","error"],setup(c,{emit:o}){const p=L(null),a=L(null),e=L(null),g=l=>a.value=l.contentRect.width/l.contentRect.height,I=()=>{e.value=p.value&&p.value.naturalWidth/p.value.naturalHeight,o("load")},k=d(()=>a.value&&e.value&&a.value<e.value),r=d(()=>a.value&&e.value&&a.value>=e.value);return(l,h)=>(n(),f(te,{onResize:g,class:K(["img",{x:t(k),y:t(r)}])},{default:_(()=>[s("div",Ie,[s("img",{ref_key:"imgRef",ref:p,src:c.src,onLoad:I,onError:h[0]||(h[0]=$=>o("error"))},null,40,Se)])]),_:1},8,["class"]))}});const Ce=R(Te,[["__scopeId","data-v-51318ac7"]]),Le={controls:""},$e=["src","type"],Ae=D({__name:"Video",props:{tx:null},setup(c){const o=c,p=d(()=>j(o.tx.tags));return(a,e)=>(n(),i("video",Le,[s("source",{src:t(w).gatewayURL+c.tx.id,type:t(p)["Content-Type"]},null,8,$e),x(" Not supported ")]))}});const G=R(Ae,[["__scopeId","data-v-dd5071bb"]]),De={key:"json",class:"selector data-container min-height box"},Re={key:1,class:"raw"},ze={key:2,class:"selector"},Be=D({__name:"Selector",props:["tx"],setup(c){const o=c;re(r=>({"0476ac62":g.value}));const p=d(()=>w.gatewayURL+o.tx.id),a=d(()=>"https://arcode.studio/#/"+o.tx.id+"?theme=dark-blue&hideToolbar=true"),e=ae({handler:void 0,payload:void 0,loaded:!1,error:!1,intent:!1}),g=L(void 0);N(()=>o.tx.id,()=>{e.handler=void 0,e.payload=void 0,e.loaded=!1,e.error=!1,e.intent=!1,g.value="pre-wrap",I()},{immediate:!0}),N(()=>e.intent,()=>e.intent&&I());async function I(){if(!o.tx||o.tx.data?.size==="0"||o.tx.data?.size==null)return;const r=j(o.tx.tags);if(r["Bundle-Version"])return e.loaded=!0,e.handler={is:T(ie),attrs:{query:de({bundledIn:o.tx.id}),component:T(U),componentProps:{options:{space:!0}},class:["column"]},containerAttrs:{class:["data-container","column-container","padding"]}};if(r["Content-Type"]==="application/x.arweave-manifest+json"||r["Content-Type"]==="text/html"||r["Content-Type"]==="application/pdf")return e.handler={is:"iframe",attrs:{src:p.value,class:["hover"]},containerAttrs:{class:["iframe-container","fixed-height"]}};if(r["Content-Type"]?.split("/")[0]==="video")return e.loaded=!0,e.handler={is:T(G),attrs:{tx:o.tx},containerAttrs:{class:["iframe-container"]}};if(r["Content-Type"]?.split("/")[0]==="audio")return e.loaded=!0,e.handler={is:T(G),attrs:{tx:o.tx},containerAttrs:{class:["iframe-container"]}};if(o.tx.data.size>104857600&&!e.intent)return e.handler="intent";if(r["Content-Type"]?.split("/")[0]==="image")return e.handler={is:T(Ce),attrs:{src:p.value},containerAttrs:{class:["img-container"]}};if(r["App-Name"]==="SmartWeaveContract"||r["App-Name"]==="SmartWeaveContractSource")return e.handler={is:"iframe",attrs:{src:a.value},containerAttrs:{class:["iframe-container","fixed-height"]}};e.handler="raw";try{r["Content-Type"]==="application/gzip"&&(e.payload??=await k(o.tx.id))}catch(l){console.error(l)}if(e.payload??=await ce(o.tx.id).catch(()=>{}),e.payload?.[0]==="{"||e.payload?.[0]==="[")try{e.payload=JSON.stringify(JSON.parse(e.payload),null,2),g.value="pre"}catch{}e.loaded=!0}async function k(r){let l;try{l??=(await P.api.get(r,{responseType:"blob"})).data}catch{}try{l??=new Blob([await P.transactions.getData(r,{decode:!0})])}catch{}const h=new DecompressionStream("gzip"),$=l.stream().pipeThrough(h);return(await new Response($).blob()).text()}return(r,l)=>(n(),f(C,null,{default:_(()=>[e.handler==="intent"?(n(),i("div",{key:0,onClick:l[0]||(l[0]=h=>e.intent=!0),class:"selector data-container min-height box",style:{display:"flex","justify-content":"center","padding-top":"5em"}},[u(se,{icon:t(ue)},{default:_(()=>[x("Load large file")]),_:1},8,["icon"])])):e.handler==="raw"?(n(),i("div",De,[u(C,null,{default:_(()=>[!e.loaded&&!e.error?(n(),f(F,{key:0,class:"loader"})):(n(),i("pre",Re,y(e.payload),1))]),_:1})])):e.handler?(n(),i("div",ze,[u(C,null,{default:_(()=>[!e.loaded&&!e.error?(n(),f(F,{key:0,class:"loader"})):v("",!0)]),_:1}),u(C,null,{default:_(()=>[ne(s("div",O(e.handler.containerAttrs,{class:"box"}),[(n(),f(le(e.handler.is),O(e.handler.attrs,{onLoad:l[1]||(l[1]=h=>e.loaded=!0),onError:l[2]||(l[2]=h=>{e.error=!0,t(_e).error("Failed to load")})}),null,16))],16),[[oe,e.loaded]])]),_:1})])):v("",!0)]),_:1}))}});const Ve=R(Be,[["__scopeId","data-v-ae9437da"]]),b=c=>(be("data-v-15ef31ba"),c=c(),ke(),c),Ne={key:0,style:{position:"relative",width:"100%","min-height":"var(--current-vh)",color:"var(--element-secondary)"}},Ue={key:0},Pe={key:1},je={class:"meta flex-column"},He={class:"box",style:{padding:"0"}},We={key:1,class:"spacer"},qe={key:2,class:"divider"},Fe=b(()=>s("h3",null,"Transaction",-1)),Oe={class:"flex-column"},Ee={key:0},Je=["href"],Me={key:1},Qe=["href"],Ge={class:"secondary-text"},Ke={key:3},Xe=b(()=>s("h3",null,"Bundle",-1)),Ye={class:"flex-column"},Ze={class:"secondary-text"},et={key:4},tt=b(()=>s("h3",null,"Pending",-1)),at={key:5},st=b(()=>s("h3",null,"Block",-1)),nt={key:0,class:"secondary-text"},ot=b(()=>s("div",{class:"spacer"},null,-1)),lt={class:"secondary-text"},rt=b(()=>s("h3",null,"Data",-1)),it={key:0,style:{background:"var(--background)"}},dt=b(()=>s("h3",{style:{"margin-bottom":"0",padding:"var(--spacing) 0 0 var(--spacing)"}},"Tags",-1)),ct=D({__name:"Tx",props:{txId:null},setup(c){const o=c,p=E(J(o,"txId")),a=p.state,e=p.queryStatus,g=d(()=>a.value?.bundledIn?.id),k=E(g).state,r=d(()=>w.gatewayURL&&new URL(w.gatewayURL).hostname),l=d(()=>a.value?.bundledIn?.id||o.txId),h=pe({name:"single tx status",params:l,query:async m=>(await P.transactions.getStatus(m)).status,completed:m=>!l.value||a.value?.block||m&&m!==404,seconds:30}).state,$=d(()=>a.value?.owner&&M(a.value?.owner.address)),H=d(()=>a.value?.recipient&&M(a.value?.recipient)),z=d(()=>j(a.value?.tags||[])["Content-Type"]),W=d(()=>a.value?.data?.size!=="0"),X=d(()=>!a.value?.block),Y=d(()=>{if(!a.value?.block)return"";const m=new Date(a.value?.block.timestamp*1e3);return m.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})+" "+m.toLocaleTimeString()}),q=d(()=>A.value?.height&&a.value?.block?.height&&A.value?.height-a.value?.block?.height+1),Z=J(ve.breakpoints,"verticalContent"),B=L(0);return N(a,(m,S)=>{if(S){if(S?.bundledIn?.id===o.txId)return B.value=-1;B.value=1}}),(m,S)=>(n(),f(C,{vector:B.value,axis:"x"},{default:_(()=>[t(a)?(n(),f(ye,{key:c.txId},me({left:_(()=>[s("div",je,[s("div",He,[s("div",{class:"box-padding flex-column",style:fe([t(a).tags.length&&"padding-bottom: 0"])},[u(U,{tx:t(a),options:{half:!0}},null,8,["tx"]),t(a).recipient?(n(),f(Q,{key:0,wallet:t(H)},null,8,["wallet"])):v("",!0),t(a).recipient?(n(),i("div",We)):v("",!0),t(a).recipient?(n(),i("div",qe)):v("",!0),u(Q,{wallet:t($)},null,8,["wallet"]),s("div",null,[Fe,s("div",Oe,[t(W)?(n(),i("div",Ee,[s("a",{href:t(w).gatewayURL+t(a).id,target:"_blank"},y(t(r)),9,Je)])):v("",!0),t(z)==="application/x.arweave-manifest+json"?(n(),i("div",Me,[s("a",{href:t(w).gatewayURL+"raw/"+t(a).id,target:"_blank"},"Manifest",8,Qe)])):v("",!0),s("div",Ge,[u(V,{tx:t(a).id},{default:_(()=>[x("ID: ")]),_:1},8,["tx"])])])]),t(a).bundledIn?.id?(n(),i("div",Ke,[Xe,s("div",Ye,[t(k)?(n(),f(U,{key:0,tx:t(k),options:{space:!0}},null,8,["tx"])):v("",!0),s("div",Ze,[u(V,{tx:t(a).bundledIn?.id},{default:_(()=>[x("ID: ")]),_:1},8,["tx"])])])])):v("",!0),t(X)?(n(),i("div",et,[tt,s("div",null,"Status: "+y(t(h)?t(h):"..."),1)])):(n(),i("div",at,[st,s("div",null,[x(" Height: "+y(t(a).block.height)+" ",1),t(A)?.height?(n(),i("span",nt,"/ "+y(t(A).height)+" ("+y(t(q))+" confirmation"+y(t(q)>1?"s":"")+")",1)):v("",!0)]),s("div",null,y(t(Y)),1),ot,s("div",lt,[u(V,{block:t(a).block.id},{default:_(()=>[x("ID: ")]),_:1},8,["block"])])])),s("div",null,[rt,s("div",null,"Size: "+y(t(we)(t(a).data.size)),1),s("div",null,[x(" Fee: "),u(ge,{ar:t(a).fee.ar},null,8,["ar"])])])],4),t(a).tags.length?(n(),i("div",it,[dt,u(xe,{modelValue:t(a).tags,"onUpdate:modelValue":S[0]||(S[0]=ee=>t(a).tags=ee),disabled:""},null,8,["modelValue"])])):v("",!0)])])]),_:2},[t(a)&&t(W)?{name:"right",fn:_(()=>[u(Ve,{tx:t(a),class:K({inline:!t(Z)})},null,8,["tx","class"])]),key:"0"}:void 0]),1024)):(n(),i("div",Ne,[u(he,{options:{icon:"loader"},class:"box"},{default:_(()=>[t(e).error?(n(),i("h2",Ue,y(t(e).error),1)):(n(),i("h2",Pe,"Loading"))]),_:1})]))]),_:1},8,["vector"]))}});const _t=R(ct,[["__scopeId","data-v-15ef31ba"]]);export{_t as default};
//# sourceMappingURL=Tx-cdd03caa.js.map
