import{h as R,r as C,d as i,j as n,G as f,H as p,l as s,N as Q,u as e,k as r,O as g,a as ee,w as N,M as _,Q as u,P as y,U as te,V as ae,Z as O,R as se,a8 as S,L as q,ak as ne,p as oe,$ as le,a0 as re}from"./vendor.4d3d6cbc.js";import{_ as D,a as ie,u as E,A as w,B as de,L as F,b as $,c as ce,d as ue,T as P,e as j,f as W,g as _e,I as he,F as pe,h as B,n as L,i as ve,j as me,k as ye,l as G}from"./index.40bfd2d3.js";import{I as fe}from"./download.ecf962f6.js";import{P as J}from"./ProfilePreview.4e84d32c.js";import{O as ge}from"./OverlayPrompt.167fc3cb.js";const xe={class:"frame-scroller"},ke=["src"],be=R({props:["src"],emits:["load"],setup(d,{emit:o}){const t=C(null),a=C(null),v=C(null),k=m=>{console.log(m),a.value=m.contentRect.width/m.contentRect.height},T=()=>{v.value=t.value&&t.value.naturalWidth/t.value.naturalHeight,o("load")},l=i(()=>a.value&&v.value&&a.value<v.value),c=i(()=>a.value&&v.value&&a.value>=v.value);return(m,I)=>(n(),f(ie,{onResize:k,class:Q(["img",{x:e(l),y:e(c)}])},{default:p(()=>[s("div",xe,[s("img",{ref_key:"imgRef",ref:t,src:d.src,onLoad:T},null,40,ke)])]),_:1},8,["class"]))}});var we=D(be,[["__scopeId","data-v-0f93abca"]]);const Ie={controls:""},Se=["src","type"],Te=g(" Not supported "),Ae=R({props:{tx:null},setup(d){const o=d,t=i(()=>E(o.tx.tags));return(a,v)=>(n(),r("video",Ie,[s("source",{src:e(w).gatewayURL+d.tx.id,type:e(t)["Content-Type"]},null,8,Se),Te]))}});var M=D(Ae,[["__scopeId","data-v-67247f52"]]);const Le=g("Load large file"),Ce={key:"json",class:"selector data-container min-height box"},$e={class:"raw"},Re={key:2,class:"selector"},De=R({props:["tx"],setup(d){const o=d,t=ee({handler:void 0,payload:void 0,loaded:!1,intent:!1}),a=i(()=>w.gatewayURL+o.tx.id),v=i(()=>"https://arcode.studio/#/"+o.tx.id+"?theme=dark-blue&hideToolbar=true"),k=async()=>{if(!o.tx||o.tx.data?.size==="0"||o.tx.data?.size==null)return;const l=E(o.tx.tags);if(l["Bundle-Version"])return t.loaded=!0,t.handler={is:S(ce),attrs:{query:ue({bundledIn:o.tx.id}),component:S(P),componentProps:{options:{space:!0}},class:["column"]},containerAttrs:{class:["data-container","column-container","padding"]}};if(l["Content-Type"]==="application/x.arweave-manifest+json"||l["Content-Type"]==="text/html"||l["Content-Type"]==="application/pdf")return t.handler={is:"iframe",attrs:{src:a.value,class:["hover"]},containerAttrs:{class:["iframe-container","fixed-height"]}};if(l["Content-Type"]?.split("/")[0]==="video")return t.loaded=!0,t.handler={is:S(M),attrs:{tx:o.tx},containerAttrs:{class:["iframe-container"]}};if(l["Content-Type"]?.split("/")[0]==="audio")return t.loaded=!0,t.handler={is:S(M),attrs:{tx:o.tx},containerAttrs:{class:["iframe-container"]}};if(o.tx.data.size>104857600&&!t.intent)return t.handler="intent";if(l["Content-Type"]?.split("/")[0]==="image")return t.handler={is:S(we),attrs:{src:a.value},containerAttrs:{class:["img-container"]}};if(l["App-Name"]==="SmartWeaveContract"||l["App-Name"]==="SmartWeaveContractSource")return t.handler={is:"iframe",attrs:{src:v.value},containerAttrs:{class:["iframe-container","fixed-height"]}};t.handler="raw";try{if(l["Content-Type"]==="application/gzip")t.payload=await T(o.tx.id);else try{if(t.payload=(await j.api.get(o.tx.id)).data,t.payload[0]==="{")try{t.payload=JSON.stringify(JSON.parse(t.payload),null,2)}catch{}}catch{}}catch{}t.loaded=!0};async function T(l){const c=(await j.api.get(l,{responseType:"blob"})).data,m=new DecompressionStream("gzip"),I=c.stream().pipeThrough(m);return(await new Response(I).blob()).text()}return N(()=>o.tx.id,()=>{t.handler=void 0,t.payload=void 0,t.loaded=!1,t.intent=!1,k()},{immediate:!0}),N(()=>t.intent,()=>{t.intent&&k()}),(l,c)=>e(t).handler==="intent"?(n(),r("div",{key:0,onClick:c[0]||(c[0]=m=>e(t).intent=!0),class:"selector data-container min-height box",style:{display:"flex","justify-content":"center","padding-top":"5em"}},[_(de,{icon:e(fe)},{default:p(()=>[Le]),_:1},8,["icon"])])):e(t).handler==="raw"?(n(),r("div",Ce,[_($,null,{default:p(()=>[e(t).loaded?u("",!0):(n(),f(F,{key:0,class:"loader"}))]),_:1}),s("pre",$e,y(e(t).payload),1)])):e(t).handler?(n(),r("div",Re,[_($,null,{default:p(()=>[e(t).loaded?u("",!0):(n(),f(F,{key:0,class:"loader"}))]),_:1}),_($,null,{default:p(()=>[te(s("div",O(e(t).handler.containerAttrs,{class:"box"}),[(n(),f(se(e(t).handler.is),O(e(t).handler.attrs,{onLoad:c[1]||(c[1]=m=>e(t).loaded=!0)}),null,16))],16),[[ae,e(t).loaded]])]),_:1})])):u("",!0)}});var ze=D(De,[["__scopeId","data-v-54108982"]]);const x=d=>(le("data-v-29c7dd4f"),d=d(),re(),d),Be={key:0,style:{position:"relative",width:"100%","min-height":"var(--current-vh)",color:"var(--element-secondary)"}},Ne={key:0},Pe={key:1},je={class:"meta flex-column"},Ue={class:"box",style:{padding:"0"}},Ve={key:1,class:"spacer"},He={key:2,class:"divider"},Oe=x(()=>s("h3",null,"Transaction",-1)),qe={class:"flex-column"},Fe={key:0},We=["href"],Ge={key:1},Je=["href"],Me={class:"secondary-text"},Qe=g("ID:\xA0"),Ee={key:3},Ze=x(()=>s("h3",null,"Bundle",-1)),Ke={class:"flex-column"},Xe={class:"secondary-text"},Ye=g("ID:\xA0"),et={key:4},tt=x(()=>s("h3",null,"Pending",-1)),at={key:5},st=x(()=>s("h3",null,"Block",-1)),nt={key:0,class:"secondary-text"},ot=x(()=>s("div",{class:"spacer"},null,-1)),lt={class:"secondary-text"},rt=g("ID:\xA0"),it=x(()=>s("h3",null,"Data",-1)),dt=g(" Fee: "),ct={key:6},ut=x(()=>s("h3",null,"Tags",-1)),_t=[ut],ht={key:0,style:{background:"var(--background2)","border-radius":"var(--border-radius)"}},pt=R({props:{txId:null},setup(d){const o=d,t=W(q(o,"txId")),a=t.state,v=t.queryStatus,k=i(()=>a.value?.bundledIn?.id),l=W(k).state,c=i(()=>w.gatewayURL&&new URL(w.gatewayURL).hostname),m=i(()=>a.value?.bundledIn?.id||o.txId),I=_e({name:"single tx status",params:m,query:async h=>(await j.transactions.getStatus(h)).status,completed:h=>!m.value||a.value?.block||h&&h!==404,seconds:30}).state,U=i(()=>a.value?.owner&&G(a.value?.owner.address)),Z=i(()=>a.value?.recipient&&G(a.value?.recipient)),V=i(()=>a.value?.data?.size!=="0"),K=i(()=>!a.value?.block),X=i(()=>{if(!a.value?.block)return"";const h=new Date(a.value?.block.timestamp*1e3);return h.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})+" "+h.toLocaleTimeString()}),H=i(()=>L.value?.height&&a.value?.block?.height&&L.value?.height-a.value?.block?.height+1),A=i(()=>{if(!a.value?.tags)return;const h=[];for(const b of a.value?.tags)h.push({items:[{name:"",value:b.name,attrs:{disabled:!0}},{name:"",value:b.value,attrs:{disabled:!0}}]});return h}),Y=q(he.breakpoints,"verticalContent"),z=C(0);return N(a,(h,b)=>{if(!!b){if(b?.bundledIn?.id===o.txId)return z.value=-1;z.value=1}}),(h,b)=>(n(),f($,{vector:z.value,axis:"x"},{default:p(()=>[e(a)?(n(),f(pe,{key:d.txId},ne({left:p(()=>[s("div",je,[s("div",Ue,[s("div",{class:"box-padding flex-column",style:oe([e(A).length&&"padding-bottom: 0"])},[_(P,{tx:e(a),options:{half:!0}},null,8,["tx"]),e(a).recipient?(n(),f(J,{key:0,wallet:e(Z)},null,8,["wallet"])):u("",!0),e(a).recipient?(n(),r("div",Ve)):u("",!0),e(a).recipient?(n(),r("div",He)):u("",!0),_(J,{wallet:e(U)},null,8,["wallet"]),s("div",null,[Oe,s("div",qe,[s("div",null,[e(V)?(n(),r("div",Fe,[s("a",{href:e(w).gatewayURL+e(a).id,target:"_blank"},y(e(c)),9,We)])):u("",!0),e(a).data?.type==="application/x.arweave-manifest+json"?(n(),r("div",Ge,[s("a",{href:e(w).gatewayURL+"tx/"+e(a).id+"/data.json",target:"_blank"},"Manifest",8,Je)])):u("",!0)]),s("div",Me,[_(B,{tx:e(a).id},{default:p(()=>[Qe]),_:1},8,["tx"])])])]),e(a).bundledIn?.id?(n(),r("div",Ee,[Ze,s("div",Ke,[e(l)?(n(),f(P,{key:0,tx:e(l),options:{space:!0}},null,8,["tx"])):u("",!0),s("div",Xe,[_(B,{tx:e(a).bundledIn?.id},{default:p(()=>[Ye]),_:1},8,["tx"])])])])):u("",!0),e(K)?(n(),r("div",et,[tt,s("div",null,"Status: "+y(e(I)?e(I):"..."),1)])):(n(),r("div",at,[st,s("div",null,[g(" Height: "+y(e(a).block.height)+" ",1),e(L)?.height?(n(),r("span",nt,"/ "+y(e(L).height)+" ("+y(e(H))+" confirmation"+y(e(H)>1?"s":"")+")",1)):u("",!0)]),s("div",null,y(e(X)),1),ot,s("div",lt,[_(B,{block:e(a).block.id},{default:p(()=>[rt]),_:1},8,["block"])])])),s("div",null,[it,s("div",null,"Size: "+y(e(ve)(e(a).data.size)),1),s("div",null,[dt,_(me,{ar:e(a).fee.ar},null,8,["ar"])])]),e(A).length?(n(),r("div",ct,_t)):u("",!0)],4),e(A).length?(n(),r("div",ht,[_(ye,{schema:e(A),disabled:""},null,8,["schema"])])):u("",!0)])])]),_:2},[e(a)&&e(V)?{name:"right",fn:p(()=>[_(ze,{tx:e(a),class:Q({inline:!e(Y)})},null,8,["tx","class"])])}:void 0]),1024)):(n(),r("div",Be,[_(ge,{options:{icon:"loader"},class:"box"},{default:p(()=>[e(v).error?(n(),r("h2",Ne,y(e(v).error),1)):(n(),r("h2",Pe,"Loading"))]),_:1})]))]),_:1},8,["vector"]))}});var xt=D(pt,[["__scopeId","data-v-29c7dd4f"]]);export{xt as default};
//# sourceMappingURL=Tx.880f6bb9.js.map
