import{_ as $,d as D,r as z,c as d,o as s,a as m,w as v,b as n,n as K,u as e,e as te,f as U,g as c,A as k,h as y,i as ae,j as ne,k as V,m as C,L as se,l as oe,T as P,p as T,q as u,B as ie,s as W,t as _,v as A,x as p,y as re,z as ce,C as de,D as F,E as J,F as E,G as le,I as ue,H as ve,J as he,K as pe,M as N,N as L,O as _e,P as fe,Q as me,R as ge,S as xe,U as M}from"./index.fa6a8128.js";import{I as ye}from"./download.6473874d.js";import{P as Q}from"./ProfilePreview.b0633ba8.js";import{O as be}from"./OverlayPrompt.0e6e35df.js";const we={class:"frame-scroller"},ke=["src"],Ie=D({props:["src"],emits:["load"],setup(l,{emit:o}){const h=z(null),a=z(null),t=z(null),g=i=>{console.log(i),a.value=i.contentRect.width/i.contentRect.height},I=()=>{t.value=h.value&&h.value.naturalWidth/h.value.naturalHeight,o("load")},w=d(()=>a.value&&t.value&&a.value<t.value),r=d(()=>a.value&&t.value&&a.value>=t.value);return(i,x)=>(s(),m(te,{onResize:g,class:K(["img",{x:e(w),y:e(r)}])},{default:v(()=>[n("div",we,[n("img",{ref_key:"imgRef",ref:h,src:l.src,onLoad:I},null,40,ke)])]),_:1},8,["class"]))}});var Se=$(Ie,[["__scopeId","data-v-0f93abca"]]);const Ce={controls:""},Te=["src","type"],Ae=y(" Not supported "),ze=D({props:{tx:null},setup(l){const o=l,h=d(()=>U(o.tx.tags));return(a,t)=>(s(),c("video",Ce,[n("source",{src:e(k).gatewayURL+l.tx.id,type:e(h)["Content-Type"]},null,8,Te),Ae]))}});var G=$(ze,[["__scopeId","data-v-67247f52"]]);const Le=y("Load large file"),$e={key:"json",class:"selector data-container min-height box"},De={key:1,class:"raw"},Re={key:2,class:"selector"},je=D({props:["tx"],setup(l){const o=l;ae(r=>({"7f3de542":g.value}));const h=d(()=>k.gatewayURL+o.tx.id),a=d(()=>"https://arcode.studio/#/"+o.tx.id+"?theme=dark-blue&hideToolbar=true"),t=ne({handler:void 0,payload:void 0,loaded:!1,intent:!1}),g=z(void 0);V(()=>o.tx.id,()=>{t.handler=void 0,t.payload=void 0,t.loaded=!1,t.intent=!1,g.value="pre-wrap",I()},{immediate:!0}),V(()=>t.intent,()=>t.intent&&I());async function I(){if(!o.tx||o.tx.data?.size==="0"||o.tx.data?.size==null)return;const r=U(o.tx.tags);if(r["Bundle-Version"])return t.loaded=!0,t.handler={is:C(se),attrs:{query:oe({bundledIn:o.tx.id}),component:C(P),componentProps:{options:{space:!0}},class:["column"]},containerAttrs:{class:["data-container","column-container","padding"]}};if(r["Content-Type"]==="application/x.arweave-manifest+json"||r["Content-Type"]==="text/html"||r["Content-Type"]==="application/pdf")return t.handler={is:"iframe",attrs:{src:h.value,class:["hover"]},containerAttrs:{class:["iframe-container","fixed-height"]}};if(r["Content-Type"]?.split("/")[0]==="video")return t.loaded=!0,t.handler={is:C(G),attrs:{tx:o.tx},containerAttrs:{class:["iframe-container"]}};if(r["Content-Type"]?.split("/")[0]==="audio")return t.loaded=!0,t.handler={is:C(G),attrs:{tx:o.tx},containerAttrs:{class:["iframe-container"]}};if(o.tx.data.size>104857600&&!t.intent)return t.handler="intent";if(r["Content-Type"]?.split("/")[0]==="image")return t.handler={is:C(Se),attrs:{src:h.value},containerAttrs:{class:["img-container"]}};if(r["App-Name"]==="SmartWeaveContract"||r["App-Name"]==="SmartWeaveContractSource")return t.handler={is:"iframe",attrs:{src:a.value},containerAttrs:{class:["iframe-container","fixed-height"]}};t.handler="raw";try{r["Content-Type"]==="application/gzip"&&(t.payload??=await w(o.tx.id))}catch(i){console.error(i)}try{t.payload??=(await T.api.get(o.tx.id)).data}catch{}try{t.payload??=await T.transactions.getData(o.tx.id,{decode:!0,string:!0})}catch{}if(t.payload?.[0]==="{"||t.payload?.[0]==="[")try{t.payload=JSON.stringify(JSON.parse(t.payload),null,2),g.value="pre"}catch{}t.loaded=!0}async function w(r){let i;try{i??=(await T.api.get(r,{responseType:"blob"})).data}catch{}try{i??=new Blob([await T.transactions.getData(r,{decode:!0})])}catch{}const x=new DecompressionStream("gzip"),R=i.stream().pipeThrough(x);return(await new Response(R).blob()).text()}return(r,i)=>(s(),m(A,null,{default:v(()=>[e(t).handler==="intent"?(s(),c("div",{key:0,onClick:i[0]||(i[0]=x=>e(t).intent=!0),class:"selector data-container min-height box",style:{display:"flex","justify-content":"center","padding-top":"5em"}},[u(ie,{icon:e(ye)},{default:v(()=>[Le]),_:1},8,["icon"])])):e(t).handler==="raw"?(s(),c("div",$e,[u(A,null,{default:v(()=>[e(t).loaded?(s(),c("pre",De,_(e(t).payload),1)):(s(),m(W,{key:0,class:"loader"}))]),_:1})])):e(t).handler?(s(),c("div",Re,[u(A,null,{default:v(()=>[e(t).loaded?p("",!0):(s(),m(W,{key:0,class:"loader"}))]),_:1}),u(A,null,{default:v(()=>[re(n("div",F(e(t).handler.containerAttrs,{class:"box"}),[(s(),m(de(e(t).handler.is),F(e(t).handler.attrs,{onLoad:i[1]||(i[1]=x=>e(t).loaded=!0)}),null,16))],16),[[ce,e(t).loaded]])]),_:1})])):p("",!0)]),_:1}))}});var Be=$(je,[["__scopeId","data-v-6cc786c4"]]);const b=l=>(ge("data-v-fc42a4e6"),l=l(),xe(),l),Ne={key:0,style:{position:"relative",width:"100%","min-height":"var(--current-vh)",color:"var(--element-secondary)"}},Ve={key:0},Pe={key:1},Ue={class:"meta flex-column"},He={class:"box",style:{padding:"0"}},Oe={key:1,class:"spacer"},qe={key:2,class:"divider"},We=b(()=>n("h3",null,"Transaction",-1)),Fe={class:"flex-column"},Je={key:0},Ee=["href"],Me={key:1},Qe=["href"],Ge={class:"secondary-text"},Ke=y("ID:\xA0"),Xe={key:3},Ye=b(()=>n("h3",null,"Bundle",-1)),Ze={class:"flex-column"},et={class:"secondary-text"},tt=y("ID:\xA0"),at={key:4},nt=b(()=>n("h3",null,"Pending",-1)),st={key:5},ot=b(()=>n("h3",null,"Block",-1)),it={key:0,class:"secondary-text"},rt=b(()=>n("div",{class:"spacer"},null,-1)),ct={class:"secondary-text"},dt=y("ID:\xA0"),lt=b(()=>n("h3",null,"Data",-1)),ut=y(" Fee: "),vt={key:6},ht=b(()=>n("h3",null,"Tags",-1)),pt=[ht],_t={key:0,style:{background:"var(--background2)","border-radius":"var(--border-radius)"}},ft=D({props:{txId:null},setup(l){const o=l,h=J(E(o,"txId")),a=h.state,t=h.queryStatus,g=d(()=>a.value?.bundledIn?.id),w=J(g).state,r=d(()=>k.gatewayURL&&new URL(k.gatewayURL).hostname),i=d(()=>a.value?.bundledIn?.id||o.txId),x=le({name:"single tx status",params:i,query:async f=>(await T.transactions.getStatus(f)).status,completed:f=>!i.value||a.value?.block||f&&f!==404,seconds:30}).state,R=d(()=>a.value?.owner&&M(a.value?.owner.address)),H=d(()=>a.value?.recipient&&M(a.value?.recipient)),j=d(()=>U(a.value?.tags||[])["Content-Type"]),O=d(()=>a.value?.data?.size!=="0"),X=d(()=>!a.value?.block),Y=d(()=>{if(!a.value?.block)return"";const f=new Date(a.value?.block.timestamp*1e3);return f.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})+" "+f.toLocaleTimeString()}),q=d(()=>L.value?.height&&a.value?.block?.height&&L.value?.height-a.value?.block?.height+1),Z=E(ue.breakpoints,"verticalContent"),B=z(0);return V(a,(f,S)=>{if(!!S){if(S?.bundledIn?.id===o.txId)return B.value=-1;B.value=1}}),(f,S)=>(s(),m(A,{vector:B.value,axis:"x"},{default:v(()=>[e(a)?(s(),m(ve,{key:l.txId},he({left:v(()=>[n("div",Ue,[n("div",He,[n("div",{class:"box-padding flex-column",style:pe([e(a).tags.length&&"padding-bottom: 0"])},[u(P,{tx:e(a),options:{half:!0}},null,8,["tx"]),e(a).recipient?(s(),m(Q,{key:0,wallet:e(H)},null,8,["wallet"])):p("",!0),e(a).recipient?(s(),c("div",Oe)):p("",!0),e(a).recipient?(s(),c("div",qe)):p("",!0),u(Q,{wallet:e(R)},null,8,["wallet"]),n("div",null,[We,n("div",Fe,[e(O)?(s(),c("div",Je,[n("a",{href:e(k).gatewayURL+e(a).id,target:"_blank"},_(e(r)),9,Ee)])):p("",!0),e(j)==="application/x.arweave-manifest+json"?(s(),c("div",Me,[n("a",{href:e(k).gatewayURL+"tx/"+e(a).id+"/data.json",target:"_blank"},"Manifest",8,Qe)])):p("",!0),n("div",Ge,[u(N,{tx:e(a).id},{default:v(()=>[Ke]),_:1},8,["tx"])])])]),e(a).bundledIn?.id?(s(),c("div",Xe,[Ye,n("div",Ze,[e(w)?(s(),m(P,{key:0,tx:e(w),options:{space:!0}},null,8,["tx"])):p("",!0),n("div",et,[u(N,{tx:e(a).bundledIn?.id},{default:v(()=>[tt]),_:1},8,["tx"])])])])):p("",!0),e(X)?(s(),c("div",at,[nt,n("div",null,"Status: "+_(e(x)?e(x):"..."),1)])):(s(),c("div",st,[ot,n("div",null,[y(" Height: "+_(e(a).block.height)+" ",1),e(L)?.height?(s(),c("span",it,"/ "+_(e(L).height)+" ("+_(e(q))+" confirmation"+_(e(q)>1?"s":"")+")",1)):p("",!0)]),n("div",null,_(e(Y)),1),rt,n("div",ct,[u(N,{block:e(a).block.id},{default:v(()=>[dt]),_:1},8,["block"])])])),n("div",null,[lt,n("div",null,"Size: "+_(e(_e)(e(a).data.size)),1),n("div",null,[ut,u(fe,{ar:e(a).fee.ar},null,8,["ar"])])]),e(a).tags.length?(s(),c("div",vt,pt)):p("",!0)],4),e(a).tags.length?(s(),c("div",_t,[u(me,{modelValue:e(a).tags,"onUpdate:modelValue":S[0]||(S[0]=ee=>e(a).tags=ee),disabled:""},null,8,["modelValue"])])):p("",!0)])])]),_:2},[e(a)&&e(O)?{name:"right",fn:v(()=>[u(Be,{tx:e(a),class:K({inline:!e(Z)})},null,8,["tx","class"])])}:void 0]),1024)):(s(),c("div",Ne,[u(be,{options:{icon:"loader"},class:"box"},{default:v(()=>[e(t).error?(s(),c("h2",Ve,_(e(t).error),1)):(s(),c("h2",Pe,"Loading"))]),_:1})]))]),_:1},8,["vector"]))}});var bt=$(ft,[["__scopeId","data-v-fc42a4e6"]]);export{bt as default};
//# sourceMappingURL=Tx.cf258816.js.map
