import{h as z,r as L,d,j as n,H as y,I as _,l as s,O as G,u as e,k as i,P as x,ap as ee,a as te,w as U,ae as T,N as u,Q as m,R as v,V as ae,W as se,U as ne,a3 as W,M as q,aq as oe,p as le,a4 as re,a5 as ie}from"./vendor.76e2db1c.js";import{_ as B,a as de,u as K,A as I,L as ce,b as ue,T as V,c as A,B as _e,d as F,e as C,f as J,g as pe,I as he,F as ve,h as j,n as D,i as me,j as ye,k as fe,l as M}from"./index.b80d154e.js";import{I as ge}from"./download.239b2355.js";import{P as Q}from"./ProfilePreview.2eb6f8dc.js";import{O as xe}from"./OverlayPrompt.eaae788a.js";const be={class:"frame-scroller"},ke=["src"],we=z({props:["src"],emits:["load"],setup(c,{emit:o}){const p=L(null),a=L(null),t=L(null),f=l=>{console.log(l),a.value=l.contentRect.width/l.contentRect.height},S=()=>{t.value=p.value&&p.value.naturalWidth/p.value.naturalHeight,o("load")},k=d(()=>a.value&&t.value&&a.value<t.value),r=d(()=>a.value&&t.value&&a.value>=t.value);return(l,g)=>(n(),y(de,{onResize:f,class:G(["img",{x:e(k),y:e(r)}])},{default:_(()=>[s("div",be,[s("img",{ref_key:"imgRef",ref:p,src:c.src,onLoad:S},null,40,ke)])]),_:1},8,["class"]))}});var Ie=B(we,[["__scopeId","data-v-0f93abca"]]);const Se={controls:""},Te=["src","type"],Ae=x(" Not supported "),Ce=z({props:{tx:null},setup(c){const o=c,p=d(()=>K(o.tx.tags));return(a,t)=>(n(),i("video",Se,[s("source",{src:e(I).gatewayURL+c.tx.id,type:e(p)["Content-Type"]},null,8,Te),Ae]))}});var E=B(Ce,[["__scopeId","data-v-67247f52"]]);const Le=x("Load large file"),Re={key:"json",class:"selector data-container min-height box"},$e={key:1,class:"raw"},De={key:2,class:"selector"},ze=z({props:["tx"],setup(c){const o=c;ee(r=>({"238bea0f":f.value}));const p=d(()=>I.gatewayURL+o.tx.id),a=d(()=>"https://arcode.studio/#/"+o.tx.id+"?theme=dark-blue&hideToolbar=true"),t=te({handler:void 0,payload:void 0,loaded:!1,intent:!1}),f=L(void 0);U(()=>o.tx.id,()=>{t.handler=void 0,t.payload=void 0,t.loaded=!1,t.intent=!1,f.value="pre-wrap",S()},{immediate:!0}),U(()=>t.intent,()=>t.intent&&S());async function S(){if(!o.tx||o.tx.data?.size==="0"||o.tx.data?.size==null)return;const r=K(o.tx.tags);if(r["Bundle-Version"])return t.loaded=!0,t.handler={is:T(ce),attrs:{query:ue({bundledIn:o.tx.id}),component:T(V),componentProps:{options:{space:!0}},class:["column"]},containerAttrs:{class:["data-container","column-container","padding"]}};if(r["Content-Type"]==="application/x.arweave-manifest+json"||r["Content-Type"]==="text/html"||r["Content-Type"]==="application/pdf")return t.handler={is:"iframe",attrs:{src:p.value,class:["hover"]},containerAttrs:{class:["iframe-container","fixed-height"]}};if(r["Content-Type"]?.split("/")[0]==="video")return t.loaded=!0,t.handler={is:T(E),attrs:{tx:o.tx},containerAttrs:{class:["iframe-container"]}};if(r["Content-Type"]?.split("/")[0]==="audio")return t.loaded=!0,t.handler={is:T(E),attrs:{tx:o.tx},containerAttrs:{class:["iframe-container"]}};if(o.tx.data.size>104857600&&!t.intent)return t.handler="intent";if(r["Content-Type"]?.split("/")[0]==="image")return t.handler={is:T(Ie),attrs:{src:p.value},containerAttrs:{class:["img-container"]}};if(r["App-Name"]==="SmartWeaveContract"||r["App-Name"]==="SmartWeaveContractSource")return t.handler={is:"iframe",attrs:{src:a.value},containerAttrs:{class:["iframe-container","fixed-height"]}};t.handler="raw";try{r["Content-Type"]==="application/gzip"&&(t.payload??=await k(o.tx.id))}catch(l){console.error(l)}try{t.payload??=(await A.api.get(o.tx.id)).data}catch{}try{t.payload??=await A.transactions.getData(o.tx.id,{decode:!0,string:!0})}catch{}if(t.payload[0]==="{"||t.payload[0]==="[")try{t.payload=JSON.stringify(JSON.parse(t.payload),null,2),f.value="pre"}catch{}t.loaded=!0}async function k(r){let l;try{l??=(await A.api.get(r,{responseType:"blob"})).data}catch{}try{l??=new Blob([await A.transactions.getData(r,{decode:!0})])}catch{}const g=new DecompressionStream("gzip"),N=l.stream().pipeThrough(g);return(await new Response(N).blob()).text()}return(r,l)=>(n(),y(C,null,{default:_(()=>[e(t).handler==="intent"?(n(),i("div",{key:0,onClick:l[0]||(l[0]=g=>e(t).intent=!0),class:"selector data-container min-height box",style:{display:"flex","justify-content":"center","padding-top":"5em"}},[u(_e,{icon:e(ge)},{default:_(()=>[Le]),_:1},8,["icon"])])):e(t).handler==="raw"?(n(),i("div",Re,[u(C,null,{default:_(()=>[e(t).loaded?(n(),i("pre",$e,m(e(t).payload),1)):(n(),y(F,{key:0,class:"loader"}))]),_:1})])):e(t).handler?(n(),i("div",De,[u(C,null,{default:_(()=>[e(t).loaded?v("",!0):(n(),y(F,{key:0,class:"loader"}))]),_:1}),u(C,null,{default:_(()=>[ae(s("div",W(e(t).handler.containerAttrs,{class:"box"}),[(n(),y(ne(e(t).handler.is),W(e(t).handler.attrs,{onLoad:l[1]||(l[1]=g=>e(t).loaded=!0)}),null,16))],16),[[se,e(t).loaded]])]),_:1})])):v("",!0)]),_:1}))}});var Be=B(ze,[["__scopeId","data-v-7a7714f9"]]);const b=c=>(re("data-v-29c7dd4f"),c=c(),ie(),c),Ne={key:0,style:{position:"relative",width:"100%","min-height":"var(--current-vh)",color:"var(--element-secondary)"}},Pe={key:0},je={key:1},Ue={class:"meta flex-column"},Ve={class:"box",style:{padding:"0"}},He={key:1,class:"spacer"},Oe={key:2,class:"divider"},We=b(()=>s("h3",null,"Transaction",-1)),qe={class:"flex-column"},Fe={key:0},Je=["href"],Me={key:1},Qe=["href"],Ee={class:"secondary-text"},Ge=x("ID:\xA0"),Ke={key:3},Xe=b(()=>s("h3",null,"Bundle",-1)),Ye={class:"flex-column"},Ze={class:"secondary-text"},et=x("ID:\xA0"),tt={key:4},at=b(()=>s("h3",null,"Pending",-1)),st={key:5},nt=b(()=>s("h3",null,"Block",-1)),ot={key:0,class:"secondary-text"},lt=b(()=>s("div",{class:"spacer"},null,-1)),rt={class:"secondary-text"},it=x("ID:\xA0"),dt=b(()=>s("h3",null,"Data",-1)),ct=x(" Fee: "),ut={key:6},_t=b(()=>s("h3",null,"Tags",-1)),pt=[_t],ht={key:0,style:{background:"var(--background2)","border-radius":"var(--border-radius)"}},vt=z({props:{txId:null},setup(c){const o=c,p=J(q(o,"txId")),a=p.state,t=p.queryStatus,f=d(()=>a.value?.bundledIn?.id),k=J(f).state,r=d(()=>I.gatewayURL&&new URL(I.gatewayURL).hostname),l=d(()=>a.value?.bundledIn?.id||o.txId),g=pe({name:"single tx status",params:l,query:async h=>(await A.transactions.getStatus(h)).status,completed:h=>!l.value||a.value?.block||h&&h!==404,seconds:30}).state,N=d(()=>a.value?.owner&&M(a.value?.owner.address)),H=d(()=>a.value?.recipient&&M(a.value?.recipient)),R=d(()=>a.value?.data?.size!=="0"),X=d(()=>!a.value?.block),Y=d(()=>{if(!a.value?.block)return"";const h=new Date(a.value?.block.timestamp*1e3);return h.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})+" "+h.toLocaleTimeString()}),O=d(()=>D.value?.height&&a.value?.block?.height&&D.value?.height-a.value?.block?.height+1),$=d(()=>{if(!a.value?.tags)return;const h=[];for(const w of a.value?.tags)h.push({items:[{name:"",value:w.name,attrs:{disabled:!0}},{name:"",value:w.value,attrs:{disabled:!0}}]});return h}),Z=q(he.breakpoints,"verticalContent"),P=L(0);return U(a,(h,w)=>{if(!!w){if(w?.bundledIn?.id===o.txId)return P.value=-1;P.value=1}}),(h,w)=>(n(),y(C,{vector:P.value,axis:"x"},{default:_(()=>[e(a)?(n(),y(ve,{key:c.txId},oe({left:_(()=>[s("div",Ue,[s("div",Ve,[s("div",{class:"box-padding flex-column",style:le([e($).length&&"padding-bottom: 0"])},[u(V,{tx:e(a),options:{half:!0}},null,8,["tx"]),e(a).recipient?(n(),y(Q,{key:0,wallet:e(H)},null,8,["wallet"])):v("",!0),e(a).recipient?(n(),i("div",He)):v("",!0),e(a).recipient?(n(),i("div",Oe)):v("",!0),u(Q,{wallet:e(N)},null,8,["wallet"]),s("div",null,[We,s("div",qe,[s("div",null,[e(R)?(n(),i("div",Fe,[s("a",{href:e(I).gatewayURL+e(a).id,target:"_blank"},m(e(r)),9,Je)])):v("",!0),e(a).data?.type==="application/x.arweave-manifest+json"?(n(),i("div",Me,[s("a",{href:e(I).gatewayURL+"tx/"+e(a).id+"/data.json",target:"_blank"},"Manifest",8,Qe)])):v("",!0)]),s("div",Ee,[u(j,{tx:e(a).id},{default:_(()=>[Ge]),_:1},8,["tx"])])])]),e(a).bundledIn?.id?(n(),i("div",Ke,[Xe,s("div",Ye,[e(k)?(n(),y(V,{key:0,tx:e(k),options:{space:!0}},null,8,["tx"])):v("",!0),s("div",Ze,[u(j,{tx:e(a).bundledIn?.id},{default:_(()=>[et]),_:1},8,["tx"])])])])):v("",!0),e(X)?(n(),i("div",tt,[at,s("div",null,"Status: "+m(e(g)?e(g):"..."),1)])):(n(),i("div",st,[nt,s("div",null,[x(" Height: "+m(e(a).block.height)+" ",1),e(D)?.height?(n(),i("span",ot,"/ "+m(e(D).height)+" ("+m(e(O))+" confirmation"+m(e(O)>1?"s":"")+")",1)):v("",!0)]),s("div",null,m(e(Y)),1),lt,s("div",rt,[u(j,{block:e(a).block.id},{default:_(()=>[it]),_:1},8,["block"])])])),s("div",null,[dt,s("div",null,"Size: "+m(e(me)(e(a).data.size)),1),s("div",null,[ct,u(ye,{ar:e(a).fee.ar},null,8,["ar"])])]),e($).length?(n(),i("div",ut,pt)):v("",!0)],4),e($).length?(n(),i("div",ht,[u(fe,{schema:e($),disabled:""},null,8,["schema"])])):v("",!0)])])]),_:2},[e(a)&&e(R)?{name:"right",fn:_(()=>[u(Be,{tx:e(a),class:G({inline:!e(Z)})},null,8,["tx","class"])])}:void 0]),1024)):(n(),i("div",Ne,[u(xe,{options:{icon:"loader"},class:"box"},{default:_(()=>[e(t).error?(n(),i("h2",Pe,m(e(t).error),1)):(n(),i("h2",je,"Loading"))]),_:1})]))]),_:1},8,["vector"]))}});var bt=B(vt,[["__scopeId","data-v-29c7dd4f"]]);export{bt as default};
//# sourceMappingURL=Tx.f56f66c0.js.map
