import{p as T,d as C,e as l,o as n,C as f,z as p,a as s,R as W,u as e,c as r,a7 as g,r as X,w as z,y as _,Y as m,H as u,E as Z,G as ee,a9 as H,a2 as te,af as A,P as V,ak as ae,s as se,a3 as ne,a4 as oe}from"./vendor.5d376ebc.js";import{_ as $,a as re,u as E,A as w,B as le,L as ie,b as j,c as de,d as ce,T as N,e as G,f as O,g as ue,I as _e,F as he,h as B,n as L,i as ve,j as pe,k as me,l as q}from"./index.3d0616b9.js";import{I as ye}from"./download.9306b66a.js";import{P as F}from"./ProfilePreview.8cc91253.js";import{O as fe}from"./OverlayPrompt.b0b952ea.js";const ge={class:"frame-scroller"},xe=["src"],ke=T({props:["src"],emits:["load"],setup(i,{emit:o}){const t=C(null),a=C(null),h=C(null),k=y=>{console.log(y),a.value=y.contentRect.width/y.contentRect.height},d=()=>{h.value=t.value&&t.value.naturalWidth/t.value.naturalHeight,o("load")},v=l(()=>a.value&&h.value&&a.value<h.value),I=l(()=>a.value&&h.value&&a.value>=h.value);return(y,R)=>(n(),f(re,{onResize:k,class:W(["img",{x:e(v),y:e(I)}])},{default:p(()=>[s("div",ge,[s("img",{ref_key:"imgRef",ref:t,src:i.src,onLoad:d},null,40,xe)])]),_:1},8,["class"]))}});var be=$(ke,[["__scopeId","data-v-0f93abca"]]);const we={controls:""},Ie=["src","type"],Se=g(" Not supported "),Ae=T({props:{tx:null},setup(i){const o=i,t=l(()=>E(o.tx.tags));return(a,h)=>(n(),r("video",we,[s("source",{src:e(w).gatewayURL+i.tx.id,type:e(t)["Content-Type"]},null,8,Ie),Se]))}});var Le=$(Ae,[["__scopeId","data-v-67247f52"]]);const Ce=g("Load large file"),Te={key:"json",class:"selector data-container min-height box"},$e={class:"raw"},Re={key:2,class:"selector"},De=T({props:["tx"],setup(i){const o=i,t=X({handler:void 0,payload:void 0,loaded:!1,intent:!1}),a=l(()=>w.gatewayURL+o.tx.id),h=l(()=>"https://arcode.studio/#/"+o.tx.id+"?theme=dark-blue&hideToolbar=true"),k=async()=>{if(!o.tx||o.tx.data?.size==="0"||o.tx.data?.size==null)return;const d=E(o.tx.tags);if(d["Bundle-Version"])return t.loaded=!0,t.handler={is:A(de),attrs:{query:ce({bundledIn:o.tx.id}),component:A(N),componentProps:{options:{space:!0}},class:["column"]},containerAttrs:{class:["data-container","column-container","padding"]}};if(d["Content-Type"]==="application/x.arweave-manifest+json"||d["Content-Type"]==="text/html"||d["Content-Type"]==="application/pdf")return t.handler={is:"iframe",attrs:{src:a.value,class:["hover"]},containerAttrs:{class:["iframe-container","fixed-height"]}};if(d["Content-Type"]?.split("/")[0]==="video")return t.loaded=!0,t.handler={is:A(Le),attrs:{tx:o.tx},containerAttrs:{class:["iframe-container"]}};if(o.tx.data.size>104857600&&!t.intent)return t.handler="intent";if(d["Content-Type"]?.split("/")[0]==="image")return t.handler={is:A(be),attrs:{src:a.value},containerAttrs:{class:["img-container"]}};if(d["App-Name"]==="SmartWeaveContract"||d["App-Name"]==="SmartWeaveContractSource")return t.handler={is:"iframe",attrs:{src:h.value},containerAttrs:{class:["iframe-container","fixed-height"]}};t.handler="raw";try{if(t.payload=(await G.api.get(o.tx.id)).data,t.payload[0]==="{")try{t.payload=JSON.stringify(JSON.parse(t.payload),null,2),t.handler="json"}catch{}}catch{}};return z(()=>o.tx.id,()=>{t.handler=void 0,t.payload=void 0,t.loaded=!1,t.intent=!1,k()},{immediate:!0}),z(()=>t.intent,()=>{t.intent&&k()}),(d,v)=>e(t).handler==="intent"?(n(),r("div",{key:0,onClick:v[0]||(v[0]=I=>e(t).intent=!0),class:"selector data-container min-height box",style:{display:"flex","justify-content":"center","padding-top":"5em"}},[_(le,{icon:e(ye)},{default:p(()=>[Ce]),_:1},8,["icon"])])):e(t).handler==="json"||e(t).handler==="raw"?(n(),r("div",Te,[s("pre",$e,m(e(t).payload),1)])):e(t).handler?(n(),r("div",Re,[_(j,null,{default:p(()=>[e(t).loaded?u("",!0):(n(),f(ie,{key:0,class:"loader"}))]),_:1}),_(j,null,{default:p(()=>[Z(s("div",H(e(t).handler.containerAttrs,{class:"box"}),[(n(),f(te(e(t).handler.is),H(e(t).handler.attrs,{onLoad:v[1]||(v[1]=I=>e(t).loaded=!0)}),null,16))],16),[[ee,e(t).loaded]])]),_:1})])):u("",!0)}});var Be=$(De,[["__scopeId","data-v-6d1357dc"]]);const x=i=>(ne("data-v-54c2c274"),i=i(),oe(),i),ze={key:0,style:{position:"relative",width:"100%","min-height":"var(--current-vh)",color:"var(--element-secondary)"}},je={key:0},Ne={key:1},Pe={class:"meta flex-column"},Ue={class:"box",style:{padding:"0"}},He={key:1,class:"spacer"},Ve={key:2,class:"divider"},Oe=x(()=>s("h3",null,"Transaction",-1)),qe={class:"flex-column"},Fe={key:0},We=["href"],Ee={key:1},Ge=["href"],Je={class:"secondary-text"},Me=g("ID:\xA0"),Qe={key:3},Ye=x(()=>s("h3",null,"Bundle",-1)),Ke={class:"flex-column"},Xe={class:"secondary-text"},Ze=g("ID:\xA0"),et={key:4},tt=x(()=>s("h3",null,"Pending",-1)),at={key:5},st=x(()=>s("h3",null,"Block",-1)),nt={key:0,class:"secondary-text"},ot=x(()=>s("div",{class:"spacer"},null,-1)),rt={class:"secondary-text"},lt=g("ID:\xA0"),it=x(()=>s("h3",null,"Data",-1)),dt=g(" Fee: "),ct={key:6},ut=x(()=>s("h3",null,"Tags",-1)),_t=[ut],ht={key:0,style:{background:"var(--background2)","border-radius":"var(--border-radius)"}},vt=T({props:{txId:null},setup(i){const o=i,t=O(V(o,"txId")),a=t.state,h=t.queryStatus,k=l(()=>a.value?.bundledIn?.id),v=O(k).state,I=l(()=>w.gatewayURL&&new URL(w.gatewayURL).hostname),y=l(()=>a.value?.bundledIn?.id||o.txId),R=ue({name:"single tx status",params:y,query:async c=>(await G.transactions.getStatus(c)).status,completed:c=>!y.value||a.value?.block||c&&c!==404,seconds:30}).state,J=l(()=>a.value?.owner&&q(a.value?.owner.address)),M=l(()=>a.value?.recipient&&q(a.value?.recipient)),P=l(()=>a.value?.data?.size!=="0"),Q=l(()=>!a.value?.block),Y=l(()=>{if(!a.value?.block)return"";const c=new Date(a.value?.block.timestamp*1e3);return c.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})+" "+c.toLocaleTimeString()}),U=l(()=>L.value?.height&&a.value?.block?.height&&L.value?.height-a.value?.block?.height+1),S=l(()=>{if(!a.value?.tags)return;const c=[];for(const b of a.value?.tags)c.push({items:[{name:"",value:b.name,attrs:{disabled:!0}},{name:"",value:b.value,attrs:{disabled:!0}}]});return c}),K=V(_e.breakpoints,"verticalContent"),D=C(0);return z(a,(c,b)=>{if(!!b){if(b?.bundledIn?.id===o.txId)return D.value=-1;D.value=1}}),(c,b)=>(n(),f(j,{vector:D.value,axis:"x"},{default:p(()=>[e(a)?(n(),f(he,{key:i.txId},ae({left:p(()=>[s("div",Pe,[s("div",Ue,[s("div",{class:"box-padding flex-column",style:se([e(S).length&&"padding-bottom: 0"])},[_(N,{tx:e(a),options:{half:!0}},null,8,["tx"]),e(a).recipient?(n(),f(F,{key:0,wallet:e(M)},null,8,["wallet"])):u("",!0),e(a).recipient?(n(),r("div",He)):u("",!0),e(a).recipient?(n(),r("div",Ve)):u("",!0),_(F,{wallet:e(J)},null,8,["wallet"]),s("div",null,[Oe,s("div",qe,[s("div",null,[e(P)?(n(),r("div",Fe,[s("a",{href:e(w).gatewayURL+e(a).id,target:"_blank"},m(e(I)),9,We)])):u("",!0),e(a).data?.type==="application/x.arweave-manifest+json"?(n(),r("div",Ee,[s("a",{href:e(w).gatewayURL+"tx/"+e(a).id+"/data.json",target:"_blank"},"Manifest",8,Ge)])):u("",!0)]),s("div",Je,[_(B,{address:e(a).id},{default:p(()=>[Me]),_:1},8,["address"])])])]),e(a).bundledIn?.id?(n(),r("div",Qe,[Ye,s("div",Ke,[e(v)?(n(),f(N,{key:0,tx:e(v),options:{space:!0}},null,8,["tx"])):u("",!0),s("div",Xe,[_(B,{address:e(a).bundledIn?.id},{default:p(()=>[Ze]),_:1},8,["address"])])])])):u("",!0),e(Q)?(n(),r("div",et,[tt,s("div",null,"Status: "+m(e(R)?e(R):"..."),1)])):(n(),r("div",at,[st,s("div",null,[g(" Height: "+m(e(a).block.height)+" ",1),e(L)?.height?(n(),r("span",nt,"/ "+m(e(L).height)+" ("+m(e(U))+" confirmation"+m(e(U)>1?"s":"")+")",1)):u("",!0)]),s("div",null,m(e(Y)),1),ot,s("div",rt,[_(B,{address:e(a).block.id},{default:p(()=>[lt]),_:1},8,["address"])])])),s("div",null,[it,s("div",null,"Size: "+m(e(ve)(e(a).data.size)),1),s("div",null,[dt,_(pe,{ar:e(a).fee.ar},null,8,["ar"])])]),e(S).length?(n(),r("div",ct,_t)):u("",!0)],4),e(S).length?(n(),r("div",ht,[_(me,{schema:e(S),disabled:""},null,8,["schema"])])):u("",!0)])])]),_:2},[e(a)&&e(P)?{name:"right",fn:p(()=>[_(Be,{tx:e(a),class:W({inline:!e(K)})},null,8,["tx","class"])])}:void 0]),1024)):(n(),r("div",ze,[_(fe,{options:{icon:"loader"},class:"box"},{default:p(()=>[e(h).error?(n(),r("h2",je,m(e(h).error),1)):(n(),r("h2",Ne,"Loading"))]),_:1})]))]),_:1},8,["vector"]))}});var xt=$(vt,[["__scopeId","data-v-54c2c274"]]);export{xt as default};
//# sourceMappingURL=Tx.7167df95.js.map
