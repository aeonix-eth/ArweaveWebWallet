{"version":3,"file":"Explore.5d19f5f2.js","sources":["../../src/functions/UtilsVue.ts","../../src/components/composed/GlobalSearch.vue"],"sourcesContent":["import { customRef } from 'vue'\n\nexport function useDebouncedRef<T>(value: T, delay = 200) {\n\tlet timeout: any\n\treturn customRef((track, trigger) => {\n\t\treturn {\n\t\t\tget() {\n\t\t\t\ttrack()\n\t\t\t\treturn value\n\t\t\t},\n\t\t\tset(newValue: T) {\n\t\t\t\tclearTimeout(timeout)\n\t\t\t\ttimeout = setTimeout(() => {\n\t\t\t\t\tvalue = newValue\n\t\t\t\t\ttrigger()\n\t\t\t\t}, delay)\n\t\t\t}\n\t\t}\n\t})\n}","<template>\n\t<div class=\"global-search\">\n\t\t<div class=\"input-container\">\n\t\t\t<Input v-model=\"search\" :actions=\"[searchAction]\" placeholder=\"Search - username, address, transaction id\" style=\"flex:1 1 0;\" />\n\t\t</div>\n\t\t<TransitionsManager>\n\t\t\t<div v-if=\"data.query?.length\" class=\"results input-box\">\n\t\t\t\t<List class=\"query-list input-box\">\n\t\t\t\t\t<List v-if=\"wallet\" class=\"flex-column\">\n\t\t\t\t\t\t<div class=\"secondary-text\">User</div>\n\t\t\t\t\t\t<ProfileCard :wallet=\"wallet\" compact=\"true\" />\n\t\t\t\t\t\t<div />\n\t\t\t\t\t</List>\n\t\t\t\t\t<div class=\"secondary-text\">Transactions</div>\n\t\t\t\t\t<div v-for=\"item in data.query\" :key=\"item\" class=\"result\">\n\t\t\t\t\t\t<TxCard :tx=\"item.node\" :current-address=\"wallet?.key\"></TxCard>\n\t\t\t\t\t</div>\n\t\t\t\t</List>\n\t\t\t</div>\n\t\t</TransitionsManager>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport Input from '@/components/atomic/Input.vue'\nimport List from '@/components/layout/List.vue'\nimport IconSearch from '@/assets/icons/search.svg?component'\nimport { computed, reactive, ref, watch } from 'vue'\nimport { arweaveQuery, queryAggregator } from '@/store/ArweaveStore'\nimport TxCard from '@/components/composed/TxCard.vue'\nimport TransitionsManager from '@/components/visual/TransitionsManager.vue'\nimport ProfileCard from '@/components/composed/ProfileCard.vue'\nimport { getAccountByAddress } from '@/functions/Wallets'\nimport { useDebouncedRef } from '@/functions/UtilsVue'\n\n\nconst search = useDebouncedRef('')\nconst isId = computed(() => search.value.match(/^[a-z0-9_-]{43}$/i))\nconst searchAction = { run: () => {}, icon: IconSearch }\n\nlet query: any\nconst data = ref({} as any)\nconst wallet = computed(() => isId.value && !data.value.idQuery?.state?.length && getAccountByAddress(search.value))\n\nwatch(search, () => {\n\tquery = undefined\n\tdata.value = {}\n\tif (isId.value) {\n\t\tconst idQuery = arweaveQuery({ ids: [search.value] })\n\t\tdata.value.idQuery = idQuery\n\t\tquery = queryAggregator([\n\t\t\tidQuery,\n\t\t\tarweaveQuery({ owner: search.value }),\n\t\t\tarweaveQuery({ target: search.value }),\n\t\t])\n\t}\n\telse if (search.value.length) { query = queryAggregator([\n\t\tarweaveQuery({ tags: { 'App-Name': 'arweave-id', 'Name': search.value } }),\n\t])}\n\tdata.value.query = query?.state\n\tquery?.fetchQuery.query()\n})\n</script>\n\n\n\n<style scoped>\n.global-search {\n\tposition: relative;\n}\n\n.input-container {\n\tbackground: var(--background2);\n\tborder-radius: var(--border-radius);\n\tposition: relative;\n\tz-index: 10;\n}\n\n.results {\n\ttop: calc(100% - var(--border-radius));\n\tbackground: var(--background2);\n\tborder-top-left-radius: 0;\n\tborder-top-right-radius: 0;\n\tposition: absolute;\n\twidth: 100%;\n\toverflow: hidden;\n\tz-index: 1;\n}\n\n.query-list {\n\tborder: 0;\n\tborder-radius: 0;\n\tpadding: var(--spacing);\n\t/*padding-top: var(--border-radius);*/\n}\n\n.result {\n}\n</style>"],"names":[],"mappings":"81BAEmC,EAAU,EAAQ,IAAK,IACrD,SACG,GAAU,CAAC,EAAO,IACjB,EACN,KAAM,YAEE,GAER,IAAI,EAAa,cACH,KACH,WAAW,IAAM,GAClB,OAEN,0TCuBD,GAAS,GAAgB,IACzB,EAAO,EAAS,IAAM,EAAO,MAAM,MAAM,sBACzC,EAAe,CAAE,IAAK,IAAM,GAAI,KAAM,MAExC,QACE,GAAO,GAAI,IACX,EAAS,EAAS,aAAM,SAAK,OAAS,CAAC,SAAK,MAAM,UAAX,cAAoB,QAApB,cAA2B,SAAU,EAAoB,EAAO,mBAEvG,EAAQ,IAAM,MACX,SACH,MAAQ,GACT,EAAK,MAAO,MACT,GAAU,EAAa,CAAE,IAAK,CAAC,EAAO,WACvC,MAAM,QAAU,IACb,EAAgB,CACvB,EACA,EAAa,CAAE,MAAO,EAAO,QAC7B,EAAa,CAAE,OAAQ,EAAO,cAGvB,GAAO,MAAM,WAAkB,EAAgB,CACvD,EAAa,CAAE,KAAM,CAAE,WAAY,aAAc,KAAQ,EAAO,cAE5D,MAAM,MAAQ,iBAAO,iBACnB,WAAW"}