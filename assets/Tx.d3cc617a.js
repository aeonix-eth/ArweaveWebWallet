import{p as $,e as L,c as i,o as n,C as f,z as h,d as s,R as M,u as e,a as r,a7 as g,r as ee,w as N,y as _,H as u,Y as y,E as te,G as ae,a9 as O,a2 as se,af as S,P as q,ak as ne,s as oe,a3 as le,a4 as re}from"./vendor.5a757be3.js";import{_ as D,a as ie,u as Q,A as w,B as de,L as F,b as R,c as ce,d as ue,T as P,e as j,f as W,g as _e,I as pe,F as he,h as B,n as C,i as ve,j as me,k as ye,l as E}from"./index.63998c46.js";import{I as fe}from"./download.eeb50609.js";import{P as G}from"./ProfilePreview.2596da85.js";import{O as ge}from"./OverlayPrompt.10049823.js";const xe={class:"frame-scroller"},ke=["src"],be=$({props:["src"],emits:["load"],setup(d,{emit:o}){const t=L(null),a=L(null),v=L(null),k=m=>{console.log(m),a.value=m.contentRect.width/m.contentRect.height},T=()=>{v.value=t.value&&t.value.naturalWidth/t.value.naturalHeight,o("load")},l=i(()=>a.value&&v.value&&a.value<v.value),c=i(()=>a.value&&v.value&&a.value>=v.value);return(m,I)=>(n(),f(ie,{onResize:k,class:M(["img",{x:e(l),y:e(c)}])},{default:h(()=>[s("div",xe,[s("img",{ref_key:"imgRef",ref:t,src:d.src,onLoad:T},null,40,ke)])]),_:1},8,["class"]))}});var we=D(be,[["__scopeId","data-v-0f93abca"]]);const Ie={controls:""},Se=["src","type"],Te=g(" Not supported "),Ae=$({props:{tx:null},setup(d){const o=d,t=i(()=>Q(o.tx.tags));return(a,v)=>(n(),r("video",Ie,[s("source",{src:e(w).gatewayURL+d.tx.id,type:e(t)["Content-Type"]},null,8,Se),Te]))}});var J=D(Ae,[["__scopeId","data-v-67247f52"]]);const Ce=g("Load large file"),Le={key:"json",class:"selector data-container min-height box"},Re={class:"raw"},$e={key:2,class:"selector"},De=$({props:["tx"],setup(d){const o=d,t=ee({handler:void 0,payload:void 0,loaded:!1,intent:!1}),a=i(()=>w.gatewayURL+o.tx.id),v=i(()=>"https://arcode.studio/#/"+o.tx.id+"?theme=dark-blue&hideToolbar=true"),k=async()=>{if(!o.tx||o.tx.data?.size==="0"||o.tx.data?.size==null)return;const l=Q(o.tx.tags);if(l["Bundle-Version"])return t.loaded=!0,t.handler={is:S(ce),attrs:{query:ue({bundledIn:o.tx.id}),component:S(P),componentProps:{options:{space:!0}},class:["column"]},containerAttrs:{class:["data-container","column-container","padding"]}};if(l["Content-Type"]==="application/x.arweave-manifest+json"||l["Content-Type"]==="text/html"||l["Content-Type"]==="application/pdf")return t.handler={is:"iframe",attrs:{src:a.value,class:["hover"]},containerAttrs:{class:["iframe-container","fixed-height"]}};if(l["Content-Type"]?.split("/")[0]==="video")return t.loaded=!0,t.handler={is:S(J),attrs:{tx:o.tx},containerAttrs:{class:["iframe-container"]}};if(l["Content-Type"]?.split("/")[0]==="audio")return t.loaded=!0,t.handler={is:S(J),attrs:{tx:o.tx},containerAttrs:{class:["iframe-container"]}};if(o.tx.data.size>104857600&&!t.intent)return t.handler="intent";if(l["Content-Type"]?.split("/")[0]==="image")return t.handler={is:S(we),attrs:{src:a.value},containerAttrs:{class:["img-container"]}};if(l["App-Name"]==="SmartWeaveContract"||l["App-Name"]==="SmartWeaveContractSource")return t.handler={is:"iframe",attrs:{src:v.value},containerAttrs:{class:["iframe-container","fixed-height"]}};t.handler="raw";try{if(l["Content-Type"]==="application/gzip")t.payload=await T(o.tx.id);else try{if(t.payload=(await j.api.get(o.tx.id)).data,t.payload[0]==="{")try{t.payload=JSON.stringify(JSON.parse(t.payload),null,2)}catch{}}catch{}}catch{}t.loaded=!0};async function T(l){const c=(await j.api.get(l,{responseType:"blob"})).data,m=new DecompressionStream("gzip"),I=c.stream().pipeThrough(m);return(await new Response(I).blob()).text()}return N(()=>o.tx.id,()=>{t.handler=void 0,t.payload=void 0,t.loaded=!1,t.intent=!1,k()},{immediate:!0}),N(()=>t.intent,()=>{t.intent&&k()}),(l,c)=>e(t).handler==="intent"?(n(),r("div",{key:0,onClick:c[0]||(c[0]=m=>e(t).intent=!0),class:"selector data-container min-height box",style:{display:"flex","justify-content":"center","padding-top":"5em"}},[_(de,{icon:e(fe)},{default:h(()=>[Ce]),_:1},8,["icon"])])):e(t).handler==="raw"?(n(),r("div",Le,[_(R,null,{default:h(()=>[e(t).loaded?u("",!0):(n(),f(F,{key:0,class:"loader"}))]),_:1}),s("pre",Re,y(e(t).payload),1)])):e(t).handler?(n(),r("div",$e,[_(R,null,{default:h(()=>[e(t).loaded?u("",!0):(n(),f(F,{key:0,class:"loader"}))]),_:1}),_(R,null,{default:h(()=>[te(s("div",O(e(t).handler.containerAttrs,{class:"box"}),[(n(),f(se(e(t).handler.is),O(e(t).handler.attrs,{onLoad:c[1]||(c[1]=m=>e(t).loaded=!0)}),null,16))],16),[[ae,e(t).loaded]])]),_:1})])):u("",!0)}});var ze=D(De,[["__scopeId","data-v-54108982"]]);const x=d=>(le("data-v-29c7dd4f"),d=d(),re(),d),Be={key:0,style:{position:"relative",width:"100%","min-height":"var(--current-vh)",color:"var(--element-secondary)"}},Ne={key:0},Pe={key:1},je={class:"meta flex-column"},Ue={class:"box",style:{padding:"0"}},He={key:1,class:"spacer"},Ve={key:2,class:"divider"},Oe=x(()=>s("h3",null,"Transaction",-1)),qe={class:"flex-column"},Fe={key:0},We=["href"],Ee={key:1},Ge=["href"],Je={class:"secondary-text"},Me=g("ID:\xA0"),Qe={key:3},Ye=x(()=>s("h3",null,"Bundle",-1)),Ke={class:"flex-column"},Xe={class:"secondary-text"},Ze=g("ID:\xA0"),et={key:4},tt=x(()=>s("h3",null,"Pending",-1)),at={key:5},st=x(()=>s("h3",null,"Block",-1)),nt={key:0,class:"secondary-text"},ot=x(()=>s("div",{class:"spacer"},null,-1)),lt={class:"secondary-text"},rt=g("ID:\xA0"),it=x(()=>s("h3",null,"Data",-1)),dt=g(" Fee: "),ct={key:6},ut=x(()=>s("h3",null,"Tags",-1)),_t=[ut],pt={key:0,style:{background:"var(--background2)","border-radius":"var(--border-radius)"}},ht=$({props:{txId:null},setup(d){const o=d,t=W(q(o,"txId")),a=t.state,v=t.queryStatus,k=i(()=>a.value?.bundledIn?.id),l=W(k).state,c=i(()=>w.gatewayURL&&new URL(w.gatewayURL).hostname),m=i(()=>a.value?.bundledIn?.id||o.txId),I=_e({name:"single tx status",params:m,query:async p=>(await j.transactions.getStatus(p)).status,completed:p=>!m.value||a.value?.block||p&&p!==404,seconds:30}).state,U=i(()=>a.value?.owner&&E(a.value?.owner.address)),Y=i(()=>a.value?.recipient&&E(a.value?.recipient)),H=i(()=>a.value?.data?.size!=="0"),K=i(()=>!a.value?.block),X=i(()=>{if(!a.value?.block)return"";const p=new Date(a.value?.block.timestamp*1e3);return p.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})+" "+p.toLocaleTimeString()}),V=i(()=>C.value?.height&&a.value?.block?.height&&C.value?.height-a.value?.block?.height+1),A=i(()=>{if(!a.value?.tags)return;const p=[];for(const b of a.value?.tags)p.push({items:[{name:"",value:b.name,attrs:{disabled:!0}},{name:"",value:b.value,attrs:{disabled:!0}}]});return p}),Z=q(pe.breakpoints,"verticalContent"),z=L(0);return N(a,(p,b)=>{if(!!b){if(b?.bundledIn?.id===o.txId)return z.value=-1;z.value=1}}),(p,b)=>(n(),f(R,{vector:z.value,axis:"x"},{default:h(()=>[e(a)?(n(),f(he,{key:d.txId},ne({left:h(()=>[s("div",je,[s("div",Ue,[s("div",{class:"box-padding flex-column",style:oe([e(A).length&&"padding-bottom: 0"])},[_(P,{tx:e(a),options:{half:!0}},null,8,["tx"]),e(a).recipient?(n(),f(G,{key:0,wallet:e(Y)},null,8,["wallet"])):u("",!0),e(a).recipient?(n(),r("div",He)):u("",!0),e(a).recipient?(n(),r("div",Ve)):u("",!0),_(G,{wallet:e(U)},null,8,["wallet"]),s("div",null,[Oe,s("div",qe,[s("div",null,[e(H)?(n(),r("div",Fe,[s("a",{href:e(w).gatewayURL+e(a).id,target:"_blank"},y(e(c)),9,We)])):u("",!0),e(a).data?.type==="application/x.arweave-manifest+json"?(n(),r("div",Ee,[s("a",{href:e(w).gatewayURL+"tx/"+e(a).id+"/data.json",target:"_blank"},"Manifest",8,Ge)])):u("",!0)]),s("div",Je,[_(B,{tx:e(a).id},{default:h(()=>[Me]),_:1},8,["tx"])])])]),e(a).bundledIn?.id?(n(),r("div",Qe,[Ye,s("div",Ke,[e(l)?(n(),f(P,{key:0,tx:e(l),options:{space:!0}},null,8,["tx"])):u("",!0),s("div",Xe,[_(B,{tx:e(a).bundledIn?.id},{default:h(()=>[Ze]),_:1},8,["tx"])])])])):u("",!0),e(K)?(n(),r("div",et,[tt,s("div",null,"Status: "+y(e(I)?e(I):"..."),1)])):(n(),r("div",at,[st,s("div",null,[g(" Height: "+y(e(a).block.height)+" ",1),e(C)?.height?(n(),r("span",nt,"/ "+y(e(C).height)+" ("+y(e(V))+" confirmation"+y(e(V)>1?"s":"")+")",1)):u("",!0)]),s("div",null,y(e(X)),1),ot,s("div",lt,[_(B,{block:e(a).block.id},{default:h(()=>[rt]),_:1},8,["block"])])])),s("div",null,[it,s("div",null,"Size: "+y(e(ve)(e(a).data.size)),1),s("div",null,[dt,_(me,{ar:e(a).fee.ar},null,8,["ar"])])]),e(A).length?(n(),r("div",ct,_t)):u("",!0)],4),e(A).length?(n(),r("div",pt,[_(ye,{schema:e(A),disabled:""},null,8,["schema"])])):u("",!0)])])]),_:2},[e(a)&&e(H)?{name:"right",fn:h(()=>[_(ze,{tx:e(a),class:M({inline:!e(Z)})},null,8,["tx","class"])])}:void 0]),1024)):(n(),r("div",Be,[_(ge,{options:{icon:"loader"},class:"box"},{default:h(()=>[e(v).error?(n(),r("h2",Ne,y(e(v).error),1)):(n(),r("h2",Pe,"Loading"))]),_:1})]))]),_:1},8,["vector"]))}});var xt=D(ht,[["__scopeId","data-v-29c7dd4f"]]);export{xt as default};
//# sourceMappingURL=Tx.d3cc617a.js.map
