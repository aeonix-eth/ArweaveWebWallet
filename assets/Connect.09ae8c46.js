import{C as ee,L as de}from"./ListContainer.0ec7b03b.js";import{h as A,d as f,j as e,k as a,M as u,H as g,u as n,N as te,Q as p,$ as ae,a0 as se,l as v,F as k,n as B,i as re,G as b,P,r as V,w as E,U as ve,V as _e,J as me,O as L,ah as ye,L as ge,a3 as R,p as U}from"./vendor.4d3d6cbc.js";import{_ as T,p as W,m as ne,b as O,q as S,o as M,I as le,i as fe,r as pe,T as F,s as xe,t as oe,v as K,w as he,B as ke,x as q,y as G,z as be,C as Ie,D as H,E as Q,G as J}from"./index.e098c0c4.js";import{I as ie}from"./y.896235a6.js";import{P as we}from"./ProfilePreview.030eb465.js";import{I as $e}from"./launch.91a05062.js";import{O as X}from"./OverlayPrompt.17f013f1.js";const ue=t=>(ae("data-v-4a1a07c6"),t=t(),se(),t),Ce={class:"wallet-selector"},Se=ue(()=>v("div",{class:"exit-background"},null,-1)),Ve=ue(()=>v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[v("path",{d:"M0 0h24v24H0V0z",fill:"none"}),v("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})],-1)),Pe=[Se,Ve],Te=A({props:{modelValue:String,exit:Boolean,active:Boolean},emits:["update:modelValue","selectWallet","exit"],setup(t,{emit:l}){const i=t,o=f({get(){return i.modelValue},set(d){l("update:modelValue",d)}}),s=f(()=>W(o.value)?.key);return(d,r)=>(e(),a("div",Ce,[u(O,null,{default:g(()=>[n(o)?(e(),a("button",{key:0,type:"button",onClick:r[0]||(r[0]=c=>d.$emit("selectWallet")),class:te(["tab",{active:t.active}])},[u(ne,{address:n(s)},null,8,["address"])],2)):p("",!0)]),_:1}),t.exit?(e(),a("button",{key:0,class:"exit",type:"button",onClick:r[1]||(r[1]=c=>d.$emit("exit"))},Pe)):p("",!0)]))}});var Be=T(Te,[["__scopeId","data-v-4a1a07c6"]]);const Ae={class:"wallet-tabs"},Ee=["onClick"],Oe=A({props:["modelValue"],emits:["update:modelValue"],setup(t,{emit:l}){const i=t,o=f({get(){return i.modelValue},set(d){l("update:modelValue",d)}}),s=f(()=>S.value.findIndex(d=>d.id===o.value));return(d,r)=>(e(),a("div",Ae,[u(ee,{modelValue:n(s),"onUpdate:modelValue":r[0]||(r[0]=c=>re(s)?s.value=c:null),options:{align:"center",overscroll:!0,immediate:!0}},{default:g(()=>[(e(!0),a(k,null,B(n(S),c=>(e(),a("button",{key:c.id,type:"button",onClick:y=>o.value=c.id,class:te(["tab",{active:c.id==n(o)}])},[u(ne,{address:c.key},null,8,["address"])],10,Ee))),128))]),_:1},8,["modelValue"])]))}});var Le=T(Oe,[["__scopeId","data-v-35e1b97b"]]);const Ne={class:"icon-background"},je={props:["icon","img"],setup(t){return(l,i)=>(e(),a("div",Ne,[t.img?(e(),b(M,{key:0,class:"page-logo",icon:t.img},null,8,["icon"])):(e(),b(M,{key:1,class:"page-logo placeholder",icon:t.icon},null,8,["icon"]))]))}};var ze=T(je,[["__scopeId","data-v-162a9dbe"]]);const We={class:"tx-card-extension"},Me={key:0,class:"flex-row",style:{"justify-content":"space-between"}},Re={key:0},De={key:1},Ue={key:1,class:"tags secondary-text no-scrollbar"},Fe={props:["tx"],setup(t){return f(()=>le.breakpoints.verticalLayout),(l,i)=>(e(),a("div",We,[t.tx.tags.length||t.tx.data_size?(e(),a("div",Me,[t.tx.tags.length?(e(),a("div",Re,"Tags:")):p("",!0),t.tx.data_size?(e(),a("div",De,"Data: "+P(n(fe)(t.tx.data_size)),1)):p("",!0)])):p("",!0),t.tx.tags.length?(e(),a("ul",Ue,[(e(!0),a(k,null,B(t.tx.tags,o=>(e(),a("li",null,P(o.name+" | "+o.value),1))),256))])):p("",!0)]))}};var Y=T(Fe,[["__scopeId","data-v-5ee7fb30"]]);const Ke={class:"actions-list flex-row"},qe=["onClick"],Ge=A({props:{actions:null},setup(t){return(l,i)=>(e(),a("div",Ke,[(e(!0),a(k,null,B(t.actions,o=>(e(),a("button",{key:o.name,onClick:o.run,type:"button",class:"action flex-row"},[u(M,{icon:o.icon},null,8,["icon"]),v("div",null,P(o.name),1)],8,qe))),128))]))}});var Z=T(Ge,[["__scopeId","data-v-7477f216"]]);const ce=t=>(ae("data-v-558bc70a"),t=t(),se(),t),He={class:"permission-card"},Qe=ce(()=>v("span",null,"Sign transaction",-1)),Je=ce(()=>v("span",null,"Sign transaction and upload",-1)),Xe=L(" Share the public key "),Ye=L(" Share the arweave config "),Ze=L(" Sign data "),et=L(" Decrypt data "),tt=A({props:{messageEntry:null},setup(t){const l=t,i=V(null),o=f(()=>{if(i.value?.method!=="signTransaction"&&i.value?.method!=="dispatch")return;const r=i.value?.params?.[0],c=r.tags?.map(({name:y,value:I})=>({name:window.atob(y),value:window.atob(I)}));return{...r,tags:c}});E(()=>l.messageEntry,async()=>{i.value=await pe(l.messageEntry)},{immediate:!0});const s=[{name:"Accept",icon:ie,run:()=>l.messageEntry.status="accepted"},{name:"Reject",icon:xe,run:()=>l.messageEntry.status="rejected"}],d=[{name:"Pending",icon:oe,run:()=>{}}];return(r,c)=>ve((e(),a("div",He,[i.value?.method==="signTransaction"?(e(),a(k,{key:0},[Qe,u(F,{tx:n(o)},null,8,["tx"]),u(Y,{tx:n(o)},null,8,["tx"])],64)):p("",!0),i.value?.method==="dispatch"?(e(),a(k,{key:1},[Je,u(F,{tx:n(o)},null,8,["tx"]),u(Y,{tx:n(o)},null,8,["tx"])],64)):i.value?.method==="getPublicKey"?(e(),a(k,{key:2},[Xe],64)):i.value?.method==="getArweaveConfig"?(e(),a(k,{key:3},[Ye],64)):i.value?.method==="sign"?(e(),a(k,{key:4},[Ze],64)):i.value?.method==="decrypt"?(e(),a(k,{key:5},[et],64)):p("",!0),u(me,{name:"fade",mode:"out-in"},{default:g(()=>[t.messageEntry.status?(e(),b(Z,{key:1,actions:d})):(e(),b(Z,{key:0,actions:s}))]),_:1})],512)),[[_e,i.value]])}});var at=T(tt,[["__scopeId","data-v-558bc70a"]]);const st={class:"flex-column no-scrollbar"},nt=["disabled","onClick"],lt=L(" Apply "),ot=A({props:{state:null,walletId:null},setup(t){const l=t,i={connect:"Connect automatically",signTransaction:"Sign transaction",getPublicKey:"Share public key",sign:"Sign arbitrary data",decrypt:"Decrypt data",getArweaveConfig:"Share arweave gateway configuration"},o=_=>Object.getOwnPropertyNames(Object.getPrototypeOf(_?.messageRunner||{})).filter(m=>{if(!(m==="constructor"||m==="methodMap"||!_))return!K(_,m)?.unavailable}).map(m=>({name:m,displayName:i[m]||m,disabled:K(_,m)?.userIntent})),s=f(()=>W(l.walletId)),d=f(()=>[...o(s.value)]),r=_=>y.value&&(y.value[_]=!y.value[_]),c=he("connectionSettings:",l.state.origin,{}),y=V(void 0),I=V(void 0);E(s,_=>{!_?.uuid||(c.state.value||={},I.value=c.state.value[_.uuid]||={},y.value={...I.value})},{immediate:!0});const C=([_,m])=>{const x=I.value?.[_]||!1;if(m!==x)return!0},N=f(()=>y.value?Object.entries(y.value).find(C):!1),j=()=>{if(!y.value||!I.value)return!1;Object.entries(y.value).filter(C).forEach(([_,m])=>I.value&&(I.value[_]=m))};return(_,m)=>(e(),a("div",st,[(e(!0),a(k,null,B(n(d),x=>(e(),a("button",{key:x.name,disabled:x.disabled,class:"row method",onClick:z=>r(x.name)},[v("div",null,P(x.displayName),1),u(O,{vector:y.value[x.name]?1:-1,axis:"y"},{default:g(()=>[(e(),a("div",{key:y.value[x.name]},P(y.value[x.name]?"Allow":"Ask"),1))]),_:2},1032,["vector"])],8,nt))),128)),u(O,null,{default:g(()=>[n(N)?(e(),b(ke,{key:0,onClick:m[0]||(m[0]=x=>j())},{default:g(()=>[lt]),_:1})):p("",!0)]),_:1})]))}});var it=T(ot,[["__scopeId","data-v-41a1ea1c"]]);const ut={class:"flex-row"},ct=["disabled"],dt={style:{"min-width":"0"}},rt={class:"ellipsis"},vt={class:"secondary-text ellipsis"},_t={class:"page-container",key:"0"},mt={key:0},yt={class:"status fade-list-item",key:"1"},gt={key:1},ft=A({props:{state:null},setup(t){const l=t,i=ye(),o=S.value[0]?.id;f(()=>S.value.map(h=>h.key));const s=V(l.state.walletId||o),d=f(()=>W(s.value));f(()=>W(o));const r=[{name:"Requests",color:"var(--orange)"},{name:"Permissions",color:"var(--green)"}],c=V(s.value?r[0].name:null);E(()=>l.state.walletId,h=>{!h||(C.value=!1,s.value=h,c.value=r[0].name)});const y=()=>l.state.walletId=!1,I=()=>{C.value=!1,l.state.walletId=s.value+""},C=V(!l.state.walletId),N=f(()=>C.value&&S.value.length>1),j=V(0),_=()=>{if(!C.value){C.value=!0;return}s.value!==(l.state.walletId||S.value[0]?.id)&&j.value++,s.value=l.state.walletId||S.value[0]?.id,C.value=!1},m=f(()=>({actions:[{name:l.state.walletId?"Switch":"Connect",icon:ie,run:I}],inline:!0})),x=f(()=>s.value!==l.state.walletId?[]:l.state.messageQueue?.filter(h=>!h.fulfilled));ge(le.breakpoints,"verticalLayout");const z=V(null),D=(h,w)=>z.value=h-w;return E(()=>r.findIndex(h=>h.name===c.value),D),E(()=>S.value.findIndex(h=>h.id===s.value),D),(h,w)=>(e(),b(de,{class:"connection-card flex-column no-scrollbar"},{header:g(()=>[v("div",ut,[v("button",{type:"button",class:"info flex-row",onClick:w[0]||(w[0]=(...$)=>n(q)&&n(q)(...$)),disabled:!n(G)(t.state.origin,t.state.session)},[u(ze,{img:t.state.appInfo?.logo,icon:n(oe)},null,8,["img","icon"]),v("div",dt,[v("div",rt,P(t.state.appInfo?.name||"Connector"),1),v("div",vt,P(t.state.origin),1)]),n(G)(t.state.origin,t.state.session)?(e(),b(M,{key:0,icon:n($e)},null,8,["icon"])):p("",!0)],8,ct),u(Be,{modelValue:t.state.walletId,"onUpdate:modelValue":w[1]||(w[1]=$=>t.state.walletId=$),exit:!0,active:!n(N),onSelectWallet:_,onExit:y},null,8,["modelValue","active"])]),u(be,{tabs:r,modelValue:c.value,"onUpdate:modelValue":w[2]||(w[2]=$=>c.value=$),disabled:!s.value},null,8,["modelValue","disabled"])]),default:g(()=>[u(O,{vector:z.value,axis:"x"},{default:g(()=>[n(S).length?(e(),a("div",{class:"container-scroll",key:j.value},[u(R,{name:"fade-list"},{default:g(()=>[n(N)?(e(),b(Le,{modelValue:s.value,"onUpdate:modelValue":w[3]||(w[3]=$=>s.value=$),class:"fade-list-item",key:"-1"},null,8,["modelValue"])):p("",!0),v("div",_t,[u(O,{vector:z.value,axis:"x"},{default:g(()=>[(e(),a("div",{key:(s.value||"")+c.value,class:"content"},[c.value==="Requests"?(e(),a("div",mt,[u(R,{name:"fade-list"},{default:g(()=>[v("div",{class:"fade-list-item",key:"0",style:U({padding:0,border:0,outline:"0.5px solid var(--border)"})},null,4),n(x)?.length===0&&t.state.walletId&&t.state.walletId===s.value?(e(),a("div",yt,"Connected")):p("",!0),s.value!==t.state.walletId?(e(),b(X,{options:n(m),class:"fade-list-item",key:"2"},{default:g(()=>[n(d)?(e(),b(we,{key:0,wallet:n(d)},null,8,["wallet"])):p("",!0)]),_:1},8,["options"])):p("",!0),(e(!0),a(k,null,B(n(x),$=>(e(),b(at,{key:$.uuid,messageEntry:$,style:{padding:"var(--spacing)"},class:"flex-column fade-list-item"},null,8,["messageEntry"]))),128))]),_:1})])):c.value==="Permissions"?(e(),a("div",gt,[u(R,{name:"fade-list"},{default:g(()=>[v("div",{class:"fade-list-item",key:"0",style:U({padding:0,border:0,outline:"0.5px solid var(--border)"})},null,4),u(it,{state:t.state,walletId:s.value,class:"fade-list-item",key:"2"},null,8,["state","walletId"])]),_:1})])):p("",!0)]))]),_:1},8,["vector"])])]),_:1})])):(e(),b(X,{key:0,options:{action:{icon:n(Ie),name:"Add wallet",run:()=>n(i).push("/add")}}},null,8,["options"]))]),_:1},8,["vector"])]),_:1}))}});var pt=T(ft,[["__scopeId","data-v-67f51739"]]);const xt={class:"connect flex-column"},ht={class:"bottom-info secondary-text",style:{opacity:"0.0","pointer-events":"none"}},kt=A({setup(t){const l=V(H.value.findIndex(i=>i.origin===Q.value.origin&&i.session===Q.value.session));return(i,o)=>(e(),a("div",xt,[u(ee,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=s=>l.value=s),options:{align:"start",overscroll:!0},class:"connectors"},{default:g(()=>[(e(!0),a(k,null,B(n(H),s=>(e(),a("div",{key:s.origin+s.session,class:"connection-card-container fade-list-item"},[u(pt,{state:s,class:"box"},null,8,["state"])]))),128))]),_:1},8,["modelValue"]),v("div",ht,[v("div",null,"All Channels "+P(Object.keys(n(J)).length),1),(e(!0),a(k,null,B(n(J),(s,d)=>(e(),a("div",{key:d},P(s),1))),128))])]))}});var Pt=T(kt,[["__scopeId","data-v-fece6866"]]);export{Pt as default};
//# sourceMappingURL=Connect.09ae8c46.js.map
