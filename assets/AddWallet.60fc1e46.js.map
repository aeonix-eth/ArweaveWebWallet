{"version":3,"file":"AddWallet.60fc1e46.js","sources":["../../src/views/AddWallet.vue"],"sourcesContent":["<template>\n\t<div class=\"add-wallet flex-column\">\n\t\t<div class=\"card\">\n\t\t\t<h2 style=\"display:flex; justify-content:space-between;\">\n\t\t\t\t<span>Passphrase</span>\n\t\t\t\t<span>Key file</span>\n\t\t\t</h2>\n\t\t\t<div class=\"flex-column\">\n\t\t\t\t<InputData v-model=\"passphraseInput\" @files=\"files => dropped(files, 'keyfile')\" :disabled=\"isCreatingWallet\" placeholder=\"Import passphrase or key file\" />\n\t\t\t\t<div />\n\t\t\t\t<Button v-if=\"!isCreatingWallet && !passphraseInput.length\" @click=\"create\" :disabled=\"passphraseInput.length && !isPassphrase\" :icon=\"LogoArweave\" class=\"main\" :glow=\"true\" color=\"#81a1c1\">Create new wallet</Button>\n\t\t\t\t<Button v-else-if=\"isCreatingWallet\" :disabled=\"createdWallet == null\" @click=\"goToCreatedWallet\" :icon=\"createdWallet == null ? 'loader' : ''\" class=\"main\" :glow=\"true\" color=\"#81a1c1\">{{ createdWallet == null ? 'Generating, write down the passphrase' : 'Passphrase saved? Click here to proceed' }}</Button>\n\t\t\t\t<Button v-else :disabled=\"!isPassphrase || isGeneratingWallet\" @click=\"confirmPassphrase\" class=\"main\" :glow=\"true\" color=\"#81a1c1\">Import passphrase</Button>\n\t\t\t</div>\n\t\t\t<OverlayPrompt :options=\"popup\">\n\t\t\t\t<div v-if=\"popup.messageType === 'invalid'\" style=\"text-align: center\">\n\t\t\t\t\t<p>This passphrase was not generated by arweave.app</p>\n\t\t\t\t\t<p>Make sure that it was entered correctly, without typing errors or extra characters. You can still import the wallet and use it normally</p>\n\t\t\t\t</div>\n\t\t\t</OverlayPrompt>\n\t\t</div>\n\t\t<div class=\"card\" v-for=\"(provider, number) in hardwareProviders\" :key=\"provider.metadata.name\">\n\t\t\t<h2 class=\"flex-row\" style=\"align-items: center;\"><Icon :icon=\"provider.metadata.icon\" /><span>{{ provider.metadata.name }} Hardware Wallet (awaiting release)</span></h2>\n\t\t\t<div class=\"flex-column\">\n\t\t\t\t<div class=\"flex-row\">\n\t\t\t\t\t<Button :disabled=\"provider.metadata.disabled\" @click=\"importProvider(provider)\" :icon=\"provider.metadata.icon\" class=\"main\" :glow=\"true\" color=\"#81a1c1\">\n\t\t\t\t\t\t{{ provider.metadata.disabled ? `${provider.metadata.name} not supported for this browser` : `Connect with ${provider.metadata.name}` }}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button v-if=\"provider.metadata.componentSettings\" :icon=\"IconSettings\"  class=\"secondary\" @click=\"activeSettings = number\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex-row\">\n\t\t\t\t\t<Button v-for=\"action in provider.metadata.actions\" :key=\"action.name\" v-bind=\"action\">{{ action.name }}</Button>\n\t\t\t\t</div>\n\t\t\t\t<Viewport v-if=\"provider.metadata.componentSettings\" :background=\"true\">\n\t\t\t\t\t<div v-if=\"activeSettings === number\" class=\"popup\">\n\t\t\t\t\t\t<div class=\"card flex-column\" style=\"min-width: 300px;\">\n\t\t\t\t\t\t\t<div class=\"flex-row\" style=\"justify-content: space-between; align-items: center\">\n\t\t\t\t\t\t\t\t<h2>Settings</h2>\n\t\t\t\t\t\t\t\t<WalletSelector @exit=\"activeSettings = -1\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<component :is=\"provider.metadata.componentSettings\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Viewport>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"card\">\n\t\t\t<h2>Address Only</h2>\n\t\t\t<InputAddress v-model=\"targetInput\" :actions=\"[importAddressOnlyAction]\" />\n\t\t</div>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport InputData from '@/components/form/InputData.vue'\nimport InputAddress from '@/components/form/InputAddress.vue';\nimport Button from '@/components/atomic/Button.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport OverlayPrompt from '@/components/layout/OverlayPrompt.vue'\nimport Viewport from '@/components/layout/Viewport.vue'\nimport WalletSelector from '@/components/composed/WalletSelector.vue'\nimport { hardwareProviders, addAddress, addMnemonic, generateMnemonic, validateMnemonic } from '@/functions/Wallets'\nimport { dropped } from '@/functions/File'\nimport { track } from '@/store/Analytics'\nimport { notify } from '@/store/NotificationStore'\nimport { computed, ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport LogoArweave from '@/assets/logos/arweave.svg?component'\nimport IconAddBox from '@/assets/icons/add_box.svg?component'\nimport IconSettings from '@/assets/icons/settings.svg?component'\n\nconst router = useRouter()\nconst passphraseInput = ref('')\nconst targetInput = ref('')\n// const maskAddress = (address) => { return address.match(/^[a-z0-9_-]{0,43}$/i) }\nconst popup = ref(undefined as undefined | object)\nconst isPassphrase = computed(() => passphraseInput.value.trim().split(/\\s+/g).length >= 12)\nconst isCreatingWallet = ref(false)\nconst isGeneratingWallet = ref(false)\nconst createdWallet = ref(null as null | WalletDataInterface)\nconst create = async () => {\n\tisCreatingWallet.value = true\n\tpassphraseInput.value = await generateMnemonic()\n\tconst walletData = addMnemonic(passphraseInput.value)\n\tsetTimeout(async () => createdWallet.value = await walletData, 10000)\n\ttrack.account('Create')\n}\nconst goToCreatedWallet = () => {\n\tif (!createdWallet.value) { return }\n\trouter.push({ name: 'EditWallet', query: { wallet: createdWallet.value.id } })\n}\nconst importPassphrase = async () => {\n\tisGeneratingWallet.value = true\n\tconst walletData = addMnemonic(passphraseInput.value)\n\tpopup.value = {\n\t\ticon: 'loader',\n\t\tmessage: 'importing',\n\t}\n\trouter.push({ name: 'EditWallet', query: { wallet: (await walletData).id } })\n\ttrack.account('Import')\n}\nconst confirmPassphrase = async () => {\n\tif (await validateMnemonic(passphraseInput.value)) { return importPassphrase() }\n\tpopup.value = {\n\t\tmessageType: 'invalid',\n\t\tactions: [\n\t\t\t{ name: 'Back', run: () => popup.value = undefined },\n\t\t\t{ name: 'Import', run: () => importPassphrase() },\n\t\t]\n\t}\n}\nconst importProvider = async (provider: AnyProvider) => {\n\ttry {\n\t\tconst walletData = await addAddress(undefined, provider)\n\t\trouter.push({ name: 'EditWallet', query: { wallet: walletData.id } })\n\t\ttrack.account('Import ' + provider.metadata.name)\n\t} catch (e: any) { console.error(e); notify.error(e.message || e) }\n}\nconst importAddressOnlyAction = { icon: IconAddBox, run: async () => {\n\tconst walletData = await addAddress(targetInput.value)\n\trouter.push({ name: 'EditWallet', query: { wallet: walletData.id } })\n\ttrack.account('Watch')\n}}\nconst activeSettings = ref(-1)\n</script>\n\n\n\n<style scoped>\n.add-wallet {\n\twidth: 100%;\n\tmin-height: var(--current-vh);\n\tpadding: var(--spacing);\n\talign-items: center;\n}\n\n.add-wallet > .card {\n\twidth: 100%;\n\tmax-width: var(--column-width);\n\toverflow: hidden;\n}\n\n.input-data {\n\ttext-align: center;\n}\n\n.button.main {\n\theight: 4.5rem;\n\tfont-size: 1.1rem;\n\twidth: 100%;\n}\n\n.button.secondary {\n\tflex: 0 0 auto;\n\theight: 4.5rem;\n\tfont-size: 1.5rem;\n\twidth: 4.5rem;\n}\n\n.popup {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.popup .card {\n\theight: 400px;\n\tdisplay: flex;\n\toverflow: hidden;\n\tbackground: var(--background);\n}\n</style>"],"names":[],"mappings":"43CAyEA,KAAM,GAAS,IACT,EAAkB,EAAI,EAAE,EACxB,EAAc,EAAI,EAAE,EAEpB,EAAQ,EAAI,MAA+B,EAC3C,EAAe,EAAS,IAAM,EAAgB,MAAM,OAAO,MAAM,MAAM,EAAE,QAAU,EAAE,EACrF,EAAmB,EAAI,EAAK,EAC5B,EAAqB,EAAI,EAAK,EAC9B,EAAgB,EAAI,IAAkC,EACtD,EAAS,SAAY,CAC1B,EAAiB,MAAQ,GACT,EAAA,MAAQ,KAAM,KACxB,KAAA,GAAa,EAAY,EAAgB,KAAK,EACpD,WAAW,SAAY,EAAc,MAAQ,KAAM,GAAY,GAAK,EACpE,EAAM,QAAQ,QAAQ,CAAA,EAEjB,EAAoB,IAAM,CAC3B,AAAA,CAAC,EAAc,OACZ,EAAA,KAAK,CAAE,KAAM,aAAc,MAAO,CAAE,OAAQ,EAAc,MAAM,EAAG,CAAG,CAAA,CAAA,EAExE,EAAmB,SAAY,CACpC,EAAmB,MAAQ,GACrB,KAAA,GAAa,EAAY,EAAgB,KAAK,EACpD,EAAM,MAAQ,CACb,KAAM,SACN,QAAS,WAAA,EAEH,EAAA,KAAK,CAAE,KAAM,aAAc,MAAO,CAAE,OAAe,MAAA,IAAY,EAAG,CAAG,CAAA,EAC5E,EAAM,QAAQ,QAAQ,CAAA,EAEjB,EAAoB,SAAY,CACrC,GAAI,KAAM,GAAiB,EAAgB,KAAK,EAAK,MAAO,GAAiB,EAC7E,EAAM,MAAQ,CACb,YAAa,UACb,QAAS,CACR,CAAE,KAAM,OAAQ,IAAK,IAAM,EAAM,MAAQ,MAAU,EACnD,CAAE,KAAM,SAAU,IAAK,IAAM,GAAmB,CACjD,CAAA,CACD,EAEK,EAAiB,KAAO,IAA0B,CACnD,GAAA,CACH,KAAM,GAAa,KAAM,GAAW,OAAW,CAAQ,EAChD,EAAA,KAAK,CAAE,KAAM,aAAc,MAAO,CAAE,OAAQ,EAAW,EAAG,CAAA,CAAG,EACpE,EAAM,QAAQ,UAAY,EAAS,SAAS,IAAI,QACxC,GAAU,QAAQ,MAAM,CAAC,EAAU,GAAA,MAAM,EAAE,SAAW,CAAC,CAAE,CAAA,EAE7D,EAA0B,CAAE,KAAM,EAAY,IAAK,SAAY,CACpE,KAAM,GAAa,KAAM,GAAW,EAAY,KAAK,EAC9C,EAAA,KAAK,CAAE,KAAM,aAAc,MAAO,CAAE,OAAQ,EAAW,EAAG,CAAA,CAAG,EACpE,EAAM,QAAQ,OAAO,CAAA,GAEhB,EAAiB,EAAI,EAAE"}