{"version":3,"file":"index.dfeb5663.js","sources":["../../vite/modulepreload-polyfill","../../index.html?html-proxy&index=0.js","../../src/functions/Utils.ts","../../src/components/atomic/Identicon.vue","../../plugin-vue:export-helper","../../src/components/atomic/Icon.vue","../../src/functions/Channels.ts","../../src/assets/logos/arweaveBlack.svg?url","../../src/assets/logos/arweaveWhite.svg?url","../../src/store/InterfaceStore.js","../../src/functions/AsyncData.ts","../../src/store/ArweaveStore.ts","../../src/store/BlockStore.ts","../../vite/preload-helper","../../src/functions/Crypto.ts","../../src/functions/Password.ts","../../src/providers/WalletProxy.ts","../../src/functions/UtilsClass.ts","../../src/assets/logos/arweave.svg?component","../../src/providers/Arweave.ts","../../src/assets/logos/ledger.svg?component","../../src/providers/Ledger.ts","../../src/functions/Wallets.ts","../../src/components/visual/TransitionsManager.vue","../../src/components/layout/FoldingLayout.vue","../../src/components/atomic/Ar.vue","../../src/store/CurrencyStore.ts","../../src/components/atomic/LocaleCurrency.vue","../../src/components/function/Tooltip.vue","../../src/assets/icons/verify.svg?component","../../src/components/atomic/Address.vue","../../src/components/composed/WalletInfo.vue","../../src/assets/icons/north_east.svg?component","../../src/assets/icons/swap.svg?component","../../src/views/Wallet.vue","../../src/assets/icons/tx_in.svg?component","../../src/assets/icons/tx_out.svg?component","../../src/assets/icons/tx_in_data.svg?component","../../src/assets/icons/tx_out_data.svg?component","../../src/assets/icons/cube.svg?component","../../src/assets/icons/tx_in_full.svg?component","../../src/assets/icons/tx_out_full.svg?component","../../src/components/atomic/TxIcon.vue","../../src/components/atomic/Date.vue","../../src/components/function/Link.vue","../../src/components/composed/Amount.vue","../../src/components/composed/TxCard.vue","../../src/components/atomic/Tabs.vue","../../src/components/function/Observer.vue","../../src/assets/icons/no_result.svg?component","../../src/components/layout/List.vue","../../src/views/TxList.vue","../../src/components/function/RawInput.vue","../../src/components/atomic/ActionsRow.vue","../../src/components/atomic/Input.vue","../../src/components/layout/Viewport.vue","../../src/store/IndexedDB.ts","../../src/functions/JsonRpc.ts","../../src/functions/Connect.ts","../../src/store/NotificationStore.ts","../../src/assets/icons/x.svg?component","../../src/components/function/Scanner.vue","../../src/assets/icons/person.svg?component","../../src/assets/icons/qr.svg?component","../../src/components/atomic/InputAddress.vue","../../src/components/atomic/InputAr.vue","../../src/components/atomic/DragOverlay.vue","../../src/assets/icons/text.svg?component","../../src/assets/icons/drop.svg?component","../../src/assets/icons/cloud.svg?component","../../src/components/atomic/InputData.vue","../../src/components/atomic/InputGrid.vue","../../src/components/atomic/Slider.vue","../../src/components/composed/SendFee.vue","../../src/assets/icons/label.svg?component","../../src/views/Send.vue","../../src/store/SmartweaveStore.js","../../src/components/composed/TokenCard.vue","../../src/router/index.js","../../src/functions/File.ts","../../src/functions/Transactions.ts","../../src/store/ProfileStore.ts","../../src/components/atomic/AddressIcon.vue","../../src/assets/icons/connection.svg?component","../../src/assets/icons/add_box.svg?component","../../src/assets/icons/settings.svg?component","../../src/assets/icons/search.svg?component","../../src/assets/icons/plug.svg?component","../../src/components/composed/Toolbar.vue","../../../../../../../@vite-plugin-pwa/virtual:pwa-register/vue","../../src/components/function/UpdateAvailable.vue","../../src/assets/icons/y.svg?component","../../src/components/composed/WalletSelector.vue","../../src/components/function/Password.vue","../../src/router/Utils.ts","../../src/App.vue","../../src/pwa.ts","../../src/main.ts"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","\n\t\timport { Buffer } from 'buffer'\n\t\t\n\t\tif (window.global === undefined) {\n\t\t\twindow.global = window\n\t\t\twindow.Buffer = Buffer\n\t\t}\n\t","// @ts-ignore\nimport { v4 } from 'uuid'\n\nexport function uuidV4 () { return v4() as string }\n\nexport function debounce (fun: Function, timeout = 500) {\n\tlet timer: ReturnType<typeof setTimeout>\n\treturn (...args: any[]) => {\n\t\tclearTimeout(timer)\n\t\ttimer = setTimeout(() => { // @ts-ignore\n\t\t\tfun.apply(this, args) }, timeout)\n\t}\n}\n\nexport function humanFileSize (size: string | number) {\n\tif (size == null) { return '' }\n\tif (size == 0) { return '0 B' }\n\tconst i = Math.floor(Math.log(+size) / Math.log(1024))\n\treturn +(+size / Math.pow(1024, i)).toFixed(2) + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i]\n}\n\nexport async function addressToHash (address?: string) {\n\tif (!address) { return }\n\tconst hashBuffer = await window.crypto.subtle.digest('SHA-256', new TextEncoder().encode(address))\n\tconst hashArray = Array.from(new Uint8Array(hashBuffer))\n\tconst hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('')\n\treturn hashHex\n}\n\nexport function addressHashToColor (addressHash?: string) {\n\tif (!addressHash) { return [0, 0, 0] }\n\tconst colors = hsl2rgb(parseInt(addressHash.substr(-7), 16) / 0xfffffff, 0.25, 0.6)\n\treturn colors.map(Math.round)\n}\n\nfunction hsl2rgb (h: number, s: number, b: number) {\n\th *= 6\n\tconst s2 = [b += s *= b < .5 ? b : 1 - b, b - h % 1 * s * 2, b -= s *= 2, b, b + h % 1 * s, b + s]\n\treturn [s2[~~h % 6] * 255, s2[(h | 16) % 6] * 255, s2[(h | 8) % 6] * 255]\n}\n\nexport function generateUrl (url: string) {\n\tif (!url.includes('://')) { url = 'https://' + url }\n\treturn new URL(url).href\n}","<template>\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" :viewBox=\"`0 0 ${size + stroke * 2} ${size + stroke * 2}`\" :style=\"style\">\n\t\t<g style=\"fill:currentColor; stroke:currentColor;\" :style=\"{ strokeWidth: stroke }\" stroke-linejoin=\"round\">\n\t\t\t<rect v-for=\"rect in rects\" :key=\"rect\" :x=\"rect.x\" :y=\"rect.y\" :width=\"rect.w\" :height=\"rect.h\" />\n\t\t</g>\n\t</svg>\n</template>\n\n\n\n<script setup lang=\"ts\">\n// Vue component made from https://github.com/stewartlord/identicon.js/\n// from a SHA-256 hash of the arweave address\nimport { addressHashToColor, addressToHash } from '@/functions/Utils'\nimport { computed, ref, watch } from 'vue'\n\nconst props = defineProps<{ address: string }>()\n\nconst size = 5\nconst cell = size / 5\nconst stroke = size * 0.04\nconst addressHash = ref(undefined as undefined | string)\nwatch(() => props.address, async (val) => addressHash.value = await addressToHash(val), { immediate: true })\nconst style = computed(() => ({\n\tcolor: `rgb(${addressHashToColor(addressHash.value).join(',')})`,\n}))\nconst rects = computed(() => {\n\tconst result = [] as any[]\n\tif (!addressHash.value) { return result }\n\tfor (let i = 0; i < 15; i++) {\n\t\tif (parseInt(addressHash.value.charAt(i), 16) % 2) { continue }\n\t\tif (i < 5) {\n\t\t\tresult.push({ x: 2 * cell + stroke, y: i * cell + stroke, w: cell, h: cell })\n\t\t} else if (i < 10) {\n\t\t\tresult.push({ x: 1 * cell + stroke, y: (i - 5) * cell + stroke, w: cell, h: cell })\n\t\t\tresult.push({ x: 3 * cell + stroke, y: (i - 5) * cell + stroke, w: cell, h: cell })\n\t\t} else if (i < 15) {\n\t\t\tresult.push({ x: 0 * cell + stroke, y: (i - 10) * cell + stroke, w: cell, h: cell })\n\t\t\tresult.push({ x: 4 * cell + stroke, y: (i - 10) * cell + stroke, w: cell, h: cell })\n\t\t}\n\t}\n\treturn result\n})\n</script>","\nexport default (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n}\n","<template>\n\t<span class=\"icon\">\n\t\t<transition name=\"fade-fast\" mode=\"out-in\">\n\t\t\t<component v-if=\"component\" :is=\"component\" :key=\"key\" fill=\"currentColor\" />\n\t\t\t<svg v-else-if=\"iconData == 'loader'\" class=\"loader\" height=\"100\" width=\"100\" viewBox=\"0 0 100 100\" :class=\"{ spin: progress == null }\">\n\t\t\t\t<circle stroke=\"#ffffff22\" :stroke-width=\"thickness\" fill=\"transparent\" :r=\"normalizedRadius\" :cx=\"50\" :cy=\"50\" />\n\t\t\t\t<circle stroke=\"currentColor\" :stroke-dasharray=\"circumference + ' ' + circumference\" :style=\"{ strokeDashoffset }\" :stroke-width=\"thickness\" stroke-linecap=\"round\" fill=\"transparent\" :r=\"normalizedRadius\" :cx=\"50\" :cy=\"50\" @animationiteration=\"finishAnimation = false\" :class=\"{ spin: progress == null || finishAnimation }\" />\n\t\t\t</svg>\n\t\t\t<span v-else-if=\"isSymbol\" :key=\"'s' + iconData\" class=\"symbol no-select\">{{ iconData }}</span>\n\t\t\t<img v-else v-show=\"loaded\" @load=\"loaded = true\" class=\"img no-select\" :key=\"iconData\" :src=\"iconData\" draggable=\"false\" />\n\t\t</transition>\n\t</span>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport { computed, isRef, ref, watch } from 'vue'\n\nconst props = defineProps<{\n\ticon: string | Object\n\tprogress?: number\n}>()\n\nconst iconData = computed(() => isRef(props.icon) ? props.icon.value : props.icon)\nconst component = computed(() => typeof iconData.value === 'object' ? iconData.value : null)\nconst isSymbol = computed(() => typeof iconData.value === 'string' && iconData.value.length <= 2)\nconst loaded = ref(false)\nwatch(() => iconData.value, () => loaded.value = false)\nconst thickness = 5\nconst normalizedRadius = 50 - thickness / 2\nconst circumference = normalizedRadius * 2 * Math.PI\nconst strokeDashoffset = computed(() => circumference - (props.progress ?? 25) / 100 * circumference)\nconst finishAnimation = ref(false)\nwatch(() => props.progress, (value, oldValue) => { if (value != null && oldValue == null) { finishAnimation.value = true } })\nconst key = ref(0)\nwatch(() => props.icon, () => key.value++, { deep: true })\n</script>\n\n\n\n<style scoped>\n.icon {\n\tflex: 0 0 auto;\n\theight: 1em;\n\twidth: 1em;\n\tborder-radius: inherit;\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: center;\n\ttransition: 0.3s ease;\n}\n\n.img {\n\twidth: inherit;\n\theight: inherit;\n\tobject-fit: contain;\n}\n\n.symbol {\n\tfont-size: 1em;\n}\n\n.loader {\n\ttransform: rotate(-45deg);\n\ttransition: transform 0.5s ease;\n}\n\n.loader.spin {\n\ttransform: rotate(-135deg);\n}\n\ncircle.spin {\n\tanimation: loader-animation 2s infinite linear;\n\t/* animation-timing-function: cubic-bezier(0.6, 0.4, 0.4, 0.6); */\n}\n\n@keyframes loader-animation {\n\t0% {\n\t\ttransform: rotate(0deg);\n\t}\n\t100% {\n\t\ttransform: rotate(360deg);\n\t}\n}\n\nsvg {\n\twidth: 100%;\n\theight: 100%;\n}\n\ncircle {\n\ttransition: stroke-dashoffset 0.5s ease;\n\ttransform-origin: 50% 50%;\n}\n</style>","import { getCurrentScope, onScopeDispose, reactive, watch, ref, effectScope } from 'vue'\nimport type { EffectScope, Ref, WatchStopHandle } from 'vue'\nimport { useDataWrapper } from '@/functions/AsyncData'\n\ntype PrefixTable = {\n\t'connectorState:': InstanceState\n\t'sharedState:': ConnectorState\n\t'connectionSettings:': ConnectionSettings\n\twallets: WalletDataInterface[]\n\tcurrency: { rate?: string, currency: string, provider: string, timestamp?: number }\n\tgateway: string\n\tbundler: string\n\tscannerCamera: string\n\tpwdTest: EncryptedContent | null\n\tpwdTestLock: number\n}\n\n\n\nclass ChannelRef <T extends keyof PrefixTable> {\n\tstate\n\tprivate readonly stateChannel\n\tprivate stopWrite?: WatchStopHandle\n\t\n\tconstructor (prefix: T, instanceName = '', init?: PrefixTable[T]) {\n\t\tthis.state = ref(init) as Ref<PrefixTable[T]>\n\t\tthis.stateChannel = prefix + instanceName\n\t\twindow.addEventListener('storage', this.storageListener)\n\t\tif (!localStorage.getItem(this.stateChannel)) {\n\t\t\tif (typeof this.state.value === 'object' && Object.keys(this.state).length) { this.writeState() }\n\t\t\telse if (this.state.value != null) { this.writeState() }\n\t\t}\n\t\tthis.update(localStorage.getItem(this.stateChannel))\n\t\tif (getCurrentScope()) { onScopeDispose(() => this.stop()) }\n\t}\n\tstop = () => {\n\t\twindow.removeEventListener('storage', this.storageListener)\n\t\tif (this.stopWrite) { this.stopWrite() }\n\t}\n\t\n\tprivate writeState = () => {\n\t\tconst stateString = JSON.stringify(this.state.value)\n\t\tif (stateString === localStorage.getItem(this.stateChannel)) { return }\n\t\tlocalStorage.setItem(this.stateChannel, stateString)\n\t}\n\tprivate startWrite = () => this.stopWrite = watch(this.state, this.writeState, { deep: true })\n\tprivate update = (val: string | null) => {\n\t\tif (this.stopWrite) { this.stopWrite() }\n\t\tif (val) { this.state.value = JSON.parse(val) } // todo catch, parsing fails when val === undefined\n\t\tthis.startWrite()\n\t}\n\tprivate storageListener = (e: StorageEvent) => {\n\t\tif (e.key !== this.stateChannel || e.newValue === e.oldValue || !e.newValue) { return }\n\t\tthis.update(e.newValue)\n\t}\n\tdeleteChannel = () => {\n\t\tthis.stop()\n\t\tlocalStorage.removeItem(this.stateChannel)\n\t}\n}\n\n\n\nconst step = ref(0)\nconst channelInstances = {} as { [key: string]: { channel: ChannelRef<any>, subscribers: number, scope: EffectScope } }\n\nexport function useChannel <T extends keyof PrefixTable> (prefix: T, instanceName = '', init?: PrefixTable[T]) {\n\tconst key = prefix + instanceName\n\t\n\tif (!channelInstances[key]) {\n\t\tconst scope = effectScope(true)\n\t\tconst channel = scope.run(() => new ChannelRef(prefix, instanceName, init))!\n\t\tchannelInstances[key] = { channel, subscribers: 0, scope }\n\t\tstep.value++\n\t}\n\tchannelInstances[key].subscribers++\n\t\n\tconst stop = () => {\n\t\tchannelInstances[key].subscribers--\n\t\tif (channelInstances[key].subscribers > 0) { return }\n\t\tchannelInstances[key].scope.stop()\n\t\tdelete channelInstances[key]\n\t\tstep.value++\n\t}\n\tconst deleteChannel = () => {\n\t\tchannelInstances[key]?.channel?.deleteChannel()\n\t}\n\tif (getCurrentScope()) { onScopeDispose(stop) }\n\treturn { state: channelInstances[key].channel.state, stop, deleteChannel } as ChannelRef<T>\n}\n\n\n\nexport function useLock (channel: Ref<number | undefined>) {\n\tlet timer: any\n\tconst verify = () => {\n\t\treturn new Promise<void>(res => {\n\t\t\tconst value = channel.value\n\t\t\tsetTimeout(() => (channel.value !== value) && res(), 1100)\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (channel.value === value) { setTimeout(() => { channel.value = 0; res() }, 2000) }\n\t\t\t\telse { res() }\n\t\t\t}, 3000)\n\t\t})\n\t}\n\tconst lock = async () => {\n\t\tif (timer || channel.value) {\n\t\t\tawait verify()\n\t\t\tthrow 'Already locked'\n\t\t}\n\t\tchannel.value = 1\n\t\ttimer = setInterval(() => channel.value!++, 1000)\n\t}\n\tconst unlock = () => {\n\t\tif (!timer || !channel.value) { throw 'Already unlocked' }\n\t\tclearInterval(timer)\n\t\tchannel.value = 0\n\t\ttimer = undefined\n\t}\n\treturn { lock, unlock }\n}\n\n\n\nconst hash = new URLSearchParams(window.location.hash.slice(1))\nconst origin = hash.get('origin') || undefined\nconst session = hash.get('session') || undefined\nconst appInfo = { name: hash.get('name') || undefined, logo: hash.get('logo') || undefined }\nconst instance = origin + Math.random().toString().slice(2)\nconst { state, deleteChannel } = useChannel('connectorState:', instance, { origin, session })\nconst { states } = getChannels('connectorState:')\nconst connectorChannels = getChannels('sharedState:')\nexport { state, states, connectorChannels, appInfo }\n\n\n\nfunction getChannels <T extends 'connectorState:' | 'sharedState:'> (prefix: T) {\n\tconst channels: { [key: string]: ChannelRef<T> | undefined } = {}\n\tconst states: { [key: string]: PrefixTable[T] } = reactive({})\n\tconst getInstanceNames = () => Object.keys(localStorage)\n\t\t.filter(key => key.slice(0, prefix.length) === prefix)\n\t\t.map(key => key.slice(prefix.length))\n\tconst instantiate = async (name: string) => {\n\t\tchannels[name] = undefined\n\t\tif (prefix === 'connectorState:' && !(await heartbeat(name))) { close(name); return null }\n\t\tif (!Object.keys(channels).includes(name)) { return null }\n\t\tchannels[name] = useChannel(prefix, name)\n\t\tstates[name] = channels[name]!.state as any\n\t}\n\tconst close = (name: string) => {\n\t\tchannels[name]?.stop()\n\t\tdelete channels[name]\n\t\tdelete states[name]\n\t}\n\tconst storageListener = () => {\n\t\tconst runningChannels = Object.keys(channels)\n\t\tconst storageChannels = getInstanceNames()\n\t\tfor (const channel of [...runningChannels, ...storageChannels]) {\n\t\t\tif (runningChannels.includes(channel) && storageChannels.includes(channel)) { continue }\n\t\t\telse if (storageChannels.includes(channel) && channel !== instance) { instantiate(channel) }\n\t\t\telse if (runningChannels.includes(channel)) { close(channel) }\n\t\t}\n\t}\n\tconst closeChannels = () => {\n\t\twindow.removeEventListener('storage', storageListener)\n\t\tfor (const channel in channels) { close(channel) }\n\t}\n\twatch(step, () => setTimeout(storageListener))\n\twindow.addEventListener('storage', storageListener)\n\tstorageListener()\n\treturn { states, closeChannels }\n}\n\n\n\nasync function heartbeat (instanceName: string, timeout?: number) {\n\tif (instanceName === instance) { return true }\n\tconst fullKey = 'heartbeat:' + instanceName + instance\n\tconst promise = new Promise(resolve => {\n\t\tconst heartbeatListener = async (e: StorageEvent) => {\n\t\t\tif (e.key === fullKey && e.newValue) { heartbeatReturn(true) }\n\t\t}\n\t\tconst heartbeatReturn = (result: boolean) => {\n\t\t\tif (result) { clearTimeout(cleanupTimeout) }\n\t\t\tsetTimeout(() => localStorage.removeItem(fullKey), 1000)\n\t\t\tif (!result) { localStorage.removeItem('connectorState:' + instanceName) }\n\t\t\twindow.removeEventListener('storage', heartbeatListener)\n\t\t\tresolve(result)\n\t\t}\n\t\twindow.addEventListener('storage', heartbeatListener)\n\t\tconst cleanupTimeout = setTimeout(() => heartbeatReturn(false), Math.max(5000, timeout || 0))\n\t\tif (timeout) { setTimeout(() => resolve(false), timeout) }\n\t})\n\tlocalStorage.setItem(fullKey, '')\n\treturn promise\n}\n\nfunction cleanHeartbeats () {\n\tfor (const key in localStorage) {\n\t\tif (key.slice(0, 'heartbeat:'.length) !== 'heartbeat:') { continue }\n\t\tconst relatedChannel = 'connectorState:' + key.slice('heartbeat:'.length)\n\t\tif (localStorage.getItem(relatedChannel)) { continue }\n\t\tlocalStorage.removeItem(key)\n\t}\n}\n\nexport function filterChannels (filter: object, object = states) {\n\tconst filterFunction = ([key, state]: [string, any]) => typeof filter === 'function' ? filter(state)\n\t\t: !Object.entries(filter || {}).find(([key, value]) => state[key] !== value)\n\treturn Object.fromEntries(Object.entries(object).filter(filterFunction))\n}\n\nfunction globalStorageListener (e: StorageEvent) {\n\tconst partialKey = 'heartbeat:' + instance\n\tif (e.key?.slice(0, partialKey.length) === partialKey && e.newValue === '') {\n\t\tlocalStorage.setItem(e.key, 'ok')\n\t}\n}\n\nexport async function hasStorageAccess () {\n\tif (document.hasStorageAccess && !await document.hasStorageAccess()) { return false }\n\tif (localStorage.getItem('global')) { return true }\n}\n\nexport async function awaitStorageAccess () {\n\twhile (!await hasStorageAccess()) { await new Promise(resolve => setTimeout(resolve, 1000)) }\n}\n\n\n\ncleanHeartbeats()\nwindow.addEventListener('storage', globalStorageListener)\nwindow.addEventListener('beforeunload', () => deleteChannel())","export default \"__VITE_ASSET__628d8d4d__\"","export default \"__VITE_ASSET__b1986487__\"","import { reactive, watch } from 'vue'\nimport mitt from 'mitt'\n\nimport logoArweaveBlack from '@/assets/logos/arweaveBlack.svg?url'\nimport logoArweaveWhite from '@/assets/logos/arweaveWhite.svg?url'\n\nconst InterfaceStore = reactive({\n\twindowWidth: window.innerWidth,\n\twindowVisible: !document.hidden,\n\ttoolbar: {\n\t\tenabled: true,\n\t\tlinks: true,\n\t},\n\tbreakpoints: {\n\t\tverticalLayout: false,\n\t\tverticalContent: false,\n\t},\n\tsticky: false,\n\tdragOverlay: false,\n\twallet: {\n\t\tsend: {\n\t\t\ttarget: '',\n\t\t\tquantity: '',\n\t\t\tdata: '',\n\t\t\ttags: [],\n\t\t},\n\t},\n})\n\nexport const emitter = mitt()\nemitter.once = (eventName, handler) => {\n\treturn new Promise(resolve => {\n\t\tconst wrapper = (e) => {\n\t\t\temitter.off(eventName, wrapper)\n\t\t\tresolve(e)\n\t\t\tif (handler) { handler(e) }\n\t\t}\n\t\temitter.on(eventName, wrapper)\n\t})\n}\n\n\n\nconst updateWindowSize = () => {\n\tInterfaceStore.windowWidth = window.innerWidth\n\tInterfaceStore.breakpoints.verticalLayout = InterfaceStore.windowWidth < 599\n\tInterfaceStore.breakpoints.verticalContent = InterfaceStore.windowWidth < 1099\n}\nupdateWindowSize()\nwindow.addEventListener('resize', updateWindowSize)\n\ndocument.addEventListener('visibilitychange', () => InterfaceStore.windowVisible = !document.hidden)\n\nlet dragCount = 0\ndocument.addEventListener('dragenter', (e) => { e.preventDefault(); if (e.dataTransfer.types[0] == 'Files') { InterfaceStore.dragOverlay = !!++dragCount } }, true)\ndocument.addEventListener('dragleave', (e) => { e.preventDefault(); if (e.dataTransfer.types[0] == 'Files') { InterfaceStore.dragOverlay = !!--dragCount } }, true)\ndocument.addEventListener('dragend', (e) => { e.preventDefault(); dragCount = 0; InterfaceStore.dragOverlay = false; }, true)\ndocument.addEventListener('dragover', (e) => { e.preventDefault() }, true)\ndocument.addEventListener('drop', (e) => { e.preventDefault(); dragCount = 0; InterfaceStore.dragOverlay = false; }, true)\n\nif (navigator.appVersion.indexOf(\"Win\") != -1 || navigator.appVersion.indexOf('Macintosh') != -1) {\n\tdocument.documentElement.classList.add('styleScroll')\n}\n\nconst faviconEl = document.createElement('link')\nfaviconEl.setAttribute('rel', 'favicon icon')\nconst setFavicon = (e) => {\n\tfaviconEl.remove()\n\tif (e.matches) { faviconEl.setAttribute('href', logoArweaveBlack) }\n\telse { faviconEl.setAttribute('href', logoArweaveWhite) }\n\tdocument.head.appendChild(faviconEl)\n}\nif (window.matchMedia) {\n\tconst matchTheme = window.matchMedia('(prefers-color-scheme: light)')\n\tmatchTheme.addEventListener('change', setFavicon)\n\tsetFavicon(matchTheme)\n} else { setFavicon({ matches: false }) }\n\n\n\nexport default InterfaceStore","import { reactive, computed, effectScope, isRef, Ref, ref, watch, watchEffect, WatchStopHandle, WritableComputedRef, toRef, toRefs } from 'vue'\nimport InterfaceStore from '@/store/InterfaceStore'\n\n\n\nconst globalClock = ref(0)\nsetInterval(() => globalClock.value++, 1000)\nwatch(() => InterfaceStore.windowVisible, () => globalClock.value++)\n\n\n\ntype ReactiveQueryOptions<T, P> = Override<AsyncDataOptions<T>, {\n\tparams: Ref<P>\n\tquery: (params: NonNullable<P>) => Promise<T>\n\texistingState?: undefined\n}>\n\ntype AsyncDataOptions<T> = QueryManagerOptions<T> & {\n\tseconds?: number\n\tstale?: (state: T | undefined) => any\n\tcompleted?: (state: T | undefined) => any\n\ttimestamp?: Ref<number | undefined>\n\texistingState?: Ref<T | undefined>\n\tprocessResult?: (state: T, options: AsyncDataOptions<T>) => void\n}\n\ntype QueryManagerOptions<T> = {\n\tname?: string\n\tquery: () => Promise<T>\n\tawaitEffect?: () => any\n}\n\ntype QueryStatusInterface<T> = {\n\trunning: boolean\n\tpromise?: Promise<T>\n\terror?: string\n}\n\n\n\nexport function getReactiveAsyncData <T, P> (options: ReactiveQueryOptions<T, P>) {\n\tconst { query, params, ...newOptions } = options\n\tconst state = ref<T | undefined>()\n\twatch(params, (val, oldVal) => {\n\t\tif (val == null) { return }\n\t\tif (JSON.stringify(val) === JSON.stringify(oldVal)) { return }\n\t\tstate.value = undefined\n\t}, { immediate: true, deep: true })\n\tconst asyncDataOptions: AsyncDataOptions<T> = {\n\t\t...newOptions,\n\t\tquery: () => query(params.value!),\n\t\texistingState: state\n\t}\n\treturn getAsyncData<T>(asyncDataOptions)\n}\n\nexport function getAsyncData <T> (options: AsyncDataOptions<T>) {\n\tconst state = isRef(options.existingState) ? options.existingState : ref(options.existingState) as Ref<T | undefined>\n\tconst timestamp = isRef(options.timestamp) ? options.timestamp : ref(options.timestamp) as Ref<number | undefined>\n\tlet cooldown = 0\n\tconst { query, queryStatus } = getQueryManager(options)\n\tconst localClock = ref(0)\n\tconst getState = async (force?: boolean) => {\n\t\tif (options.completed?.(state.value)) { return state.value! }\n\t\tif (queryStatus.promise && (queryStatus.running || cooldown)) { timestamp.value = Date.now(); return queryStatus.promise }\n\t\tif (!options.seconds || !force && state.value != null && timestamp.value && Date.now() - timestamp.value < (options.seconds * 1000)) { return state.value }\n\t\tconst rollback = timestamp.value\n\t\tconst initTimestamp = Date.now()\n\t\ttimestamp.value = initTimestamp\n\t\treturn new Promise<T>((resolve, reject) => {\n\t\t\tquery().then(res => {\n\t\t\t\ttimestamp.value = Date.now()\n\t\t\t\tif (!res) { throw new Error('not found') }\n\t\t\t\toptions.processResult ? options.processResult(res, options) : state.value = res\n\t\t\t\tresolve(state.value!)\n\t\t\t}).catch(e => {\n\t\t\t\tcooldown = Math.max(0, 20000 - (Date.now() - initTimestamp))\n\t\t\t\tsetTimeout(() => { cooldown = 0; timestamp.value = rollback; reject(e) }, cooldown)\n\t\t\t})\n\t\t})\n\t}\n\tconst scope = effectScope()\n\tscope.run(() => watch(globalClock, () => {\n\t\tif (options.completed?.(state.value)) { return }\n\t\tif (!InterfaceStore.windowVisible) { return }\n\t\tif (queryStatus.running) { timestamp.value = Date.now(); return }\n\t\tif (!options.seconds || !options.stale?.(state.value) && state.value != null && timestamp.value && Date.now() - timestamp.value < (options.seconds * 1000)) { return }\n\t\tlocalClock.value++\n\t}))\n\tconst computedState = scope.run(() => computed({\n\t\tget () { localClock.value; getState(); return state.value },\n\t\tset (value) { state.value = value }\n\t})) as WritableComputedRef<T | undefined>\n\treturn { state: computedState, stateRef: state, getState, queryStatus, stop: () => scope.stop() }\n}\n\nexport function getQueryManager <T> (options: QueryManagerOptions<T>) {\n\tconst queryStatus: QueryStatusInterface<T> = reactive({ running: false })\n\tconst query = () => {\n\t\tif (queryStatus.running && queryStatus.promise) { return queryStatus.promise }\n\t\tqueryStatus.running = true\n\t\tqueryStatus.error = undefined\n\t\tqueryStatus.promise = new Promise<T>(async (resolve, reject) => {\n\t\t\tif (options.awaitEffect) { await awaitEffect(() => options.awaitEffect?.()) }\n\t\t\tconst query = options.query()\n\t\t\tquery.then(resolve).catch(e => { queryStatus.error = e; reject(e) }).finally(() => queryStatus.running = false)\n\t\t\tquery.then(res => console.log(new Date(Date.now()).toLocaleTimeString() + '\\n', options.name, { options, res }))\n\t\t})\n\t\treturn queryStatus.promise\n\t}\n\treturn { query, queryStatus }\n}\n\n\n\nexport function awaitEffect (effect: () => any) {\n\tlet watchStop: WatchStopHandle\n\treturn new Promise(resolve => {\n\t\twatchStop = watchEffect(() => {\n\t\t\tif (effect()) { resolve(true) }\n\t\t})\n\t}).then(() => { watchStop(); return true })\n}\n\n\n\nexport function computedAsync <T> (query: () => T | Promise<T>) {\n\tconst state = ref() as Ref<T | undefined>\n\tconst request = ref(-1)\n\tconst feedback = ref(-2)\n\tlet n = 0\n\twatchEffect(async () => {\n\t\trequest.value = n\n\t\tif (feedback.value !== request.value) { return }\n\t\tconst currentN = ++n\n\t\tconst result = await query()\n\t\tif (currentN === n) { state.value = result }\n\t})\n\treturn computed(() => {\n\t\tfeedback.value = request.value\n\t\treturn state.value\n\t})\n}\n\n\n\nexport function useDataWrapper <\n\tSourceType extends { [key in Id]: string },\n\tRuntimeType,\n\tId extends string,\n> (\n\tsource: Ref<SourceType[]>,\n\tkey: Id,\n\tconstructor: (source: SourceType) => RuntimeType,\n\tdestructor?: (runtime: RuntimeType) => any,\n) {\n\tconst Store: { [id: string]: RuntimeType } = {}\n\treturn computed<RuntimeType[]>({\n\t\tget () {\n\t\t\tconst runtimeData = Object.keys(Store)\n\t\t\tconst sourceData = source.value.map(w => w[key] + '')\n\t\t\tfor (const id of [...runtimeData, ...sourceData]) {\n\t\t\t\tif (runtimeData.includes(id) && !sourceData.includes(id)) {\n\t\t\t\t\tdestructor?.(Store[id])\n\t\t\t\t\tdelete Store[id]\n\t\t\t\t}\n\t\t\t\tif (!runtimeData.includes(id) && sourceData.includes(id)) {\n\t\t\t\t\tconst sourceEntry = source.value.find(w => w[key] == id)!\n\t\t\t\t\tStore[id] = constructor(sourceEntry)\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn Object.entries(Store).sort((a, b) => source.value.findIndex(s => s[key] == a[0]) - source.value.findIndex(s => s[key] == b[0])).map(e => e[1])\n\t\t},\n\t\tset (value) {\n\t\t\tsource.value = source.value.filter(s => value.find(r => r === Store[s[key]]))\n\t\t\t.sort((a, b) => value.findIndex(r => r === Store[a[key]]) - value.findIndex(r => r === Store[b[key]]))\n\t\t}\n\t})\n}\n","import Arweave from 'arweave'\nimport type { BlockEdge as GQLBlockEdge, TransactionEdge as GQLTransactionEdge } from 'arweave-graphql'\nimport arweaveGraphql, { SortOrder } from 'arweave-graphql'\nimport { generateUrl } from '@/functions/Utils'\nimport { useChannel } from '@/functions/Channels'\nimport { getAsyncData, getQueryManager, getReactiveAsyncData } from '@/functions/AsyncData'\nimport { isRef, reactive, ref, Ref, watch } from 'vue'\n\n\n\nexport const gatewayDefault = 'https://arweave.net/'\nexport const bundlerDefault = 'https://node2.bundlr.network/'\n\nconst ArweaveStore = reactive({\n\tgatewayURL: useChannel('gateway', undefined, gatewayDefault).state,\n\tbundlerURL: useChannel('bundler', undefined, bundlerDefault).state,\n\tuploads: {} as { [key: string]: { upload?: number } },\n})\n\nexport default ArweaveStore\nexport let arweave: Arweave\n\n\n\nexport function urlToSettings (url: string) {\n\tconst obj = new URL(url)\n\tconst protocol = obj.protocol.replace(':', '')\n\tconst host = obj.hostname\n\tconst port = obj.port ? parseInt(obj.port) : protocol === 'https' ? 443 : 80\n\treturn { protocol, host, port }\n}\n\nexport async function updateArweave (url?: string, sync?: boolean) {\n\turl = url ? generateUrl(url) : gatewayDefault\n\tconst settings = urlToSettings(url)\n\tif (!sync) {\n\t\tconst arweaveTest = Arweave.init(settings)\n\t\tconst net = await arweaveTest.network.getInfo()\n\t\tif (!net.network) { throw 'Invalid' }\n\t}\n\tarweave = Arweave.init(settings)\n\tArweaveStore.gatewayURL = url\n\t// todo if network name is different, clear all cache\n}\n\nexport async function updateBundler (url?: string, sync?: boolean) {\n\turl = url ? generateUrl(url) : bundlerDefault\n\tArweaveStore.bundlerURL = url\n}\n\nexport function useWatchTx (txId: Ref<string | undefined>) {\n\treturn getReactiveAsyncData({\n\t\tname: 'single tx header',\n\t\tparams: txId,\n\t\tquery: async (txId) => (await graphql().getTransactions({ ids: [txId] })).transactions.edges[0]?.node,\n\t\tcompleted: (state: any) => state?.block,\n\t\tseconds: 10,\n\t})\n}\n\nexport async function fetchPublicKey (address: string) {\n\tconst tx = (await graphql().getTransactions({ owners: [address] })).transactions.edges\n\treturn tx?.[0]?.node.owner.key as string | undefined\n}\n\n\n\nconst blockSort = (a: GQLTransactionEdge, b: GQLTransactionEdge) => (b.node.block?.height ?? Number.MAX_SAFE_INTEGER)\n\t- (a.node.block?.height ?? Number.MAX_SAFE_INTEGER)\n\nexport const graphql = () => arweaveGraphql((ArweaveStore.gatewayURL || 'https://arweave.net/') + 'graphql')\n\n\n\ntype arweaveQueryOptions = Parameters<ReturnType<typeof graphql>['getTransactions']>[0] | Ref<Parameters<ReturnType<typeof graphql>['getTransactions']>[0]>\n\nexport function arweaveQuery (options: arweaveQueryOptions, name = 'tx list') { // todo rename to arweaveTransactions, fix changing query while loading\n\tconst optionsRef = isRef(options) ? options : ref(options)\n\tconst status = reactive({ completed: false, reset: 0 })\n\tconst data = ref([] as GQLTransactionEdge[])\n\tconst refresh = 10\n\tconst refreshEnabled = ref(false)\n\tconst refreshSwitch = ref(true) // todo\n\t\n\twatch(optionsRef, (val) => {\n\t\tdata.value = []\n\t\trefreshEnabled.value = false\n\t\tstatus.completed = false\n\t\tstatus.reset++\n\t}, { deep: true })\n\t\n\tconst fetchQuery = getQueryManager({\n\t\tname: name + ' fetch',\n\t\tquery: async () => {\n\t\t\tif (optionsRef.value == null || status.completed) { return data.value }\n\t\t\tlet fulfilled = false\n\t\t\tlet results: any\n\t\t\ttry {\n\t\t\t\tconst firstFetch = !data.value.length\n\t\t\t\tfor (let i = 0; !fulfilled; i++) {\n\t\t\t\t\tif (i === 0 && firstFetch) {\n\t\t\t\t\t\tresults = await graphql().getTransactions(optionsRef.value)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst cursor = data.value[data.value.length - 1].cursor\n\t\t\t\t\t\tresults = await graphql().getTransactions({ ...optionsRef.value, after: cursor })\n\t\t\t\t\t}\n\t\t\t\t\tif (!results.transactions.pageInfo.hasNextPage) { status.completed = true; fulfilled = true }\n\t\t\t\t\tresults = results.transactions.edges\n\t\t\t\t\tif (results.length < 10) { status.completed = true; fulfilled = true } // todo remove??\n\t\t\t\t\tif (results[results.length - 1]?.node.block) { fulfilled = true }\n\t\t\t\t\tdata.value.push(...results)\n\t\t\t\t}\n\t\t\t\tif (firstFetch) { setTimeout(() => refreshEnabled.value = true, refresh * 1000) }\n\t\t\t}\n\t\t\tcatch (e) { console.error(e); await new Promise<void>(res => setTimeout(() => res(), 10000)); throw e }\n\t\t\treturn results\n\t\t},\n\t})\n\t\n\tconst updateQuery = getAsyncData({\n\t\tname: name + ' update',\n\t\tawaitEffect: () => !fetchQuery.queryStatus.running && refreshEnabled.value,\n\t\tquery: async () => {\n\t\t\tlet requireSort = false\n\t\t\tlet fulfilled = false\n\t\t\tlet results: any\n\t\t\tfor (let i = 0; !fulfilled; i++) {\n\t\t\t\tif (i === 0) { results = await graphql().getTransactions(optionsRef.value) }\n\t\t\t\telse {\n\t\t\t\t\tif (!results) { return }\n\t\t\t\t\tconst cursor = results[results.length - 1].cursor\n\t\t\t\t\tresults = await graphql().getTransactions({ ...optionsRef.value, after: cursor })\n\t\t\t\t}\n\t\t\t\tif (!results.transactions.pageInfo.hasNextPage) { status.completed = true; fulfilled = true }\n\t\t\t\tresults = results.transactions.edges\n\t\t\t\tif (results.length < 10) { status.completed = true; fulfilled = true }\n\t\t\t\tconst resultsFiltered = []\n\t\t\t\tfor (const result of results) {\n\t\t\t\t\tconst matchingTx = data.value.find(el => el.node.id === result.node.id)\n\t\t\t\t\tif (matchingTx) {\n\t\t\t\t\t\tif (matchingTx.node.block) { fulfilled = true }\n\t\t\t\t\t\telse if (result.node.block) { Object.assign(matchingTx, result); requireSort = true }\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresultsFiltered.push(result)\n\t\t\t\t\t\tif (result.node.block) { requireSort = true }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (resultsFiltered.length > 0) { data.value.splice(0, 0, ...resultsFiltered) }\n\t\t\t\tif (requireSort) { data.value.sort(blockSort); requireSort = false }\n\t\t\t}\n\t\t\treturn results\n\t\t},\n\t\tseconds: refresh,\n\t\texistingState: data,\n\t\tprocessResult: () => {},\n\t\tcompleted: () => optionsRef.value?.block?.max\n\t\t\t|| optionsRef.value?.bundledIn || !refreshSwitch.value\n\t\t\t|| optionsRef.value?.ids && data.value.length === (optionsRef.value?.ids.length || 1)\n\t})\n\t\n\treturn { state: updateQuery.state, fetchQuery, updateQuery, status, refreshSwitch }\n}\n\n\n\nexport function arweaveQueryBlocks (options: Parameters<ReturnType<typeof graphql>['getBlocks']>[0]) { // todo rename to arweaveBlocks and make reactive\n\tconst status = reactive({ completed: false })\n\tconst data = ref([] as GQLBlockEdge[])\n\tconst refresh = 10\n\tconst refreshEnabled = ref(false)\n\t\n\tconst fetchQuery = getQueryManager({\n\t\tname: 'block list fetch',\n\t\tquery: async () => {\n\t\t\tif (status.completed) { return data.value }\n\t\t\tlet results: any\n\t\t\ttry {\n\t\t\t\tconst cursor = data.value[data.value.length - 1]?.cursor\n\t\t\t\tif (!cursor) { results = await graphql().getBlocks(options) }\n\t\t\t\telse { results = await graphql().getBlocks({ ...options, after: cursor }) }\n\t\t\t\tif (!results.blocks.pageInfo.hasNextPage) { status.completed = true }\n\t\t\t\tresults = results.blocks.edges\n\t\t\t\tif (results.length < 10) { status.completed = true } // todo remove??\n\t\t\t\tif (!data.value.length) { setTimeout(() => refreshEnabled.value = true, refresh * 1000) }\n\t\t\t\tdata.value.push(...results)\n\t\t\t} catch (e) { console.error(e); await new Promise<void>(res => setTimeout(() => res(), 10000)) }\n\t\t},\n\t})\n\t\n\tconst updateQuery = getAsyncData({\n\t\tname: 'block list update',\n\t\tawaitEffect: () => !fetchQuery.queryStatus.running && refreshEnabled.value,\n\t\tquery: async () => {\n\t\t\tlet results = (await graphql().getBlocks({ ...options, height: { min: data.value[0].node.height + 1 }, sort: SortOrder.HeightAsc })).blocks.edges\n\t\t\tif (results.length > 0) { data.value.splice(0, 0, ...results.reverse()) }\n\t\t\treturn results\n\t\t},\n\t\tseconds: refresh,\n\t\texistingState: data,\n\t\tprocessResult: () => {},\n\t})\n\t\n\treturn { state: updateQuery.state, fetchQuery, updateQuery, status }\n}\n\n\n\nexport function queryAggregator (queries: ReturnType<typeof arweaveQuery>[]) {\n\tconst status = reactive({ completed: false, reset: 0 })\n\tconst data = ref([] as { node: any, cursor: string }[])\n\tconst refresh = 10\n\tconst refreshSwitch = ref(true) // todo\n\t\n\tlet initial = [] as any[]\n\tlet lastAdded = [] as any[]\n\t\n\twatch(refreshSwitch, val => queries.forEach(q => q.refreshSwitch.value = val))\n\tqueries.map(query => {\n\t\twatch(() => query.updateQuery.stateRef.value, state => {\n\t\t\tif (!state) { return }\n\t\t\tconst queryIndex = queries.indexOf(query)\n\t\t\tconst index = state.indexOf(initial[queryIndex])\n\t\t\tconst newResults = [] as any[]\n\t\t\tfor (let i = index - 1; i >= 0; i--) { if (data.value.indexOf(state[i]) < 0) { newResults.push(state[i]) } }\n\t\t\tif (newResults.length) { data.value.splice(0, 0, ...newResults) }\n\t\t\tdata.value.sort(blockSort)\n\t\t}, { deep: true, flush: 'sync' })\n\t\twatch(() => query.status.reset, () => {\n\t\t\tdata.value = []\n\t\t\tinitial = []\n\t\t\tlastAdded = []\n\t\t\tstatus.completed = false\n\t\t\tstatus.reset++\n\t\t})\n\t})\n\t\n\tconst fetchQuery = getQueryManager({\n\t\tname: 'aggregated fetch',\n\t\tquery: async () => {\n\t\t\tlet fulfilled = false\n\t\t\tfor (let i = 0; !fulfilled; i++) {\n\t\t\t\tconst queryControls = queries.map(query => {\n\t\t\t\t\tconst queryIndex = queries.indexOf(query)\n\t\t\t\t\tconst index = query.updateQuery.stateRef.value?.indexOf(lastAdded[queryIndex]) ?? -1\n\t\t\t\t\tconst prep = async () => {\n\t\t\t\t\t\tif (index + 1 === query.updateQuery.stateRef.value?.length) { await query.fetchQuery.query() }\n\t\t\t\t\t\tif (!query.updateQuery.stateRef.value?.[index + 1]) { return }\n\t\t\t\t\t\tif (!initial[queryIndex]) { initial[queryIndex] = query.updateQuery.stateRef.value?.[index] }\n\t\t\t\t\t\tif (!initial[queryIndex]?.node.block && query.updateQuery.stateRef.value?.[index]?.node.block) { initial[queryIndex] = query.updateQuery.stateRef.value?.[index] }\n\t\t\t\t\t\treturn query.updateQuery.stateRef.value?.[index + 1]\n\t\t\t\t\t}\n\t\t\t\t\tconst step = () => {\n\t\t\t\t\t\tconst nextEl = (query.updateQuery.stateRef.value!)[index + 1]\n\t\t\t\t\t\tif (data.value.indexOf(nextEl) < 0) { data.value.push(nextEl) }\n\t\t\t\t\t\tlastAdded[queryIndex] = nextEl\n\t\t\t\t\t}\n\t\t\t\t\treturn { prep, step }\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tlet row = await Promise.all(queryControls.map(q => q.prep()))\n\t\t\t\tconst nextEl = row.find(el => el && el.node.block == null)\n\t\t\t\t\t|| row.reduce((acc, el) => el && el.node.block.height > (acc?.node.block.height || 0) ? el : acc, undefined)\n\t\t\t\tif (!nextEl) { status.completed = true; break }\n\t\t\t\tif (nextEl.node.block && i >= 10) { fulfilled = true }\n\t\t\t\tconst queryIndex = row.indexOf(nextEl)\n\t\t\t\tqueryControls[queryIndex].step()\n\t\t\t}\n\t\t\treturn 'aggregated query fetch completed'\n\t\t},\n\t})\n\t\n\tconst updateQuery = getAsyncData({\n\t\tname: 'aggregated update',\n\t\tquery: async () => (await Promise.all(queries.map(query => query.updateQuery.getState()))).flat(),\n\t\tseconds: refresh,\n\t\texistingState: data,\n\t\tprocessResult: () => {},\n\t})\n\t\n\treturn { state: updateQuery.state, fetchQuery, updateQuery, status, refreshSwitch }\n}\n\n\n//\n// async function refreshTx () {\n// \tif (!InterfaceStore.windowVisible) { return }\n// \tlet requireSort = false\n// \tconst ids = []\n// \tconst txs = []\n// \tfor (const key in ArweaveStore.txs) {\n// \t\tif (!ArweaveStore.txs[key].block) {\n// \t\t\tids.push(key)\n// \t\t\ttxs.push(ArweaveStore.txs[key])\n// \t\t}\n// \t}\n// \tif (ids.length === 0) { return }\n// \tconst results = await arDB.search().ids(ids).findAll() as GQLEdgeTransactionInterface[]\n// \tconsole.log('updating:', results)\n// \tfor (const tx of txs) {\n// \t\tconst updatedTx = results.find((el) => el?.node?.id === tx.id)?.node\n// \t\tif (updatedTx) {\n// \t\t\tif (updatedTx.block) { requireSort = true }\n// \t\t\tObject.assign(tx, updatedTx)\n// \t\t} else {\n// \t\t\tconsole.error('tx missing? :0', tx)\n// \t\t}\n// \t}\n// \tif (requireSort) { sortByBlocks() }\n// \treturn\n// }\n//\n// function sortByBlocks (wallet?: ArweaveAccount, query?: Query) {\n// \tconst sort = (a: GQLEdgeTransactionInterface, b: GQLEdgeTransactionInterface) => (b.node.block?.height ?? Number.MAX_SAFE_INTEGER)\n// \t\t- (a.node.block?.height ?? Number.MAX_SAFE_INTEGER)\n// \tif (wallet && wallet.queries[query!]) {\n// \t\twallet.queries[query!].sort(sort)\n// \t} else {\n// \t\tfor (const key in ArweaveStore.wallets) {\n// \t\t\tfor (const query in ArweaveStore.wallets[key].queries) {\n// \t\t\t\tArweaveStore.wallets[key].queries[query].sort(sort)\n// \t\t\t}\n// \t\t}\n// \t}\n// }\n\n\n\nconst networkInfoData = getAsyncData({\n\tname: 'network info',\n\tquery: () => arweave.network.getInfo(),\n\tseconds: 10,\n})\nwatch(() => ArweaveStore.gatewayURL, () => networkInfoData.state.value = undefined)\nexport const networkInfo = networkInfoData.state\n\n\nexport const currentBlockData = getAsyncData({\n\tname: 'current block',\n\tquery: () => arweave.blocks.getCurrent(),\n\tseconds: 60,\n\tstale: (state) => networkInfoData.stateRef.value && state && networkInfoData.stateRef.value.height > state.height,\n\tcompleted: (state) => networkInfoData.stateRef.value && state && networkInfoData.stateRef.value.height == state.height,\n})\nexport const currentBlock = currentBlockData.state\n\n\n\nfunction loadGatewaySettings () {\n\tupdateArweave(ArweaveStore.gatewayURL || gatewayDefault, true)\n\tupdateBundler(ArweaveStore.bundlerURL || bundlerDefault, true)\n}\nloadGatewaySettings()","import ArweaveStore, { graphql } from '@/store/ArweaveStore'\nimport type { Transaction as GQLTransaction } from 'arweave-graphql'\n\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { reactive, watch } from 'vue'\nimport axios from 'axios'\nimport { awaitEffect, getAsyncData } from '@/functions/AsyncData'\n\n\n\nconst BlockStore = reactive({\n\tcurrentHeight: null,\n\tcurrentHeightStatus: {},\n\tblocks: {},\n\tblocksStatus: {},\n\tmempool: {} as { [id: string]: any },\n\tmempoolStatus: {\n\t\tprogress: undefined as undefined | number\n\t},\n})\n\nexport default BlockStore\n\n\n\nconst pendingListData = getAsyncData({\n\tname: 'mempool list',\n\tquery: async () => (await axios.get(ArweaveStore.gatewayURL + 'tx/pending')).data,\n\tseconds: 10,\n})\nexport const pendingList = pendingListData.state\nexport const getPending = pendingListData.getState\nconst mempoolData = getAsyncData({\n\tname: 'mempool data',\n\tquery: async () => {\n\t\tconst currentIds = await pendingListData.getState()\n\t\tconst txs = []\n\t\tconst ids = currentIds.filter((id: string) => {\n\t\t\tif (!BlockStore.mempool[id]) { return true }\n\t\t\ttxs.push(BlockStore.mempool[id])\n\t\t})\n\t\tconsole.log('Mempool: fetched from cache', txs.length)\n\t\tconsole.log('Mempool: need to fetch', ids.length)\n\t\tconst txsTotal = ids.length\n\t\tlet txsLoaded = 0\n\t\tBlockStore.mempoolStatus.progress = 0\n\t\twhile (ids.length > 0) {\n\t\t\tconst idBatch = ids.splice(0, 100)\n\t\t\t// const newTxs = await arDB.search().ids(idBatch).only(['id', 'fee.winston']).findAll()\n\t\t\tconst newTxs = (await graphql().getTransactions({ ids: idBatch })).transactions.edges.map(edge => edge.node)\n\t\t\ttxsLoaded += idBatch.length\n\t\t\tBlockStore.mempoolStatus.progress = txsLoaded / txsTotal * 100\n\t\t\tnewTxs.forEach(newTx => BlockStore.mempool[newTx.id] = newTx)\n\t\t\ttxs.push(...newTxs)\n\t\t}\n\t\tsetTimeout(() => delete BlockStore.mempoolStatus.progress, 1000)\n\t\treturn txs\n\t},\n\tseconds: 10,\n})\nexport const mempool = mempoolData.state\nexport const getMempool = mempoolData.getState","const scriptRel = 'modulepreload';const seen = {};const base = '/';export const __vitePreload = function preload(baseModule, deps) {\n    // @ts-ignore\n    if (!__VITE_IS_MODERN__ || !deps || deps.length === 0) {\n        return baseModule();\n    }\n    return Promise.all(deps.map((dep) => {\n        // @ts-ignore\n        dep = `${base}${dep}`;\n        // @ts-ignore\n        if (dep in seen)\n            return;\n        // @ts-ignore\n        seen[dep] = true;\n        const isCss = dep.endsWith('.css');\n        const cssSelector = isCss ? '[rel=\"stylesheet\"]' : '';\n        // @ts-ignore check if the file is already preloaded by SSR markup\n        if (document.querySelector(`link[href=\"${dep}\"]${cssSelector}`)) {\n            return;\n        }\n        // @ts-ignore\n        const link = document.createElement('link');\n        // @ts-ignore\n        link.rel = isCss ? 'stylesheet' : scriptRel;\n        if (!isCss) {\n            link.as = 'script';\n            link.crossOrigin = '';\n        }\n        link.href = dep;\n        // @ts-ignore\n        document.head.appendChild(link);\n        if (isCss) {\n            return new Promise((res, rej) => {\n                link.addEventListener('load', res);\n                link.addEventListener('error', rej);\n            });\n        }\n    })).then(() => baseModule());\n}","export function isEncrypted (val: any): val is EncryptedContent { return Array.isArray(val.ciphertext) && typeof val.derivationSettings === 'object' }\n\nfunction getDerivationSettings (): DerivationSettings {\n\tconst iv = window.crypto.getRandomValues(new Uint8Array(12))\n\tconst salt = window.crypto.getRandomValues(new Uint8Array(16))\n\treturn {\n\t\tiv: Array.from(iv),\n\t\tsalt: Array.from(salt),\n\t\timportAlgorithm: 'PBKDF2',\n\t\tderivationAlgorithm: { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },\n\t\tderivedKeyAlgorithm: { name: 'AES-GCM', length: 256 },\n\t}\n}\n\nasync function deriveKey (password: string, derivationSettings: DerivationSettings) {\n\tderivationSettings.derivationAlgorithm.salt = new Uint8Array(derivationSettings.salt)\n\tconst keyMaterial = await window.crypto.subtle.importKey('raw', encode(password), derivationSettings.importAlgorithm, false, ['deriveKey'])\n\treturn window.crypto.subtle.deriveKey(derivationSettings.derivationAlgorithm, keyMaterial, derivationSettings.derivedKeyAlgorithm, false, ['encrypt', 'decrypt'])\n}\n\nexport async function passwordEncrypt (password: string, content: any): Promise<EncryptedContent> {\n\tif (isEncrypted(content)) { throw 'content is already encrypted' }\n\tconst derivationSettings = getDerivationSettings()\n\tconst derivedKey = await deriveKey(password, derivationSettings)\n\tconst ciphertext = await window.crypto.subtle.encrypt({ name: derivationSettings.derivedKeyAlgorithm.name, iv: new Uint8Array(derivationSettings.iv) }, derivedKey, encode(JSON.stringify(content))) as Uint8Array\n\treturn { ciphertext: Array.from(new Uint8Array(ciphertext)), derivationSettings }\n}\n\nexport async function passwordDecrypt (password: string, encrypted: EncryptedContent): Promise<any> {\n\tif (!isEncrypted(encrypted)) { throw 'content is already decrypted' }\n\tconst { ciphertext, derivationSettings } = encrypted\n\tconst derivedKey = await deriveKey(password, derivationSettings)\n\tconst encoded = await window.crypto.subtle.decrypt({ name: derivationSettings.derivedKeyAlgorithm.name, iv: new Uint8Array(derivationSettings.iv) }, derivedKey, new Uint8Array(ciphertext))\n\treturn JSON.parse(decode(encoded))\n}\n\n\n\nexport async function pkcs8ToJwk (key: Uint8Array) {\n\tconst imported = await window.crypto.subtle.importKey('pkcs8', key, { name: 'RSA-PSS', hash: 'SHA-256' }, true, ['sign'])\n\tconst jwk = await window.crypto.subtle.exportKey('jwk', imported)\n\tdelete jwk.key_ops\n\tdelete jwk.alg\n\treturn jwk\n}\n\nexport async function getSigningKey (key: JsonWebKey) {\n\tconst jwk = { ...key }\n\tdelete jwk.key_ops\n\tdelete jwk.alg\n\treturn window.crypto.subtle.importKey('jwk', jwk, { name: 'RSA-PSS', hash: 'SHA-256' }, false, ['sign'])\n}\n\nexport async function getDecryptionKey (key: JsonWebKey) {\n\tconst jwk = { ...key }\n\tdelete jwk.key_ops\n\tdelete jwk.alg\n\treturn window.crypto.subtle.importKey('jwk', jwk, { name: 'RSA-OAEP', hash: 'SHA-256' }, false, ['decrypt'])\n}\n\n\n\nexport function encode (text: string) {\n\tconst encoder = new TextEncoder()\n\treturn encoder.encode(text)\n}\n\nexport function decode (buffer: BufferSource) {\n\tconst decoder = new TextDecoder()\n\treturn decoder.decode(buffer)\n}","import { useChannel, useLock } from '@/functions/Channels'\nimport { isEncrypted, passwordDecrypt, passwordEncrypt } from '@/functions/Crypto'\nimport { computed } from 'vue'\nimport { JWKInterface } from 'arweave/web/lib/wallet'\nimport mitt from 'mitt'\nimport { getQueryManager } from '@/functions/AsyncData'\nimport { Wallet } from '@/providers/WalletProxy'\nimport { getWalletById } from '@/functions/Wallets'\n\n\n\nexport type PasswordRequest = {\n\treason: 'encrypt' | 'decrypt' | 'change' | 'match'\n\tresolve: (arg: string) => void\n\treject: (e?: string) => void\n\tmatch?: string\n\twallet?: Wallet\n}\n\n\n\nconst pwdTest = useChannel('pwdTest').state\nconst pwdTestLock = useLock(useChannel('pwdTestLock').state)\nconst WalletsData = useChannel('wallets', undefined, []).state\nconst requireUpdate = computed(() => WalletsData.value\n\t.filter(wallet => wallet.settings?.securityLevel && wallet.settings.securityLevel !== 'disabled')\n\t.filter(wallet => wallet.jwk && !isEncrypted(wallet.jwk)))\nexport const hasPassword = computed(() => pwdTest.value)\nexport const hasUpdate = computed(() => requireUpdate.value.length)\n\n\n\nexport async function testPassword (password?: string): Promise<void> {\n\tif (!pwdTest.value != !password) { throw 'Invalid password' }\n\tif (!pwdTest.value || !password) { return }\n\tconst result = await passwordDecrypt(password, pwdTest.value)\n\tif (result !== 'valid') { throw 'Invalid password' }\n}\n\nexport async function updateEncryption () {\n\tawait pwdTestLock.lock()\n\ttry {\n\t\tconst password = await requestPassword({ reason: 'encrypt' })\n\t\tconst promises = requireUpdate.value.map(async wallet => ({\n\t\t\tuuid: getWalletById(wallet.id)?.uuid,\n\t\t\tjwk: await passwordEncrypt(password, wallet.jwk)\n\t\t}))\n\t\tconst wallets = await Promise.all(promises)\n\t\twallets.forEach(wallet => WalletsData.value.find(data => data.uuid === wallet.uuid)!.jwk = wallet.jwk)\n\t} finally { pwdTestLock.unlock() }\n}\n\nexport async function setPassword (password: string): Promise<true> {\n\tawait pwdTestLock.lock()\n\ttry {\n\t\tlet wallets = [] as any[]\n\t\tif (pwdTest.value) {\n\t\t\tconst oldPassword = await requestPassword({ reason: 'change', match: password })\n\t\t\tconst promises = WalletsData.value\n\t\t\t.filter(wallet => wallet.jwk && isEncrypted(wallet.jwk))\n\t\t\t.map(async wallet => ({\n\t\t\t\tuuid: getWalletById(wallet.id)?.uuid,\n\t\t\t\tjwk: await passwordDecrypt(oldPassword!, wallet.jwk as any)\n\t\t\t}))\n\t\t\twallets = await Promise.all(promises)\n\t\t}\n\t\tif (password) {\n\t\t\tif (!pwdTest.value) { await requestPassword({ reason: 'match', match: password }) }\n\t\t\tconst unencrypted = requireUpdate.value.map(wallet => ({\n\t\t\t\tuuid: getWalletById(wallet.id)?.uuid,\n\t\t\t\tjwk: wallet.jwk\n\t\t\t}))\n\t\t\twallets = [...wallets, ...unencrypted]\n\t\t\tconst encryptedContent = await passwordEncrypt(password, 'valid')\n\t\t\tpwdTest.value = encryptedContent\n\t\t\twallets = await Promise.all(wallets.map(async wallet => wallet.jwk = await passwordEncrypt(password, wallet.jwk)))\n\t\t} else {\n\t\t\tpwdTest.value = null\n\t\t}\n\t\twallets.forEach(wallet => WalletsData.value.find(data => data.uuid === wallet.uuid)!.jwk = wallet.jwk)\n\t} finally { pwdTestLock.unlock() }\n\treturn true\n}\n\n\n\nexport const emitter = mitt<{ password: PasswordRequest }>()\nconst privateCache = {} as { [uuid: string]: JWKInterface }\n\n\n\nfunction getCache (uuid: string): JWKInterface | void {\n\treturn privateCache[uuid]\n}\n\nasync function setCache (uuid: string, password: string): Promise<JWKInterface> {\n\tlet currentPrivateKey = undefined as undefined | JWKInterface\n\tconst result = WalletsData.value\n\t.filter(wallet => isEncrypted(wallet.jwk))\n\t.filter(wallet => wallet.uuid === uuid || wallet.settings?.securityLevel !== 'always') // todo settings\n\t.map(async wallet => {\n\t\tconst privateKey = await passwordDecrypt(password, wallet.jwk as any)\n\t\tif (wallet.settings?.securityLevel !== 'always') { privateCache[uuid] = privateKey } // todo cache invalidation\n\t\tif (wallet.uuid === uuid) { currentPrivateKey = privateKey }\n\t})\n\tawait Promise.all(result)\n\treturn currentPrivateKey!\n}\n\nexport async function requestPrivateKey (wallet: Wallet): Promise<JWKInterface> {\n\tlet currentPrivateKey = undefined as undefined | JWKInterface\n\tconst inCache = async () => {\n\t\tconst cache = getCache(wallet.uuid)\n\t\tif (cache) { currentPrivateKey = cache; return true }\n\t}\n\tconst password = await requestPassword({ reason: 'decrypt', wallet }, inCache)\n\tif (!currentPrivateKey) { currentPrivateKey = await setCache(wallet.uuid, password) }\n\treturn currentPrivateKey!\n}\n\nconst requestPasswordQueue = [] as Function[]\n\nconst runQueue = getQueryManager({\n\tname: 'Password',\n\tquery: async () => {\n\t\twhile (requestPasswordQueue.length) {\n\t\t\tconst item = requestPasswordQueue.splice(0, 1)[0]\n\t\t\ttry { await item() } catch (e) {}\n\t\t}\n\t}\n})\n\nasync function requestPassword (request: Omit<PasswordRequest, 'resolve' | 'reject'>, invalidate?: () => Promise<any>) {\n\tlet controls: { resolve: PasswordRequest['resolve'], reject: PasswordRequest['reject']}\n\tconst promise = new Promise<string>((resolve, reject) => controls = { resolve, reject })\n\tconst query = async () => {\n\t\tif (invalidate && await invalidate()) { return }\n\t\temitter.emit('password', { ...request , ...controls })\n\t\tawait promise\n\t}\n\trequestPasswordQueue.push(query)\n\trunQueue.query()\n\treturn promise\n}","import { uuidV4 } from '@/functions/Utils'\nimport { isEncrypted } from '@/functions/Crypto'\nimport { requestPrivateKey } from '@/functions/Password'\nimport { JWKInterface } from 'arweave/web/lib/wallet'\nimport { computed } from 'vue'\n\n\n\nexport type Wallet = Provider & MixinType<typeof WalletProxy>\n\n\n\nexport function WalletProxy <TBase extends ClassConstructor> (Base: TBase) {\n\treturn class WalletProxy extends Base {\n\t\t#wallet: WalletDataInterface\n\t\t#isEncrypted = computed(() => isEncrypted(this.#wallet.jwk))\n\t\tconstructor (...args: any[]) { super(...args)\n\t\t\tthis.#wallet = args[0] as WalletDataInterface\n\t\t\tif (args[0].arweave) { this.data.arweave = args[0].arweave } // TODO remove - temporary conversion\n\t\t\t;(this as any).on('destructor', () => this.#isEncrypted.effect.stop())\n\t\t}\n\t\tget id () { return this.#wallet.id + '' }\n\t\tget uuid () { return this.#wallet.uuid ??= uuidV4() }\n\t\tget data () { return this.#wallet.data ??= {} }\n\t\tget settings () { return this.#wallet.settings ??= {} }\n\t\tget hasPrivateKey () { return !!this.#wallet.jwk }\n\t\tget isEncrypted () { return this.#isEncrypted.value }\n\t\tasync getPrivateKey (): Promise<JWKInterface> {\n\t\t\tif (!isEncrypted(this.#wallet.jwk!)) { return this.#wallet.jwk! }\n\t\t\treturn requestPrivateKey(this as any)\n\t\t}\n\t}\n}","import mitt from 'mitt'\n\n\n\ntype BaseEvents = { destructor: undefined }\ntype AllEvents<T> = Flatten<BaseEvents & T>\n\nexport class Emitter<T extends Record<string, unknown> = {}> {\n\t#mittInstance = mitt<AllEvents<T>>()\n\temit = <Method extends keyof AllEvents<T>> (method: Method, params: AllEvents<T>[Method]) => {this.#mittInstance.emit(method, params)}\n\ton = <Method extends keyof AllEvents<T>> (method: Method, handler: (params: AllEvents<T>[Method]) => void) => {this.#mittInstance.on(method, handler)}\n\toff = <Method extends keyof AllEvents<T>> (method: Method, handler: (params: AllEvents<T>[Method]) => void) => {this.#mittInstance.off(method, handler)}\n\tonce = <Method extends keyof AllEvents<T>> (method: Method, handler: (params: AllEvents<T>[Method]) => void) => {\n\t\treturn new Promise(resolve => {\n\t\t\tconst wrapper: typeof handler = (e) => {\n\t\t\t\tthis.off(method, wrapper);\n\t\t\t\tresolve(e);\n\t\t\t\tif (handler) { handler(e) }\n\t\t\t}\n\t\t\tthis.on(method, wrapper)\n\t\t})\n\t}\n\tdestructor () { this.emit('destructor', undefined) }\n}\n\n\n\ntype ProvideResult<T> = T extends (...a: any) => any ? ReturnType<T> : never\ntype ArrayToFunResult<C> = { [Property in keyof C]: ProvideResult<C[Property]> }\n\nclass MixinBuilder<Base> {\n\tconstructor (public superclass: Base) { }\n\twith<T extends readonly any[]> (...mixins: T) { return mixins.reduce((c, mixin) => mixin(c), this.superclass) as UnionToIntersection<ArrayToFunResult<T>[number]> & Base }\n}\n\nexport function mix<Base extends ClassConstructor> (superclass: Base) { return new MixinBuilder(superclass) }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  viewBox: \"0 0 2330 2330\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  style: {\"fill-rule\":\"evenodd\",\"clip-rule\":\"evenodd\",\"stroke-linejoin\":\"round\",\"stroke-miterlimit\":\"2\"}\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M1164.58 0c642.751 0 1164.58 521.832 1164.58 1164.58 0 642.751-521.833 1164.58-1164.58 1164.58C521.829 2329.16 0 1807.327 0 1164.58 0 521.829 521.832 0 1164.58 0Zm0 181.398c542.635 0 983.186 440.55 983.186 983.185s-440.551 983.186-983.186 983.186-983.185-440.551-983.185-983.186 440.55-983.185 983.185-983.185Z\" }, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M1342.38 1536.38c-4.35-10.822-8.695-21.643-13.045-34.629-4.35-12.987-6.52-28.138-8.695-41.125-10.87 12.987-26.089 23.808-41.309 36.795-15.219 10.821-32.61 21.642-52.179 30.303-17.39 8.656-39.134 15.151-60.874 19.477-21.739 4.33-45.654 8.656-71.743 8.656-41.309 0-80.444-6.491-117.403-17.312-34.784-12.987-65.219-28.138-91.309-51.946-26.089-21.642-45.658-47.615-58.699-77.918-15.219-30.299-21.744-62.767-21.744-99.561 0-86.575 32.614-153.668 97.834-201.284 65.223-47.615 163.056-71.423 291.329-71.423h119.573v-49.78c0-38.96-13.045-71.428-39.135-93.07-26.085-23.808-63.044-34.629-113.048-34.629-43.484 0-73.919 8.656-95.663 28.138-19.565 17.312-30.435 43.285-30.435 73.588h-213.06c0-34.633 8.695-69.262 23.914-99.561 15.22-32.468 39.134-58.441 67.399-82.249 30.434-23.808 67.394-43.285 108.703-56.272 43.479-15.151 93.483-21.642 147.837-21.642 50.004 0 95.658 6.491 139.142 17.312 43.48 12.987 80.439 30.303 113.053 54.111 32.61 23.808 56.524 54.111 73.918 90.905 17.391 36.794 26.09 77.914 26.09 125.53v352.794c0 43.285 2.171 80.079 8.695 110.382 6.52 28.138 13.045 54.111 23.915 73.588l8.333 12.987h-220.44l-.954-2.165Zm-202.191-149.342c21.744 0 41.309-2.165 58.703-8.656 17.39-4.33 34.785-10.821 50.004-19.482 15.216-8.656 28.26-17.312 39.13-28.134 10.874-10.821 19.569-21.646 26.09-32.468v-140.681h-108.704c-32.609 0-60.873 4.326-84.788 10.821-23.915 6.491-43.484 15.152-56.529 25.973-15.215 10.821-26.085 23.808-32.609 41.12-6.521 15.152-10.87 32.468-10.87 51.946 0 28.138 10.87 51.946 30.439 71.423 17.39 19.482 47.829 28.138 89.134 28.138Z\",\n  style: {\"fill-rule\":\"nonzero\"}\n}, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { Wallet, WalletProxy } from '@/providers/WalletProxy'\nimport ArweaveStore, { arweave, arweaveQuery, fetchPublicKey, queryAggregator } from '@/store/ArweaveStore'\nimport { ArweaveVerifier as ArweaveMessageVerifier } from 'arweave-wallet-connector/lib/Arweave'\nimport { Emitter, mix } from '@/functions/UtilsClass'\nimport { download, exportTransaction } from '@/functions/File'\nimport { awaitEffect, getAsyncData } from '@/functions/AsyncData'\nimport { getDecryptionKey, getSigningKey } from '@/functions/Crypto'\nimport { manageUpload } from '@/functions/Transactions'\nimport Transaction from 'arweave/web/lib/transaction'\nimport { computed } from 'vue'\nimport axios from 'axios'\nimport LogoArweave from '@/assets/logos/arweave.svg?component'\nimport type { ArweaveProviderInterface } from 'arweave-wallet-connector/lib/Arweave'\nimport type { SignatureOptions } from 'arweave/web/lib/crypto/crypto-interface'\nimport type { TransactionInterface } from 'arweave/web/lib/transaction'\n\n\n\nconst accountMetadata: DisplayMetadata = {\n\tname: 'Arweave address',\n\ticon: LogoArweave\n}\n\nconst providerMetadata: ProviderMetadata = {\n\t...accountMetadata,\n\tid: 'arweave',\n\tisProviderFor: (walletData) => {\n\t\tif (walletData.data?.arweave) { return true }\n\t\treturn !!walletData.jwk // test key type\n\t},\n\taddImportData: async (walletData) => {\n\t\twalletData.data ??= {}\n\t\twalletData.data.arweave = { key: await arweave.wallets.jwkToAddress(walletData.jwk as any) }\n\t},\n}\n\n\n\nexport class ArweaveAccount extends Emitter implements Account {\n\tconstructor (private init: string | WalletDataInterface) {\n\t\tsuper()\n\t\tconst received = arweaveQuery(computed(() => (this.key ? { recipients: [this.key] } : undefined)))\n\t\tconst sent = arweaveQuery(computed(() => (this.key ? { owners: [this.key] } : undefined)))\n\t\tconst all = queryAggregator([received, sent])\n\t\tthis.queries = [\n\t\t\t{ query: all, name: 'All', color: 'var(--orange)' }, // todo name and color in metadata object\n\t\t\t{ query: received, name: 'Received', color: 'var(--green)' },\n\t\t\t{ query: sent, name: 'Sent', color: 'var(--red)' },\n\t\t]\n\t\tthis.on('destructor', () => this.#balance.stop())\n\t}\n\tstatic get metadata () { return accountMetadata }\n\tget metadata () { return accountMetadata }\n\t#key = computed(() => typeof this.init === 'string' ? this.init : this.init.data?.arweave?.key)\n\t#balance = getAsyncData({\n\t\tname: 'balance',\n\t\tawaitEffect: () => this.key,\n\t\tquery: async () => arweave.ar.winstonToAr(await arweave.wallets.getBalance(this.key!)),\n\t\tseconds: 600,\n\t})\n\tget key () { return this.#key.value }\n\tget balance () { return this.#balance.state.value }\n\tqueries\n}\n\n\n\nexport class ArweaveProvider extends mix(ArweaveAccount).with(WalletProxy) implements Wallet {\n\tconstructor (init: WalletDataInterface) {\n\t\tsuper(init)\n\t\tif (!this.data.arweave?.key && this.hasPrivateKey) { ArweaveProvider.metadata.addImportData(init) }\n\t\tthis.messageVerifier = new ArweaveMessageVerifier()\n\t\tthis.messageRunner = new ArweaveMessageRunner(this)\n\t}\n\tstatic get metadata () { return providerMetadata }\n\tget metadata () {\n\t\treturn {\n\t\t\t...ArweaveProvider.metadata,\n\t\t\tname: this.hasPrivateKey ? 'Arweave wallet' : ArweaveProvider.metadata.name,\n\t\t\tmethods: {\n\t\t\t\tdownload: { unavailable: !this.hasPrivateKey },\n\t\t\t\tsignTransaction: { userIntent: !this.hasPrivateKey },\n\t\t\t\tbundle: { unavailable: !this.hasPrivateKey },\n\t\t\t\tsign: { unavailable: !this.hasPrivateKey },\n\t\t\t\tdecrypt: { unavailable: !this.hasPrivateKey },\n\t\t\t}\n\t\t}\n\t}\n\tmessageVerifier: ArweaveMessageVerifier\n\tmessageRunner: ArweaveMessageRunner\n\tasync signTransaction (tx: Transaction, options?: SignatureOptions) {\n\t\t// todo test balance\n\t\tif (!this.hasPrivateKey) { return exportTransaction(tx) }\n\t\tif (tx.owner && tx.owner !== await this.getPublicKey()) { throw 'error' }\n\t\tawait arweave.transactions.sign(tx, await this.getPrivateKey(), options)\n\t\treturn tx\n\t}\n\tasync bundle (tx: Transaction, options?: object) {\n\t\tconst { createData, signers } = await import('@/../scripts/bundle')\n\t\tconst data = tx.get('data', { decode: true, string: false })\n\t\tconst tags = tx.tags.map(tag => ({\n\t\t\tname: tag.get('name', { decode: true, string: true }),\n\t\t\tvalue: tag.get('value', { decode: true, string: true })\n\t\t}))\n\t\tconst signer = new signers.ArweaveSigner(await this.getPrivateKey())\n\t\tconst anchor = arweave.utils.bufferTob64(crypto.getRandomValues(new Uint8Array(32))).slice(0, 32)\n\t\tconst bundleTx = createData(data, signer, { tags, anchor })\n\t\tawait bundleTx.sign(signer)\n\t\tconst res = await axios.post(ArweaveStore.bundlerURL + 'tx', bundleTx.getRaw(), {\n\t\t\theaders: { 'Content-Type': 'application/octet-stream' },\n\t\t\tmaxBodyLength: Infinity,\n\t\t})\n\t\tconsole.log(res, bundleTx)\n\t\tif (res.status >= 200 && res.status < 300) { return { id: bundleTx.id } }\n\t\tthrow new Error(res.status + '')\n\t}\n\tasync sign (data: ArrayBufferView, options: Parameters<ArweaveProviderInterface['sign']>[1]) {\n\t\tconst signingKey = await getSigningKey(await this.getPrivateKey() as JsonWebKey)\n\t\tconst signed = await window.crypto.subtle.sign(options, signingKey, data)\n\t\treturn new Uint8Array(signed)\n\t}\n\tasync decrypt (data: ArrayBufferView, options: Parameters<ArweaveProviderInterface['decrypt']>[1]) {\n\t\tconst decryptionKey = await getDecryptionKey(await this.getPrivateKey() as JsonWebKey)\n\t\tconst decrypted = await window.crypto.subtle.decrypt(options, decryptionKey, data)\n\t\treturn new Uint8Array(decrypted)\n\t}\n\tasync getPublicKey () {\n\t\tlet result = undefined as string | undefined\n\t\tif (this.hasPrivateKey && !this.isEncrypted) { result ||= (await this.getPrivateKey()).n }\n\t\tawait awaitEffect(() => this.key);\n\t\tresult ||= await fetchPublicKey(this.key!)\n\t\tif (this.hasPrivateKey) { result ||= (await this.getPrivateKey()).n }\n\t\treturn result\n\t}\n\tasync download () {\n\t\tawait awaitEffect(() => this.key)\n\t\tdownload(this.key!, JSON.stringify(await this.getPrivateKey()))\n\t}\n}\n\n\n\nexport class ArweaveMessageRunner implements MessageRunner<ArweaveProvider>, Partial<ArweaveProviderInterface> {\n\tconstructor (private wallet: ArweaveProvider) { }\n\tget methodMap () { return {\n\t\tsignTransaction: 'signTransaction',\n\t\tdispatch: 'bundle',\n\t\tgetPublicKey: 'getPublicKey',\n\t\tsign: 'sign',\n\t\tdecrypt: 'decrypt',\n\t} as const }\n\tasync signTransaction (tx: TransactionInterface, options?: object) {\n\t\tconst txObject = new Transaction(tx)\n\t\t// const fee = await getFeeRange()\n\t\t// if (fee.default?.gt(txObject.reward)) { txObject.reward = fee.default.toString() }\n\t\tawait this.wallet.signTransaction(txObject)\n\t\treturn {\n\t\t\tid: txObject.id,\n\t\t\towner: txObject.owner,\n\t\t\ttags: txObject.tags,\n\t\t\tsignature: txObject.signature,\n\t\t\treward: txObject.reward\n\t\t}\n\t}\n\tasync dispatch (tx: TransactionInterface, options?: object) {\n\t\t// todo do not store large data in indexeddb\n\t\tconst txObject = new Transaction(tx)\n\t\tlet dispatchResult: Awaited<ReturnType<ArweaveProviderInterface['dispatch']>> | undefined\n\t\ttry {\n\t\t\tconst res = await this.wallet.bundle(txObject)\n\t\t\tdispatchResult = { id: res.id, type: 'BUNDLED' }\n\t\t} catch (e) { console.error(e) }\n\t\tif (dispatchResult) { return dispatchResult }\n\t\ttry {\n\t\t\t// set fees\n\t\t\tawait this.wallet.signTransaction(txObject)\n\t\t\tmanageUpload(txObject)\n\t\t\tdispatchResult = { id: txObject.id, type: 'BASE' }\n\t\t} catch (e) { console.error(e) }\n\t\tif (dispatchResult) { return dispatchResult }\n\t\tthrow 'testing without base tx fallback'\n\t}\n\tasync getPublicKey () {\n\t\tconst publicKey = await this.wallet.getPublicKey()\n\t\tif (!publicKey) { throw 'error' }\n\t\treturn publicKey\n\t}\n\tasync sign (message: ArrayBufferView, options: Parameters<ArweaveProviderInterface['sign']>[1]) {\n\t\tif (message.byteLength === 48) { throw 'error' }\n\t\treturn this.wallet.sign!(message, options)\n\t}\n\tasync decrypt (message: ArrayBufferView, options: Parameters<ArweaveProviderInterface['decrypt']>[1]) {\n\t\treturn this.wallet.decrypt!(message, options)\n\t}\n\tasync getArweaveConfig () {\n\t\tconst config = arweave.getConfig().api\n\t\treturn { protocol: config.protocol, host: config.host, port: config.port }\n\t}\n}","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  \"xmlns:xlink\": \"http://www.w3.org/1999/xlink\",\n  viewBox: \"0 0 155 155\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"g\", { \"fill-rule\": \"evenodd\" }, [\n  /*#__PURE__*/_createElementVNode(\"image\", {\n    width: \"154\",\n    height: \"155\",\n    opacity: \".14\",\n    \"xlink:href\": \"data:image/png;base64,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\"\n  }),\n  /*#__PURE__*/_createElementVNode(\"path\", { d: \"M37 0v37H0V21.908c-.1-4.544 2.483-9.331 7.75-14.362C13.017 2.516 17.934 0 22.5 0H37zm22 0v96h95.993L155 27c-.204-5.678-2.756-11.598-7.653-17.759C142.449 3.081 136 0 128 0H59zM37.003 155v-37h-37v15.092c-.1 4.544 2.483 9.331 7.75 14.362 5.267 5.03 10.183 7.546 14.75 7.546h14.5zM118 155v-37h37v15.092c.1 4.544-2.483 9.331-7.75 14.362-5.267 5.03-10.184 7.546-14.75 7.546H118zM0 59h37v37H0zm59 59h37v37H59z\" })\n], -1)\nconst _hoisted_3 = [\n  _hoisted_2\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_3))\n}\nexport default { render: render }","import { WalletProxy, Wallet } from '@/providers/WalletProxy'\nimport { mix } from '@/functions/UtilsClass'\nimport TransportWebUSB from \"@ledgerhq/hw-transport-webusb\"\nimport TransportWebHID from \"@ledgerhq/hw-transport-webhid\"\n// import TransportWebBLE from \"@ledgerhq/hw-transport-web-ble\"\nimport ArweaveApp from \"@zondax/ledger-arweave\"\nimport { ArweaveAccount, ArweaveMessageRunner } from '@/providers/Arweave'\nimport { arweave } from '@/store/ArweaveStore'\nimport { ArweaveVerifier as ArweaveMessageVerifier } from 'arweave-wallet-connector/lib/Arweave.js'\nimport LogoLedger from '@/assets/logos/ledger.svg?component'\nimport type Transaction from 'arweave/web/lib/transaction'\nimport type { SignatureOptions } from 'arweave/web/lib/crypto/crypto-interface'\n\n\n\nconst transports = [TransportWebHID, TransportWebUSB]\nlet selectedTransport: any\n\nasync function getTransport () {\n\tif (selectedTransport) { return selectedTransport.create() }\n\tconsole.info(`Trying to connect`)\n\tfor (const transport of transports) {\n\t\tif (await transport.isSupported()) {\n\t\t\ttry {\n\t\t\t\tconst currentTransport = await transport.create()\n\t\t\t\tselectedTransport = transport\n\t\t\t\treturn currentTransport\n\t\t\t} catch (e) { console.error(e) }\n\t\t}\n\t}\n\tthrow 'getTransport failed'\n}\n\nfunction handleResponse (response: any) {\n\tif (response.returnCode !== ArweaveApp.ErrorCode.NoError) {\n\t\tthrow `Error [${response.returnCode}] ${response.errorMessage}`\n\t} else {\n\t\tconsole.info(`App Version ${response.major}.${response.minor}.${response.patch}`, response)\n\t}\n}\n\nasync function getVersion () {\n\tconst transport = await getTransport()\n\tlet response = null\n\ttry {\n\t\tconst app = new ArweaveApp(transport)\n\t\tconsole.info(\"Requesting version\")\n\t\tresponse = await app.getVersion()\n\t\thandleResponse(response)\n\t} finally { await transport.close() }\n\treturn response\n}\n\nasync function getAppInfo () {\n\tconst transport = await getTransport()\n\tlet response = null\n\ttry {\n\t\tconst app = new ArweaveApp(transport)\n\t\tconsole.info(\"Requesting app info\")\n\t\t// @ts-ignore\n\t\tresponse = await app.appInfo()\n\t\thandleResponse(response)\n\t} finally { await transport.close() }\n\treturn response\n}\n\nasync function getInfo (request = false) {\n\tconst transport = await getTransport()\n\tlet response = null\n\ttry {\n\t\tconst app = new ArweaveApp(transport)\n\t\tconsole.info(\"Requesting address\")\n\t\tresponse = request ? await app.showAddress() : await app.getAddress()\n\t\thandleResponse(response)\n\t} finally { await transport.close() }\n\treturn response\n}\n\nconst getAddress = async (request = false) => (await getInfo(request)).address\nconst getPublicKey = async () => (await getInfo()).owner\n\nasync function sign (tx: Transaction) {\n\tconst transport = await getTransport()\n\ttry {\n\t\tconst app = new ArweaveApp(transport)\n\t\tconst addr = await app.getAddress()\n\t\ttx.owner = addr.owner\n\t\tconst response = await app.sign(tx)\n\t\thandleResponse(response)\n\t\tconst id = await arweave.crypto.hash(response.signature)\n\t\tconst sigjs = {\n\t\t\towner: addr.owner,\n\t\t\tsignature: await arweave.utils.bufferTob64Url(response.signature),\n\t\t\tid: await arweave.utils.bufferTob64Url(id)\n\t\t}\n\t\tawait tx.setSignature(sigjs)\n\t\tconsole.info(\"Transaction signed\", tx)\n\t} finally { await transport.close() }\n\treturn tx\n}\n\n\n\nexport class LedgerProvider extends mix(ArweaveAccount).with(WalletProxy) implements Wallet {\n\tconstructor (init: WalletDataInterface) {\n\t\tsuper(init)\n\t\tthis.messageVerifier = new ArweaveMessageVerifier()\n\t\tthis.messageRunner = new ArweaveMessageRunner(this as any)\n\t}\n\tstatic get metadata (): ProviderMetadata { return {\n\t\tid: 'ledger',\n\t\tname: 'Ledger',\n\t\ticon: LogoLedger,\n\t\tlink: 'https://shop.ledger.com?r=1a60a479b0af',\n\t\tdisabled: !window.navigator.usb, // todo change to async computed and test all transports\n\t\taddImportData: async (walletData) => {\n\t\t\twalletData.provider = 'ledger'\n\t\t\twalletData.data ??= {}\n\t\t\twalletData.data.arweave = { key: await getAddress() }\n\t\t},\n\t\tverify: async () => getAddress(true),\n\t}}\n\tget metadata () { return {\n\t\t...LedgerProvider.metadata,\n\t\tmethods: {\n\t\t\tsignTransaction: { userIntent: true },\n\t\t\tgetPublicKey: { userIntent: true },\n\t\t},\n\t}}\n\tmessageVerifier: ArweaveMessageVerifier\n\tmessageRunner: ArweaveMessageRunner\n\tasync signTransaction (tx: Transaction, options: SignatureOptions) {\n\t\tif (this.key !== await getAddress()) { throw new Error('Wrong account: using ' + this.key + ' but current device is ' + await getAddress()) }\n\t\tif (tx.owner && tx.owner !== await this.getPublicKey()) { throw 'error' }\n\t\treturn sign(tx)\n\t}\n\tasync getPublicKey () { return getPublicKey() }\n}","import { arweave } from '@/store/ArweaveStore'\nimport { ArweaveAccount, ArweaveProvider } from '@/providers/Arweave'\nimport { LedgerProvider } from '@/providers/Ledger'\nimport { useChannel } from '@/functions/Channels'\nimport { useDataWrapper } from '@/functions/AsyncData'\nimport { pkcs8ToJwk } from '@/functions/Crypto'\nimport { download } from '@/functions/File'\nimport { generateMnemonic as generateM, validateMnemonic as validateM } from 'bip39-web-crypto'\n// @ts-ignore\nimport { getKeyPairFromMnemonic } from 'human-crypto-keys'\n// @ts-ignore\nimport wordlist from 'bip39-web-crypto/src/wordlists/english.json'\nimport type { JWKInterface } from 'arweave/web/lib/wallet'\nimport type { Wallet } from '@/providers/WalletProxy'\n\n\n\nexport type ProviderList = 'arweave' | 'ledger'\nexport const softwareProviders = [ArweaveProvider] as const\nexport const hardwareProviders = [LedgerProvider] as const\nexport const providers = [...hardwareProviders, ...softwareProviders] as const\n\n\n\nfunction selectProvider (wallet: WalletDataInterface) {\n\tfor (const provider of providers) { if (provider.metadata.id === wallet.provider) { return provider } }\n\tfor (const provider of providers) { if (provider.metadata.isProviderFor?.(wallet)) { return provider } }\n\treturn ArweaveProvider\n}\n\n\n\nfunction walletFactory (wallet: WalletDataInterface): Wallet {\n\tconst provider = selectProvider(wallet)\n\treturn new provider(wallet)\n}\nconst WalletsData = useChannel('wallets', undefined, []).state\nexport const Wallets = useDataWrapper(WalletsData, 'id', walletFactory, wallet => wallet.destructor?.())\n\n\n\nexport function getWalletById (walletId?: any) {\n\treturn Wallets.value.find(wallet => wallet.id == walletId)\n}\n\nexport function getAccountByAddress (address: string): Account {\n\treturn Wallets.value.find(wallet => wallet.key == address) || new ArweaveAccount(address)\n}\n\nexport async function generateMnemonic () { return generateM(undefined, undefined, wordlist) }\nexport async function validateMnemonic (mnemonic: string) { return validateM(mnemonic, wordlist) }\n\nexport async function addMnemonic (mnemonic: string): Promise<WalletDataInterface> {\n\tlet keyPair = await getKeyPairFromMnemonic(mnemonic, { id: 'rsa', modulusLength: 4096 }, { privateKeyFormat: 'pkcs8-der' })\n\tconst jwk = await pkcs8ToJwk(keyPair.privateKey)\n\tconsole.info('generated wallet')\n\treturn addWallet(jwk as JWKInterface)\n}\n\nexport async function addWallet (jwkObj: JWKInterface): Promise<WalletDataInterface> { // todo use addProvider(ArweaveProvider) instead, gen jwk when missing\n\tconst jwk = jwkObj || await arweave.wallets.generate()\n\tconst jwkString = JSON.stringify(jwk)\n\tconst existing = WalletsData.value.find(w => JSON.stringify(w.jwk) === jwkString)\n\tif (existing) { return existing }\n\tconst key = await arweave.wallets.jwkToAddress(jwk) as string\n\tif (!jwkObj) { download(key, jwkString) }\n\tconst walletData: WalletDataInterface = { id: getNewId(), jwk }\n\tWalletsData.value.push(walletData)\n\treturn walletData\n}\n\nexport async function addAddress (addressSource: any): Promise<WalletDataInterface> { // todo make provider specific\n\tlet key = typeof addressSource === 'string' && addressSource\n\tkey ||= addressSource.key\n\tkey ||= await addressSource.getActiveAddress?.()\n\tif (!key) { throw 'no address found' }\n\tconst walletData: WalletDataInterface = { id: getNewId(), data: { arweave: { key } } }\n\tWalletsData.value.push(walletData)\n\treturn walletData\n}\n\nexport async function addProvider (provider: Provider): Promise<WalletDataInterface> { // todo deduplicate\n\tconst walletData: WalletDataInterface = { id: getNewId() }\n\tawait provider.metadata.addImportData(walletData)\n\tWalletsData.value.push(walletData)\n\treturn walletData\n}\n\nexport function deleteWallet (wallet: WalletDataInterface) {\n\tWallets.value = Wallets.value.filter(w => w.id !== wallet.id)\n}\n\nfunction getNewId () {\n\tlet i = 0\n\twhile (WalletsData.value.find(w => +w.id === i)) { i++ }\n\treturn i + ''\n}\n\n\n\nexport function getMethodMetadata(provider?: Wallet, runnerMethod?: string): MethodMetadata {\n\tif (!provider || !runnerMethod) { return {} }\n\tconst providerMethod = provider.messageRunner.methodMap[runnerMethod as keyof typeof provider.messageRunner]\n\tif (!providerMethod) { return {} }\n\tconst methodsMetadata = provider.metadata?.methods\n\tconst result = methodsMetadata?.[providerMethod as keyof typeof methodsMetadata]\n\tif (!result && provider[providerMethod as keyof typeof methodsMetadata]) { return {} }\n\treturn result || { unavailable: true }\n}","<template>\n\t<transition :name=\"name\" mode=\"out-in\" @before-enter=\"transitionState.enter = true; emitter.emit('scrollHistory')\" @after-enter=\"transitionState.enter = false\" @before-leave=\"transitionState.leave = true\" @after-leave=\"transitionState.leave = false\">\n\t\t<slot />\n\t</transition>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport { computed, provide, inject, readonly, watch, reactive } from 'vue'\nimport { emitter } from '@/store/InterfaceStore'\n\nconst props = defineProps<{\n\taxis?: 'x' | 'y'\n\tvector?: number\n}>()\n\nconst name = computed<string>(() => {\n\tif (props.vector == null || props.vector === 0) { return 'fade' }\n\tif (props.axis === 'x') { return props.vector > 0 ? 'slide-left' : 'slide-right' }\n\telse { return props.vector > 0 ? 'slide-up' : 'slide-down' }\n})\n\nconst parentTransitionState = inject('transitionState', null as null | typeof transitionState)\nconst transitionState = reactive({ running: false, enter: false, leave: false })\nconst providedState = reactive({})\nwatch(() => [transitionState, parentTransitionState], () => {\n\ttransitionState.running = transitionState.enter || transitionState.leave // @ts-ignore\n\tfor (const key in transitionState) { providedState[key] = transitionState[key] || parentTransitionState?.[key] || false }\n}, { immediate: true, deep: true })\nprovide('transitionState', readonly(providedState))\n</script>","<template>\n\t<div class=\"folding-layout\">\n\t\t<div class=\"left no-scrollbar\" :class=\"{ hasRight: hasRight() }\">\n\t\t\t<TransitionsManager :vector=\"leftVector\" :axis=\"leftAxis || (verticalLayout ? 'x' : 'y')\" :appear=\"true\">\n\t\t\t\t<slot name=\"left\" />\n\t\t\t</TransitionsManager>\n\t\t</div>\n\t\t<div class=\"right\">\n\t\t\t<TransitionsManager :vector=\"rightVector\" :axis=\"rightAxis || (verticalLayout ? 'x' : 'y')\">\n\t\t\t\t<slot name=\"right\" />\n\t\t\t</TransitionsManager>\n\t\t</div>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport InterfaceStore from '@/store/InterfaceStore'\nimport TransitionsManager from '@/components/visual/TransitionsManager.vue'\nimport { useSlots, toRef } from 'vue'\n\nconst props = defineProps<{\n\tleftVector?: number\n\trightVector?: number\n\tleftAxis?: 'x' | 'y'\n\trightAxis?: 'x' | 'y'\n}>()\nconst slots = useSlots()\n\nconst verticalLayout = toRef(InterfaceStore.breakpoints, 'verticalLayout')\nconst hasLeft = () => !!slots.left\nconst hasRight = () => !!slots.right\n</script>\n\n\n\n<style scoped>\n.folding-layout {\n\twidth: 100%;\n\tposition: relative;\n\tdisplay: flex;\n}\n\n.verticalContent .folding-layout {\n\tflex-direction: column;\n}\n\n.left {\n\toverflow: auto;\n\theight: var(--current-vh);\n\tmin-width: 40vw;\n\tposition: sticky;\n\ttop: 0;\n}\n\n.left.hasRight {\n\tmin-width: 0;\n\twidth: 40vw;\n\tz-index: 1;\n}\n\n.verticalContent .left {\n\tposition: relative;\n\twidth: 100%;\n\theight: auto;\n}\n\n.right {\n\twidth: 100%;\n\tmin-width: 0;\n\tflex: 1 1 0;\n}\n\n.verticalContent .right {\n\tpadding-inline-start: 0;\n}\n</style>","<template>\n\t<transition name=\"fade-fast\" mode=\"out-in\">\n\t\t<span class=\"ar\" :key=\"amountRounded\">\n\t\t\t{{ amountRounded || '' }}\n\t\t\t<span v-if=\"amountRounded\" class=\"symbol\">AR</span>\n\t\t</span>\n\t</transition>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\n\nconst props = defineProps(['ar'])\nconst amountRounded = computed(() => {\n\tif (props.ar == null || isNaN(props.ar)) { return null }\n\tconst FractionDigits = new Intl.NumberFormat([...navigator.languages], { maximumFractionDigits: 3 }).format(props.ar)\n\tconst SignificantDigits = new Intl.NumberFormat([...navigator.languages], { maximumSignificantDigits: 1 }).format(props.ar)\n\treturn FractionDigits.length >= SignificantDigits.length ? FractionDigits : SignificantDigits\n})\n</script>\n\n\n\n<style scoped>\n.ar {\n\twhite-space: nowrap;\n\tdisplay: inline-block;\n}\n\n.ar::before {\n\tcontent: \"\\200b\";\n}\n\n.symbol {\n\tfont-size: 0.75em;\n}\n</style>\n","import { useChannel } from '@/functions/Channels'\nimport { getAsyncData } from '@/functions/AsyncData'\nimport axios from 'axios'\nimport { computed, reactive, Ref, toRef, watch } from 'vue'\n\n\nexport const currency = getConversion()\n\nfunction getConversion () {\n\tconst settings = useChannel('currency', undefined, { currency: 'USD', provider: 'redstone' }).state.value\n\tconst currentPrice = getAsyncData({\n\t\tname: 'conversion rate',\n\t\texistingState: toRef(settings, 'rate'),\n\t\ttimestamp: toRef(settings, 'timestamp'),\n\t\tquery: async () => {\n\t\t\tconst currency = settings.currency\n\t\t\tconst provider = settings.provider\n\t\t\tif (provider === 'redstone') {\n\t\t\t\tif (currency === 'USD') {\n\t\t\t\t\tconst result = await axios.get('https://api.redstone.finance/prices/?symbols=AR&provider=redstone')\n\t\t\t\t\treturn result.data['AR'].value\n\t\t\t\t} else {\n\t\t\t\t\tconst result = await axios.get('https://api.redstone.finance/prices/?symbols=AR,' + currency + '&provider=redstone')\n\t\t\t\t\treturn result.data['AR'].value / result.data[currency!].value\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tseconds: 600,\n\t}).state\n\twatch(() => [settings.currency, settings.provider], () => settings.rate = undefined)\n\tconst symbol = computed(() => new Intl.NumberFormat([...navigator.languages], { style: 'currency', currency: settings.currency }).format(0).replace(/[\\w\\d\\.\\,\\s]/g, '') || '$')\n\treturn { currentPrice, settings, symbol }\n}\n\nexport const { state: redstoneOptions } = getAsyncData({\n\tname: 'currency options list',\n\tquery: async () => {\n\t\ttype currencyOptions = { value: { currency: string, provider: string }, text: string }[]\n\t\tconst options = [] as currencyOptions\n\t\tconst res = (await axios.get('https://api.redstone.finance/configs/tokens')).data\n\t\tconst message = ' Redstone Finance'\n\t\toptions.push({ value: { currency: 'USD', provider: 'redstone' }, text: 'USD' + message })\n\t\tfor (const key in res) {\n\t\t\tif (res[key].tags?.includes('currencies')) { options.push({ value: { currency: key, provider: 'redstone' }, text: key + message }) }\n\t\t}\n\t\treturn options\n\t},\n\tseconds: 86400,\n})\n\n","<template>\n\t<transition name=\"fade-fast\" mode=\"out-in\">\n\t\t<span class=\"locale-currency\" :key=\"converted\">{{ converted || '' }}</span>\n\t</transition>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport { currency } from '@/store/CurrencyStore'\nimport { computed } from 'vue'\n\nconst props = defineProps(['ar'])\nconst currencyType = computed(() => currency.settings.currency)\nconst converted = computed(() => {\n\tif (props.ar == null || isNaN(props.ar) || !currency.currentPrice.value) { return }\n\tconst num = currency.currentPrice.value * props.ar\n\treturn new Intl.NumberFormat([...navigator.languages], { style: 'currency', currency: currencyType.value }).format(num)\n})\n</script>\n\n\n\n<style scoped>\n.locale-currency {\n\twhite-space: nowrap;\n\tdisplay: inline-block;\n}\n\n.locale-currency::before {\n\tcontent: \"\\200b\";\n}\n</style>","<template>\n\t<div ref=\"tooltipEl\">\n\t\t<slot />\n\t\t<div v-show=\"false\">\n\t\t\t<div ref=\"contentEl\" :style=\"{ padding }\">\n\t\t\t\t<span v-if=\"content\">{{ content }}</span>\n\t\t\t\t<slot name=\"content\"/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport tippy, { animateFill, Props } from 'tippy.js'\nimport 'tippy.js/dist/tippy.css'\nimport 'tippy.js/dist/backdrop.css'\nimport 'tippy.js/animations/shift-away.css'\nimport { computed, onBeforeUnmount, onMounted, ref, useSlots, watchEffect } from 'vue'\n\nconst props = defineProps<{\n\tcontent?: any\n\tinteractive?: boolean\n\tplacement?: Props['placement']\n}>()\nconst slots = useSlots()\n\nconst settings: Partial<Props> = {\n\tanimateFill: true,\n\tplugins: [animateFill],\n\tmaxWidth: 'none',\n\ttheme: 'glass',\n}\n\nconst tooltipEl = ref(null as null | HTMLElement)\nconst contentEl = ref(null as null | HTMLElement)\nlet tooltip: ReturnType<typeof tippy>[0]\n\nconst setProps = () => tooltip.setProps({\n\ttrigger: props.content || slots.content ? 'mouseenter focus' : 'manual',\n\tpopperOptions: { modifiers: [{ name: 'flip', options: { padding: 48 } }] },\n\t...(props || []),\n\tcontent: contentEl.value!,\n})\n\nonMounted(async () => {\n\tconst beforeUnmount = new Promise<void>(res => onBeforeUnmount(res))\n\ttooltip = tippy(tooltipEl.value!, settings)\n\twatchEffect(setProps)\n\tawait beforeUnmount\n\ttooltip.destroy()\n})\n\nconst padding = computed(() => props.content ? 'var(--spacing)' : '0')\n</script>\n\n\n\n<style>\n.tippy-box[data-theme~='glass'] {\n\tbackdrop-filter: blur(16px);\n}\n\n.tippy-box[data-theme~='glass'] > .tippy-backdrop {\n\tbackground-color: #08080866;\n}\n\n.tippy-box[data-theme~='glass'] > .tippy-content {\n\tpadding: 0;\n}\n</style>","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 16 16\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  \"fill-rule\": \"evenodd\",\n  d: \"M8.533.133a1.75 1.75 0 0 0-1.066 0l-5.25 1.68A1.75 1.75 0 0 0 1 3.48V7c0 1.566.32 3.182 1.303 4.682.983 1.498 2.585 2.813 5.032 3.855a1.7 1.7 0 0 0 1.33 0c2.447-1.042 4.049-2.357 5.032-3.855C14.68 10.182 15 8.566 15 7V3.48a1.75 1.75 0 0 0-1.217-1.667L8.533.133zm-.61 1.429a.25.25 0 0 1 .153 0l5.25 1.68a.25.25 0 0 1 .174.238V7c0 1.358-.275 2.666-1.057 3.86-.784 1.194-2.121 2.34-4.366 3.297a.2.2 0 0 1-.154 0c-2.245-.956-3.582-2.104-4.366-3.298C2.775 9.666 2.5 8.36 2.5 7V3.48a.25.25 0 0 1 .174-.237l5.25-1.68zM11.28 6.28a.75.75 0 0 0-1.06-1.06L7.25 8.19l-.97-.97a.75.75 0 1 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.06 0l3.5-3.5z\"\n}, null, -1)\nconst _hoisted_3 = [\n  _hoisted_2\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_3))\n}\nexport default { render: render }","<template>\n\t<Tooltip disabled>\n\t\t<template #content>\n\t\t\t<div class=\"text\">\n\t\t\t\t{{ address }}\n\t\t\t</div>\n\t\t</template>\n\t\t<div class=\"address ellipsis\">\n\t\t\t<span class=\"address-tx ellipsis\" @click=\"tools = !tools\">\n\t\t\t\t<slot />\n\t\t\t\t<span class=\"text ellipsis\">{{ val }}</span>\n\t\t\t\t<Icon :icon=\"IconVerify\" v-if=\"arverify?.verified\" class=\"arverify\" />\n\t\t\t</span>\n\t\t</div>\n\t</Tooltip>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport Icon from '@/components/atomic/Icon.vue'\nimport Tooltip from '@/components/function/Tooltip.vue'\nimport ProfileStore, { getArverify } from '@/store/ProfileStore'\nimport { computed, watch, ref } from 'vue'\n\nimport IconVerify from '@/assets/icons/verify.svg?component'\n\nconst props = defineProps<{\n\taddress?: string\n\ttx?: string\n\tblock?: string\n}>()\nconst val = computed(() => props.address || props.tx || props.block)\n\nconst arverify = computed(() => props.address && ProfileStore.arverify[props.address])\nwatch(() => props.address, async () => props.address && getArverify(props.address), { immediate: true })\n\nconst tools = ref(false)\n</script>\n\n\n\n<style scoped>\n.address {\n\tdisplay: inline-flex;\n\tmax-width: 100%;\n}\n\n.address-tx {\n\tdisplay: inline-flex;\n\talign-items: center;\n\twhite-space: nowrap;\n}\n\n.text {\n\tflex: 1 1 0;\n\tfont-family: monospace, monospace;\n\tfont-size: 1em;\n\tuser-select: all;\n\twhite-space: nowrap;\n}\n\n.arverify {\n\tmargin-inline-start: 4px;\n}\n</style>","<template>\n\t<transition name=\"fade-fast\" mode=\"out-in\">\n\t\t<div class=\"wallet-info\" :key=\"wallet.key\">\n\t\t\t<div class=\"name\">\n\t\t\t\t<Icon class=\"logo\" :icon=\"walletInfo.icon\" />\n\t\t\t\t<div>{{ arweaveId?.Name || walletInfo.name }}</div>\n\t\t\t</div>\n\t\t\t<Address class=\"secondary-text\" :address=\"wallet.key\" />\n\t\t</div>\n\t</transition>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport Address from '@/components/atomic/Address.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport ProfileStore, { getArweaveId } from '@/store/ProfileStore'\nimport { computed, watch } from 'vue'\nimport LogoArweave from '@/assets/logos/arweave.svg?component'\n\nconst props = defineProps<{ wallet: Account }>()\nconst arweaveId = computed(() => (ProfileStore.arweaveId as any)[props.wallet.key!])\nconst walletInfo = computed(() => props.wallet.metadata || { icon: LogoArweave, name: 'Arweave wallet' })\nwatch(() => props.wallet.key, () => getArweaveId(props.wallet.key))\n</script>\n\n\n\n<style scoped>\n.wallet-info {\n\tmax-width: 100%;\n}\n\n.name {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.logo {\n\tmargin-inline-end: 1em;\n}\n\n.address {\n\twidth: 100%;\n}\n</style>\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","<template>\n\t<div class=\"wallet\">\n\t\t<router-view v-slot=\"{ Component }\">\n\t\t\t<FoldingLayout v-if=\"wallet\" :leftVector=\"$route.meta.transition?.nameWallet\" :rightVector=\"contentTransitionFactor\" :rightAxis=\"contentTransitionAxis\">\n\t\t\t\t<template #left>\n\t\t\t\t\t<div class=\"user-info flex-column\" :key=\"wallet.key\">\n\t\t\t\t\t\t<Balance :wallet=\"wallet\" />\n\t\t\t\t\t\t<div class=\"actions\">\n\t\t\t\t\t\t\t<Action v-for=\"action in actions\" :key=\"action.name\" :to=\"{ name: action.name, query: { ...$route.query } }\" :icon=\"action.icon\" replace>{{ action.text }}</Action>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template #right>\n\t\t\t\t\t<div :key=\"contentKey\" class=\"router-view\">\n\t\t\t\t\t\t<component :is=\"Component\" />\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</FoldingLayout>\n\t\t</router-view>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport FoldingLayout from '@/components/layout/FoldingLayout.vue'\nimport Balance from '@/components/composed/Balance.vue'\nimport Action from '@/components/atomic/Action.vue'\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { toRef, computed } from 'vue'\nimport { useRoute } from 'vue-router'\n\nimport IconNorthEast from '@/assets/icons/north_east.svg?component'\nimport IconSwap from '@/assets/icons/swap.svg?component'\nimport IconCircle from '@/assets/icons/cloud_circle.svg?component'\n\nconst props = defineProps({ wallet: Object })\nconst actions = [\n\t{ name: 'Send', icon: IconNorthEast, text: 'Send' },\n\t{ name: 'TxList', icon: IconSwap, text: 'Transactions' },\n\t// { name: 'Tokens', icon: IconCircle, text: 'Tokens' },\n]\nconst verticalLayout = toRef(InterfaceStore.breakpoints, 'verticalLayout')\nconst route = useRoute()\nconst contentTransitionFactor = computed(() => route.meta.transition?.nameWallet || route.meta.transition?.nameLayout)\nconst contentTransitionAxis = computed(() => route.meta.transition?.nameWallet && verticalLayout.value ? 'x' : 'y' || 'y')\nconst contentKey = computed(() => route.path.split('/').join(''))\n</script>\n\n\n\n<style scoped>\n.wallet {\n\twidth: 100%;\n}\n\n.user-info {\n\tmax-width: var(--column-width);\n\tpadding: var(--spacing);\n\tpadding-inline-end: 0;\n}\n\n.verticalContent .user-info {\n\tmax-width: 100%;\n\tpadding: var(--spacing);\n}\n\n.router-view {\n\tpadding: var(--spacing);\n\tmax-width: var(--column-large-width);\n}\n\n.verticalContent .router-view {\n\tmax-width: 100%;\n}\n\n.actions {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.action {\n\tpadding: var(--spacing);\n\tborder-radius: var(--border-radius);\n}\n</style>","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  style: {\"fill\":\"none\",\"fill-rule\":\"nonzero\"},\n  d: \"M0 0h24v24H0z\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3Z\",\n  style: {\"fill-rule\":\"nonzero\"},\n  transform: \"rotate(90 12 12)\"\n}, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  style: {\"fill\":\"none\",\"fill-rule\":\"nonzero\"},\n  d: \"M0 0h24v24H0z\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3Z\",\n  style: {\"fill-rule\":\"nonzero\"},\n  transform: \"rotate(-90 12 12)\"\n}, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95A5.469 5.469 0 0 1 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11A2.98 2.98 0 0 1 22 15c0 1.65-1.35 3-3 3zm-5.55-8h-2.9v3H8l4 4 4-4h-2.55z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95A5.469 5.469 0 0 1 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11A2.98 2.98 0 0 1 22 15c0 1.65-1.35 3-3 3zM8 13h2.55v3h2.9v-3H16l-4-4z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M3 4c0-.55.45-1 1-1h2V1H4C2.34 1 1 2.34 1 4v2h2V4zm0 16v-2H1v2c0 1.66 1.34 3 3 3h2v-2H4c-.55 0-1-.45-1-1zM20 1h-2v2h2c.55 0 1 .45 1 1v2h2V4c0-1.66-1.34-3-3-3zm1 19c0 .55-.45 1-1 1h-2v2h2c1.66 0 3-1.34 3-3v-2h-2v2zm-2-5.13V9.13c0-.72-.38-1.38-1-1.73l-5-2.88c-.31-.18-.65-.27-1-.27s-.69.09-1 .27L6 7.39c-.62.36-1 1.02-1 1.74v5.74c0 .72.38 1.38 1 1.73l5 2.88c.31.18.65.27 1 .27s.69-.09 1-.27l5-2.88c.62-.35 1-1.01 1-1.73zm-8 2.3-4-2.3v-4.63l4 2.33v4.6zm1-6.33L8.04 8.53 12 6.25l3.96 2.28L12 10.84zm5 4.03-4 2.3v-4.6l4-2.33v4.63z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M12 4c4.41 0 8 3.59 8 8s-3.59 8-8 8-8-3.59-8-8 3.59-8 8-8m0-2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 10V8h-2v4H8l4 4 4-4h-3z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0 2c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10zm-1-10v4h2v-4h3l-4-4-4 4h3z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","<template>\n\t<div class=\"tx-icon\" :class=\"{ isPending }\" :style=\"styleObject\">\n\t\t<Icon :icon=\"icon\" class=\"tx-svg\" />\n\t\t<transition name=\"fade\">\n\t\t\t<Icon v-if=\"isPending || uploadProgress\" icon=\"loader\" :progress=\"uploadProgress\" class=\"loader\" />\n\t\t</transition>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport Icon from '@/components/atomic/Icon.vue'\nimport ArweaveStore from '@/store/ArweaveStore'\nimport { unpackTags } from '@/functions/Transactions'\nimport { computed } from 'vue'\n\nimport IconTxIn from '@/assets/icons/tx_in.svg?component'\nimport IconTxOut from '@/assets/icons/tx_out.svg?component'\nimport IconTxInData from '@/assets/icons/tx_in_data.svg?component'\nimport IconTxOutData from '@/assets/icons/tx_out_data.svg?component'\nimport IconCube from '@/assets/icons/cube.svg?component'\nimport IconTxInFull from '@/assets/icons/tx_in_full.svg?component'\nimport IconTxOutFull from '@/assets/icons/tx_out_full.svg?component'\n\nconst props = defineProps<{\n\ttx: any\n\tdirection: 'in' | 'out'\n}>()\n\nconst isData = computed(() => (props.tx.data?.size || props.tx.data_size) > 0)\nconst isValue = computed(() => (props.tx.quantity?.winston || props.tx.quantity) > 0)\nconst isPending = computed(() => !props.tx.id || !props.tx.block)\nconst uploadProgress = computed(() => ArweaveStore.uploads[props.tx.id]?.upload)\nconst icon = computed(() => {\n\tif (unpackTags(props.tx.tags)['Bundle-Version']) return IconCube\n\tif (props.direction === 'in' && !isData.value) return IconTxIn\n\tif (props.direction === 'out' && !isData.value) return IconTxOut\n\tif (props.direction === 'in' && !isValue.value) return IconTxInData\n\tif (props.direction === 'out' && !isValue.value) return IconTxOutData\n\tif (props.direction === 'in') return IconTxInFull\n\tif (props.direction === 'out') return IconTxOutFull\n})\nconst styleObject = computed(() => ({\n\tcolor: isData.value && !isValue.value ? 'var(--orange)' : props.direction === 'in' ? 'var(--green)' : 'var(--red)',\n}))\n</script>\n\n\n\n<style scoped>\n.tx-icon {\n\tposition: relative;\n}\n\n.tx-svg {\n\tpadding: 8px;\n\twidth: 100%;\n\theight: 100%;\n\ttransition: padding 0.4s ease;\n}\n\n.isPending .tx-svg {\n\tpadding: 25%;\n}\n\n.loader {\n\twidth: 48px;\n\theight: 48px;\n}\n\n.loader {\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n}\n</style>","<template>\n\t<span>{{ date }} {{ time }}</span>\n</template>\n\n\n\n<script setup>\nimport { computed } from 'vue'\n\nconst props = defineProps(['timestamp'])\n\nconst date = computed(() => new Date(props.timestamp).toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' }))\nconst time = computed(() => new Date(props.timestamp).toLocaleTimeString())\n</script>","<template>\n\t<a v-if=\"to && isExternal\" :href=\"to\" target=\"_blank\" v-bind=\"{ ...getScopeAttrs(), ...$attrs }\" :class=\"props.class\" :style=\"style\"><slot /></a>\n\t<router-link v-else-if=\"to\" :to=\"to\" custom v-slot=\"{ href, navigate }\">\n\t\t<a :href=\"to && !$attrs.disabled ? href : null\" @click=\"(...params) => to && navigate(...params)\" v-bind=\"{ ...getScopeAttrs(), ...$attrs }\" :class=\"props.class\" :style=\"style\">\n\t\t\t<slot />\n\t\t</a>\n\t</router-link>\n\t<button v-else-if=\"$attrs.onClick && !$attrs.disabled\" type=\"button\" v-bind=\"{ ...getScopeAttrs(), ...$attrs }\" :class=\"props.class\" :style=\"style\"><slot /></button>\n\t<span v-else v-bind=\"{ ...getScopeAttrs(), ...$attrs }\" :class=\"props.class\" :style=\"style\"><slot /></span>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport { computed, HTMLAttributes, StyleValue } from 'vue'\nimport { RouteLocationRaw } from 'vue-router'\n\nconst props = defineProps<{\n\tto?: RouteLocationRaw\n\tclass?: HTMLAttributes['class']\n\tstyle?: StyleValue\n}>()\n\nconst isExternal = computed(() => { try { new URL(props.to as any); return true } catch (e) {} })\n</script>\n\n\n\n<script lang=\"ts\">\nexport default {\n\tinheritAttrs: false,\n\tmethods: {\n\t\tgetScopeAttrs () {\n\t\t\tconst scopeAttr = (this as any).$parent.$options.__scopeId\n\t\t\treturn scopeAttr ? { [scopeAttr]: '' } : {}\n\t\t}\n\t}\n}\n</script>\n\n\n\n<style>\na {\n\ttext-decoration: none;\n}\n</style>","<template>\n\t<span>\n\t\t<Ar :ar=\"amount\" />&nbsp;\n\t\t<LocaleCurrency class=\"secondary-text\" :ar=\"amount\" />\n\t</span>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport Ar from '@/components/atomic/Ar.vue'\nimport LocaleCurrency from '@/components/atomic/LocaleCurrency.vue'\nimport { arweave } from '@/store/ArweaveStore'\nimport { ref, watch } from 'vue'\n\nconst props = defineProps(['ar', 'winston'])\n\nconst amount = ref(undefined as undefined | string)\nwatch(() => props, async () => {\n\tif (props.ar) { return amount.value = props.ar }\n\tif (props.winston) { return amount.value = arweave.ar.winstonToAr(props.winston) }\n\tamount.value = undefined\n}, { immediate: true, deep: true })\n</script>","<template>\n\t<div class=\"tx-card no-scrollbar\" :class=\"{ verticalElement }\">\n\t\t<div class=\"tx-content\" :class=\"{ 'flex-row': !verticalElement, 'flex-column': verticalElement }\">\n\t\t\t<Link class=\"left reset\" :to=\"(tx.id && !options?.half) ? { name: 'Tx', params: { txId: tx.id } } : ''\">\n\t\t\t\t<TxIcon class=\"tx-icon\" :tx=\"tx\" :direction=\"direction\" />\n\t\t\t\t<div class=\"margin\" />\n\t\t\t\t<div>\n\t\t\t\t\t<Amount v-if=\"isValue\" :ar=\"value\" />\n\t\t\t\t\t<div v-else-if=\"isData\">{{ dataType || 'Data' }}</div>\n\t\t\t\t\t<div v-else>Transaction</div>\n\t\t\t\t\t<div class=\"secondary-text\">{{ context }}</div>\n\t\t\t\t</div>\n\t\t\t</Link>\n\t\t\t<div v-if=\"!options?.half\" class=\"right\">\n\t\t\t\t<div class=\"right-content\">\n\t\t\t\t\t<div class=\"right-text\">\n\t\t\t\t\t\t<Address v-if=\"relativeAddress\" class=\"address\" :address=\"relativeAddress\" />\n\t\t\t\t\t\t<div v-else-if=\"dataSize\" class=\"secondary-text ellipsis\">Size: {{ dataSize }}</div>\n\t\t\t\t\t\t<div class=\"secondary-text ellipsis\">\n\t\t\t\t\t\t\t<template v-if=\"status\">{{ status }}</template>\n\t\t\t\t\t\t\t<template v-else-if=\"options?.space\">Fee: <Amount :ar=\"tx.fee.ar\" /></template>\n\t\t\t\t\t\t\t<Date v-else-if=\"timestamp\" :timestamp=\"timestamp\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"margin\" />\n\t\t\t\t</div>\n\t\t\t\t<AddressIcon :key=\"relativeAddress\" :address=\"relativeAddress\" :class=\"{ empty: !relativeAddress }\" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport Address from '@/components/atomic/Address.vue'\nimport TxIcon from '@/components/atomic/TxIcon.vue'\nimport AddressIcon from '@/components/atomic/AddressIcon.vue'\nimport Date from '@/components/atomic/Date.vue'\nimport Link from '@/components/function/Link.vue'\nimport Amount from '@/components/composed/Amount.vue'\nimport ArweaveStore, { arweave } from '@/store/ArweaveStore'\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { unpackTags } from '@/functions/Transactions'\nimport { computed } from 'vue'\nimport { humanFileSize } from '@/functions/Utils'\n\nconst props = defineProps<{\n\ttx: any\n\toptions?: {\n\t\tcurrentAddress?: any\n\t\thalf?: any\n\t\tspace?: boolean\n\t}\n}>()\n\nconst tags = computed(() => unpackTags(props.tx.tags, { lowercase: true }))\nconst timestamp = computed(() => props.tx.block?.timestamp * 1000)\nconst status = computed(() => {\n\tif (ArweaveStore.uploads[props.tx.id]) { return `Uploading ${ArweaveStore.uploads[props.tx.id].upload}%` }\n\tif (!props.tx.id) { return 'Awaiting approval' }\n\tif (!props.tx.block) { return 'Pending' }\n})\nconst direction = computed(() => props.tx.recipient && props.tx.recipient === props.options?.currentAddress ? 'in' : 'out')\nconst relativeAddress = computed(() => direction.value === 'in' ? props.tx.owner.address : (props.tx.recipient || props.tx.target))\nconst value = computed(() => props.tx.quantity?.ar || arweave.ar.winstonToAr(props.tx.quantity))\nconst isValue = computed(() => value.value > 0)\nconst isData = computed(() => (props.tx.data?.size || props.tx.data_size) > 0)\nconst dataSize = computed(() => isData.value && humanFileSize(props.tx.data?.size || props.tx.data_size))\nconst dataType = computed(() => {\n\tif (tags.value['bundle-version']) return 'Bundle'\n\tif (tags.value['content-type'] === 'text/html') { return 'Website' }\n\tif (tags.value['content-type'] === 'application/x.arweave-manifest+json') { return 'Manifest' }\n\treturn tags.value['content-type']?.split('/').join(' ')\n})\nconst dataInfo = computed(() => tags.value['service'] || tags.value['app-name'] || tags.value['application'] || tags.value['arweave-app'] || tags.value['uploading-app'] || tags.value['app'] || tags.value['user-agent']?.split('/').join(' ') || tags.value['file-name'])\nconst context = computed(() => {\n\tconst fallback = isValue.value && isData.value ? 'Payment | Data' : isValue.value ? 'Payment' : isData.value ? 'Data' : props.tx.tags?.length ? 'Tags' : 'Empty'\n\tconst dataTypeUsed = !isValue.value && isData.value\n\treturn (dataTypeUsed ? null : dataType.value) || dataInfo.value || fallback\n})\nconst verticalElement = computed(() => InterfaceStore.breakpoints.verticalLayout)\n</script>\n\n\n\n<style scoped>\n.tx-card {\n\toverflow: auto hidden;\n\tdisplay: inline;\n}\n\n.tx-content {\n\tposition: relative;\n\tjustify-content: space-between;\n}\n\n.verticalElement .tx-content {\n\tmin-width: 256px;\n}\n\n.left {\n\tflex: 0 0 auto;\n\tdisplay: flex;\n\talign-items: center;\n\ttext-transform: capitalize;\n}\n\n.right {\n\tflex: 1 1 0;\n\tmin-width: 200px;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\talign-items: center;\n\tposition: relative;\n}\n\n.right-content {\n\tflex: 1 1 0;\n\tmin-width: 0;\n\tjustify-content: flex-end;\n\tdisplay: flex;\n}\n\n.right-text {\n\tflex: 0 1 auto;\n\tmin-width: 0;\n\ttext-align: end;\n\twhite-space: nowrap;\n}\n\n.margin {\n\tflex: 0 0 auto;\n\twidth: var(--spacing);\n}\n\n.address {\n\tmax-width: Min(200px, 100%);\n\tmargin-inline-start: auto;\n}\n\n.tx-icon,\n.address-icon {\n\twidth: 48px;\n\theight: 48px;\n\tflex: 0 0 auto;\n\tborder-radius: var(--border-radius2);\n}\n\n.address-icon {\n\tbackground: var(--background);\n}\n\n.address-icon.empty {\n\tpadding: 8px;\n\tbackground: none;\n}\n\n.cloud {\n\twidth: 48px;\n\theight: 48px;\n\tpadding: 8px;\n}\n\n.file-type {\n\twidth: 100%;\n\theight: 100%;\n\topacity: 0.2;\n}\n</style>","<template>\n\t<div v-if=\"queryName\" class=\"tabs\">\n\t\t<router-link class=\"tab\" v-for=\"tab in tabs\" :key=\"tab.name\" :to=\"{ query: { ...$route.query, [queryName]: tab.name.toLowerCase() } }\" :style=\"{ '--color': tab.color }\" :class=\"{ active: isActive(tab) }\" replace>{{ tab.name }}</router-link>\n\t</div>\n\t<div v-else class=\"tabs\">\n\t\t<button type=\"button\" class=\"tab\" v-for=\"tab in tabs\" :key=\"tab.name\" :style=\"{ '--color': tab.color }\" :class=\"{ active: model === tab.name }\" @click=\"model = tab.name\" :disabled=\"disabled\">{{ tab.name }}</button>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport { computed } from 'vue'\nimport { useRoute } from 'vue-router'\n\nconst props = defineProps(['queryName', 'tabs', 'modelValue', 'disabled'])\nconst emit = defineEmits(['update:modelValue'])\n\nconst model = computed({\n\tget () { return props.modelValue },\n\tset (value) { emit('update:modelValue', value) }\n})\nconst route = useRoute()\nconst isActive = (tab) => {\n\tconst currentQuery = route.query[props.queryName]\n\treturn currentQuery\n\t\t? currentQuery === tab.name.toLowerCase()\n\t\t: props.tabs.indexOf(tab) === 0\n}\n</script>\n\n\n\n<style scoped>\n.tabs {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-evenly;\n}\n\n.tab {\n\tpadding: 0.2em 0;\n\tflex: 1 1 0;\n\ttext-align: center;\n\tcursor: pointer;\n\tuser-select: none;\n\ttext-decoration: none;\n\ttransition: color 0.2s ease, opacity 0.2s ease;\n\topacity: var(--element-disabled-opacity);\n\tcolor: inherit;\n\tposition: relative;\n}\n\n.tab:hover {\n\topacity: 1;\n}\n\n.tab:disabled {\n\topacity: var(--element-disabled-opacity);\n\tcursor: unset;\n}\n\n.tab.active {\n\topacity: 1;\n\tcolor: var(--color);\n}\n\n.tab::before {\n\tcontent: \"\";\n\tbackground: var(--color);\n\twidth: 12px;\n\theight: 2px;\n\tborder-radius: 1px;\n\tposition: absolute;\n\tmargin: auto;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\topacity: 0.5;\n\ttransition: width 0.2s ease;\n}\n\n.tab.active::before {\n\twidth: 100%;\n\theight: 2px;\n\tbackground: var(--color);\n}\n</style>","<template>\n\t<div ref=\"observed\">\n\t\t<slot />\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport { onBeforeUnmount, onMounted, ref } from 'vue'\n\nconst props = defineProps<{\n\tthreshold?: number\n\tonce?: boolean\n\tonIntersection?: any\n\tonResize?: any\n\tonMutation?: any\n}>()\nconst emit = defineEmits<{\n\t(e: 'intersection', value: IntersectionObserverEntry): void\n\t(e: 'resize', value: ResizeObserverEntry): void\n\t(e: 'mutation', value: MutationRecord): void\n}>()\n\nconst observed = ref(null)\n\nif (props.onIntersection) {\n\tconst intersectionObserver = new IntersectionObserver((entries) => {\n\t\tif (!entries[0].isIntersecting) { return }\n\t\temit('intersection', entries[0])\n\t\tif (props.once) { unobserve() }\n\t}, { threshold: [props.threshold || 0] })\n\tconst unobserve = () => observed.value && intersectionObserver.unobserve(observed.value)\n\tonMounted(() => intersectionObserver.observe(observed.value!))\n\tonBeforeUnmount(unobserve)\n}\n\nif (props.onResize) {\n\tconst resizeObserver = new ResizeObserver((entries) => {\n\t\temit('resize', entries[0])\n\t\tif (props.once) { unobserve() }\n\t})\n\tconst unobserve = () => observed.value && resizeObserver.unobserve(observed.value)\n\tonMounted(() => resizeObserver.observe(observed.value!))\n\tonBeforeUnmount(unobserve)\n}\n\nif (props.onMutation) {\n\tconst mutationObserver = new MutationObserver((entries) => {\n\t\temit('mutation', entries[0])\n\t\tif (props.once) { unobserve() }\n\t})\n\tconst unobserve = () => observed.value && mutationObserver.disconnect()\n\tonMounted(() => mutationObserver.observe(observed.value!, { childList: true, attributes: true, subtree: true }))\n\tonBeforeUnmount(unobserve)\n}\n</script>","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 0 0 9.5 3C6.08 3 3.28 5.64 3.03 9h2.02C5.3 6.75 7.18 5 9.5 5 11.99 5 14 7.01 14 9.5S11.99 14 9.5 14c-.17 0-.33-.03-.5-.05v2.02c.17.02.33.03.5.03 1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5z\" }, null, -1)\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M6.47 10.82 4 13.29l-2.47-2.47-.71.71L3.29 14 .82 16.47l.71.71L4 14.71l2.47 2.47.71-.71L4.71 14l2.47-2.47z\" }, null, -1)\nconst _hoisted_5 = [\n  _hoisted_2,\n  _hoisted_3,\n  _hoisted_4\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_5))\n}\nexport default { render: render }","<template>\n\t<div class=\"list flex-column\">\n\t\t<transition-group name=\"fade-list-rise\">\n\t\t\t<component v-for=\"tx in txs\" :tx=\"tx.node\" :key=\"tx.node.id\" :is=\"component\" v-bind=\"componentProps\" class=\"fade-list-item\" :class=\"[card && 'card']\" />\n\t\t</transition-group>\n\t\t<LoaderBlock v-if=\"icon\" :icon=\"icon\" />\n\t\t<Observer @intersection=\"val => val.isIntersecting && fetchQuery()\" class=\"bottom\" v-show=\"!fetchLoading && !completedQuery\" />\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport Observer from '@/components/function/Observer.vue'\nimport LoaderBlock from '@/components/layout/LoaderBlock.vue'\nimport { computed } from 'vue'\n\nimport IconNoResult from '@/assets/icons/no_result.svg?component'\n\nconst props = defineProps<{\n\tquery: any\n\tcomponent: any\n\tcomponentProps?: object\n\tcard?: any\n}>()\n\nconst fetchLoading = computed(() => props.query.fetchQuery.queryStatus.running)\nconst txs = computed(() => props.query.updateQuery.state.value || props.query.updateQuery.state || [])\nconst completedQuery = computed(() => props.query.status?.completed)\nconst fetchQuery = () => props.query.fetchQuery.query()\nconst icon = computed(() => {\n\tif (txs.value && !txs.value.length && completedQuery.value) return IconNoResult\n\tif (!completedQuery.value) return 'loader'\n})\n</script>\n\n\n\n<style scoped>\n.list {\n\t/*background: var(--background);*/\n\tposition: relative;\n}\n\n.bottom {\n\tposition: absolute;\n\tbottom: 0;\n\twidth: 100%;\n\theight: calc(200px + 40vh);\n}\n\n.fade-list-item {\n\twidth: 100%;\n}\n</style>","<template>\n\t<div class=\"tx-list flex-column\">\n\t\t<Tabs queryName=\"view\" :tabs=\"wallet.queries\" />\n\t\t<TransitionsManager :vector=\"transitionFactor\" axis=\"x\">\n\t\t\t<List :key=\"selectedQuery\" :query=\"currentQuery.query\" :component=\"TxCard\" :componentProps=\"{ options: { currentAddress: wallet.key } }\" card=\"true\" />\n\t\t</TransitionsManager>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport TxCard from '@/components/composed/TxCard.vue'\nimport Tabs from '@/components/atomic/Tabs.vue'\nimport TransitionsManager from '@/components/visual/TransitionsManager.vue'\nimport { computed, ref, watch } from 'vue'\nimport { useRoute } from 'vue-router'\nimport List from '@/components/layout/List.vue'\n\nconst props = defineProps<{ wallet: Account }>()\n\nconst route = useRoute()\nconst selectedQuery = computed(() => (route.query.view || props.wallet.queries[0].name.toLowerCase()))\nconst currentQuery = computed(() => props.wallet.queries.find(q => q.name.toLowerCase() === selectedQuery.value) || props.wallet.queries[0])\nconst transitionFactor = ref(undefined as undefined | number)\nwatch(() => selectedQuery.value, (state, prevState) => {\n\tconst toIndex = props.wallet.queries.findIndex(el => el.name.toLowerCase() === state)\n\tconst fromIndex = props.wallet.queries.findIndex(el => el.name.toLowerCase() === prevState)\n\ttransitionFactor.value = toIndex - fromIndex\n})\n</script>\n\n\n\n<style scoped>\n.tabs {\n\tz-index: 1;\n}\n</style>\n","<template>\n\t<input class=\"input\" v-model=\"model\" ref=\"input\" @animationstart=\"handleAutofill\" @change=\"handleChange\" />\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport { ref, computed, useAttrs, onMounted } from 'vue'\n\nconst props = defineProps(['modelValue'])\nconst emit = defineEmits(['update:modelValue'])\nconst attrs = useAttrs()\nconst input = ref(undefined as undefined | HTMLInputElement)\n\nconst model = computed({\n\tget () { return props.modelValue },\n\tset (value) { emit('update:modelValue', value) }\n})\n\n// remove background color added by browser built-in style autofill\nconst hasAutofill = ref(false)\nconst handleAutofill = (e: AnimationEvent) => {\n\tif (e.animationName.includes('onAutofill')) { hasAutofill.value = true }\n\tif (e.animationName.includes('onNotAutofill')) { hasAutofill.value = false }\n}\nconst handleChange = () => {\n\tif (hasAutofill.value) { setTimeout(() => input.value && (input.value.value = input.value.value)) }\n}\n\nonMounted(() => {\n\t// always autofocus\n\tif ('autofocus' in attrs && attrs.autofocus !== undefined) { setTimeout(() => input.value?.focus()) }\n})\n</script>\n\n\n\n<style scoped>\n.input {\n\tfont-size: 1em;\n\toutline: none;\n\tborder: none;\n\tbackground-color: transparent;\n}\n\n.input:-webkit-autofill {\n\tanimation: onAutofill 1s 2;\n\ttransition: background-color 100000s, color 100000s;\n}\n\n.input:not(:-webkit-autofill) {\n\tanimation: onNotAutofill 1s 2;\n}\n\n@keyframes onAutofill {\n\tfrom { opacity: 1 }\n\tto { opacity: 1 }\n}\n\n@keyframes onNotAutofill {\n\tfrom { opacity: 1 }\n\tto { opacity: 1 }\n}\n</style>","<template>\n\t<transition name=\"fade-fast\" mode=\"out-in\">\n\t\t<div class=\"actions-row\" :key=\"actionsComputed?.length\">\n\t\t\t<button v-for=\"action in actionsComputed\" class=\"action\" @click=\"action.run\" type=\"button\">\n\t\t\t\t<Icon :icon=\"action.icon\"/>\n\t\t\t</button>\n\t\t</div>\n\t</transition>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport Icon from '@/components/atomic/Icon.vue'\nimport { computed } from 'vue'\n\nconst props = defineProps(['actions'])\n\nconst actionsComputed = computed(() => props.actions?.filter((action: any) => action) || [])\n</script>\n\n\n\n<style scoped>\n.actions-row {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\ttransition: 0.3s ease;\n}\n\n.action {\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.icon {\n\tmargin: var(--spacing);\n}\n</style>","<template>\n\t<div class=\"input\">\n\t\t<div class=\"input-box\" :class=\"{ focus }\">\n\t\t\t<Icon v-if=\"icon\" :icon=\"icon\" />\n\t\t\t<RawInput class=\"text\" v-model=\"model\" @keyup.enter=\"runLastAction\" :placeholder=\"placeholder\" @focus=\"focus = true\" @blur=\"focus = false\" v-bind=\"$attrs\" />\n\t\t\t<ActionsRow :actions=\"props.actions\" />\n\t\t</div>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport Icon from '@/components/atomic/Icon.vue'\nimport RawInput from '@/components/function/RawInput.vue'\nimport ActionsRow from '@/components/atomic/ActionsRow.vue'\nimport { computed, ref, watch } from 'vue'\n\nconst props = defineProps(['modelValue', 'icon', 'placeholder', 'actions', 'autocomplete', 'mask'])\nconst emit = defineEmits(['update:modelValue'])\n\nconst model = computed({\n\tget () { return props.modelValue },\n\tset (value) { emit('update:modelValue', value) }\n})\nconst focus = ref(false)\nwatch(() => model.value, (newVal, oldVal) => {\n\tif (!props.mask) { return }\n\tif (!props.mask(newVal)) { model.value = oldVal }\n})\nconst runLastAction = () => props.actions?.[props.actions.length - 1]?.run?.()\n</script>\n\n\n\n<script lang=\"ts\">\nexport default {\n\tinheritAttrs: false,\n\tmethods: {\n\t\tgetScopeAttrs () {\n\t\t\tconst scopeAttr = (this as any).$parent.$options.__scopeId\n\t\t\treturn scopeAttr ? { [scopeAttr]: '' } : {}\n\t\t}\n\t}\n}\n</script>\n\n\n\n<style scoped>\n.input {\n\theight: 3.5em;\n\tbackground: transparent;\n\tborder-radius: var(--border-radius);\n}\n\n.input-box {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tflex: 1 1 0;\n\theight: 100%;\n\twidth: 100%;\n\tborder-radius: inherit;\n}\n\n.icon {\n\tfont-size: 1.4em;\n\twidth: 2em;\n\topacity: var(--element-secondary-opacity);\n}\n\n.actions-row {\n\theight: 100%;\n\tfont-size: 1.4em;\n\topacity: var(--element-secondary-opacity);\n}\n\n.focus .icon,\n.focus .actions-row {\n\topacity: 1;\n}\n\n.text {\n\theight: inherit;\n\tfont-size: 1em;\n\tpadding: 0 var(--spacing);\n\toutline: none;\n\tborder: none;\n\tflex: 1 1 auto;\n\tbackground-color: transparent;\n\tcolor: var(--element-secondary);\n\twidth: 100%;\n}\n</style>","<template>\n\t<teleport to=\"#viewport\" v-if=\"active\">\n\t\t<TransitionsManager>\n\t\t\t<div v-if=\"hasContent && background\" class=\"background\" />\n\t\t</TransitionsManager>\n\t\t<Observer @mutation=\"setVector\" class=\"container\">\n\t\t\t<TransitionsManager appear :vector=\"vector\">\n\t\t\t\t<slot />\n\t\t\t</TransitionsManager>\n\t\t</Observer>\n\t</teleport>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport TransitionsManager from '@/components/visual/TransitionsManager.vue'\nimport Observer from '@/components/function/Observer.vue'\nimport { computed, onMounted, ref, useSlots } from 'vue'\n\nconst props = defineProps<{ background?: any }>()\nconst slots = useSlots()\nconst active = ref(false)\nconst vector = ref(0)\nconst hasContent = computed(() => slots.default?.()?.[0]?.key != null)\nconst setVector = () => vector.value = hasContent.value ? -1 : 1\nsetVector()\n\nonMounted(() => active.value = true)\n</script>\n\n\n\n<style scoped>\n.container > :deep(*) {\n\tposition: fixed;\n\tinset: 0;\n}\n\n.background {\n\tbackground: #00000088;\n\tposition: fixed;\n\tinset: 0;\n}\n</style>","let db: IDBDatabase\n\nexport async function getDB () {\n\treturn new Promise<IDBDatabase>((resolve, reject) => {\n\t\tif (db) { return resolve(db) }\n\t\tconst req = indexedDB.open('app', 3)\n\t\treq.onupgradeneeded = upgrade\n\t\treq.onsuccess = () => { db = req.result; resolve(db) }\n\t\treq.onerror = () => reject(req.error)\n\t})\n}\n\n\n\nfunction upgrade (this: IDBOpenDBRequest, e: IDBVersionChangeEvent) {\n\tdb = this.result\n\tconst upgradeTransaction = this.transaction\n\tconst notifications = setStore(upgradeTransaction, 'notifications', { keyPath: 'id', autoIncrement: true })\n\tif (notifications) {\n\t\tsetIndex(notifications, 'origin', { unique: false })\n\t}\n\tconst messages = setStore(upgradeTransaction, 'messages', { keyPath: 'uuid' })\n\tif (messages) {\n\t\tsetIndex(messages, 'origin', { unique: false })\n\t\tsetIndex(messages, 'sessionId', { unique: false })\n\t\tsetIndex(messages, 'timestamp', { unique: false })\n\t}\n}\n\nconst setStore = (upgradeTransaction: IDBTransaction | null, name: string, options: IDBObjectStoreParameters) => {\n\treturn db.objectStoreNames.contains(name) ? upgradeTransaction?.objectStore(name) : db.createObjectStore(name, options)\n}\n\nconst setIndex = (store: IDBObjectStore, name: string, options: IDBIndexParameters) => {\n\tconst index = store.indexNames.contains(name) ? store.index(name) : undefined\n\tconst swap = index && (index.unique !== options.unique || index.multiEntry !== options.multiEntry)\n\tif (swap) { store.deleteIndex(name) }\n\tif (!index || swap) { store.createIndex(name, name, options) }\n}","import { getDB } from '@/store/IndexedDB'\nimport { Wallets, getMethodMetadata } from '@/functions/Wallets'\nimport { computed, reactive, Ref, watch } from 'vue'\nimport { awaitEffect } from '@/functions/AsyncData'\nimport { uuidV4 } from '@/functions/Utils'\nimport { useChannel } from '@/functions/Channels'\n\nconst errors = {\n\trejected: { code: 0, message: 'Rejected' },\n\t// JsonRpc spec\n\tparse: { code: -32700, message: 'Parse error' },\n\trequest: { code: -32600, message: 'Invalid request' },\n\tmethod: { code: -32601, message: 'Method not found' },\n\tparams: { code: -32602, message: 'Invalid params' },\n\tinternal: { code: -32603, message: 'Internal error' },\n}\nconst getError = (error: keyof typeof errors, data?: object) => ({ error: { ...errors[error], data } })\n\n\n\nexport default class JsonRpc {\n\tcallbacks\n\tstate\n\tstateWallet\n\tpermissions\n\twatchStop // todo collect scope instead\n\n\tconstructor (callbacks: (message: any) => void, state: Ref<ConnectorState>) {\n\t\tthis.callbacks = callbacks\n\t\tthis.state = state || reactive({})\n\t\tthis.state.value.messageQueue ??= []\n\t\tthis.stateWallet = computed(() => Wallets.value.find(w => w.id === this.state.value.walletId))\n\t\tconst permissionsChannel = useChannel('connectionSettings:', this.state.value.origin, {})\n\t\tthis.permissions = computed(() => {\n\t\t\tconst uuid = this.stateWallet.value?.uuid\n\t\t\treturn permissionsChannel.state.value?.[uuid!]\n\t\t})\n\t\tthis.watchStop = watch(() => [this.state.value.messageQueue, permissionsChannel.state.value], async () => {\n\t\t\tfor (const messageEntry of this.state.value.messageQueue) {\n\t\t\t\tif (!messageEntry || messageEntry.fulfilled || messageEntry.processing) { continue }\n\t\t\t\tthis.evalPermission(messageEntry)\n\t\t\t\tif (messageEntry.status === 'accepted' || messageEntry.status === 'allowed') { this.runMessage(messageEntry) }\n\t\t\t\tif (messageEntry.status === 'rejected') {\n\t\t\t\t\tmessageEntry.fulfilled = true\n\t\t\t\t\tconst id = messageEntry.id\n\t\t\t\t\tawait this.updateMessage(messageEntry)\n\t\t\t\t\tif (id != null) { this.callbacks({ ...getError('rejected'), id }) }\n\t\t\t\t}\n\t\t\t}\n\t\t}, { deep: true })\n\t}\n\t\n\tdestructor () { this.watchStop() }\n\t\n\tasync pushMessage (message: unknown) {\n\t\tawait awaitEffect(() => this.stateWallet.value)\n\t\tif (!this.isValidMessage(message)) { console.warn('invalid message', message); return }\n\t\tif (this.state.value.messageQueue.find(m => m.id === message.id)) { console.warn('message already exist', message); return }\n\t\tconst uuid = uuidV4()\n\t\tconst storedMessage: StoredMessage = {\n\t\t\tuuid,\n\t\t\torigin: this.state.value.origin,\n\t\t\tsessionId: '' + message.id + this.state.value.origin + this.state.value.session,\n\t\t\ttimestamp: Date.now(),\n\t\t\tstatus: undefined,\n\t\t\tfulfilled: false,\n\t\t\tmethod: message.method,\n\t\t\tparams: message.params,\n\t\t}\n\t\tconst messageEntry: MessageEntry = {\n\t\t\tuuid,\n\t\t\tid: message.id,\n\t\t\tmethod: message.method,\n\t\t\tstatus: undefined,\n\t\t\tfulfilled: false,\n\t\t\tprocessing: false,\n\t\t}\n\t\tthis.evalPermission(messageEntry)\n\t\tif (await this.storeMessage(storedMessage)) { this.state.value.messageQueue.push(messageEntry) }\n\t\tif (!messageEntry.status && message.id != null) { return true }\n\t}\n\n\tasync runMessage (messageEntry: MessageEntry) {\n\t\tif (messageEntry.status !== 'accepted' && messageEntry.status !== 'allowed') { return }\n\t\tif (!this.stateWallet.value?.messageRunner) { return }\n\t\tif (messageEntry.processing) { return }\n\t\tmessageEntry.processing = true\n\t\tconst id = messageEntry.id\n\t\ttry {\n\t\t\tconst message = await getMessage(messageEntry)\n\t\t\tif (!this.isValidMessage(message)) { throw new Error('message changed and is not valid anymore') }\n\t\t\tconst runner = this.stateWallet.value?.messageRunner\n\t\t\tif (getMethodMetadata(this.stateWallet.value, message.method)?.skip) { return }\n\t\t\tconst result = await (runner as any)[message.method!]?.(...(message.params || []))\n\t\t\tmessageEntry.fulfilled = true\n\t\t\tawait this.updateMessage(messageEntry)\n\t\t\tif (id != null) { this.callbacks({ result, id }) }\n\t\t} catch (e) {\n\t\t\t// todo ledger transaction not removed on error\n\t\t\tmessageEntry.status = 'error'\n\t\t\tconsole.error(e)\n\t\t\tawait this.updateMessage(messageEntry)\n\t\t\tif (id != null) { this.callbacks({ ...getError('internal'), id }) }\n\t\t}\n\t}\n\n\tisValidMessage (message: any): message is Message {\n\t\tif (typeof message !== 'object') { return false }\n\t\tconst { method, params, id } = message\n\t\tif (id != null && typeof id !== 'number' && typeof id !== 'string') { return false }\n\t\tif (typeof method !== 'string') { id != null && this.callbacks({ ...getError('request'), id }); return false }\n\t\tif (!this.stateWallet.value?.messageVerifier[method]) { id != null && this.callbacks({ ...getError('method', { method }), id }); return false }\n\t\tif (!(this.stateWallet.value?.messageRunner as any)[method]) { id != null && this.callbacks({ ...getError('method', { method }), id }); return false }\n\t\tif (getMethodMetadata(this.stateWallet.value, method)?.unavailable) { id != null && this.callbacks({ ...getError('method', { method }), id }); return false }\n\t\tif (params != null && !Array.isArray(params)) { id != null && this.callbacks({ ...getError('params', { type: 'Params must be sent as an array', method, params }), id }); return false }\n\t\tif (!this.stateWallet.value?.messageVerifier[method](...(message.params || []))) { id != null && this.callbacks({ ...getError('params', { type: 'Type error', method, params }), id }); return false }\n\t\treturn true\n\t}\n\t\n\tprivate async storeMessage (storedMessage: StoredMessage) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tconst db = await getDB()\n\t\t\tconst dbTx = db.transaction('messages', 'readwrite')\n\t\t\tdbTx.onerror = (e) => reject(e.target)\n\t\t\tdbTx.oncomplete = () => resolve(true)\n\t\t\tconst store = dbTx.objectStore('messages')\n\t\t\tconst index = store.index('sessionId')\n\t\t\tconst indexRequest = index.get(storedMessage.sessionId)\n\t\t\tindexRequest.onsuccess = () => {\n\t\t\t\tconst message = indexRequest.result\n\t\t\t\tif (message) { resolve(false); return }\n\t\t\t\tstore.add(storedMessage)\n\t\t\t}\n\t\t})\n\t}\n\t\n\tprivate async updateMessage (messageEntry: MessageEntry) {\n\t\treturn new Promise<void>(async (resolve, reject) => {\n\t\t\tconst db = await getDB()\n\t\t\tconst dbTx = db.transaction('messages', 'readwrite')\n\t\t\tdbTx.onerror = (e) => reject(e.target)\n\t\t\tdbTx.oncomplete = () => resolve()\n\t\t\tconst store = dbTx.objectStore('messages')\n\t\t\tconst storeRequest = store.get(messageEntry.uuid)\n\t\t\tstoreRequest.onsuccess = () => {\n\t\t\t\tconst message = storeRequest.result\n\t\t\t\tif (!message) { reject(new Error('message not found')); return }\n\t\t\t\tmessage.status = messageEntry.status\n\t\t\t\tmessage.fulfilled = messageEntry.fulfilled\n\t\t\t\tstore.put(message)\n\t\t\t}\n\t\t})\n\t}\n\t\n\tprivate evalPermission (messageEntry: MessageEntry) {\n\t\tif (messageEntry.status != null) { return }\n\t\tconst allowed = !!this.permissions.value?.[messageEntry.method]\n\t\tif (allowed) { messageEntry.status = 'allowed' }\n\t}\n}\n\n\n\nexport async function getMessage (messageEntry: MessageEntry): Promise<StoredMessage> {\n\tconst db = await getDB()\n\tconst dbTx = db.transaction('messages', 'readonly')\n\tconst store = dbTx.objectStore('messages')\n\tconst storeRequest = store.get(messageEntry.uuid)\n\treturn new Promise(resolve => storeRequest.onsuccess = () => resolve(storeRequest.result))\n}","import { state, connectorChannels, filterChannels, awaitStorageAccess, useChannel, appInfo } from '@/functions/Channels'\nimport JsonRpc from '@/functions/JsonRpc'\nimport { watch, watchEffect, computed, ref, Ref } from 'vue'\nimport { getWalletById } from '@/functions/Wallets'\nimport InterfaceStore from '@/store/InterfaceStore'\n\nlet windowRef: Window\nconst { origin, session } = state.value\nexport const { state: sharedState, deleteChannel } = useChannel('sharedState:', '' + origin + session)\nexport const connectors = computed(() => Object.values(connectorChannels.states)\n\t.filter(val => val.walletId !== false).sort((a, b) => a.timestamp! - b.timestamp!))\n\n\n\nif (sessionStorage.getItem('type') === 'extension' || document.location.pathname.split('/').filter(el => el)[0] === 'extension') {\n\tsessionStorage.setItem('type', 'extension')\n\tstate.value.type = 'extension'\n\twindowRef = window.parent\n} else if (origin?.split('://')[0] === 'ws') {\n\tstate.value.type = 'ws'\n\tinitWebSockets()\n} else if (window.opener) {\n\tstate.value.type = 'popup'\n\twindowRef = window.opener\n\tinitConnector()\n} else if (window.parent && window.parent !== window) {\n\tstate.value.type = 'iframe'\n\twindowRef = window.parent\n\tinitConnector()\n}\n\nif (!state.value.type) { state.value.type = 'client' }\nif (state.value.type !== 'iframe') { localStorage.setItem('global', '1') }\n\n\n\nasync function initConnector () {\n\tif (!origin || origin === '*') { return }\n\tawait awaitStorageAccess()\n\tif (!sharedState.value?.origin) { sharedState.value = { origin, session, appInfo, timestamp: Date.now(), messageQueue: [], links: {} } }\n\tsharedState.value.links[state.value.type!] = true\n\tconst postMessage = (message: any) => windowRef.postMessage({ ...message, jsonrpc: '2.0' }, origin)\n\tconst jsonRpc = new JsonRpc(postMessage, sharedState)\n\twindow.addEventListener('message', async (e) => {\n\t\tif (e.source !== windowRef || e.origin !== origin) { return }\n\t\tconst prompt = await jsonRpc.pushMessage(e.data)\n\t\tconsole.log(prompt, state.value.type, sharedState.value.link)\n\t\tif (prompt && state.value.type === 'iframe' && sharedState.value.link) { postMessage({ method: 'showIframe', params: true }) }\n\t})\n\tconst connect = () => {\n\t\t// todo reject transactions that are designated to current address\n\t\tif (!sharedState.value.walletId) { return }\n\t\tconst wallet = getWalletById(sharedState.value.walletId)\n\t\tif (!wallet) { return }\n\t\tpostMessage({ method: 'connect', params: wallet.key })\n\t}\n\tconst disconnect = () => { deleteChannel(); postMessage({ method: 'disconnect' }) }\n\tif (state.value.type === 'iframe') {\n\t\tInterfaceStore.toolbar.enabled = false\n\t\twindow.addEventListener('beforeunload', () => disconnect())\n\t}\n\tif (state.value.type === 'popup') {\n\t\tif (!sharedState.value.walletId) { InterfaceStore.toolbar.enabled = false }\n\t\tconst keepPopup = computed(() => !sharedState.value.link)\n\t\twatch(keepPopup, () => postMessage({ method: 'keepPopup', params: keepPopup.value }), { immediate: true })\n\t}\n\twatch(() => sharedState.value.walletId, (id) => id === false ? disconnect() : connect())\n\twatchEffect(() => {\n\t\tconst linkedState = Object.entries(filterChannels({ origin, session, type: state.value.type === 'popup' ? 'iframe' : 'popup' }))[0]?.[1]\n\t\tif (linkedState) {\n\t\t\tsharedState.value.link = true\n\t\t\tpostMessage({ method: 'usePopup', params: false })\n\t\t}\n\t\tconst disconnectCondition = () => !linkedState && state.value.type === 'iframe' && sharedState.value.link && (sharedState.value.walletId == null || sharedState.value.walletId === false)\n\t\tif (disconnectCondition()) { setTimeout(() => disconnectCondition() && disconnect(), 500) }\n\t})\n\tpostMessage({ method: 'ready' })\n}\n\n\n\nasync function initWebSockets () {\n\tif (!origin) { return }\n\tif (!sharedState.value?.walletId) { sharedState.value = { origin, session, appInfo, timestamp: Date.now(), messageQueue: [], links: {} } }\n\tsharedState.value.links[state.value.type!] = true\n\tconst ws = new WebSocket(origin)\n\tconst postMessage = (message: any) => ws.send(JSON.stringify({ ...message, jsonrpc: '2.0' }))\n\tconst jsonRpc = new JsonRpc(postMessage, sharedState)\n\tws.addEventListener('open', () => console.log('New WS connection'))\n\tws.addEventListener('message', event => {\n\t\tconst message = JSON.parse(event.data.toString())\n\t\tconsole.log(message)\n\t\tjsonRpc.pushMessage(message)\n\t})\n\tconst connect = () => {\n\t\tif (!sharedState.value.walletId) { return }\n\t\tconst wallet = getWalletById(sharedState.value.walletId)\n\t\tif (!wallet) { return }\n\t\tpostMessage({ method: 'connect', params: wallet.key })\n\t}\n\tconst disconnect = () => { deleteChannel(); postMessage({ method: 'disconnect' }) }\n\twatch(() => sharedState.value.walletId, (id) => id === false ? disconnect() : connect())\n\twindow.addEventListener('beforeunload', () => disconnect())\n}\n\n\n\nexport async function postMessageExtension (message: 'connect' | 'permissions' | 'state' | 'close') {\n\tif (state.value.type !== 'extension') { return }\n\tif (message === 'connect') { return postMessageExtensionConnect() }\n\twindowRef.postMessage('arweave-app-extension:' + message, '*')\n\tif (message === 'state') { return postMessageExtensionState() }\n}\n\nasync function postMessageExtensionConnect () {\n\tconst state = await postMessageExtension('state')\n\tif (!state) { return }\n\treturn new Promise<void>((res, rej) => {\n\t\twindowRef.postMessage('arweave-app-extension:' + 'connect', '*')\n\t\tconst snapshot = connectors.value.filter(connector => connector.origin === state.origin)\n\t\tconst stop = watch(() => connectors.value, () => {\n\t\t\tconst diff = connectors.value.filter(connector => connector.origin === state.origin && !snapshot.includes(connector))\n\t\t\tif (diff.find(connector => connector.links.popup)) { postMessageExtension('close') }\n\t\t}, { deep: true, immediate: true })\n\t\tsetTimeout(() => {\n\t\t\tstop()\n\t\t\tres()\n\t\t\t// rej() if script wasn't already injected and no new connection appeared\n\t\t}, 10000)\n\t})\n}\n\nasync function postMessageExtensionState () {\n\treturn new Promise<{ origin: string }>(res => {\n\t\tconst listener = (e: any) => {\n\t\t\tif (e.source !== windowRef || typeof e.data !== 'object' || typeof e.data.origin !== 'string') { return }\n\t\t\tres(e.data)\n\t\t\twindow.removeEventListener('message', listener)\n\t\t}\n\t\twindow.addEventListener('message', listener)\n\t})\n}\n\nexport function navigateBack () {\n\tif (!window.opener) { return }\n\ttry {\n\t\twindow.open('', 'parent')\n\t\twindow.opener.focus()\n\t} catch (e) { console.log(e) }\n}\n\nexport function navigateBackAvailable (origin: string, session: string) { // todo figure out if the feature can work properly more often\n\treturn false\n\treturn window.opener && state.value.origin === origin && state.value.session === session\n}\n","import { getDB } from '@/store/IndexedDB'\nimport { createToast } from 'mosha-vue-toastify'\nimport { reactive, ref } from 'vue'\n\ntype NotificationData = NotificationOptions & { title: string, onClose?: () => void }\ntype Notify = string | NotificationData\nconst toastType = { log: 'success', warn: 'warning', error: 'danger' } as const\n\nconst log = (notify: Notify, push?: boolean) => createNotification('log', notify, push)\nconst warn = (notify: Notify, push?: boolean) => createNotification('warn', notify, push)\nconst error = (notify: Notify, push?: boolean) => createNotification('error', notify, push)\n\n\n\nasync function createNotification (type: keyof typeof toastType, notify: Notify, push?: boolean) {\n\tconst data = (typeof notify === 'object') ? notify : { title: notify } as NotificationData\n\tconst { title, ...options } = data\n\toptions.timestamp ??= Date.now()\n\toptions.badge ??= undefined\n\toptions.icon ??= undefined\n\toptions.data ??= {}\n\toptions.data.type = type\n\t\n\tconst isVisible = document.visibilityState === 'visible'\n\tconst doNotification = window.Notification && Notification.permission === 'granted' && !isVisible && push\n\t\n\tconst notification = doNotification ? new Notification(title, options) : undefined\n\tconst toast = !doNotification ? createToast({ title, description: options.body }, {\n\t\ttype: toastType[type],\n\t\tshowIcon: true,\n\t\tonClose: () => { notification?.close(); options.onClose?.() },\n\t\ttimeout: options.requireInteraction ? -1 : 5000\n\t}) : undefined\n\t\n\tnotification?.addEventListener('close', () => { toast?.close(); options.onClose?.() })\n\t\n\tif (push) { await pushNotification(data) }\n}\n\n\n\nasync function pushNotification (notification: NotificationData) {\n\tconst db = await getDB()\n\treturn new Promise<void>(resolve => {\n\t\tconst dbTx = db.transaction('notifications', 'readwrite')\n\t\tconst store = dbTx.objectStore('notifications')\n\t\tstore.put(notification)\n\t\tdbTx.oncomplete = () => resolve()\n\t})\n}\n\n\n\nfunction getManager (origin: string) { // use queryManager\n\tconst manager = {\n\t\tnotifications: reactive([]),\n\t\tcompleted: false,\n\t\tasync fetch () {\n\t\t\tif (this.completed) { return }\n\t\t\tconst db = await getDB()\n\t\t\tconst dbTx = db.transaction('notifications', 'readonly')\n\t\t\tconst store = dbTx.objectStore('notifications')\n\t\t\tconst index = store.index('origin')\n\t\t\tlet i = 0\n\t\t\tindex.openCursor(origin, 'prev').onsuccess = (e) => {\n\t\t\t\tconst cursor = e.target.result\n\t\t\t\tif (!cursor) { this.completed = true; return }\n\t\t\t\tconst pk = this.notifications[this.notifications.length - 1]?.pk\n\t\t\t\tconsole.log(pk)\n\t\t\t\tif (pk !== null && pk - 1 < cursor.primaryKey) {\n\t\t\t\t\tcursor.continuePrimaryKey(origin, pk - 1)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.notifications.push({ ...cursor.value, pk: cursor.primaryKey })\n\t\t\t\tif (++i < 1) { cursor.continue() }\n\t\t\t}\n\t\t},\n\t}\n\treturn manager\n}\n\n\n\nexport const notify = { log, warn, error }\n\nexport const notificationPermission = ref(window.Notification?.permission)\nnavigator.permissions?.query?.({ name: 'notifications' }).then(status => status.addEventListener('change', () => notificationPermission.value = window.Notification.permission))\n\nexport async function requestNotificationPermission () {\n\tif (!window.Notification?.permission) { return }\n\tif (window.Notification.permission !== 'denied') { await Notification.requestPermission() }\n\tnotificationPermission.value = window.Notification.permission\n\treturn notificationPermission.value\n}","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","<template>\n\t<div class=\"scanner\">\n\t\t<video ref=\"video\" class=\"video\"></video>\n\t\t<div class=\"actions-row-container\">\n\t\t\t<ActionsRow :actions=\"actions\" />\n\t\t</div>\n\t</div>\n</template>\n\n\n\n<script lang=\"ts\">\nimport { computedAsync } from '@/functions/AsyncData'\nimport QrScanner from 'qr-scanner'\n\nconst hasCamera = computedAsync(async () => {\n\ttry { return !!(await QrScanner.listCameras(false)).length }\n\tcatch (e) { return false }\n})\n\nexport default { hasCamera }\n</script>\n\n\n\n<script setup lang=\"ts\">\nimport ActionsRow from '@/components/atomic/ActionsRow.vue'\nimport { useChannel } from '@/functions/Channels'\nimport { postMessageExtension } from '@/functions/Connect'\nimport { notify } from '@/store/NotificationStore'\nimport { awaitEffect } from '@/functions/AsyncData'\nimport { onUnmounted, onMounted, ref, inject } from 'vue'\n\nimport IconSwap from '@/assets/icons/swap.svg?component'\nimport IconX from '@/assets/icons/x.svg?component'\n\nconst emit = defineEmits<{\n\t(e: 'result', value?: string): void\n}>()\nconst parentTransitionState = inject('transitionState', null as any)\n\nconst video = ref(null as null | HTMLVideoElement)\nconst scannerCamera = useChannel('scannerCamera').state\nlet cameras: QrScanner.Camera[]\nlet qrScanner: QrScanner\nconst actions: Action[] = [\n\t{ icon: IconSwap, run: () => switchCamera() },\n\t{ icon: IconX, run: () => emit('result', undefined) }\n]\n\nconst switchCamera = async () => {\n\tcameras = await QrScanner.listCameras(true)\n\tconst nextId = (cameras.findIndex(c => c.id === scannerCamera.value) + 1) % cameras.length\n\tscannerCamera.value = cameras[nextId].id\n\tqrScanner.setCamera(scannerCamera.value)\n\tconsole.log(cameras, nextId)\n}\n\nonMounted(async () => {\n\tconst unmount = new Promise<void>(res => onUnmounted(res))\n\tif (!video.value) { return console.error('failed to start scanner') }\n\tcameras = await QrScanner.listCameras(true)\n\tqrScanner = new QrScanner(video.value, result => emit('result', result))\n\tif (scannerCamera.value != null) { qrScanner.setCamera(scannerCamera.value) }\n\tqrScanner.start().catch(() => {\n\t\tpostMessageExtension('permissions')\n\t\temit('result', undefined)\n\t\tnotify.error('Unable to access camera')\n\t})\n\tawait unmount\n\tawait awaitEffect(() => !parentTransitionState?.leave)\n\tqrScanner.destroy()\n})\n</script>\n\n\n\n<style scoped>\n.scanner {\n\toverflow: hidden;\n\tdisplay: flex;\n\tbackground: #000;\n}\n\n.video {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n}\n\n.actions-row-container {\n\tposition: absolute;\n\tz-index: 10;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tdisplay: flex;\n\tjustify-content: center;\n}\n\n.actions-row {\n\tfont-size: 2em;\n\tpadding: var(--spacing);\n\tpadding-top: 0;\n\tbackground: #00000066;\n\tbackdrop-filter: blur(10px);\n\tborder-top-left-radius: var(--border-radius);\n\tborder-top-right-radius: var(--border-radius);\n\tborder: 1px solid #ffffff22;\n}\n</style>","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M12 5.9a2.1 2.1 0 1 1 0 4.2 2.1 2.1 0 0 1 0-4.2m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M3 11h8V3H3v8zm2-6h4v4H5V5zM3 21h8v-8H3v8zm2-6h4v4H5v-4zm8-12v8h8V3h-8zm6 6h-4V5h4v4zm0 10h2v2h-2zm-6-6h2v2h-2zm2 2h2v2h-2zm-2 2h2v2h-2zm2 2h2v2h-2zm2-2h2v2h-2zm0-4h2v2h-2zm2 2h2v2h-2z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","<template>\n\t<div class=\"row flex-row\">\n\t\t<Input v-model.trim=\"model\" :icon=\"IconPerson\" placeholder=\"Address\" :mask=\"maskAddress\" :actions=\"actions\" :disabled=\"disabled\" :id=\"id\"/>\n\t\t<AddressIcon class=\"address-icon\" :address=\"model\"/>\n\t</div>\n\t<Viewport>\n\t\t<Scanner v-if=\"scanning\" @result=\"scanningResult\" />\n\t</Viewport>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport AddressIcon from '@/components/atomic/AddressIcon.vue'\nimport Input from '@/components/atomic/Input.vue'\nimport Viewport from '@/components/layout/Viewport.vue'\nimport Scanner from '@/components/function/Scanner.vue'\nimport { computed, ref } from 'vue'\n\nimport IconPerson from '@/assets/icons/person.svg?component'\nimport IconQR from '@/assets/icons/qr.svg?component'\n\nconst props = defineProps(['modelValue', 'actions', 'disabled', 'id'])\nconst emit = defineEmits(['update:modelValue'])\n\nconst model = computed({\n\tget () { return props.modelValue },\n\tset (value) { emit('update:modelValue', value) }\n})\n\nconst maskAddress = (address: string) => { return address.match(/^[a-z0-9_-]{0,43}$/i) }\nconst scanning = ref(false)\nconst scanningResult = (result?: string) => {\n\tscanning.value = false\n\tif (!result) { return }\n\tif (!maskAddress(result)) { throw 'invalid address' }\n\tmodel.value = result\n}\n\nconst actions = computed<Action[]>(() => {\n\tconst result: Action[] = []\n\tif (Scanner.hasCamera.value) { result.push({ icon: IconQR, run: () => scanning.value = true }) }\n\tif (props.actions) { result.push(...props.actions) }\n\treturn result\n})\n</script>\n\n\n\n<style scoped>\n.input {\n\tflex: 1 1 0;\n}\n\n.address-icon {\n\tflex: 0 0 auto;\n\twidth: 3.5em;\n\theight: 3.5em;\n\tpadding: 0;\n\tborder-radius: var(--border-radius);\n}\n\n.row {\n\tmin-height: 3em;\n\talign-items: center;\n\tjustify-content: space-between;\n}\n\n</style>","<template>\n\t<div class=\"input-ar input-box\" :class=\"{ focus }\">\n\t\t<div class=\"input\">\n\t\t\t<Icon :icon=\"LogoArweave\"></Icon>\n\t\t\t<RawInput v-model=\"model\" inputmode=\"numeric\" class=\"text\" placeholder=\"AR\" @focus=\"focus = 1\" @blur=\"focus = 0\" :disabled=\"disabled\" :id=\"id\" />\n\t\t</div>\n\t\t<div v-if=\"currentPrice\" class=\"spacer\"></div>\n\t\t<div v-if=\"currentPrice\" class=\"input\">\n\t\t\t<RawInput v-model=\"model2\" inputmode=\"numeric\" class=\"text right\" :placeholder=\"currencyType\" @focus=\"focus = 2\" @blur=\"focus = 0\" :disabled=\"disabled\" />\n\t\t\t<Icon :icon=\"currencySymbol\" />\n\t\t</div>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport RawInput from '@/components/function/RawInput.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport { currency } from '@/store/CurrencyStore'\nimport { computed, ref, watch } from 'vue'\nimport LogoArweave from '@/assets/logos/arweave.svg?component'\n\nconst props = defineProps(['modelValue', 'disabled', 'id'])\nconst emit = defineEmits(['update:modelValue'])\n\nconst model = computed({\n\tget () {\n\t\tconst value = props.modelValue\n\t\tif (focus.value === 0) {\n\t\t\tinput2.value = value && !isNaN(value) ? +(value * currentPrice.value).toFixed(2) : ''\n\t\t}\n\t\treturn value\n\t},\n\tset (value) {\n\t\tif (focus.value === 1 || focus.value === 0) {\n\t\t\tinput2.value = value && !isNaN(value) ? +(value * currentPrice.value).toFixed(2) : ''\n\t\t\temit('update:modelValue', value)\n\t\t}\n\t}\n})\nconst input2 = ref('')\nconst model2 = computed({\n\tget () { return input2.value },\n\tset (value) {\n\t\tif (focus.value === 2) {\n\t\t\tinput2.value = value\n\t\t\temit('update:modelValue', value && !isNaN(value) ? value / currentPrice.value : '')\n\t\t}\n\t}\n})\nconst currentPrice = currency.currentPrice\nconst currencyType = computed(() => currency.settings.currency)\nconst currencySymbol = computed(() => new Intl.NumberFormat(navigator.languages, { style: 'currency', currency: currencyType.value }).format(0).replace(/[\\w\\d\\.\\,\\s]/g, '') || '$')\nconst focus = ref(0)\nwatch(() => model.value, (newVal, oldVal) => {\n\tif (newVal < 0) { return model.value = '' }\n\tif (focus.value <= 1 && !newVal.match(/^(?:\\d*\\.?\\d*)?$/)) { model.value = oldVal }\n})\nwatch(() => model2.value, (newVal, oldVal) => {\n\tif (focus.value === 2 && !newVal.match(/^(?:\\d*\\.?\\d*)?$/)) { model2.value = oldVal }\n})\n</script>\n\n\n\n<style scoped>\n.input-ar {\n\t--height: 3.5em;\n\theight: var(--height);\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.vertical.input-ar {\n\t--height: 7em;\n\tflex-direction: column;\n}\n\n.input {\n\twidth: 100%;\n\theight: inherit;\n\tflex: 1 1 0;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\t/* background: var(--background3); */\n\tborder-radius: inherit;\n}\n\n.vertical .input {\n\theight: calc(var(--height) / 2);\n}\n\n.spacer {\n\twidth: 1px;\n\theight: 1.2em;\n\tbackground: #ffffff18;\n\ttransition: 0.3s ease;\n}\n\n.vertical .spacer {\n\tdisplay: none;\n}\n\n.focus .spacer {\n\tbackground: #ffffff60;\n}\n\n.icon {\n\tfont-size: 1.4em;\n\twidth: 2em;\n\topacity: var(--element-secondary-opacity);\n}\n\n.focus .icon {\n\topacity: 1;\n}\n\n.text {\n\theight: inherit;\n\tfont-size: 1em;\n\tpadding: 0 var(--spacing);\n\toutline: none;\n\tborder: none;\n\tflex: 1 1 auto;\n\tbackground-color: transparent;\n\tcolor: var(--element-secondary);\n\twidth: 100%;\n}\n\n.text.right {\n\ttext-align: end;\n}\n</style>","<template>\n\t<transition name=\"fade\">\n\t\t<div v-if=\"dragOverlay\" class=\"dragOverlay\" />\n\t</transition>\n</template>\n\n\n\n<script setup>\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { computed } from 'vue'\n\nconst dragOverlay = computed(() => InterfaceStore.dragOverlay)\n</script>\n\n\n\n<style scoped>\n.dragOverlay {\n\tpointer-events: none;\n\ttouch-action: none;\n\tposition: absolute;\n\tbackground-image: radial-gradient(circle at center, #333, #222);\n\tbackground-position: center;\n\tbackground-repeat: no-repeat;\n\tbackground-origin: center;\n\tbackground-size: cover;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tz-index: 99999;\n\tborder-radius: inherit;\n\tfilter: opacity(0.6);\n}\n\n.dragOverlay::after {\n\tcontent: \"\";\n\ttext-align: center;\n\tbackground-image: url(\"@/assets/icons/drop.svg\");\n\tbackground-position: center;\n\tbackground-repeat: no-repeat;\n\tbackground-origin: center;\n\tbackground-size: 48px 48px;\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tz-index: 99999;\n}\n</style>","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" }, null, -1)\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M14 17H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z\" }, null, -1)\nconst _hoisted_5 = [\n  _hoisted_2,\n  _hoisted_3,\n  _hoisted_4\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_5))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11A2.98 2.98 0 0 1 22 15c0 1.65-1.35 3-3 3H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95A5.469 5.469 0 0 1 12 6m0-2C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96A7.49 7.49 0 0 0 12 4z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","<template>\n\t<div class=\"input-data input-box\" :class=\"{ focus }\" @drop.stop.prevent=\"handleFiles\">\n\t\t<textarea v-show=\"!isFile\" v-model=\"model\" @focus=\"focus = 1\" @blur=\"focus = 0\" :disabled=\"disabled\" :id=\"id\" :placeholder=\"placeholder\"></textarea>\n\t\t<transition name=\"fade\">\n\t\t\t<div v-if=\"!model && !dragOverlay\" class=\"overlay passthrough\">\n\t\t\t\t<Icon :icon=\"IconText\" class=\"big-icon-container img\" />\n\t\t\t\t<div class=\"spacer\" />\n\t\t\t\t<div class=\"big-icon-container not-passthrough\">\n\t\t\t\t\t<label for=\"file-picker\" class=\"file-picker-label\">\n\t\t\t\t\t\t<Icon :icon=\"IconDrop\" class=\"img\" style=\"width: 100%; height: 100%;\" />\n\t\t\t\t\t</label>\n\t\t\t\t\t<input type=\"file\" id=\"file-picker\" class=\"file-input\" @change=\"handleFiles\" :disabled=\"disabled\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-else-if=\"isFile\" class=\"overlay\">\n\t\t\t\t<Icon :icon=\"IconCloud\" class=\"big-icon-container focus\" />\n\t\t\t\t<button class=\"clear\" @click=\"clearFiles\" type=\"button\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<Icon :icon=\"IconX\" class=\"iconX no-select\" draggable=\"false\" />\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</transition>\n\t\t<DragOverlay />\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport DragOverlay from '@/components/atomic/DragOverlay.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { computed, ref, toRef, useAttrs } from 'vue'\n\nimport IconText from '@/assets/icons/text.svg?component'\nimport IconDrop from '@/assets/icons/drop.svg?component'\nimport IconCloud from '@/assets/icons/cloud.svg?component'\nimport IconX from '@/assets/icons/x.svg?component'\n\nconst props = defineProps(['modelValue', 'disabled', 'id', 'placeholder'])\nconst emit = defineEmits(['update:modelValue', 'files'])\nconst attrs = useAttrs()\n\nconst model = computed({\n\tget () { return props.modelValue },\n\tset (value) { emit('update:modelValue', value) }\n})\nconst focus = ref(0)\nconst dragOverlay = toRef(InterfaceStore, 'dragOverlay')\nconst handleFiles = (e: DragEvent | InputEvent) => {\n\tif (attrs.disabled) { return }\n\tif (e.dataTransfer?.files) { return emit('files', e.dataTransfer.files) }\n\tconst target = e.target as HTMLInputElement\n\tif (target?.files) { return emit('files', target.files) }\n}\nconst clearFiles = () => { emit('files', null) }\nconst isFile = computed(() => typeof model.value === \"object\")\n</script>\n\n\n\n<style scoped>\n.input-data {\n\theight: 12em;\n\tposition: relative;\n\toverflow: hidden;\n\tdisplay: flex;\n}\n\ntextarea {\n\tfont-family: inherit;\n\tresize: none;\n\twidth: 100%;\n\theight: 100%;\n\tfont-size: 1em;\n\tpadding: var(--spacing);\n\toutline: none;\n\tborder: none;\n\tbackground-color: transparent;\n\tcolor: var(--element-secondary);\n\ttext-align: inherit;\n}\n\n.overlay {\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.spacer {\n\twidth: 1px;\n\theight: 56px;\n\tmargin: 0 var(--spacing);\n\tbackground: #ffffff18;\n\ttransition: 0.3s ease;\n}\n\n.focus .spacer {\n\tbackground: #ffffff60;\n}\n\n.big-icon-container {\n\twidth: 48px;\n\theight: 48px;\n\tposition: relative;\n\tdisplay: flex;\n}\n\n.file-picker-label {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 1;\n\tcursor: pointer;\n}\n\n.img {\n\topacity: 0.2;\n\ttransition: 0.3s ease;\n}\n\n.focus .img {\n\topacity: 0.6;\n}\n\n.file-input {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tborder-radius: var(--border-radius);\n\tdisplay: none;\n}\n\n.clear {\n\tposition: absolute;\n\theight: 100%;\n\tright: 0;\n}\n\n.passthrough {\n\tpointer-events: none;\n\ttouch-action: none;\n}\n\n.not-passthrough {\n\tpointer-events: auto;\n\ttouch-action: auto;\n}\n\n/* extract */\n.icon-container {\n\tflex: 0 0 auto;\n\theight: 3em;\n\twidth: 3em;\n\tborder-radius: inherit;\n\tpadding: 3px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.iconX {\n\theight: 1.4em;\n\twidth: 1.4em;\n\tobject-fit: contain;\n\topacity: var(--element-secondary-opacity);\n\ttransition: 0.3s ease;\n}\n\n.symbol {\n\tfont-size: 1.4em;\n\topacity: var(--element-secondary-opacity);\n\ttransition: 0.3s ease;\n}\n\n.focus .iconX,\n.focus .symbol {\n\topacity: 1;\n}\n</style>","<template>\n\t<div v-if=\"schema.length > 0\" class=\"input-grid input-box\" :class=\"{ focus }\">\n\t\t<div v-for=\"(row, index) in schema\" :key=\"row.key\" class=\"row\">\n\t\t\t<div class=\"inputs\">\n\t\t\t\t<div v-for=\"(input, inputIndex) in row.items\" :key=\"row.key + input.name\" class=\"input\" :class=\"{ flip: row.items.length == 2 && inputIndex == 1 }\">\n\t\t\t\t\t<Icon v-if=\"input.icon\" :icon=\"input.icon\" />\n\t\t\t\t\t<RawInput v-model=\"input.value\" v-bind=\"input.attrs\" class=\"text\" :placeholder=\"input.name\" @focus=\"focus = (index + 1) * (inputIndex + 1)\" @blur=\"focus = 0\" :disabled=\"disabled\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button v-if=\"row.deletable\" class=\"remove\" @click=\"removeRow(index)\" type=\"button\">\n\t\t\t\t<Icon :icon=\"IconX\" />\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport RawInput from '@/components/function/RawInput.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport IconX from '@/assets/icons/x.svg?component'\nimport { ref } from 'vue'\n\nconst props = defineProps(['schema', 'disabled'])\n\nconst focus = ref(0)\nconst removeRow = (index) => props.schema.splice(index, 1)\n</script>\n\n\n\n<style scoped>\n.input-grid {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n\n.row {\n\twidth: 100%;\n\tdisplay: flex;\n}\n\n.inputs {\n\tflex: 1 1 0;\n\tmin-width: 0;\n\tdisplay: flex;\n}\n\n.vertical .inputs {\n\tflex-direction: column;\n}\n\n.input {\n\tflex: 1 1 auto;\n\tmin-width: 0;\n\theight: inherit;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder-radius: inherit;\n}\n\n.icon {\n\tfont-size: 1.4em;\n\twidth: 2em;\n\topacity: var(--element-secondary-opacity);\n}\n\n.focus .icon {\n\topacity: 1;\n}\n\n.text {\n\tflex: 1 1 0;\n\tmin-width: 0;\n\twidth: 0;\n\theight: 3.5em;\n\tfont-size: 1em;\n\tpadding: 0 var(--spacing);\n\toutline: none;\n\tborder: none;\n\tbackground-color: transparent;\n\tcolor: var(--element-secondary);\n}\n\n.input.flip {\n\tflex-direction: row-reverse;\n}\n\n.input.flip .text {\n\ttext-align: end;\n}\n\n.input-grid:not(.vertical) .input:not(.flip):not(:first-child)::before {\n\tcontent: \"\";\n\twidth: 1px;\n\theight: 1.2em;\n\tbackground: #ffffff18;\n\ttransition: 0.3s ease;\n}\n\n.input-grid:not(.vertical).focus .input:not(.flip):not(:first-child)::before {\n\tbackground: #ffffff60;\n}\n\n.input-grid:not(.vertical) .input.flip::after {\n\tcontent: \"\";\n\twidth: 1px;\n\theight: 1.2em;\n\tbackground: #ffffff18;\n\ttransition: 0.3s ease;\n}\n\n.input-grid:not(.vertical).focus .input.flip::after {\n\tbackground: #ffffff60;\n}\n\n.vertical .text:first-child {\n\tmargin-inline-start: 3em;\n}\n\n.remove {\n\tdisplay: flex;\n\talign-items: center;\n\topacity: 0.5;\n\ttransition: 0.1s ease;\n}\n\n.remove:hover {\n\topacity: 1;\n}\n</style>","<template>\n\t<div class=\"slider\" :class=\"{ focus: focus || hover, snapped, disabled: !settings.max }\" :style=\"{ '--thumb-width': thumbWidth + '%' }\">\n\t\t<div class=\"slider-container input-box\" :class=\"{ focus, hover }\">\n\t\t\t<input v-model=\"model\" type=\"range\" min=\"0\" :max=\"settings.max\" :disabled=\"!settings.max\" @focus=\"focus = true\" @blur=\"focus = false\" @mouseover=\"hover = true\" @mouseleave=\"hover = false\" @keydown=\"poke\" />\n\t\t\t<svg class=\"thumb\" role=\"presentation\" width=\"100%\" height=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t<rect :x=\"thumbPosition + '%'\" :width=\"thumbWidth + '%'\" y=\"0\" height=\"100%\" />\n\t\t\t</svg>\n\t\t</div>\n\t\t<svg v-if=\"rangeStart\" class=\"range\" role=\"presentation\" width=\"100%\" height=\"11\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<rect :x=\"rangeStart.toString() + '%'\" :width=\"rangeEnd.minus(rangeStart).toString() + '%'\" y=\"10\" height=\"1\" rx=\"0.5\" ry=\"0.5\" />\n\t\t</svg>\n\t\t<transition name=\"fade-fast\">\n\t\t\t<svg v-if=\"progress != null\" class=\"progress\" role=\"presentation\" width=\"100%\" height=\"11\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t<rect class=\"progress-rect\" x=\"0\" :width=\"progress + '%'\" y=\"10\" height=\"1\" rx=\"0.5\" ry=\"0.5\" />\n\t\t\t</svg>\n\t\t</transition>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport BigNumber from 'bignumber.js'\nimport { computed, ref } from 'vue'\n\nconst props = defineProps(['modelValue', 'settings', 'progress'])\nconst emit = defineEmits(['update:modelValue'])\n\nconst model = computed({\n\tget () { return props.modelValue },\n\tset (value) {\n\t\tconst snapTo = snap(value)\n\t\temit('update:modelValue', snapTo || value)\n\t}\n})\nconst snapped = ref(null)\nconst range = computed(() => props.settings.max ? new BigNumber(props.settings.max.minus(props.settings.min || '0')) : null)\nconst snapAmount = computed(() => range.value.dividedToIntegerBy('50'))\nconst pokeAmount = computed(() => range.value.dividedToIntegerBy('50'))\nconst snap = (e) => {\n\tsnapped.value = null\n\tif (!range.value) { return null }\n\tconst bigNumber = new BigNumber(e)\n\tconst result = { setting: null, distance: range.value }\n\tfor (const setting in props.settings) {\n\t\tif (!props.settings[setting]) { continue }\n\t\tconst distance = props.settings[setting].minus(bigNumber).absoluteValue()\n\t\tif (distance.lt(result.distance)) { result.setting = setting; result.distance = distance }\n\t}\n\tif (result.distance.lt(snapAmount.value)) {\n\t\tconst nearest = props.settings[result.setting].toString()\n\t\tif (['minRange', 'default', 'maxRange'].includes(result.setting)) { snapped.value = nearest }\n\t\treturn nearest\n\t}\n\treturn null\n}\nconst poke = (e) => {\n\tif (e.key !== 'ArrowLeft' && e.key !== 'ArrowRight' && e.key !== 'ArrowUp' && e.key !== 'ArrowDown' || !range.value) { return }\n\te.preventDefault()\n\tconst currentValue = new BigNumber(model.value)\n\tlet nextValue = null\n\tif (e.key === 'ArrowLeft' || e.key === 'ArrowDown') {\n\t\tnextValue = currentValue.minus(pokeAmount.value)\n\t\tif (nextValue.isLessThan(props.settings.min || 0)) { nextValue = props.settings.min || 0 }\n\t}\n\tif (e.key === 'ArrowRight' || e.key === 'ArrowUp') {\n\t\tnextValue = currentValue.plus(pokeAmount.value)\n\t\tif (nextValue.isGreaterThan(props.settings.max)) { nextValue = props.settings.max }\n\t}\n\tmodel.value = nextValue.toString()\n}\nconst focus = ref(false)\nconst hover = ref(false)\nconst rangeStart = computed(() => {\n\tif (!props.settings.minRange || !props.settings.maxRange || !range.value) { return null }\n\treturn props.settings.minRange.dividedBy(range.value).times('100')\n})\nconst rangeEnd = computed(() => {\n\tif (!props.settings.minRange || !props.settings.maxRange || !range.value) { return null }\n\treturn props.settings.maxRange.dividedBy(range.value).times('100')\n})\n\nconst thumbWidth = 4\nconst thumbPosition = computed(() => new BigNumber(model.value).dividedBy(range.value && range.value.gt(0) ? range.value : '1').times(100 - thumbWidth))\n</script>\n\n\n\n<style scoped>\n.slider {\n\t--height: 1.4em;\n\t--color: var(--element-secondary);\n\t--transition: 0.3s ease;\n\tposition: relative;\n}\n\n.slider-container {\n\twidth: 100%;\n\toverflow: hidden;\n\tposition: relative;\n}\n\n.thumb {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tpointer-events: none;\n\ttouch-action: none;\n\tfill: var(--color);\n\topacity: 0.2;\n\ttransition: var(--transition);\n}\n\n.focus .thumb {\n\topacity: 0.4;\n}\n\n.snapped.focus .thumb {\n\topacity: 1;\n}\n\n.disabled .thumb {\n\topacity: 0;\n}\n\ninput[type=\"range\"] {\n\tfont-size: 1rem;\n\tappearance: none;\n\t-webkit-appearance: none;\n\tposition: relative;\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\toutline: 0;\n\tborder-radius: inherit;\n\theight: var(--height);\n\twidth: 100%;\n\tbackground: transparent;\n\tcursor: pointer;\n\tdisplay: flex;\n\t/* overflow: hidden; */\n}\n\ninput[type=\"range\"]:focus {\n\toutline: 0;\n}\n\n.range,\n.progress {\n\tposition: absolute;\n\tfill: var(--color);\n\topacity: 0;\n\ttransition: var(--transition);\n}\n\n.focus .range {\n\topacity: 1;\n\tfilter: drop-shadow(0 -2px 6px #ffffff66);\n}\n\n.progress {\n\topacity: 0.4;\n\tfilter: drop-shadow(0 -2px 6px #ffffff66);\n}\n\n.progress-rect {\n\ttransition: width 0.2s ease;\n}\n\n/* -------------------------------------------- */\n\ninput[type=\"range\"]::-webkit-slider-runnable-track {\n\tborder: 0;\n\tbox-shadow: none;\n\theight: 100%;\n\twidth: 100%;\n}\n\ninput[type=\"range\"]::-moz-range-track {\n\tborder: 0;\n\tbox-shadow: none;\n\theight: 100%;\n\twidth: 100%;\n}\n\ninput[type=\"range\"]::-ms-track {\n\tborder: 0;\n\tbox-shadow: none;\n\tbox-sizing: border-box;\n\theight: 100%;\n\twidth: 100%;\n}\n\n/* -------------------------------------------- */\n\ninput[type=\"range\"]::-webkit-slider-thumb {\n\topacity: 0 !important;\n\tappearance: none;\n\t-webkit-appearance: none;\n\tmargin: 0;\n\tborder: 0;\n\tborder-radius: 0;\n\tbox-shadow: none;\n\topacity: 0.2;\n\twidth: var(--thumb-width);\n\theight: 100%;\n\tbackground: var(--color);\n\ttransition: var(--transition);\n}\n\ninput[type=\"range\"]::-moz-range-thumb {\n\topacity: 0 !important;\n\tborder: 0;\n\tborder-radius: 0;\n\tbox-shadow: none;\n\topacity: 0.2;\n\twidth: var(--thumb-width);\n\theight: 100%;\n\tbackground: var(--color);\n\ttransition: var(--transition);\n}\n\ninput[type=\"range\"]::-ms-thumb {\n\topacity: 0 !important;\n\tmargin-top: 0;\n\tborder: 0;\n\tborder-radius: 0;\n\tbox-shadow: none;\n\tbox-sizing: border-box;\n\topacity: 0.2;\n\twidth: var(--thumb-width);\n\theight: 100%;\n\tbackground: var(--color);\n\ttransition: var(--transition);\n}\n\n/* -------------------------------------------- */\n\ninput[type=\"range\"]:focus::-webkit-slider-thumb {\n\topacity: 1;\n}\n\ninput[type=\"range\"]:disabled::-webkit-slider-thumb {\n\topacity: 0;\n}\n\ninput[type=\"range\"]:focus::-moz-range-thumb {\n\topacity: 1;\n}\n\ninput[type=\"range\"]:disabled::-moz-range-thumb {\n\topacity: 0;\n}\n\ninput[type=\"range\"]:focus::-ms-thumb {\n\topacity: 1;\n}\n\ninput[type=\"range\"]:disabled::-ms-thumb {\n\topacity: 0;\n}\n\n/* -------------------------------------------- */\n\ninput[type=\"range\"]::-ms-fill-upper {\n\tbackground: transparent;\n\tborder: 0;\n}\n\ninput[type=\"range\"]::-ms-fill-lower {\n\tbackground: transparent;\n\tborder: 0;\n}\n</style>","<template>\n\t<div>\n\t\t<div>Size {{ txSizeDisplay }}</div>\n\t\t<div>\n\t\t\tFee\n\t\t\t<Amount :ar=\"userFeeAr\" />\n\t\t</div>\n\t\t<Slider v-model=\"slider\" :settings=\"sliderSettings\" :progress=\"progress\" />\n\t</div>\n</template>\n\n\n\n<script setup>\nimport Slider from '@/components/atomic/Slider.vue'\nimport Amount from '@/components/composed/Amount.vue'\nimport ArweaveStore, { arweave } from '@/store/ArweaveStore'\nimport BlockStore from '@/store/BlockStore'\nimport { getFeeRange } from '@/functions/Transactions'\nimport { debounce, humanFileSize } from '@/functions/Utils'\nimport axios from 'axios'\nimport BigNumber from 'bignumber.js'\nimport { computed, reactive, ref, watch } from 'vue'\n\nconst props = defineProps(['target', 'size'])\nconst emit = defineEmits(['update'])\n\nconst address = computed(() => props.target.slice(0,43).match(/^[a-z0-9_-]{43}$/i) ? props.target.slice(0,43) : '')\nconst txFee = ref(null)\nconst updateFee = async () => { txFee.value = await arweave.transactions.getPrice(props.size, address.value) }\nconst updateFeeDebounced = debounce(updateFee)\nupdateFee()\nwatch(() => address.value + props.size, () => {\n\ttxFee.value = null\n\tupdateFeeDebounced()\n})\n\nconst txSizeDisplay = computed(() => humanFileSize(props.size))\n\nconst range = reactive({})\ngetFeeRange().then(obj => Object.assign(range, obj))\nconst slider = ref('0')\nconst sliderSettings = computed(() => {\n\tconst result = {\n\t\tmin: new BigNumber('0'),\n\t\tminRange: factorInBaseFee(range.min),\n\t\tdefault: factorInBaseFee(range.default),\n\t\tmaxRange: factorInBaseFee(range.max),\n\t\tmax: factorInBaseFee(range.max),\n\t}\n\tslider.value = result.default || '0'\n\treturn result\n})\nconst factorInBaseFee = (fee) => {\n\tif (!fee || !txFee.value) { return null }\n\treturn fee.minus(txFee.value) > 0 ? fee.minus(txFee.value) : new BigNumber('0')\n}\n\nconst userFee = computed(() => {\n\tif (!txFee.value || !slider.value) { return null }\n\tconst txFeeBn = new BigNumber(txFee.value)\n\tconst sliderBn = new BigNumber(slider.value)\n\treturn txFeeBn.plus(sliderBn)\n})\nconst userFeeAr = computed(() => {\n\tif (!userFee.value) { return null }\n\treturn arweave.ar.winstonToAr(userFee.value)\n})\nwatch(userFeeAr, userFeeAr => emit('update', userFeeAr))\n\nconst progress = computed(() => BlockStore.mempoolStatus.progress)\n</script>\n\n\n\n<style scoped>\n.secondary {\n\tcolor: var(--element-secondary);\n}\n\n.small {\n\tfont-size: 0.75em;\n}\n\n.slider {\n\twidth: 100%;\n}\n</style>\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16zM16 17H5V7h11l3.55 5L16 17z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","<template>\n\t<div class=\"send card\">\n\t\t<form>\n\t\t\t<!-- TODO Autocomplete local addrs -->\n\t\t\t<label for=\"target\">\n\t\t\t\t<h2 class=\"heading flex-row\">\n\t\t\t\t\t<Icon :icon=\"IconNorthEast\" />\n\t\t\t\t\t<span>Send</span>\n\t\t\t\t</h2>\n\t\t\t</label>\n\t\t\t<InputAddress v-model=\"model.target\" id=\"target\" />\n\t\t\t<div class=\"row bottom flex-row\">\n\t\t\t\t<div>\n\t\t\t\t\t<transition name=\"slide-up\">\n\t\t\t\t\t\t<div v-show=\"validation.target\" class=\"validation\">{{ validation.target }}</div>\n\t\t\t\t\t</transition>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<label for=\"quantity\">\n\t\t\t\t<h3 class=\"heading flex-row\">\n\t\t\t\t\t<span>Amount</span>\n\t\t\t\t</h3>\n\t\t\t</label>\n\t\t\t<InputAr v-model=\"model.quantity\" id=\"quantity\" />\n\t\t\t<div class=\"row bottom flex-row\">\n\t\t\t\t<div>\n\t\t\t\t\t<transition name=\"slide-up\">\n\t\t\t\t\t\t<div v-show=\"validation.quantity\" class=\"validation\">{{ validation.quantity }}</div>\n\t\t\t\t\t</transition>\n\t\t\t\t</div>\n\t\t\t\t<button type=\"button\" class=\"secondary\" @click=\"setMax\">Max</button>\n\t\t\t</div>\n\n\t\t\t<label for=\"data\">\n\t\t\t\t<h3 class=\"heading flex-row\">\n\t\t\t\t\t<span>Data</span>\n\t\t\t\t</h3>\n\t\t\t</label>\n\t\t\t<InputData v-model=\"model.data\" @files=\"filesAdded\" id=\"data\" />\n\t\t\t<div class=\"row bottom flex-row\">\n\t\t\t\t<div>\n\t\t\t\t\t<transition name=\"slide-up\">\n\t\t\t\t\t\t<div v-if=\"validation.data\" class=\"validation\">{{ validation.data }}</div>\n\t\t\t\t\t</transition>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"row flex-row\">\n\t\t\t\t<label for=\"add-tag\">\n\t\t\t\t\t<h3 class=\"heading flex-row\" style=\"display:block;\">\n\t\t\t\t\t\t<span>Tags</span>\n\t\t\t\t\t</h3>\n\t\t\t\t</label>\n\t\t\t\t<div v-if=\"!model.tags.length\">\n\t\t\t\t\t<button type=\"button\" class=\"secondary\" @click=\"addTag()\" id=\"add-tag\">Add</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<InputGrid :schema=\"model.tags\" />\n\t\t\t<div v-if=\"model.tags.length\" class=\"row bottom flex-row\">\n\t\t\t\t<div>\n\t\t\t\t\t<transition name=\"slide-up\">\n\t\t\t\t\t\t<div v-if=\"validation.tags\" class=\"validation\">{{ validation.tags }}</div>\n\t\t\t\t\t</transition>\n\t\t\t\t</div>\n\t\t\t\t<button type=\"button\" class=\"secondary\" @click=\"addTag()\" id=\"add-tag\">Add</button>\n\t\t\t</div>\n\n\t\t\t<div class=\"row flex-row\" style=\"align-items:flex-end; margin-top:3em;\">\n\t\t\t\t<SendFee :size=\"txSize\" :target=\"model.target\" @update=\"fee => txFee = fee\" />\n\t\t\t\t<Button @click=\"postTx\" :style=\"submitStyle\" :disabled=\"loading || !txFee || !wallet.signTransaction\" :icon=\"IconNorthEast\">Submit</Button>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<transition name=\"slide-up\">\n\t\t\t\t\t<div v-if=\"validation.global\" class=\"row bottom flex-row\" style=\"justify-content:center;\">\n\t\t\t\t\t\t<div style=\"text-align:center;\" class=\"validation\">{{ validation.global }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</transition>\n\t\t\t</div>\n\t\t</form>\n\t\t<!-- TODO QR -->\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport InputAddress from '@/components/atomic/InputAddress.vue';\nimport InputAr from '@/components/atomic/InputAr.vue'\nimport InputData from '@/components/atomic/InputData.vue'\nimport InputGrid from '@/components/atomic/InputGrid.vue'\nimport SendFee from '@/components/composed/SendFee.vue'\nimport Button from '@/components/atomic/Button.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport { buildTransaction, manageUpload } from '@/functions/Transactions'\nimport { awaitEffect } from '@/functions/AsyncData'\nimport { addressHashToColor, addressToHash } from '@/functions/Utils'\nimport { notify } from '@/store/NotificationStore'\nimport BigNumber from 'bignumber.js'\nimport { computed, markRaw, reactive, ref, watch } from 'vue'\n\nimport IconNorthEast from '@/assets/icons/north_east.svg?component'\nimport IconLabel from '@/assets/icons/label.svg?component'\n\nconst props = defineProps(['wallet', 'model'])\n\nconst setMax = async () => {\n\tconst balance = new BigNumber(props.wallet.balance)\n\tawait awaitEffect(() => txFee.value)\n\tprops.model.quantity = balance.minus(txFee.value!).toString()\n}\n\nconst filesAdded = (files: FileList) => { // todo go through droppedFiles\n\tlet contentTypeTag = props.model.tags.find(row => row.items[0].value === 'Content-Type')\n\tprops.model.data = files ? files[0] : ''\n\tif (props.model.data && props.model.data.type) {\n\t\tif (!contentTypeTag) {\n\t\t\tcontentTypeTag = tagSchema('Content-Type')\n\t\t\taddTag(contentTypeTag)\n\t\t}\n\t\tcontentTypeTag.items[1].value = props.model.data.type\n\t} else {\n\t\tconst index = props.model.tags.indexOf(contentTypeTag)\n\t\tprops.model.tags.splice(index, 1)\n\t}\n}\n\nconst tagSchema = (name, value) => ({\n\titems: [\n\t\t{ name: 'Tag', value: name || '', icon: markRaw(IconLabel) },\n\t\t{ name: 'Value', value: value || '' }\n\t], deletable: true, key: Math.random()\n})\nconst addTag = (tag) => props.model.tags.push(tag || tagSchema())\n\nconst txSize = computed(() => {\n\tconst data = props.model.data\n\treturn data.size || data.length || '0'\n})\nconst txFee = ref(null as null | string)\n\nconst getTagsFromSchema = (tagsSchema) => {\n\tconst result = []\n\tfor (const row of tagsSchema) { result.push({ name: row.items[0].value, value: row.items[1].value }) }\n\treturn result\n}\n\nconst loading = ref(false)\nconst validation = reactive({ target: '', quantity: '', data: '', tags: '' })\n\nconst isValid = () => {\n\tfor (const key in validation) { validation[key] = '' }\n\tlet result = true\n\tif (!props.model.data && !(props.model.quantity > 0)) {\n\t\tvalidation.global = \"A transaction must at least have data, or an address and amount\"\n\t\treturn\n\t}\n\tconst balance = new BigNumber(props.wallet.balance)\n\tif (balance.minus(txFee.value).minus(props.model.quantity || 0) < 0) {\n\t\tif (props.model.quantity > 0) {\n\t\t\tvalidation.quantity = \"Current balance too low\"; result = false\n\t\t} else {\n\t\t\tvalidation.data = \"Current balance too low\"; result = false\n\t\t}\n\t}\n\tconst tags = getTagsFromSchema(props.model.tags)\n\tlet tagLength = 0\n\tfor (const tag of tags) {\n\t\ttagLength += tag.name.length + tag.value.length\n\t\tif (tagLength > 2048) {\n\t\t\tvalidation.tags = \"Length of tags can't be greater than 2048\"; result = false\n\t\t}\n\t\tif (!tag.name.length || !tag.value.length) {\n\t\t\tvalidation.tags = \"Tags can't be empty\"; result = false\n\t\t}\n\t}\n\tif (props.model.target.length && props.model.target.length < 43) {\n\t\tvalidation.target = \"Invalid address\"; result = false\n\t}\n\tif (!props.model.target.length && props.model.quantity > 0) {\n\t\tvalidation.target = \"An address must be specified to send AR\"; result = false\n\t}\n\treturn result\n}\n\nconst resetForm = () => {\n\tprops.model.target = ''\n\tprops.model.quantity = ''\n\tprops.model.data = ''\n\tprops.model.tags = []\n\t// TODO reset the fee slider\n}\n\nconst postTx = async () => {\n\tif (loading.value || !isValid()) { return }\n\tloading.value = true\n\ttry {\n\t\tconst tx = await buildTransaction({\n\t\t\ttarget: props.model.target,\n\t\t\tar: props.model.quantity,\n\t\t\tarReward: txFee.value,\n\t\t\ttags: getTagsFromSchema(props.model.tags),\n\t\t\tdata: props.model.data,\n\t\t})\n\t\tawait props.wallet.signTransaction(tx)\n\t\tmanageUpload(tx)\n\t\tresetForm()\n\t\tnotify.log('Transaction sent')\n\t} catch (e: any) {\n\t\tconsole.error(e)\n\t\tnotify.error(e)\n\t}\n\tloading.value = false\n}\n\nconst addressHash = ref(null)\nwatch(() => props.wallet.key, async (val) => addressHash.value = await addressToHash(val), { immediate: true })\nconst addressHashColor = computed(() => addressHashToColor(addressHash.value).join(','))\nconst submitStyle = computed(() => ({\n\t'--border': `rgba(${addressHashColor.value},0.8)`,\n\t'--glow-color': `rgba(${addressHashColor.value},0.2)`,\n\t'background-image': `radial-gradient(circle at center, rgba(${addressHashColor.value},0.4),\n\trgba(${addressHashColor.value},0.3))`\n}))\n</script>\n\n\n\n<style scoped>\n.send {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.heading {\n\talign-items: center;\n}\n\n.row {\n\tmin-height: 3em;\n\talign-items: center;\n\tjustify-content: space-between;\n}\n\n.row.bottom {\n\tpadding-top: 1em;\n}\n\n.validation {\n\tcolor: var(--orange);\n}\n\n.secondary {\n\tcolor: var(--element-secondary);\n}\n\n.button {\n\twidth: 50%;\n}\n</style>","import { arweave } from '@/store/ArweaveStore'\n// import {\n// \tCacheableExecutorFactory,\n// \tCacheableStateEvaluator,\n// \tContractDefinitionLoader,\n// \tDebuggableExecutorFactory,\n// \tEvalStateResult,\n// \tHandlerExecutorFactory,\n// \tLexicographicalInteractionsSorter,\n// \tLoggerFactory,\n// \tMemBlockHeightSwCache,\n// \tMemCache,\n// \tSmartWeave\n// } from 'redstone-smartweave'\nimport { reactive } from 'vue'\n\nconst SmartweaveStore = reactive({\n\tcontracts: {},\n})\n\nexport default SmartweaveStore\n","<template>\n\t<div class=\"token-card\">\n\t\t<div class=\"token-content\">\n\t\t\t<router-link class=\"left reset flex-row\" :to=\"{ name: 'Tx', params: { txId: txId } }\">\n\t\t\t\t<img class=\"img\" :src=\"img\" />\n\t\t\t\t<div>\n\t\t\t\t\t<div>{{ token.name }}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{ balance }}\n\t\t\t\t\t\t<span class=\"secondary-text\">{{ token.ticker }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</router-link>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport ArweaveStore from '@/store/ArweaveStore'\nimport SmartweaveStore from '@/store/SmartweaveStore'\nimport { computed } from 'vue'\n\nexport default {\n\tprops: ['txId', 'wallet'],\n\tsetup (props) {\n\t\tconst token = computed(() => SmartweaveStore.contracts[props.txId])\n\t\tconst img = computed(() => {\n\t\t\tif (!token.value.settings) { return }\n\t\t\tfor (const setting of token.value.settings) {\n\t\t\t\tif (setting[0] === 'communityLogo') {\n\t\t\t\t\treturn ArweaveStore.gatewayURL + setting[1]\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\tconst balance = computed(() => {\n\t\t\treturn new Intl.NumberFormat(navigator.languages).format(token.value.balances[props.wallet.key])\n\t\t})\n\t\treturn { token, img, balance }\n\t},\n}\n</script>\n\n<style scoped>\n.left {\n\talign-items: center;\n}\n\n.img {\n\twidth: 48px;\n\theight: 48px;\n}\n</style>","import { createRouter, createWebHistory, createWebHashHistory, START_LOCATION } from 'vue-router'\nimport { Wallets, getWalletById } from '@/functions/Wallets'\nimport InterfaceStore, { emitter } from '@/store/InterfaceStore'\nimport { state } from '@/functions/Channels'\nimport Wallet from '@/views/Wallet.vue'\nimport TxList from '@/views/TxList.vue'\nimport Send from '@/views/Send.vue'\nimport Tokens from '@/views/Tokens.vue'\n\nconst routes = [\n\t{\n\t\tname: 'Wallet',\n\t\tpath: '/wallet/:walletId(\\\\d+)',\n\t\tcomponent: Wallet,\n\t\tprops: (route) => ({ wallet: getWalletById(route.params.walletId) }),\n\t\tbeforeEnter: (to) => {\n\t\t\tif (!Wallets.value[0]) { return { name: 'Welcome' } }\n\t\t\tif (!to.params.walletId || !getWalletById(to.params.walletId)) {\n\t\t\t\treturn { name: 'TxList', params: { walletId: Wallets.value[0].id } }\n\t\t\t}\n\t\t},\n\t\tchildren: [\n\t\t\t{\n\t\t\t\tname: 'Send',\n\t\t\t\tpath: 'send',\n\t\t\t\tcomponent: Send,\n\t\t\t\tmeta: { title: 'Send' },\n\t\t\t\tprops: (route) => ({\n\t\t\t\t\twallet: getWalletById(route.params.walletId),\n\t\t\t\t\tmodel: InterfaceStore.wallet.send\n\t\t\t\t}),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'TxList',\n\t\t\t\tpath: 'tx-list',\n\t\t\t\tcomponent: TxList,\n\t\t\t\tmeta: { title: 'Transactions' },\n\t\t\t\tprops: (route) => ({ wallet: getWalletById(route.params.walletId) }),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Tokens',\n\t\t\t\tpath: 'tokens',\n\t\t\t\tcomponent: Tokens,\n\t\t\t\tmeta: { title: 'Tokens' },\n\t\t\t\tprops: (route) => ({ wallet: getWalletById(route.params.walletId) }),\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tname: 'Tx',\n\t\tpath: '/tx/:txId',\n\t\tcomponent: () => import('@/views/Tx.vue'),\n\t\tmeta: { title: 'Transaction' },\n\t\tprops: true,\n\t},\n\t{\n\t\tname: 'Profile',\n\t\tpath: '/profile/:key',\n\t\tcomponent: () => import('@/views/Profile.vue'),\n\t\tmeta: { title: 'Profile' },\n\t\tprops: true,\n\t},\n\t{\n\t\tpath: '/welcome',\n\t\tname: 'Welcome',\n\t\tcomponent: () => import('@/views/Welcome.vue'),\n\t\tmeta: {},\n\t},\n\t{\n\t\tpath: '/connect',\n\t\tname: 'Connect',\n\t\tcomponent: () => import('@/views/Connect.vue'),\n\t\tmeta: { title: 'Connect' }\n\t},\n\t{\n\t\tpath: '/explore',\n\t\tname: 'Explore',\n\t\tcomponent: () => import('@/views/Explore.vue'),\n\t\tmeta: {},\n\t},\n\t{\n\t\tpath: '/add',\n\t\tname: 'AddWallet',\n\t\tcomponent: () => import('@/views/AddWallet.vue'),\n\t\tmeta: { title: 'Add Wallets' }\n\t},\n\t{\n\t\tpath: '/edit',\n\t\tname: 'EditWallet',\n\t\tcomponent: () => import('@/views/EditWallet.vue'),\n\t\tmeta: { title: 'Edit Wallets' },\n\t},\n\t{\n\t\tpath: '/settings',\n\t\tname: 'Settings',\n\t\tcomponent: () => import('@/views/Settings.vue'),\n\t\tmeta: { title: 'Settings' },\n\t},\n\t{\n\t\tpath: '/demo',\n\t\tredirect: () => {\n\t\t\treturn { name: 'Welcome' }\n\t\t}\n\t},\n\t{\n\t\tpath: '/connector',\n\t\tname: 'Connector',\n\t\tcomponent: () => import('@/views/Connector.vue'),\n\t},\n\t{\n\t\tpath: '/:pathMatch(.*)*',\n\t\tredirect: () => {\n\t\t\tif (state.value.type !== 'client') { return { name: 'Connect' } }\n\t\t\treturn Wallets.value[0]\n\t\t\t\t? { name: 'TxList', params: { walletId: Wallets.value[0].id } }\n\t\t\t\t: { name: 'Welcome' }\n\t\t}\n\t},\n]\n\nconst router = createRouter({\n\thistory: import.meta.env.BASE_URL === '/' ? createWebHistory() : createWebHashHistory(),\n\troutes,\n\tscrollBehavior: (to, from, savedPosition) => new Promise((resolve) => {\n\t\t// todo https://github.com/vuejs/vue-router/issues/1620\n\t\tif (to.params.walletId && from.params.walletId && to.params.walletId === from.params.walletId) { resolve() }\n\t\tconst position = savedPosition || { top: 0 }\n\t\temitter.once('scrollHistory', () => resolve(position))\n\t})\n})\n\nexport default router\n","import { addWallet } from '@/functions/Wallets'\nimport router from '@/router'\nimport Transaction from 'arweave/web/lib/transaction'\n\n\n\nexport async function dropped (files: FileList) {\n\t// keyfiles - import (through a isKeyfile function)\n\treturn importKeyfiles(files)\n\t// todo unsigned tx - fill send page (through tx import function?)\n\t// todo signed tx - ask to upload (through tx import function?)\n\t// todo else - fill send page file input\n}\n\nexport async function importKeyfiles (files: FileList) {\n\tconst walletPromises = []\n\tfor (const file of files) {\n\t\t// detect type\n\t\tconst walletPromise = addWallet(JSON.parse(await file.text()))\n\t\twalletPromises.push(walletPromise)\n\t}\n\tconst ids = (await Promise.all(walletPromises)).filter(e => e !== null).map(e => e.id)\n\tif (ids.length > 0) { router.push({ name: 'EditWallet', query: { wallet: ids } }) }\n}\n\nexport async function exportTransaction (tx: Transaction) {\n\t// if signed, don't track\n\t// find if corresponding message in current connector queue\n\tdownload('Transaction', JSON.stringify(tx))\n\t// await for matching importTransaction before completing\n}\n\n\n\nexport function download (filename: string, text: string, contentType = 'application/json') {\n\tconst element = document.createElement('a')\n\telement.setAttribute('href', `data:${contentType};charset=utf-8,${encodeURIComponent(text)}`)\n\telement.setAttribute('download', filename)\n\telement.style.display = 'none'\n\tdocument.body.appendChild(element)\n\telement.click()\n\tdocument.body.removeChild(element)\n}\n","import ArweaveStore, { arweave } from '@/store/ArweaveStore'\nimport { getMempool, getPending } from '@/store/BlockStore'\nimport { exportTransaction } from '@/functions/File'\nimport { notify } from '@/store/NotificationStore'\nimport BigNumber from 'bignumber.js'\nimport type Transaction from 'arweave/web/lib/transaction'\nimport type { CreateTransactionInterface } from 'arweave/web'\n\nexport type TxParams = {\n\ttarget?: string\n\tquantity?: string\n\tar?: string\n\twinston?: string\n\treward?: string\n\tarReward?: string\n\twinstonReward?: string\n\ttags?: { name: string, value: string }[]\n\tdata?: string | File\n}\n\nexport async function buildTransaction (tx: TxParams) {\n\tconst txSettings = {} as Partial<CreateTransactionInterface>\n\ttxSettings.target = tx.target || ''\n\ttxSettings.quantity = tx.quantity || tx.winston || (tx.ar ? arweave.ar.arToWinston(tx.ar) : '0')\n\ttxSettings.reward = tx.reward || tx.winstonReward || (tx.arReward ? arweave.ar.arToWinston(tx.arReward) : undefined)\n\tif (tx.data) { txSettings.data = tx.data instanceof File ? await readFile(tx.data) : tx.data }\n\tconst txObj = await arweave.createTransaction(txSettings)\n\tfor (const tag of tx.tags || []) { txObj.addTag(tag.name, tag.value) }\n\tif (txSettings.reward) { txObj.reward = txSettings.reward }\n\treturn txObj\n}\n\nfunction readFile (file: File) {\n\treturn new Promise<Uint8Array>((resolve, reject) => {\n\t\tconst fileReader = new FileReader()\n\t\tfileReader.onload = (e) => resolve(new Uint8Array(e.target?.result as any))\n\t\tfileReader.onerror = (e) => reject(e)\n\t\tfileReader.readAsArrayBuffer(file)\n\t})\n}\n\nexport async function manageUpload (tx: Transaction) {\n\tif (!navigator.onLine) { return exportTransaction(tx) }\n\tif (!tx.chunks?.chunks?.length) { return arweave.transactions.post(tx) }\n\tconst uploader = await arweave.transactions.getUploader(tx)\n\tconst storageKey = 'uploader:' + tx.id\n\tlocalStorage.setItem(storageKey, JSON.stringify(uploader))\n\tArweaveStore.uploads[tx.id] ??= {}\n\tArweaveStore.uploads[tx.id].upload = 0\n\twhile (!uploader.isComplete) {\n\t\tawait uploader.uploadChunk()\n\t\tlocalStorage.setItem(storageKey, JSON.stringify(uploader))\n\t\tArweaveStore.uploads[tx.id].upload = uploader.pctComplete\n\t}\n\tlocalStorage.removeItem(storageKey)\n\tsetTimeout(() => delete ArweaveStore.uploads[tx.id], 1000)\n\treturn uploader.lastResponseStatus\n}\n\nlet failedLastFeeRange = false\nexport async function getFeeRange () {\n\tconst blockSize = 1000\n\tconst range = {\n\t\tdefault: null as null | BigNumber,\n\t\tmin: null as null | BigNumber,\n\t\tmax: new BigNumber('145605600')\n\t}\n\tconst ids = await getPending(failedLastFeeRange)\n\tif (ids.length <= blockSize) { return range }\n\tconst txs = await getMempool(failedLastFeeRange)\n\tif (!txs) { throw 'failed to get pending transactions list' }\n\tconst fees = txs.map(tx => tx.fee.winston)\n\tconst sortedFees = fees.sort((a, b) => (+b) - (+a))\n\tconst nextBlock = sortedFees.slice(0, blockSize)\n\trange.max = (new BigNumber(nextBlock[0])).plus('1')\n\tif (txs.length < (ids.length / 4)) {\n\t\tnotify.warn('Unable to estimate optimal transaction fee')\n\t\tfailedLastFeeRange = true\n\t\treturn range\n\t}\n\tfailedLastFeeRange = false\n\trange.min = (new BigNumber(nextBlock.slice(-1)[0])).plus('1')\n\trange.default = (new BigNumber(nextBlock.slice(-(txs.length/10))[0])).plus('1')\n\treturn range\n}\n\nexport function unpackTags <T extends boolean = false> (tags: { name: string, value: string }[], options?: { duplicate?: T, lowercase?: boolean }) {\n\tconst result = {} as { [key:string]: any }\n\tconst set = options?.duplicate\n\t\t? (tag: typeof tags[0]) => (result[options?.lowercase ? tag.name.toLowerCase() : tag.name] ??= []).push(tag.value)\n\t\t: (tag: typeof tags[0]) => result[options?.lowercase ? tag.name.toLowerCase() : tag.name] ??= tag.value\n\ttags.forEach(set)\n\treturn result as { [key:string]: (T extends true ? string[] : string) }\n}","import { reactive } from 'vue'\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { unpackTags } from '@/functions/Transactions'\nimport { getVerification } from 'arverify'\nimport { awaitEffect } from '@/functions/AsyncData'\nimport { graphql } from '@/store/ArweaveStore'\n\n\n\nconst ProfileStore = reactive({\n\tarweaveId: {} as { [id: string]: any },\n\tarweaveIdStatus: {} as { [id: string]: any },\n\tarverify: {}  as { [id: string]: any },\n\tarverifyStatus: {} as { [id: string]: any },\n})\n\nexport default ProfileStore\n\n\n\nexport async function getArweaveId (address: string) {\n\tif ((ProfileStore.arweaveIdStatus[address] ??= {}).loading) { return }\n\tif (!address || !address.match(/^[a-z0-9_-]{43}$/i)) { return }\n\tProfileStore.arweaveIdStatus[address].loading = true\n\tawait awaitEffect(() => InterfaceStore.windowVisible)\n\n\ttry {\n\t\t// const arweaveIdTx = (await arDB.search().from(address).tag('App-Name', 'arweave-id').findOne())[0]?.node\n\t\tconst arweaveIdTx = (await graphql().getTransactions({ owners: [address], tags: [{ name: 'App-Name', values: ['arweave-id'] }], first: 1 })).transactions.edges[0]?.node\n\t\tif (!arweaveIdTx) { return }\n\t\tconst tags = unpackTags(arweaveIdTx.tags)\n\t\tif (tags.Image && !tags.Image.match(/^[a-z0-9_-]{43}$/i)) { delete tags.image }\n\t\tif (!tags.Image && tags['Content-Type']?.includes('image')) { tags.Image = arweaveIdTx.id }\n\t\tProfileStore.arweaveId[address] = tags\n\t} catch (e) {\n\t\tProfileStore.arweaveIdStatus[address].loading = false\n\t\tconsole.error(e)\n\t}\n}\n\nexport async function getArverify (address: string) {\n\tif (!address || (ProfileStore.arverifyStatus[address] ??= {}).loading) { return }\n\tif (!address.match(/^[a-z0-9_-]{43}$/i)) { return }\n\tProfileStore.arverifyStatus[address].loading = true\n\tawait awaitEffect(() => InterfaceStore.windowVisible)\n\n\ttry {\n\t\tProfileStore.arverify[address] = await getVerification(address)\n\t} catch (e) {\n\t\tProfileStore.arverifyStatus[address].loading = false\n\t\tconsole.error(e)\n\t}\n}","<template>\n\t<div class=\"address-icon no-select\">\n\t\t<transition name=\"fade-fast\">\n\t\t\t<Identicon class=\"identicon\" v-if=\"isValid && address\" :address=\"address\" alt=\"wallet logo\" draggable=\"false\" @dragstart.prevent />\n\t\t\t<Icon :icon=\"IconCloud\" v-else class=\"identicon cloud\" draggable=\"false\" @dragstart.prevent />\n\t\t</transition>\n\t\t<transition :name=\"hasTransition ? 'fade-fast' : null\">\n\t\t\t<img class=\"image\" v-if=\"isValid && arweaveId?.Image\" v-show=\"loaded\" @load=\"loaded = true\" :src=\"ArweaveStore.gatewayURL + arweaveId?.Image\" alt=\"wallet profile picture\" draggable=\"false\" @dragstart.prevent />\n\t\t</transition>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport Identicon from '@/components/atomic/Identicon.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport ArweaveStore from '@/store/ArweaveStore'\nimport ProfileStore, { getArweaveId } from '@/store/ProfileStore'\nimport { computed, watch, ref } from 'vue'\n\nimport IconCloud from '@/assets/icons/cloud.svg?component'\n\nconst props = defineProps(['address'])\n\nconst isValid = computed(() => props.address?.match(/^[a-z0-9_-]{43}$/i))\nconst arweaveId = computed(() => ProfileStore.arweaveId[props.address])\nconst hasTransition = ref(!arweaveId.value)\nwatch(arweaveId, () => {\n\thasTransition.value = false\n\tsetTimeout(() => hasTransition.value = true, 200)\n})\nconst loaded = ref(false)\nwatch(() => props.address, async () => {\n\tloaded.value = false\n\tgetArweaveId(props.address)\n}, { immediate: true })\n</script>\n\n\n\n<style scoped>\n.address-icon {\n\tpadding: 12px;\n\tposition: relative;\n\toverflow: hidden;\n\t/*width: 100%;*/\n\t/*height: 100%;*/\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.identicon {\n\tposition: absolute;\n\tpadding: inherit;\n\twidth: 100%;\n\theight: 100%;\n\tmax-width: 128px;\n\tmax-height: 128px;\n\tobject-fit: contain;\n}\n\n.image {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tobject-fit: cover;\n\tbackground: var(--background);\n}\n\n.cloud {\n\t/* opacity: 0.2; */\n\tfilter: opacity(0.2);\n}\n</style>","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M6 3H3v3c1.66 0 3-1.34 3-3zm8 0h-2a9 9 0 0 1-9 9v2c6.08 0 11-4.93 11-11zm-4 0H8c0 2.76-2.24 5-5 5v2c3.87 0 7-3.13 7-7zm0 18h2a9 9 0 0 1 9-9v-2c-6.07 0-11 4.93-11 11zm8 0h3v-3c-1.66 0-3 1.34-3 3zm-4 0h2c0-2.76 2.24-5 5-5v-2c-3.87 0-7 3.13-7 7z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-8-2h2v-4h4v-2h-4V7h-2v4H7v2h4z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46a.5.5 0 0 0-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65A.488.488 0 0 0 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1a.566.566 0 0 0-.18-.03c-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46a.5.5 0 0 0 .61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M16.01 7 16 3h-2v4h-4V3H8v4h-.01C7 6.99 6 7.99 6 8.99v5.49L9.5 18v3h5v-3l3.5-3.51v-5.5c0-1-1-2-1.99-1.99z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","<template>\n\t<nav class=\"toolbar\" id=\"nav\">\n\t\t<SlickList class=\"wallets\" :axis=\"axis\" :lockAxis=\"axis\" v-model:list=\"Wallets\" :pressDelay=\"150\" helperClass=\"dragging\" dir=\"ltr\" @sort-start=\"haptic\">\n\t\t\t<SlickItem v-for=\"(wallet, i) in Wallets\" :index=\"i\" :key=\"wallet.key\" draggable=\"false\" class=\"drag-container\">\n\t\t\t\t<router-link :to=\"{ name: navTo, params: { walletId: wallet.id }, query: { ...$route.query } }\" custom v-slot=\"{ href, navigate }\">\n\t\t\t\t\t<button type=\"button\" class=\"item wallet\" :href=\"href\" @click=\"select(wallet, navigate)\" :class=\"{ active: wallet.id == selected && links, accent: !links, verticalLayout }\" draggable=\"false\" @dragstart.prevent>\n\t\t\t\t\t\t<AddressIcon class=\"profile\" :address=\"wallet.key\" />\n\t\t\t\t\t</button>\n\t\t\t\t</router-link>\n\t\t\t</SlickItem>\n\t\t</SlickList>\n\t\t<transition name=\"fade-fast\">\n\t\t\t<div class=\"controls\" v-if=\"links\">\n\t\t\t\t<transition name=\"fade-fast\">\n\t\t\t\t\t<router-link v-if=\"connectors.length\" class=\"item control\" :class=\"{ verticalLayout }\" to=\"/connect\" aria-label=\"Add Wallet\">\n\t\t\t\t\t\t<Icon :icon=\"IconConnection\" class=\"small\" alt=\"Connections\" />\n\t\t\t\t\t</router-link>\n\t\t\t\t</transition>\n\t\t\t\t<router-link class=\"item control\" :class=\"{ verticalLayout }\" to=\"/explore\" aria-label=\"Explore\">\n\t\t\t\t\t<Icon :icon=\"IconSearch\" class=\"small\" alt=\"Explore\" />\n\t\t\t\t</router-link>\n\t\t\t\t<router-link class=\"item control\" :class=\"{ verticalLayout }\" to=\"/add\" aria-label=\"Add Wallet\">\n\t\t\t\t\t<Icon :icon=\"IconAddBox\" class=\"small\" alt=\"Add Wallet\" />\n\t\t\t\t</router-link>\n\t\t\t\t<router-link class=\"item control\" :class=\"{ verticalLayout }\" to=\"/settings\" aria-label=\"Settings\">\n\t\t\t\t\t<Icon :icon=\"IconSettings\" class=\"small\" alt=\"Settings\" />\n\t\t\t\t</router-link>\n\t\t\t\t<div v-if=\"state.type === 'extension'\" class=\"item control\" :class=\"{ verticalLayout }\" @click=\"postMessageExtensionConnect\">\n\t\t\t\t\t<Icon :icon=\"IconPlug\" class=\"small\" alt=\"plug\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</transition>\n\t\t<DragOverlay />\n\t</nav>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport AddressIcon from '@/components/atomic/AddressIcon.vue'\nimport DragOverlay from '@/components/atomic/DragOverlay.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport { SlickList, SlickItem } from 'vue-slicksort'\nimport InterfaceStore, { emitter } from '@/store/InterfaceStore'\nimport { state } from '@/functions/Channels'\nimport { connectors, postMessageExtension } from '@/functions/Connect'\nimport { Wallets } from '@/functions/Wallets'\nimport { computed, toRef } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\n\nimport IconConnection from '@/assets/icons/connection.svg?component'\nimport IconAddBox from '@/assets/icons/add_box.svg?component'\nimport IconSettings from '@/assets/icons/settings.svg?component'\nimport IconSearch from '@/assets/icons/search.svg?component'\nimport IconPlug from '@/assets/icons/plug.svg?component'\n\nconst route = useRoute()\nconst router = useRouter()\nconst navTo = computed(() => route.matched[0]?.name === 'Wallet' ? null : 'TxList')\nconst select = (wallet: Account, navigate: () => any) => {\n\temitter.emit('selectWallet', wallet?.key)\n\tif (links.value) { return navigate() }\n}\nconst selected = computed(() => {\n\tif (links.value) { return route.params.walletId }\n})\nconst verticalLayout = toRef(InterfaceStore.breakpoints, 'verticalLayout')\nconst axis = computed(() => verticalLayout.value ? 'x' : 'y')\nconst links = toRef(InterfaceStore.toolbar, 'links')\nconst haptic = () => navigator.vibrate?.(10)\nconst postMessageExtensionConnect = async () => {\n\tpostMessageExtension('connect')\n\trouter.push('Connect')\n}\n</script>\n\n\n\n<style scoped>\n#nav {\n\tpadding: calc(var(--toolbar-spacing) / 2);\n\tuser-select: none;\n\tjustify-content: space-between;\n}\n\n.wallets {\n\tdisplay: flex;\n\tflex-direction: inherit;\n}\n\n.drag-container {\n\tz-index: 10;\n\tdisplay: flex;\n\twidth: calc(var(--toolbar-size) - var(--toolbar-spacing));\n\theight: calc(var(--toolbar-size) - var(--toolbar-spacing));\n}\n\n.item {\n\tposition: relative;\n\tpadding: calc(var(--toolbar-spacing) / 2);\n\tflex: 1 1 0;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\ttransition: 0.2s ease;\n}\n\n.wallet {\n\topacity: var(--element-disabled-opacity);\n}\n\n.controls {\n\tdisplay: flex;\n\tflex-direction: inherit;\n\tmargin: calc(var(--toolbar-spacing) / 2) 0;\n}\n\n.verticalLayout .controls {\n\tmargin: 0 calc(var(--toolbar-spacing) / 2);\n}\n\n.control {\n\tborder-radius: var(--border-radius);\n\topacity: var(--element-secondary-opacity);\n\twidth: unset;\n\theight: unset;\n\tcolor: inherit;\n\tcursor: pointer;\n}\n\n.profile {\n\tbackground: var(--background);\n\twidth: 100%;\n\theight: 100%;\n\tborder-radius: var(--border-radius3);\n\tposition: relative;\n\ttransition: 0.2s ease;\n}\n\n.small {\n\twidth: 24px;\n\theight: 24px;\n}\n\n.item:hover {\n\topacity: 1;\n}\n\n.item.active,\n.item.accent,\n.item.router-link-active {\n\topacity: 1;\n}\n\n.dragging .item {\n\topacity: 1;\n}\n\n.dragging .item > * {\n\ttransform: translateX(calc(100% + var(--toolbar-spacing) * 2));\n}\n\n[dir=\"rtl\"] .dragging .item > * {\n\ttransform: translateX(calc(-100% - var(--toolbar-spacing) * 2));\n}\n\n.dragging .item.verticalLayout > * {\n\ttransform: translateY(calc(100% + var(--toolbar-spacing) * 2));\n}\n\n.item::before {\n\t--weight: 2px;\n\t--length: calc(100% - var(--toolbar-spacing));\n\t--offset: calc(var(--toolbar-spacing) / 2);\n\t--distance: -1px;\n\tcontent: '';\n\tbackground: var(--element-secondary);\n\tposition: absolute;\n\ttop: var(--offset);\n\tleft: var(--distance);\n\twidth: var(--weight);\n\theight: var(--length);\n\topacity: 0;\n\tborder-radius: 1px;\n\ttransition: 0.2s ease;\n}\n\n.item.active::before,\n.item.router-link-active::before {\n\topacity: 1;\n}\n\n.dragging .item::before {\n\t--offset: 0;\n\t--distance: calc(var(--toolbar-spacing) / -2);\n\t--length: 100%;\n}\n\n.item.verticalLayout::before {\n\ttop: var(--distance);\n\tleft: var(--offset);\n\twidth: var(--length);\n\theight: var(--weight);\n}\n\n[dir=\"rtl\"] .item::before {\n\tleft: unset;\n\tright: var(--distance);\n}\n\n[dir=\"rtl\"] .item.verticalLayout::before {\n\tleft: unset;\n\tright: var(--offset);\n}\n</style>\n","// src/client/build/vue.ts\nimport { ref } from \"vue\";\n\n// src/client/build/register.ts\nimport { Workbox, messageSW } from \"workbox-window\";\nvar autoUpdateMode = \"false\";\nvar auto = autoUpdateMode === \"true\";\nfunction registerSW(options = {}) {\n  const {\n    immediate = false,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisterError\n  } = options;\n  let wb;\n  let registration;\n  const updateServiceWorker = async (reloadPage = true) => {\n    if (!auto) {\n      if (reloadPage) {\n        wb == null ? void 0 : wb.addEventListener(\"controlling\", (event) => {\n          if (event.isUpdate)\n            window.location.reload();\n        });\n      }\n      if (registration && registration.waiting) {\n        await messageSW(registration.waiting, { type: \"SKIP_WAITING\" });\n      }\n    }\n  };\n  if (\"serviceWorker\" in navigator) {\n    wb = new Workbox(\"/sw.js\", { scope: \"/\", type: \"classic\" });\n    wb.addEventListener(\"activated\", (event) => {\n      if (event.isUpdate)\n        auto && window.location.reload();\n      else\n        onOfflineReady == null ? void 0 : onOfflineReady();\n    });\n    if (!auto) {\n      const showSkipWaitingPrompt = () => {\n        onNeedRefresh == null ? void 0 : onNeedRefresh();\n      };\n      wb.addEventListener(\"waiting\", showSkipWaitingPrompt);\n      wb.addEventListener(\"externalwaiting\", showSkipWaitingPrompt);\n    }\n    wb.register({ immediate }).then((r) => {\n      registration = r;\n      onRegistered == null ? void 0 : onRegistered(r);\n    }).catch((e) => {\n      onRegisterError == null ? void 0 : onRegisterError(e);\n    });\n  }\n  return updateServiceWorker;\n}\n\n// src/client/build/vue.ts\nfunction useRegisterSW(options = {}) {\n  const {\n    immediate = true,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisterError\n  } = options;\n  const needRefresh = ref(false);\n  const offlineReady = ref(false);\n  const updateServiceWorker = registerSW({\n    immediate,\n    onNeedRefresh() {\n      needRefresh.value = true;\n      onNeedRefresh == null ? void 0 : onNeedRefresh();\n    },\n    onOfflineReady() {\n      offlineReady.value = true;\n      onOfflineReady == null ? void 0 : onOfflineReady();\n    },\n    onRegistered,\n    onRegisterError\n  });\n  return {\n    updateServiceWorker,\n    offlineReady,\n    needRefresh\n  };\n}\nexport {\n  useRegisterSW\n};\n","<template>\n\t<transition name=\"fade\">\n\t\t<div v-if=\"updating\" class=\"overlay\"/>\n\t</transition>\n\t<transition name=\"fade-fast\">\n\t\t<button type=\"button\" class=\"update-available\" v-if=\"needRefresh\" @click=\"update()\">\n\t\t\t{{ updating ? 'Updating...' : 'Update ready, click to reload' }}\n\t\t</button>\n\t</transition>\n</template>\n\n\n\n<script setup lang=\"ts\">\n// @ts-ignore\nimport { useRegisterSW } from 'virtual:pwa-register/vue'\nimport { state, states } from '@/functions/Channels'\nimport { ref, watch } from 'vue'\n\nconst { needRefresh, updateServiceWorker } = useRegisterSW()\nlet autoUpdateActive = state.value.type !== 'popup'\nsetTimeout(() => autoUpdateActive = false, 10000)\nconst updating = ref(false)\nconst update = () => {\n\tupdating.value = true\n\tupdateServiceWorker()\n}\nwatch(() => needRefresh.value, (needed) => {\n\tconst otherInstance = Object.values(states).find(s => s.type !== 'popup')\n\tif (!needed || !autoUpdateActive || otherInstance) { return }\n\tupdate()\n}, { immediate: true })\nconst close = () => { needRefresh.value = false }\n</script>\n\n\n\n<style scoped>\n.overlay {\n\tposition: fixed;\n\tz-index: 10;\n\ttop: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground: #08080888;\n}\n\n.update-available {\n\tposition: fixed;\n\tz-index: 10;\n\tbottom: 0;\n\tbackground: var(--background);\n\tpadding: var(--spacing);\n\tborder-top: 0.5px solid var(--border);\n\tborder-right: 0.5px solid var(--border);\n\tborder-top-right-radius: var(--border-radius);\n}\n</style>","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","<template>\n\t<div class=\"wallet-selector\">\n\t\t<TransitionsManager>\n\t\t\t<button v-if=\"model\" type=\"button\" @click=\"$emit('selectWallet')\" class=\"tab\" :class=\"{ active }\">\n\t\t\t\t<AddressIcon :address=\"address\" />\n\t\t\t</button>\n\t\t</TransitionsManager>\n\t\t<button v-if=\"onExit\" class=\"exit\" type=\"button\" @click=\"$emit('exit')\">\n\t\t\t<div class=\"exit-background\" />\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n\t\t\t\t<path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n\t\t\t\t<path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\" />\n\t\t\t</svg>\n\t\t</button>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport AddressIcon from '@/components/atomic/AddressIcon.vue'\nimport TransitionsManager from '@/components/visual/TransitionsManager.vue'\nimport { computed } from 'vue'\nimport { getWalletById } from '@/functions/Wallets'\n\nconst props = defineProps({ modelValue: String, onExit: Function, active: Boolean })\nconst emit = defineEmits(['update:modelValue', 'selectWallet', 'exit'])\n\nconst model = computed<string | undefined>({\n\tget () { return props.modelValue },\n\tset (value) { emit('update:modelValue', value) }\n})\n\nconst address = computed(() => getWalletById(model.value)?.key)\n</script>\n\n\n\n<style scoped>\n.wallet-selector {\n\t--spacing: var(--toolbar-spacing);\n\tdisplay: flex;\n}\n\n.wallet-selector > * + * {\n\tmargin-inline-start: var(--spacing);\n}\n\n.tab {\n\topacity: 0.5;\n\ttransition: 0.2s ease;\n}\n\n.tab.active {\n\topacity: 1;\n}\n\n.address-icon {\n\twidth: 40px;\n\theight: 40px;\n\tpadding: 8px;\n\tbackground: var(--background);\n\tborder-radius: var(--border-radius);\n}\n\n.exit {\n\twidth: 40px;\n\theight: 40px;\n\tcolor: var(--red);\n\tposition: relative;\n\tflex: 0 0 auto;\n}\n\n.exit-background {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tborder-radius: var(--border-radius);\n\tbackground: var(--red);\n\topacity: 0.1;\n}\n\n.exit svg {\n\twidth: 100%;\n\theight: 100%;\n\tpadding: 20%;\n}\n</style>","<template>\n\t<Viewport :background=\"true\">\n\t\t<div v-if=\"passwordRequest\" class=\"password\">\n\t\t\t<div class=\"card\">\n\t\t\t\t<div class=\"background\" />\n\t\t\t\t<div class=\"content flex-column\">\n\t\t\t\t\t<div class=\"flex-row\" style=\"justify-content: space-between;\">\n\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t<WalletSelector @exit=\"reject\" v-model=\"currentWalletId\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex-column\">\n\t\t\t\t\t\t<Input v-if=\"passwordRequest.match\" v-model=\"passwordMatch\" type=\"password\" placeholder=\"Confirm new password\" :actions=\"passwordRequest.reason === 'match' ? [passwordAction] : undefined\" :autofocus=\"passwordRequest.match ? 'true' : undefined\" />\n\t\t\t\t\t\t<Input v-if=\"passwordRequest.reason !== 'match'\" v-model=\"password\" type=\"password\" :placeholder=\"passwordRequest.match ? 'Current password' : 'Password'\" :actions=\"[passwordAction]\" :autofocus=\"passwordRequest.match ? undefined : 'true'\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</Viewport>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport Viewport from '@/components/layout/Viewport.vue'\nimport Input from '@/components/atomic/Input.vue'\nimport { emitter, testPassword, PasswordRequest } from '@/functions/Password'\nimport { notify } from '@/store/NotificationStore'\nimport { computed, ref, watch } from 'vue'\n\nimport IconY from '@/assets/icons/y.svg?component'\nimport WalletSelector from '@/components/composed/WalletSelector.vue'\n\nconst passwordRequest = ref(undefined as undefined | PasswordRequest)\nconst currentWalletId = computed(() => passwordRequest.value?.wallet?.id)\nemitter.on('password', callback => passwordRequest.value = callback)\n\nconst password = ref('')\nconst passwordMatch = ref('')\nconst passwordAction = computed(() => ({ run: submit, icon: IconY }))\nconst submit = async () => {\n\tif (passwordRequest.value?.match && passwordRequest.value.match !== passwordMatch.value) { return notify.error('New password does not match') }\n\tif (passwordRequest.value?.reason !== 'match') { try { await testPassword(password.value) } catch (e) { return notify.error(passwordRequest.value?.match ? 'Invalid current password' : 'Invalid') } }\n\tpasswordRequest.value?.resolve(password.value)\n\tpasswordRequest.value = undefined\n}\nconst reject = () => {\n\tpasswordRequest.value?.reject()\n\tpasswordRequest.value = undefined\n}\nwatch(passwordRequest, () => {\n\tpassword.value = ''\n\tpasswordMatch.value = ''\n})\n</script>\n\n\n\n<style scoped>\n.password {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.card {\n\theight: 400px;\n\tdisplay: flex;\n\toverflow: hidden;\n}\n\n.background {\n\tposition: absolute;\n\tborder-radius: inherit;\n\tinset: 0;\n\t/*background: url(\"@/assets/visual/security.jpg\") no-repeat center center;*/\n\tbackground-size: cover;\n\tfilter: saturate(0) contrast(0.7) brightness(0.3);\n\ttop: -100px;\n}\n\n.content {\n\tflex: 1 1 0;\n\tposition: relative;\n\tjustify-content: space-between;\n}\n\n.input {\n\twidth: 100%;\n\tbackground: var(--background2);\n}\n</style>","import type { RouteRecordName } from 'vue-router'\n\nexport function findRoutePosition (name:  RouteRecordName | Null, arr: any[]) {\n\tconst result = findRecursive(name, arr)\n\treturn result.found ? result : null\n}\n\nfunction findRecursive (name:  RouteRecordName | Null, arr: any[], position = 0, depth = 0): { found: boolean, position: number, depth: number } {\n\tfor (const route of arr) {\n\t\tif (route.name === name) { return { found: true, position, depth } }\n\t\tposition++\n\t\tif (route.children) {\n\t\t\tconst recResult = findRecursive(name, route.children, position, depth + 1)\n\t\t\tposition += recResult.position\n\t\t\tif (recResult.found) { return { found: true, position, depth: recResult.depth } }\n\t\t}\n\t}\n\treturn { found: false, position, depth }\n}","<template>\n\t<div class=\"app\" :class=\"{ verticalLayout, verticalContent, hasToolbar }\">\n\t\t<Toolbar v-if=\"hasToolbar\" class=\"box no-scrollbar\" @drop.prevent=\"e => dropped(e.dataTransfer.files)\" />\n\t\t<router-view v-slot=\"{ Component }\" @drop.prevent=\"e => dropped(e.dataTransfer.files)\">\n\t\t\t<div class=\"router\">\n\t\t\t\t<TransitionsManager :vector=\"$route.meta.transition?.nameLayout\" :axis=\"verticalLayout ? 'x' : 'y'\">\n\t\t\t\t\t<component :is=\"Component\" />\n\t\t\t\t</TransitionsManager>\n\t\t\t\t<UpdateAvailable />\n\t\t\t</div>\n\t\t</router-view>\n\t\t<transition name=\"fade\">\n\t\t\t<div v-if=\"dragOverlay\" class=\"overlay\" />\n\t\t</transition>\n\t\t<Password />\n\t\t<div id=\"viewport\" />\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport Toolbar from '@/components/composed/Toolbar.vue'\nimport UpdateAvailable from '@/components/function/UpdateAvailable.vue'\nimport TransitionsManager from '@/components/visual/TransitionsManager.vue'\nimport Password from '@/components/function/Password.vue'\nimport { Wallets } from '@/functions/Wallets'\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { findRoutePosition } from '@/router/Utils'\nimport { useRoute, useRouter } from 'vue-router'\nimport { toRef } from 'vue'\nimport { dropped } from '@/functions/File'\n\nconst router = useRouter()\nconst route = useRoute()\n\nconst verticalLayout = toRef(InterfaceStore.breakpoints, 'verticalLayout')\nconst verticalContent = toRef(InterfaceStore.breakpoints, 'verticalContent')\nconst dragOverlay = toRef(InterfaceStore, 'dragOverlay')\nconst hasToolbar = toRef(InterfaceStore.toolbar, 'enabled')\nrouter.afterEach((to, from) => {\n\tdocument.title = to.meta.title ? to.meta.title + ' | Arweave Wallet' : 'Arweave Wallet'\n\tconst routes = router.options.routes\n\tconst param = {\n\t\tto: findRoutePosition(to.name, routes),\n\t\tfrom: findRoutePosition(from.name, routes)\n\t}\n\tto.meta.transition = { param, nameLayout: (param.to?.position || 0) - (param.from?.position || 0) }\n\tif (to.params.walletId && from.params.walletId && to.params.walletId !== from.params.walletId) {\n\t\tconst toWallet = Wallets.value.findIndex(el => el.id == to.params.walletId)\n\t\tconst fromWallet = Wallets.value.findIndex(el => el.id == from.params.walletId)\n\t\t;(to.meta.transition as any).nameWallet = toWallet - fromWallet\n\t}\n})\n</script>\n\n\n\n<style scoped>\n.app {\n\tdisplay: flex;\n}\n\n.app:before {\n\toverflow: hidden;\n\tcontent: \"\";\n\tdisplay: block;\n\tposition: fixed;\n\tinset: 0;\n\twidth: 100vw;\n\theight: 100%;\n\tz-index: -10;\n\t/* noinspection CssUnknownTarget */\n\tbackground: url(\"@/assets/background.svg\") no-repeat center center;\n\tbackground-size: cover;\n}\n\n.toolbar {\n\tflex: 0 0 auto;\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: auto;\n\tz-index: 10;\n\tbackground: var(--background);\n\theight: 100%;\n\twidth: var(--toolbar-size);\n\tposition: fixed;\n}\n\n.verticalLayout .toolbar {\n\theight: var(--toolbar-size);\n\twidth: 100%;\n\tflex-direction: row;\n}\n\n.router {\n\tposition: relative;\n\t--current-vh: 100vh;\n\t--current-vw: 100vw;\n\toverflow: clip;\n}\n\n#viewport {\n\tposition: fixed;\n\ttop: 0;\n\tz-index: 100;\n}\n\n.router,\n#viewport {\n\twidth: 100%;\n\tmin-width: 0;\n}\n\n.hasToolbar .router,\n.hasToolbar #viewport {\n\tpadding-inline-start: var(--toolbar-size);\n}\n\n.hasToolbar:not(.verticalLayout) .router,\n\n.hasToolbar:not(.verticalLayout) #viewport {\n\t--current-vw: calc(100vw - var(--toolbar-size));\n\n}\n\n.hasToolbar.verticalLayout .router,\n.hasToolbar.verticalLayout #viewport {\n\t--current-vh: calc(100vh - var(--toolbar-size));\n\tpadding-inline-start: 0;\n\tpadding-top: var(--toolbar-size);\n}\n\n.overlay {\n\tpointer-events: none;\n\ttouch-action: none;\n\tposition: fixed;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tz-index: 1;\n\tbackground: #00000066;\n}\n</style>","import { useRegisterSW } from 'virtual:pwa-register/vue'\nimport { reactive } from 'vue'\n\n\n\ninterface BeforeInstallPromptEvent extends Event {\n\treadonly platforms: Array<string>\n\treadonly userChoice: Promise<{ outcome: 'accepted' | 'dismissed', platform: string }>\n\tprompt(): Promise<void>\n}\n\n\n\nexport const PWA = reactive({\n\tregistration: new Promise(resolve => useRegisterSW({ onRegistered (r) { resolve(r) } })),\n\tinstall,\n\tinstallPrompt: undefined as undefined | BeforeInstallPromptEvent,\n\tinstallState: undefined as undefined | 'available' | 'installed',\n\tinstalled: undefined as undefined | any[],\n})\n\n\n\nasync function install () {\n\tif (!PWA.installPrompt) { throw 'Install unavailable' }\n\tPWA.installPrompt.prompt()\n\tconst { outcome } = await PWA.installPrompt.userChoice\n\tif (outcome === 'accepted') { PWA.installState = 'installed' }\n}\n\n\n\nwindow.addEventListener('beforeinstallprompt', e => {\n\te.preventDefault()\n\tPWA.installPrompt = e as BeforeInstallPromptEvent\n\tPWA.installState = 'available'\n})\n\n// @ts-ignore\nnavigator.getInstalledRelatedApps?.()?.then(apps => { PWA.installed = apps; console.log(apps) })","import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\n// @ts-ignore\nimport { plugin as Slicksort } from 'vue-slicksort'\nimport '@/assets/animations.css'\nimport '@/assets/style.css'\nimport 'mosha-vue-toastify/dist/style.css'\n\nimport { PWA } from '@/pwa'\nPWA.registration.then((r: any) => setInterval(() => r.update(), 60 * 60 * 1000))\n\nconst app = createApp(App)\napp.use(router, Slicksort)\napp.mount('#app')"],"names":["Buffer","origin","session","deleteChannel","emitter","WalletsData","_hoisted_1","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","_openBlock","_createElementBlock","render","ArweaveMessageVerifier","Transaction","ArweaveApp","generateM","validateM","tippy","__default__","_hoisted_5","createToast","QrScanner","_sfc_main","_createVNode","_toDisplayString","_createTextVNode","Tokens","messageSW","Workbox","Slicksort"],"mappings":"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"}