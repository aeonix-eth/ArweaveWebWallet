{"version":3,"file":"index.ef5673bf.js","sources":["../../vite/modulepreload-polyfill","../../index.html?html-proxy&index=0.js","../../src/functions/Utils.js","../../src/assets/logos/arweaveBlack.svg?url","../../src/assets/logos/arweave.svg?url","../../src/store/InterfaceStore.js","../../src/assets/logos/arweave.svg?component","../../src/functions/Crypto.ts","../../src/functions/AsyncData.ts","../../src/functions/Channels.ts","../../src/store/ArweaveStore.ts","../../src/components/atomic/Identicon.vue","../../src/store/BlockStore.js","../../src/functions/Transactions.ts","../../src/store/ProfileStore.js","../../src/assets/icons/cloud.svg?component","../../plugin-vue:export-helper","../../src/components/atomic/AddressIcon.vue","../../src/components/atomic/DragOverlay.vue","../../src/store/IndexedDB.ts","../../src/assets/logos/ledger.svg?component","../../src/providers/Ledger.ts","../../src/functions/Wallets.ts","../../src/functions/JsonRpc.ts","../../src/functions/Connect.ts","../../src/assets/icons/connection.svg?component","../../src/assets/icons/add_box.svg?component","../../src/assets/icons/settings.svg?component","../../src/components/composed/Toolbar.vue","../../../../../../../@vite-plugin-pwa/virtual:pwa-register/vue","../../src/components/function/UpdateAvailable.vue","../../src/App.vue","../../vite/preload-helper","../../src/components/layout/FoldingLayout.vue","../../src/components/atomic/Ar.vue","../../src/components/atomic/LocaleCurrency.vue","../../src/components/atomic/Address.vue","../../src/components/atomic/Icon.vue","../../src/components/composed/WalletInfo.vue","../../src/assets/icons/north_east.svg?component","../../src/assets/icons/swap.svg?component","../../src/views/Wallet.vue","../../src/components/atomic/TxIcon.vue","../../src/components/atomic/Date.vue","../../src/components/function/Link.vue","../../src/components/composed/TxCard.vue","../../src/components/atomic/Tabs.vue","../../src/components/function/Observer.vue","../../src/views/TxList.vue","../../src/components/function/RawInput.vue","../../src/components/atomic/Input.vue","../../src/assets/icons/person.svg","../../src/components/atomic/InputAddress.vue","../../src/components/atomic/InputAr.vue","../../src/assets/icons/text.svg?component","../../src/assets/icons/drop.svg?component","../../src/assets/icons/x.svg?component","../../src/components/atomic/InputData.vue","../../src/components/atomic/InputGrid.vue","../../src/components/atomic/Slider.vue","../../src/components/composed/SendFee.vue","../../src/assets/icons/label.svg?component","../../src/views/Send.vue","../../src/store/SmartweaveStore.js","../../src/components/composed/TokenCard.vue","../../src/views/Tokens.vue","../../src/router/index.js","../../src/functions/sw.js","../../src/main.ts"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","\n\t\timport { Buffer } from 'buffer'\n\t\t\n\t\tif (window.global === undefined) {\n\t\t\twindow.global = window\n\t\t\twindow.Buffer = Buffer\n\t\t}\n\t","export function debounce (fun, timeout = 500) {\n\tlet timer\n\treturn (...args) => {\n\t\tclearTimeout(timer)\n\t\ttimer = setTimeout(() => { fun.apply(this, args) }, timeout)\n\t}\n}\n\nexport function humanFileSize (size) {\n\tif (size == 0) { return '0 B' }\n\tvar i = Math.floor(Math.log(size) / Math.log(1024));\n\treturn (size / Math.pow(1024, i)).toFixed(2) * 1 + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\n}\n\nexport async function addressToHash (address) {\n\tif (!address) { return null }\n\tconst hashBuffer = await window.crypto.subtle.digest('SHA-256', new TextEncoder().encode(address))\n\tconst hashArray = Array.from(new Uint8Array(hashBuffer))\n\tconst hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('')\n\treturn hashHex\n}\n\nexport function addressHashToColor (addressHash) {\n\tif (!addressHash) { return [0, 0, 0] }\n\tconst colors = hsl2rgb(parseInt(addressHash.substr(-7), 16) / 0xfffffff, 0.25, 0.6)\n\treturn colors.map(Math.round)\n}\n\nfunction hsl2rgb (h, s, b) {\n\th *= 6\n\ts = [b += s *= b < .5 ? b : 1 - b, b - h % 1 * s * 2, b -= s *= 2, b, b + h % 1 * s, b + s]\n\treturn [s[~~h % 6] * 255, s[(h | 16) % 6] * 255, s[(h | 8) % 6] * 255]\n}\n\nexport function download (filename, text, contentType = 'application/json') {\n\tconst element = document.createElement('a')\n\telement.setAttribute('href', `data:${contentType};charset=utf-8,${encodeURIComponent(text)}`)\n\telement.setAttribute('download', filename)\n\telement.style.display = 'none'\n\tdocument.body.appendChild(element)\n\telement.click()\n\tdocument.body.removeChild(element)\n}","export default \"__VITE_ASSET__628d8d4d__\"","export default \"__VITE_ASSET__b1986487__\"","import { reactive, watch } from 'vue'\nimport mitt from 'mitt'\n\nimport logoArweaveBlack from '@/assets/logos/arweaveBlack.svg?url'\nimport logoArweave from '@/assets/logos/arweave.svg?url'\n\nconst InterfaceStore = reactive({\n\twindowWidth: window.innerWidth,\n\twindowVisible: !document.hidden,\n\ttoolbar: {\n\t\tenabled: true,\n\t\tlinks: true,\n\t},\n\tbreakpoints: {\n\t\tverticalLayout: false,\n\t\tverticalContent: false,\n\t},\n\tsticky: false,\n\tdragOverlay: false,\n\twallet: {\n\t\tsend: {\n\t\t\ttarget: '',\n\t\t\tquantity: '',\n\t\t\tdata: '',\n\t\t\ttags: [],\n\t\t},\n\t},\n})\n\nexport const emitter = mitt()\nemitter.once = (eventName, handler) => {\n\treturn new Promise(resolve => {\n\t\tconst wrapper = (e) => {\n\t\t\temitter.off(eventName, wrapper)\n\t\t\tresolve(e)\n\t\t\tif (handler) { handler(e) }\n\t\t}\n\t\temitter.on(eventName, wrapper)\n\t})\n}\n\n\n\nconst updateWindowSize = () => {\n\tInterfaceStore.windowWidth = window.innerWidth\n\tInterfaceStore.breakpoints.verticalLayout = InterfaceStore.windowWidth < 600\n\tInterfaceStore.breakpoints.verticalContent = InterfaceStore.windowWidth < 1100\n}\nupdateWindowSize()\nwindow.addEventListener('resize', updateWindowSize)\n\ndocument.addEventListener('visibilitychange', () => InterfaceStore.windowVisible = !document.hidden)\n\nlet dragCount = 0\ndocument.addEventListener('dragenter', (e) => { e.preventDefault(); if (e.dataTransfer.types[0] == 'Files') { InterfaceStore.dragOverlay = !!++dragCount } }, true)\ndocument.addEventListener('dragleave', (e) => { e.preventDefault(); if (e.dataTransfer.types[0] == 'Files') { InterfaceStore.dragOverlay = !!--dragCount } }, true)\ndocument.addEventListener('dragend', (e) => { e.preventDefault(); dragCount = 0; InterfaceStore.dragOverlay = false; }, true)\ndocument.addEventListener('dragover', (e) => { e.preventDefault() }, true)\ndocument.addEventListener('drop', (e) => { e.preventDefault(); dragCount = 0; InterfaceStore.dragOverlay = false; }, true)\n\nif (navigator.appVersion.indexOf(\"Win\") != -1) {\n\tdocument.documentElement.classList.add('styleScroll')\n}\n\nconst faviconEl = document.createElement('link')\nfaviconEl.setAttribute('rel', 'favicon icon')\nconst setFavicon = (e) => {\n\tfaviconEl.remove()\n\tif (e.matches) { faviconEl.setAttribute('href', logoArweaveBlack) }\n\telse { faviconEl.setAttribute('href', logoArweave) }\n\tdocument.head.appendChild(faviconEl)\n}\nif (window.matchMedia) {\n\tconst matchTheme = window.matchMedia('(prefers-color-scheme: light)')\n\tmatchTheme.addEventListener('change', setFavicon)\n\tsetFavicon(matchTheme)\n} else { setFavicon({ matches: false }) }\n\n\n\nexport default InterfaceStore","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  viewBox: \"0 0 2330 2330\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  style: {\"fill-rule\":\"evenodd\",\"clip-rule\":\"evenodd\",\"stroke-linejoin\":\"round\",\"stroke-miterlimit\":\"2\"}\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M1164.58 0c642.751 0 1164.58 521.832 1164.58 1164.58 0 642.751-521.833 1164.58-1164.58 1164.58C521.829 2329.16 0 1807.327 0 1164.58 0 521.829 521.832 0 1164.58 0Zm0 181.398c542.635 0 983.186 440.55 983.186 983.185s-440.551 983.186-983.186 983.186-983.185-440.551-983.185-983.186 440.55-983.185 983.185-983.185Z\",\n  style: {\"fill\":\"#fff\"}\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M1342.38 1536.38c-4.35-10.822-8.695-21.643-13.045-34.629-4.35-12.987-6.52-28.138-8.695-41.125-10.87 12.987-26.089 23.808-41.309 36.795-15.219 10.821-32.61 21.642-52.179 30.303-17.39 8.656-39.134 15.151-60.874 19.477-21.739 4.33-45.654 8.656-71.743 8.656-41.309 0-80.444-6.491-117.403-17.312-34.784-12.987-65.219-28.138-91.309-51.946-26.089-21.642-45.658-47.615-58.699-77.918-15.219-30.299-21.744-62.767-21.744-99.561 0-86.575 32.614-153.668 97.834-201.284 65.223-47.615 163.056-71.423 291.329-71.423h119.573v-49.78c0-38.96-13.045-71.428-39.135-93.07-26.085-23.808-63.044-34.629-113.048-34.629-43.484 0-73.919 8.656-95.663 28.138-19.565 17.312-30.435 43.285-30.435 73.588h-213.06c0-34.633 8.695-69.262 23.914-99.561 15.22-32.468 39.134-58.441 67.399-82.249 30.434-23.808 67.394-43.285 108.703-56.272 43.479-15.151 93.483-21.642 147.837-21.642 50.004 0 95.658 6.491 139.142 17.312 43.48 12.987 80.439 30.303 113.053 54.111 32.61 23.808 56.524 54.111 73.918 90.905 17.391 36.794 26.09 77.914 26.09 125.53v352.794c0 43.285 2.171 80.079 8.695 110.382 6.52 28.138 13.045 54.111 23.915 73.588l8.333 12.987h-220.44l-.954-2.165Zm-202.191-149.342c21.744 0 41.309-2.165 58.703-8.656 17.39-4.33 34.785-10.821 50.004-19.482 15.216-8.656 28.26-17.312 39.13-28.134 10.874-10.821 19.569-21.646 26.09-32.468v-140.681h-108.704c-32.609 0-60.873 4.326-84.788 10.821-23.915 6.491-43.484 15.152-56.529 25.973-15.215 10.821-26.085 23.808-32.609 41.12-6.521 15.152-10.87 32.468-10.87 51.946 0 28.138 10.87 51.946 30.439 71.423 17.39 19.482 47.829 28.138 89.134 28.138Z\",\n  style: {\"fill\":\"#fff\",\"fill-rule\":\"nonzero\"}\n}, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","type EncryptedContent = {\n\tciphertext: Uint8Array\n\tsalt: Uint8Array\n\tiv: Uint8Array\n}\n\nasync function deriveKey (password: string, salt: Uint8Array) {\n\tconst keyMaterial = await window.crypto.subtle.importKey(\n\t\t'raw',\n\t\tencode(password),\n\t\t'PBKDF2',\n\t\tfalse,\n\t\t['deriveKey']\n\t)\n\tconst derivedKey = await window.crypto.subtle.deriveKey(\n\t\t{ name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },\n\t\tkeyMaterial,\n\t\t{ name: 'AES-GCM', length: 256 },\n\t\tfalse,\n\t\t['encrypt', 'decrypt']\n\t)\n\treturn derivedKey\n}\n\nexport async function passwordEncrypt (password: string, content: string): Promise<EncryptedContent> {\n\tconst salt = window.crypto.getRandomValues(new Uint8Array(16))\n\tconst derivedKey = await deriveKey(password, salt)\n\tconst iv = window.crypto.getRandomValues(new Uint8Array(12))\n\tconst ciphertext = await window.crypto.subtle.encrypt(\n\t\t{ name: 'AES-GCM', iv },\n\t\tderivedKey,\n\t\tencode(content)\n\t)\n\treturn { ciphertext, salt, iv }\n}\n\nexport async function passwordDecrypt (password: string, encrypted: EncryptedContent): Promise<string> {\n\tconst { ciphertext, salt, iv } = encrypted\n\tconst derivedKey = await deriveKey(password, salt)\n\tconst encoded = await window.crypto.subtle.decrypt(\n\t\t{ name: 'AES-GCM', iv },\n\t\tderivedKey,\n\t\tciphertext\n\t)\n\treturn decode(encoded)\n}\n\nexport async function pkcs8ToJwk (key: Uint8Array) {\n\tconst imported = await window.crypto.subtle.importKey(\n\t\t'pkcs8',\n\t\tkey,\n\t\t{ name: 'RSA-PSS', hash: 'SHA-256' },\n\t\ttrue,\n\t\t['sign']\n\t)\n\tconst jwk = await window.crypto.subtle.exportKey('jwk', imported)\n\tdelete jwk.key_ops\n\tdelete jwk.alg\n\treturn jwk\n}\n\nexport async function getSigningKey (key: JsonWebKey) {\n\tconst jwk = { ...key }\n\tdelete jwk.key_ops\n\tdelete jwk.alg\n\treturn window.crypto.subtle.importKey(\n\t\t'jwk',\n\t\tjwk,\n\t\t{ name: 'RSA-PSS', hash: 'SHA-256', },\n\t\tfalse,\n\t\t['sign']\n\t)\n}\n\nexport async function getDecryptionKey (key: JsonWebKey) {\n\tconst jwk = { ...key }\n\tdelete jwk.key_ops\n\tdelete jwk.alg\n\treturn window.crypto.subtle.importKey(\n\t\t'jwk',\n\t\tjwk,\n\t\t{ name: 'RSA-OAEP', hash: 'SHA-256', },\n\t\tfalse,\n\t\t['decrypt']\n\t)\n}\n\n\n\nexport function encode (text: string) {\n\tconst encoder = new TextEncoder()\n\treturn encoder.encode(text)\n}\n\nexport function decode (buffer: BufferSource) {\n\tconst decoder = new TextDecoder()\n\treturn decoder.decode(buffer)\n}","import { computed, effectScope, isRef, Ref, ref, watch, watchEffect, WatchStopHandle, WritableComputedRef } from 'vue'\nimport InterfaceStore from '@/store/InterfaceStore'\n\nconst globalClock = ref(0)\nsetInterval(() => globalClock.value++, 1000)\n\ntype AsyncDataOptions<T> = {\n\tquery: () => Promise<T>\n\tseconds: number\n\tawaitEffect?: () => any\n\tcompleted?: () => any\n\ttimestamp?: Ref<number | undefined>\n\texistingState?: Ref<T | undefined>\n\tprocessResult?: (params: T, options: AsyncDataOptions<T>) => void\n}\n\ntype QueryStatusInterface<T> = {\n\trunning: boolean\n\tpromise?: Promise<T>\n}\n\nexport function getAsyncData <T> (options: AsyncDataOptions<T>) {\n\tconsole.log('new async data request')\n\tconst state = isRef(options.existingState) ? options.existingState : ref(options.existingState) as Ref<T | undefined>\n\tconst timestamp = isRef(options.timestamp) ? options.timestamp : ref(options.timestamp) as Ref<number | undefined>\n\tconst { query, queryStatus } = getQueryManager(options)\n\tconst localClock = ref(0)\n\tconst getState = async (force?: boolean) => {\n\t\tif (options.completed?.()) { return state.value! }\n\t\tif (queryStatus.promise && queryStatus.running) { timestamp.value = Date.now(); return queryStatus.promise }\n\t\tif (queryStatus.promise && !force && state.value != null && timestamp.value && Date.now() - timestamp.value < (options.seconds * 1000)) { return queryStatus.promise }\n\t\tconst rollback = timestamp.value\n\t\ttimestamp.value = Date.now()\n\t\treturn new Promise<T>((resolve, reject) => {\n\t\t\tquery().then(res => {\n\t\t\t\ttimestamp.value = Date.now()\n\t\t\t\toptions.processResult ? options.processResult(res, options) : state.value = res\n\t\t\t\tresolve(state.value!)\n\t\t\t}).catch(e => { timestamp.value = rollback; reject(e) })\n\t\t})\n\t}\n\tconst scope = effectScope()\n\tscope.run(() => watch(globalClock, () => {\n\t\tif (queryStatus.running) { timestamp.value = Date.now(); return }\n\t\tif (options.completed?.()) { return }\n\t\tif (state.value != null && timestamp.value && Date.now() - timestamp.value < (options.seconds * 1000)) { return }\n\t\tlocalClock.value++\n\t}))\n\tconst computedState = scope.run(() => computed({\n\t\tget () { localClock.value; getState(); return state.value },\n\t\tset (value) { state.value = value }\n\t})) as WritableComputedRef<T | undefined>\n\treturn { state: computedState, getState, queryStatus, stop: scope.stop }\n}\n\nexport function getQueryManager <T> (options: AsyncDataOptions<T>) {\n\tconst queryStatus: QueryStatusInterface<T> = { running: false }\n\tconst query = () => {\n\t\tif (queryStatus.running && queryStatus.promise) { return queryStatus.promise }\n\t\tqueryStatus.running = true\n\t\tqueryStatus.promise = new Promise<T>(async (resolve, reject) => {\n\t\t\tawait awaitEffect(() => (options.awaitEffect ? options.awaitEffect() : true) && InterfaceStore.windowVisible)\n\t\t\tconsole.log(new Date(Date.now()).toTimeString(), options, queryStatus.promise)\n\t\t\toptions.query().then(resolve).catch(reject).finally(() => queryStatus.running = false)\n\t\t})\n\t\treturn queryStatus.promise\n\t}\n\treturn { query, queryStatus }\n}\n\nexport function awaitEffect (effect: () => any) {\n\tlet watchStop: WatchStopHandle\n\treturn new Promise(resolve => {\n\t\twatchStop = watchEffect(() => {\n\t\t\tif (effect()) { resolve(true) }\n\t\t})\n\t}).then(() => { watchStop(); return true })\n}","import { getCurrentScope, onScopeDispose, reactive, watch, WatchStopHandle } from 'vue'\n\ntype PrefixTable = {\n\t'connectorState:': InstanceState\n\t'sharedState:': ConnectorState\n\twallets: WalletDataInterface[]\n\tcurrency: { rate?: string, currency: string, provider: string, timestamp?: number }\n}\n\nexport class Channel <T extends keyof PrefixTable> {\n\tstate\n\tprivate readonly stateChannel\n\tprivate stopWrite?: WatchStopHandle\n\t\n\tconstructor (prefix: T, instanceName = '', init: Partial<PrefixTable[T]>) {\n\t\tthis.state = reactive(init)\n\t\tthis.stateChannel = prefix + instanceName\n\t\twindow.addEventListener('storage', this.storageListener)\n\t\tif (!localStorage.getItem(this.stateChannel) && Object.keys(this.state).length) { this.writeState() }\n\t\tthis.update(localStorage.getItem(this.stateChannel))\n\t\tif (getCurrentScope()) { onScopeDispose(() => this.destructor()) }\n\t}\n\tdestructor () {\n\t\tif (!this) { return }\n\t\twindow.removeEventListener('storage', this.storageListener)\n\t\tif (this.stopWrite) { this.stopWrite() }\n\t}\n\t\n\tprivate writeState = () => {\n\t\tconst stateString = JSON.stringify(this.state)\n\t\tif (stateString === localStorage.getItem(this.stateChannel)) { return }\n\t\tlocalStorage.setItem(this.stateChannel, stateString)\n\t}\n\tprivate startWrite = () => this.stopWrite = watch(() => this.state, this.writeState, { deep: true })\n\tprivate update = (val: string | null) => {\n\t\tif (this.stopWrite) { this.stopWrite() }\n\t\tif (val) { this.set(JSON.parse(val)) }\n\t\tthis.startWrite()\n\t}\n\tprivate storageListener = (e: StorageEvent) => {\n\t\tif (e.key !== this.stateChannel || e.newValue === e.oldValue || !e.newValue) { return }\n\t\tthis.update(e.newValue)\n\t}\n\tset = (newState: PrefixTable[T]) => {\n\t\tif (!newState) { return }\n\t\tif (Array.isArray(this.state) && Array.isArray(newState)) { this.state.splice(0, this.state.length, ...newState) }\n\t\telse if (typeof this.state === 'object' && typeof newState === 'object') {\n\t\t\tfor (const key in this.state) { !(key in newState) && delete this.state[key] }\n\t\t\tObject.assign(this.state, newState)\n\t\t}\n\t}\n\tdeleteChannel = () => {\n\t\tthis.destructor()\n\t\tlocalStorage.removeItem(this.stateChannel)\n\t}\n}\n\n\nconst hash = new URLSearchParams(window.location.hash.slice(1))\nconst origin = hash.get('origin') || undefined\nconst session = hash.get('session') || undefined\nconst appInfo = { name: hash.get('name') || undefined, logo: hash.get('logo') || undefined }\nconst instance = origin + Math.random().toString().slice(2)\nconst chPrefix = 'connectorState:'\nconst sharedPrefix = 'sharedState:'\nconst heartbeatPrefix = 'heartbeat:'\nconst stateChannel = chPrefix + instance\nconst { state, destructor } = new Channel(chPrefix, instance, { origin, session })\nconst { states, closeChannels } = getChannels(chPrefix)\nconst connectorChannels = getChannels(sharedPrefix)\n\nexport function initConnectorChannel () {\n\tif (!origin) { throw 'Missing origin' }\n\tconst channel = new Channel(sharedPrefix, origin + session, {})\n\tif (!channel.state.origin) { channel.set({ origin, session, appInfo, timestamp: Date.now(), messageQueue: [] }) }\n\treturn channel as Override<typeof channel, { state: ConnectorState }>\n}\n\nexport { state, states, connectorChannels }\n\n\n\n\n\n\nfunction getChannels <T extends 'connectorState:' | 'sharedState:'> (prefix: T) {\n\tconst channels: { [key: string]: Channel<T> | undefined } = {}\n\tconst states: { [key: string]: Channel<T>['state'] } = reactive({})\n\tconst getInstanceNames = () => Object.entries(localStorage)\n\t\t.filter(([key, value]) => key.slice(0, prefix.length) === prefix)\n\t\t.map(([key, value]) => key.slice(prefix.length))\n\tconst instantiate = async (name: string) => {\n\t\tchannels[name] = undefined\n\t\tif (prefix === chPrefix && !(await heartbeat(name))) { close(name); return null }\n\t\tif (!Object.keys(channels).includes(name)) { return null }\n\t\tchannels[name] = new Channel(prefix, name, {})\n\t\tstates[name] = channels[name]!.state\n\t}\n\tconst close = (name: string) => {\n\t\tchannels[name]?.destructor()\n\t\tdelete channels[name]\n\t\tdelete states[name]\n\t}\n\tconst storageListener = () => {\n\t\tconst runningChannels = Object.keys(channels)\n\t\tconst storageChannels = getInstanceNames()\n\t\tfor (const channel of [...runningChannels, ...storageChannels]) {\n\t\t\tif (runningChannels.includes(channel) && storageChannels.includes(channel)) { continue }\n\t\t\telse if (storageChannels.includes(channel) && channel !== instance) { instantiate(channel) }\n\t\t\telse if (runningChannels.includes(channel)) { close(channel) }\n\t\t}\n\t}\n\tconst closeChannels = () => {\n\t\twindow.removeEventListener('storage', storageListener)\n\t\tfor (const channel in channels) { close(channel) }\n\t}\n\twindow.addEventListener('storage', storageListener)\n\tstorageListener()\n\treturn { states, closeChannels }\n}\n\n\n\nasync function heartbeat (instanceName: string, timeout?: number) {\n\tif (instanceName === instance) { return true }\n\tconst fullKey = heartbeatPrefix + instanceName + instance\n\tconst promise = new Promise(resolve => {\n\t\tconst heartbeatListener = async (e: StorageEvent) => {\n\t\t\tif (e.key === fullKey && e.newValue) { heartbeatReturn(true) }\n\t\t}\n\t\tconst heartbeatReturn = (result: boolean) => {\n\t\t\tif (result) { clearTimeout(cleanupTimeout) }\n\t\t\tsetTimeout(() => localStorage.removeItem(fullKey), 1000)\n\t\t\tif (!result) { localStorage.removeItem(chPrefix + instanceName) }\n\t\t\twindow.removeEventListener('storage', heartbeatListener)\n\t\t\tresolve(result)\n\t\t}\n\t\twindow.addEventListener('storage', heartbeatListener)\n\t\tconst cleanupTimeout = setTimeout(() => heartbeatReturn(false), Math.max(5000, timeout || 0))\n\t\tif (timeout) { setTimeout(() => resolve(false), timeout) }\n\t})\n\tlocalStorage.setItem(fullKey, '')\n\treturn promise\n}\n\nfunction cleanHeartbeats () {\n\tfor (const key in localStorage) {\n\t\tif (key.slice(0, heartbeatPrefix.length) !== heartbeatPrefix) { continue }\n\t\tconst relatedChannel = chPrefix + key.slice(heartbeatPrefix.length)\n\t\tif (localStorage.getItem(relatedChannel)) { continue }\n\t\tlocalStorage.removeItem(key)\n\t}\n}\n\nexport function filterChannels (filter: object, object = states) {\n\tconst filterFunction = ([key, state]: [string, any]) => typeof filter === 'function' ? filter(state)\n\t\t: !Object.entries(filter || {}).find(([key, value]) => state[key] !== value)\n\treturn Object.fromEntries(Object.entries(object).filter(filterFunction))\n}\n\nfunction globalStorageListener (e: StorageEvent) {\n\tconst partialKey = heartbeatPrefix + instance\n\tif (e.key?.slice(0, partialKey.length) === partialKey && e.newValue === '') {\n\t\tlocalStorage.setItem(e.key, 'ok')\n\t}\n}\n\nexport async function hasStorageAccess () {\n\tif (document.hasStorageAccess && !await document.hasStorageAccess()) { return false }\n\tif (localStorage.getItem('global')) { return true }\n}\n\nexport async function awaitStorageAccess () {\n\twhile (!await hasStorageAccess()) { await new Promise(resolve => setTimeout(resolve, 1000)) }\n}\n\nasync function init () {\n\tawait awaitStorageAccess()\n\twindow.addEventListener('storage', globalStorageListener)\n}\n\nfunction close () {\n\twindow.removeEventListener('storage', globalStorageListener)\n\tdestructor()\n\tcloseChannels()\n\tconnectorChannels.closeChannels()\n\tlocalStorage.removeItem(stateChannel)\n}\n\n\n\ncleanHeartbeats()\ninit()\nwindow.addEventListener('beforeunload', close)","import Arweave from 'arweave'\nimport ArDB from 'ardb'\nimport { download } from '@/functions/Utils'\nimport axios from 'axios'\nimport { computed, reactive, Ref, toRef, watch } from 'vue'\nimport InterfaceStore from '@/store/InterfaceStore'\nimport LogoArweave from '@/assets/logos/arweave.svg?component'\nimport { ApiConfig } from 'arweave/web/lib/api'\nimport { GQLEdgeTransactionInterface, GQLTransactionInterface } from 'ardb/lib/faces/gql'\nimport Transaction, { TransactionInterface } from 'arweave/web/lib/transaction'\nimport { SignatureOptions } from 'arweave/web/lib/crypto/crypto-interface'\nimport { ArweaveVerifier, ArweaveProviderInterface } from 'arweave-wallet-connector/lib/ArweaveWebWallet'\nimport { decode, encode, getDecryptionKey, getSigningKey } from '@/functions/Crypto'\nimport { getFeeRange } from '@/functions/Transactions'\nimport { awaitEffect, getAsyncData } from '@/functions/AsyncData'\nimport { Channel } from '@/functions/Channels'\n\n\n\nconst ArweaveStore = reactive({\n\tgatewayURL: null as null | string,\n\twallets: {} as { [key: string]: ArweaveAccount },\n\ttxs: {} as { [key: string]: Partial<GQLTransactionInterface> },\n\tuploads: {} as { [key: string]: { upload?: number } },\n})\n\nexport default ArweaveStore\nexport let arweave: Arweave\nexport let arDB: { search: InstanceType<typeof ArDB>['search'] }\n\n\n\nconst gatewayDefault = {\n\thost: 'arweave.net',\n\tport: 443,\n\tprotocol: 'https'\n}\n\nexport function urlToSettings (url: string) {\n\tif (!url.includes('://')) { url = 'https://' + url }\n\tconst obj = new URL(url)\n\tconst protocol = obj.protocol.replace(':', '')\n\tconst host = obj.hostname\n\tconst port = obj.port ? parseInt(obj.port) : protocol === 'https' ? 443 : 80\n\treturn { protocol, host, port }\n}\n\nexport function settingsToUrl (settings: URL | ApiConfig) {\n\treturn `${settings.protocol}://${settings.host}:${settings.port}/`\n}\n\nexport async function testGateway (gateway: string | URL | ApiConfig) {\n\tconst settings = typeof gateway === 'string' ? urlToSettings(gateway) : gateway\n\tconst arweaveTest = Arweave.init(settings)\n\ttry {\n\t\tconst net = await arweaveTest.network.getInfo()\n\t\tif (net) { return true }\n\t} catch (e) { }\n\treturn false\n}\n\nexport function updateArweave (gateway: string | URL | ApiConfig) {\n\tconst settings = typeof gateway === 'string' ? urlToSettings(gateway) : gateway\n\tarweave = settings ? Arweave.init(settings) : Arweave.init(gatewayDefault)\n\tarDB = { search: (...args) => new ArDB(arweave).search(...args) }\n\tArweaveStore.gatewayURL = settingsToUrl(arweave.getConfig().api)\n}\n\nexport function useWatchTx (txId: Ref<string>) {\n\tconst getTxById = (txId: string) => getAsyncData({\n\t\texistingState: toRef(ArweaveStore.txs, txId),\n\t\tquery: async () => (await arDB.search().id(txId).find() as GQLEdgeTransactionInterface[])[0].node,\n\t\tcompleted: () => ArweaveStore.txs[txId]?.block,\n\t\tprocessResult: res => Object.assign(ArweaveStore.txs[txId] ??= {}, res),\n\t\tseconds: 10,\n\t})\n\tconst data: { value?: ReturnType<typeof getTxById>['state'] } = reactive({})\n\tlet destructor: () => any | undefined\n\twatch(txId, id => {\n\t\tdestructor?.()\n\t\tconst handler = getTxById(id)\n\t\tdata.value = handler.state\n\t\tdestructor = handler.stop\n\t}, { immediate: true })\n\treturn toRef(data, 'value') as Ref<Partial<GQLTransactionInterface>>\n}\n\nexport async function fetchPublicKey (address: string) {\n\tconst tx = await arDB.search().from(address).find() as GQLEdgeTransactionInterface[]\n\treturn tx?.[0]?.node.owner.key\n}\n\n\n\n\n\n// TODO function fetchQuery and fetchQueries to stitch txs\n\n\n\nexport class ArweaveAccount implements Account {\n\tstate = reactive({\n\t\tkey: undefined as undefined | string,\n\t})\n\tget key () { return this.state.key }\n\t#balance = getAsyncData({\n\t\tquery: async () => arweave.ar.winstonToAr(await arweave.wallets.getBalance(this.key!)),\n\t\tawaitEffect: () => this.key,\n\t\tseconds: 600,\n\t})\n\tget balance () { return this.#balance.state.value }\n\tqueries = reactive({} as { [key: string]: GQLEdgeTransactionInterface[] })\n\tqueriesStatus = reactive({} as { [key: string]: QueryStatusInterface })\n\t\n\tconstructor (init: string | WalletDataInterface) {\n\t\tif (typeof init === 'string') { this.state.key = init }\n\t\telse if (typeof init === 'object') {\n\t\t\tif (init.arweave?.key) { this.state.key = init.arweave.key }\n\t\t\telse if (init.jwk) { arweave.wallets.jwkToAddress(init.jwk).then((address) => {\n\t\t\t\tthis.state.key = address\n\t\t\t\tinit.arweave ??= {}\n\t\t\t\tinit.arweave.key = address\n\t\t\t})}\n\t\t}\n\t}\n\tdestructor () { this.#balance.stop() }\n\t\n\tfetchTransactions = async (query: Query) => fetchTransactions(this, query)\n\tupdateTransactions = async (query: Query) => updateTransactions(this, query)\n}\n\n\n\nexport class ArweaveProvider extends ArweaveAccount implements Provider {\n\t#wallet: WalletDataInterface\n\tstatic isProviderFor (wallet: WalletDataInterface) { return !!wallet.jwk }\n\tconstructor (init: WalletDataInterface) {\n\t\tsuper(init)\n\t\tthis.#wallet = init\n\t\tif (!init.jwk) {\n\t\t\tconst disabled = ['download', 'signTransaction', 'sign', 'decrypt'] as const\n\t\t\tdisabled.forEach(method => this[method] = undefined)\n\t\t}\n\t}\n\tget metadata () { return {\n\t\tisSupported: true,\n\t\tname: this.#wallet.jwk ? 'Arweave Wallet' : 'Arweave Address',\n\t\ticon: LogoArweave,\n\t}}\n\tasync signTransaction? (tx: Transaction, options?: SignatureOptions) {\n\t\tif (tx.owner && tx.owner !== await this.getPublicKey()) { throw 'error' }\n\t\tawait arweave.transactions.sign(tx, this.#wallet.jwk, options)\n\t\treturn tx\n\t}\n\tasync sign? (data: ArrayBufferView, options: Parameters<ArweaveProviderInterface['sign']>[1]) {\n\t\tconst signed = await window.crypto.subtle.sign(options, await getSigningKey(this.#wallet.jwk as JsonWebKey), data)\n\t\treturn new Uint8Array(signed)\n\t}\n\tasync decrypt? (data: ArrayBufferView, options: Parameters<ArweaveProviderInterface['decrypt']>[1]) {\n\t\tconst decrypted = await window.crypto.subtle.decrypt(options, await getDecryptionKey(this.#wallet.jwk as JsonWebKey), data)\n\t\treturn new Uint8Array(decrypted)\n\t}\n\tasync getPublicKey () { return this.#wallet.jwk?.n || await awaitEffect(() => this.key) && fetchPublicKey(this.key!) || undefined }\n\tasync download? () {\n\t\tconst key = this.key ? this.key : await arweave.wallets.jwkToAddress(this.#wallet.jwk)\n\t\tdownload(key, JSON.stringify(this.#wallet.jwk))\n\t}\n\tverifyMessage (message: Message | string) {\n\t\tconst verifier = new ArweaveVerifier()\n\t\tconst apiToObject: { [key in keyof ArweaveAPI]?: keyof ArweaveProvider } = {\n\t\t\tsignTransaction: 'signTransaction',\n\t\t\tgetPublicKey: 'getPublicKey',\n\t\t\tsign: 'sign',\n\t\t\tdecrypt: 'decrypt',\n\t\t}\n\t\t// @ts-ignore\n\t\tif (typeof message === 'string') { return !!verifier[message] && (apiToObject[message] ? this[apiToObject[message]] : true) }\n\t\t// @ts-ignore\n\t\treturn verifier[message.method]?.(...(message.params || [])) || false\n\t}\n\tasync runMessage (message: Message) {\n\t\tif (!this.verifyMessage(message)) { throw 'params changed and are not valid anymore' }\n\t\tconst runner = new ArweaveAPI(this)\n\t\t// @ts-ignore\n\t\treturn runner[message.method]?.(...(message.params || []))\n\t}\n}\n\n\n\nexport class ArweaveAPI implements ArweaveProviderInterface {\n\t#wallet: ArweaveProvider\n\t\n\tconstructor (wallet: ArweaveProvider) { this.#wallet = wallet }\n\t\n\tasync signTransaction (tx: TransactionInterface, options?: object) {\n\t\tif (!this.#wallet.signTransaction) { throw 'error' }\n\t\tconst txObject = new Transaction(tx)\n\t\t// const fee = await getFeeRange()\n\t\t// if (fee.default?.gt(txObject.reward)) { txObject.reward = fee.default.toString() }\n\t\tawait this.#wallet.signTransaction(txObject)\n\t\treturn {\n\t\t\tid: txObject.id,\n\t\t\towner: txObject.owner,\n\t\t\ttags: txObject.tags,\n\t\t\tsignature: txObject.signature,\n\t\t\treward: txObject.reward\n\t\t}\n\t}\n\tasync getPublicKey () {\n\t\tconst publicKey = await this.#wallet.getPublicKey()\n\t\tif (!publicKey) { throw 'error' }\n\t\treturn publicKey\n\t}\n\tasync sign (message: ArrayBufferView, options: Parameters<ArweaveProviderInterface['sign']>[1]) {\n\t\treturn this.#wallet.sign!(message, options)\n\t}\n\tasync decrypt (message: ArrayBufferView, options: Parameters<ArweaveProviderInterface['decrypt']>[1]) {\n\t\treturn this.#wallet.decrypt!(message, options)\n\t}\n\tasync getArweaveConfig () {\n\t\tconst config = arweave.getConfig().api\n\t\treturn { protocol: config.protocol, host: config.host, port: config.port }\n\t}\n}\n\n\n\nasync function fetchTransactions (wallet: ArweaveAccount, query: Query) {\n\tif ((wallet.queriesStatus[query] ??= {}).completed) { return }\n\tawait awaitEffect(() => wallet.key && !wallet.queriesStatus[query]?.fetch)\n\twallet.queriesStatus[query].fetch = true\n\tif (query === 'all') {\n\t\ttry { await fetchTransactionsAll(wallet) }\n\t\tcatch (e) { console.error(e) }\n\t\twallet.queriesStatus[query].fetch = false\n\t\treturn\n\t}\n\tlet fulfilled = false\n\tlet results: GQLEdgeTransactionInterface[]\n\tconst queries = {\n\t\treceived: () => arDB.search().to(wallet.key!),\n\t\tsent: () => arDB.search().from(wallet.key!),\n\t}\n\ttry {\n\t\tfor (let i = 0; !fulfilled; i++) {\n\t\t\tif (!wallet.queries[query]) {\n\t\t\t\tresults = await queries[query]().find() as any\n\t\t\t} else {\n\t\t\t\tconst lastTxIndex = wallet.queries[query].length - 1\n\t\t\t\tconst cursor = wallet.queries[query][lastTxIndex].cursor\n\t\t\t\tresults = await queries[query]().cursor(cursor).find() as any\n\t\t\t}\n\t\t\tfor (const result of results) {\n\t\t\t\tresult.node = Object.assign(ArweaveStore.txs[result.node.id] ??= {}, result.node)\n\t\t\t}\n\t\t\tif (results.length < 10) {\n\t\t\t\twallet.queriesStatus[query].completed = true\n\t\t\t\tconsole.log('completed')\n\t\t\t\tfulfilled = true\n\t\t\t}\n\t\t\tif (results[results.length - 1]?.node.block) { fulfilled = true }\n\t\t\t(wallet.queries[query] ??= []).push(...results)\n\t\t}\n\t}\n\tcatch (e) { console.error(e) }\n\tfinally { wallet.queriesStatus[query].fetch = false }\n}\n\nasync function fetchTransactionsAll (wallet: ArweaveAccount) {\n\twallet.queries.all ??= []\n\tconst stopCondition = () => {\n\t\treturn (wallet.queriesStatus.received?.completed || wallet.queriesStatus.all.received?.node.block)\n\t\t\t&& (wallet.queriesStatus.sent?.completed || wallet.queriesStatus.all.sent?.node.block)\n\t}\n\tfor (let i = 0; i < 10 || !stopCondition(); i++) {\n\t\tconst queries: Query[] = ['received', 'sent']\n\t\tconst nextTx = {} as { [key in Query]: GQLEdgeTransactionInterface }\n\t\tconst fetchPromises = []\n\t\tfor (const query of queries) {\n\t\t\tconst fetch = async () => {\n\t\t\t\tif (!wallet.queries[query]) { await fetchTransactions(wallet, query) }\n\t\t\t\tconst index = wallet.queries[query].indexOf(wallet.queriesStatus.all[query]!)\n\t\t\t\tif (wallet.queries[query].length - index < 3) { await fetchTransactions(wallet, query) }\n\t\t\t\tnextTx[query] = wallet.queries[query][index + 1]\n\t\t\t}\n\t\t\tfetchPromises.push(fetch())\n\t\t}\n\t\tawait Promise.all(fetchPromises)\n\t\tif (nextTx.received && (\n\t\t\tnextTx.received.node.block == null ||\n\t\t\tnextTx.received.node.block.height >= (nextTx.sent ? nextTx.sent.node.block?.height ?? Number.MAX_SAFE_INTEGER : -1)\n\t\t)) {\n\t\t\twallet.queriesStatus.all.received = nextTx.received\n\t\t\twallet.queries.all.push(nextTx.received)\n\t\t}\n\t\tif (nextTx.sent && (\n\t\t\tnextTx.sent.node.block == null ||\n\t\t\tnextTx.sent.node.block.height >= (nextTx.received ? nextTx.received.node.block?.height ?? Number.MAX_SAFE_INTEGER : -1)\n\t\t)) {\n\t\t\twallet.queriesStatus.all.sent = nextTx.sent\n\t\t\twallet.queries.all.push(nextTx.sent)\n\t\t}\n\t\twallet.queriesStatus.all.completed = wallet.queriesStatus.received.completed && wallet.queriesStatus.sent.completed\n\t\t\t&& wallet.queries.all.length === wallet.queries.received.length + wallet.queries.sent.length\n\t}\n\treturn new Promise<void>(resolve => setTimeout(() => resolve(), 10))\n}\n\nasync function updateTransactions (wallet: ArweaveAccount, query: Query) {\n\tif (!wallet.queries[query] || wallet.queries[query].length === 0) { return fetchTransactions(wallet, query) }\n\tif (wallet.queriesStatus[query]?.fetch) { return }\n\tawait awaitEffect(() => wallet.key && !wallet.queriesStatus[query]?.update)\n\twallet.queriesStatus[query].update = true\n\tawait awaitEffect(() => InterfaceStore.windowVisible)\n\tif (query === 'all') {\n\t\tawait updateTransactionsAll(wallet)\n\t\twallet.queriesStatus[query].update = false\n\t\treturn\n\t}\n\tlet requireSort = false\n\tlet fulfilled = false\n\tlet results: GQLEdgeTransactionInterface[]\n\tconst queries = {\n\t\treceived: () => arDB.search().to(wallet.key!),\n\t\tsent: () => arDB.search().from(wallet.key!),\n\t}\n\tconst resultsFiltered = []\n\ttry {\n\t\tresults = await queries[query]().find() as GQLEdgeTransactionInterface[] // Todo - Use the number of pending txs as minimum\n\t\tfor (let i = 0; !fulfilled; i++) {\n\t\t\tif (i !== 0) {\n\t\t\t\tconst lastTxIndex = results.length - 1\n\t\t\t\tconst cursor = results[lastTxIndex].cursor\n\t\t\t\tresults = await queries[query]().cursor(cursor).find() as GQLEdgeTransactionInterface[]\n\t\t\t}\n\t\t\tif (results.length < 10) {\n\t\t\t\twallet.queriesStatus[query].completed = true\n\t\t\t\tfulfilled = true\n\t\t\t}\n\t\t\tfor (const result of results) {\n\t\t\t\tconst matchingTx = wallet.queries[query].find(el => el.node.id === result.node.id)\n\t\t\t\tif (matchingTx) {\n\t\t\t\t\tmatchingTx.cursor = result.cursor\n\t\t\t\t\tif (matchingTx.node.block) { fulfilled = true }\n\t\t\t\t\telse if (result.node.block) { requireSort = true }\n\t\t\t\t} else {\n\t\t\t\t\tresultsFiltered.push(result)\n\t\t\t\t\tif (result.node.block) { requireSort = true }\n\t\t\t\t}\n\t\t\t\tresult.node = Object.assign(ArweaveStore.txs[result.node.id] ??= {}, result.node)\n\t\t\t}\n\t\t}\n\t\tif (resultsFiltered.length > 0) { wallet.queries[query].splice(0, 0, ...resultsFiltered) }\n\t\tif (requireSort) { sortByBlocks() }\n\t}\n\tcatch (e) { console.error(e) }\n\tfinally { wallet.queriesStatus[query].update = false }\n}\n\nasync function updateTransactionsAll (wallet: ArweaveAccount) {\n\tconst fetchPromises = []\n\tconst newTxs = [] as GQLEdgeTransactionInterface[]\n\tconst queries: Query[] = ['received', 'sent']\n\tfor (const query of queries) {\n\t\tconst fetch = async () => {\n\t\t\tawait updateTransactions(wallet, query)\n\t\t\tfor (const [index, tx] of wallet.queries[query].entries()) {\n\t\t\t\tif (\n\t\t\t\t\tindex < wallet.queries[query].indexOf(wallet.queriesStatus.all[query]!)\n\t\t\t\t\t&& !wallet.queries.all.find((el) => el.node.id === tx.node.id)\n\t\t\t\t) { newTxs.push(tx) }\n\t\t\t}\n\t\t}\n\t\tfetchPromises.push(fetch())\n\t}\n\tawait Promise.all(fetchPromises)\n\tif (newTxs.length) {\n\t\twallet.queries.all.splice(0, 0, ...newTxs)\n\t\tsortByBlocks(wallet, 'all')\n\t}\n}\n\nasync function refreshTx () {\n\tif (!InterfaceStore.windowVisible) { return }\n\tlet requireSort = false\n\tconst ids = []\n\tconst txs = []\n\tfor (const key in ArweaveStore.txs) {\n\t\tif (!ArweaveStore.txs[key].block) {\n\t\t\tids.push(key)\n\t\t\ttxs.push(ArweaveStore.txs[key])\n\t\t}\n\t}\n\tif (ids.length === 0) { return }\n\tconst results = await arDB.search().ids(ids).findAll() as GQLEdgeTransactionInterface[]\n\tconsole.log('updating:', results)\n\tfor (const tx of txs) {\n\t\tconst updatedTx = results.find((el) => el?.node?.id === tx.id)?.node\n\t\tif (updatedTx) {\n\t\t\tif (updatedTx.block) { requireSort = true }\n\t\t\tObject.assign(tx, updatedTx)\n\t\t} else {\n\t\t\tconsole.error('tx missing? :0', tx)\n\t\t}\n\t}\n\tif (requireSort) { sortByBlocks() }\n\treturn\n}\n\nfunction sortByBlocks (wallet?: ArweaveAccount, query?: Query) {\n\tconst sort = (a: GQLEdgeTransactionInterface, b: GQLEdgeTransactionInterface) => (b.node.block?.height ?? Number.MAX_SAFE_INTEGER)\n\t\t- (a.node.block?.height ?? Number.MAX_SAFE_INTEGER)\n\tif (wallet && wallet.queries[query!]) {\n\t\twallet.queries[query!].sort(sort)\n\t} else {\n\t\tfor (const key in ArweaveStore.wallets) {\n\t\t\tfor (const query in ArweaveStore.wallets[key].queries) {\n\t\t\t\tArweaveStore.wallets[key].queries[query].sort(sort)\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction processUpdatedTxs () {\n\t// TODO\n\t// take tx array from update function that were not already known\n\t// check if wallets with cached balance are involved\n}\n\n\n\n\nexport const currency = getConversion()\n\nfunction getConversion () {\n\tconst settings = new Channel('currency', undefined, { currency: 'USD', provider: 'redstone' }).state\n\tconst currentPrice = getAsyncData({\n\t\texistingState: toRef(settings, 'rate'),\n\t\ttimestamp: toRef(settings, 'timestamp'),\n\t\tquery: async () => {\n\t\t\tconst currency = settings.currency\n\t\t\tconst provider = settings.provider\n\t\t\tif (provider === 'redstone') {\n\t\t\t\tif (currency === 'USD') {\n\t\t\t\t\tconst result = await axios.get('https://api.redstone.finance/prices/?symbols=AR&provider=redstone')\n\t\t\t\t\treturn result.data['AR'].value\n\t\t\t\t} else {\n\t\t\t\t\tconst result = await axios.get('https://api.redstone.finance/prices/?symbols=AR,' + currency + '&provider=redstone')\n\t\t\t\t\treturn result.data['AR'].value / result.data[currency!].value\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tseconds: 600,\n\t}).state\n\twatch(() => [settings.currency, settings.provider], () => settings.rate = undefined)\n\tconst symbol = computed(() => new Intl.NumberFormat([...navigator.languages], { style: 'currency', currency: settings.currency }).format(0).replace(/[\\w\\d\\.\\,\\s]/g, '') || '$')\n\treturn { currentPrice, settings, symbol }\n}\n\nexport const { state: redstoneOptions } = getAsyncData({\n\tquery: async () => {\n\t\ttype currencyOptions = { value: { currency: string, provider: string }, text: string }[]\n\t\tconst options = [] as currencyOptions\n\t\tconst res = (await axios.get('https://api.redstone.finance/configs/tokens')).data\n\t\tconst message = ' Redstone Finance'\n\t\toptions.push({ value: { currency: 'USD', provider: 'redstone' }, text: 'USD' + message })\n\t\tfor (const key in res) {\n\t\t\tif (res[key].tags?.includes('currencies')) { options.push({ value: { currency: key, provider: 'redstone' }, text: key + message }) }\n\t\t}\n\t\treturn options\n\t},\n\tseconds: 86400,\n})\n\n\n\n\nexport const { state: networkInfo, getState: getNetworkInfo } = getAsyncData({\n\tquery: () => arweave.network.getInfo(),\n\tseconds: 10,\n})\nwatch(() => ArweaveStore.gatewayURL, () => networkInfo.value = undefined)\n\n\n\n\n\nfunction loadGatewaySettings () {\n\tupdateArweave(localStorage.getItem('gateway') || gatewayDefault)\n}\n\n\n\nloadGatewaySettings()\n\nwindow.addEventListener('storage', (e) => {\n\tif (e.newValue === e.oldValue) { return }\n\telse if (e.key === 'gateway') { loadGatewaySettings() }\n})","<template>\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" :viewBox=\"`0 0 ${size + stroke * 2} ${size + stroke * 2}`\" :style=\"style\">\n\t\t<g style=\"fill:currentColor; stroke:currentColor;\" :style=\"{ strokeWidth: stroke }\" stroke-linejoin=\"round\">\n\t\t\t<rect v-for=\"rect in rects\" :key=\"rect\" :x=\"rect.x\" :y=\"rect.y\" :width=\"rect.w\" :height=\"rect.h\" />\n\t\t</g>\n\t</svg>\n</template>\n\n\n\n<script setup>\n// Vue component made from https://github.com/stewartlord/identicon.js/\n// from a SHA-256 hash of the arweave address\nimport { addressHashToColor, addressToHash } from '@/functions/Utils'\nimport { computed, ref, watch } from 'vue'\n\nconst props = defineProps(['address'])\n\nconst size = 5\nconst cell = size / 5\nconst stroke = size * 0.04\nconst addressHash = ref(null)\nwatch(() => props.address, async (val) => addressHash.value = await addressToHash(val), { immediate: true })\nconst style = computed(() => ({\n\tcolor: `rgb(${addressHashToColor(addressHash.value).join(',')})`,\n}))\nconst rects = computed(() => {\n\tconst result = []\n\tif (!addressHash.value) { return result }\n\tfor (let i = 0; i < 15; i++) {\n\t\tif (parseInt(addressHash.value.charAt(i), 16) % 2) { continue }\n\t\tif (i < 5) {\n\t\t\tresult.push({ x: 2 * cell + stroke, y: i * cell + stroke, w: cell, h: cell })\n\t\t} else if (i < 10) {\n\t\t\tresult.push({ x: 1 * cell + stroke, y: (i - 5) * cell + stroke, w: cell, h: cell })\n\t\t\tresult.push({ x: 3 * cell + stroke, y: (i - 5) * cell + stroke, w: cell, h: cell })\n\t\t} else if (i < 15) {\n\t\t\tresult.push({ x: 0 * cell + stroke, y: (i - 10) * cell + stroke, w: cell, h: cell })\n\t\t\tresult.push({ x: 4 * cell + stroke, y: (i - 10) * cell + stroke, w: cell, h: cell })\n\t\t}\n\t}\n\treturn result\n})\n</script>","import ArweaveStore, { arweave, arDB } from '@/store/ArweaveStore'\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { reactive, watch } from 'vue'\nimport axios from 'axios'\nimport { awaitEffect } from '@/functions/AsyncData'\n\n\n\nconst BlockStore = reactive({\n\tcurrentHeight: null,\n\tcurrentHeightStatus: {},\n\tblocks: {},\n\tblocksStatus: {},\n\tmempool: {},\n\tmempoolStatus: {},\n})\n\nexport default BlockStore\n\n\n\nexport async function getCurrentHeight () {\n\tif (BlockStore.currentHeightStatus.loading) { return currentHeightPromise() }\n\tBlockStore.currentHeightStatus.loading = true\n\tawait awaitEffect(() => InterfaceStore.windowVisible)\n\n\ttry {\n\t\tBlockStore.currentHeight = (await arweave.network.getInfo())?.height\n\t} catch (e) { console.error(e) }\n\n\tsetTimeout(() => BlockStore.currentHeightStatus.loading = false, 60000)\n\treturn BlockStore.currentHeight\n}\n\nexport async function getBlocks (min, max) {\n\tawait awaitEffect(() => InterfaceStore.windowVisible)\n\tconst newQueries = []\n\tfor (let n = min; n <= max; n++) {\n\t\tBlockStore.blocks[n] ??= []\n\t\tBlockStore.blocksStatus[n] ??= {}\n\t\tif (BlockStore.blocksStatus[n]?.completed) { continue }\n\t\tif (!BlockStore.blocksStatus[n]?.loading) { newQueries.push(n) }\n\t}\n\tconst rangesQuery = groupContinuousNumbers(newQueries)\n\n\tconsole.log('querying blocks', rangesQuery)\n\n\tconst fetchRange = async (min, max) => {\n\t\ttry {\n\t\t\tconst transactions = await arDB.search().min(min).max(max).findAll()\n\t\t\tfor (let n = min; n <= max; n++) { BlockStore.blocksStatus[n].completed = true }\n\t\t\tfor (const transaction of transactions) {\n\t\t\t\tBlockStore.blocks[transaction.node.block.height].push(transaction)\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t} finally {\n\t\t\tfor (let n = min; n <= max; n++) { BlockStore.blocksStatus[n].loading = false }\n\t\t}\n\t}\n\n\tfor (const [min, max] of rangesQuery) { fetchRange(min, max) }\n\n\tconst promises = []\n\tfor (let n = min; n <= max; n++) { promises.push(blockPromise(n)) }\n\tconst transactions = await Promise.all(promises)\n\tconst result = {}\n\tfor (let n = min, i = 0; n <= max; n++) { result[n] = transactions[i++] }\n\tconsole.log(result)\n\treturn result\n}\n\nexport async function getPending () {\n\treturn (await axios.get(ArweaveStore.gatewayURL + 'tx/pending')).data\n}\n\nexport async function getMempool (pending) {\n\tawait awaitEffect(() => !BlockStore.mempoolStatus.loading)\n\tBlockStore.mempoolStatus.loading = true\n\tconst currentIds = pending || await getPending()\n\tconst txs = []\n\tconst ids = currentIds.filter((id) => {\n\t\tif (!BlockStore.mempool[id]) { return true }\n\t\ttxs.push(BlockStore.mempool[id])\n\t})\n\tconsole.log('Mempool: fetched from cache', txs.length)\n\tconsole.log('Mempool: need to fetch', ids.length)\n\tconst txsTotal = ids.length\n\tlet txsLoaded = 0\n\tBlockStore.mempoolStatus.progress = 0\n\twhile (ids.length > 0) {\n\t\tconst idBatch = ids.splice(0, 500)\n\t\tconst newTxs = await arDB.search().ids(idBatch).only(['id', 'fee.winston']).findAll()\n\t\ttxsLoaded += idBatch.length\n\t\tBlockStore.mempoolStatus.progress = txsLoaded / txsTotal * 100\n\t\tnewTxs.forEach(newTx => BlockStore.mempool[newTx.node.id] = newTx)\n\t\ttxs.push(...newTxs)\n\t}\n\tsetTimeout(() => delete BlockStore.mempoolStatus.progress, 1000)\n\tBlockStore.mempoolStatus.loading = false\n\treturn txs\n}\n\n\n\nfunction currentHeightPromise () {\n\treturn new Promise(resolve => {\n\t\twatch(() => BlockStore.currentHeight, (height) => {\n\t\t\tif (height) { resolve(height) }\n\t\t})\n\t})\n}\n\nfunction groupContinuousNumbers (blocks) {\n\tif (!blocks.length) { return [] }\n\tconst ranges = []\n\tlet rangeStart = 0\n\tfor (let i = 0; i < blocks.length; i++) {\n\t\tif (i === blocks.length - 1 || blocks[i + 1] - blocks[i] !== 1) {\n\t\t\tranges.push([blocks[rangeStart], blocks[i]])\n\t\t\trangeStart = i + 1\n\t\t}\n\t}\n\treturn ranges\n}\n\nfunction blockPromise (n) {\n\treturn new Promise(resolve => {\n\t\twatch(() => BlockStore.blocksStatus[n], (status) => {\n\t\t\tif (status.completed) { resolve(BlockStore.blocks[n]) }\n\t\t\telse if (status.loading === false) { throw `error when loading block ${n}` }\n\t\t}, { immediate: true, deep: true })\n\t})\n}\n\n\nif (import.meta.env.DEV) {\n\twindow.BlockStore = BlockStore\n\twindow.getBlocks = getBlocks\n}\n","import ArweaveStore, { arweave } from '@/store/ArweaveStore'\nimport { getPending, getMempool } from '@/store/BlockStore'\nimport BigNumber from 'bignumber.js'\nimport { CreateTransactionInterface } from 'arweave/web'\nimport Transaction from 'arweave/web/lib/transaction'\n\nexport type TxParams = {\n\ttarget?: string\n\tquantity?: string\n\tar?: string\n\twinston?: string\n\treward?: string\n\tarReward?: string\n\twinstonReward?: string\n\ttags?: { name: string, value: string }[]\n\tdata?: string | File\n}\nexport async function buildTransaction (tx: TxParams) {\n\tconst txSettings = {} as Partial<CreateTransactionInterface>\n\ttxSettings.target = tx.target || ''\n\ttxSettings.quantity = tx.quantity || tx.winston || (tx.ar ? arweave.ar.arToWinston(tx.ar) : '0')\n\ttxSettings.reward = tx.reward || tx.winstonReward || (tx.arReward ? arweave.ar.arToWinston(tx.arReward) : undefined)\n\tif (tx.data) { txSettings.data = tx.data instanceof File ? await readFile(tx.data) : tx.data }\n\tconst txObj = await arweave.createTransaction(txSettings)\n\tfor (const tag of tx.tags || []) { txObj.addTag(tag.name, tag.value) }\n\tif (txSettings.reward) { txObj.reward = txSettings.reward }\n\treturn txObj\n}\n\nfunction readFile (file: File) {\n\treturn new Promise<Uint8Array>((resolve, reject) => {\n\t\tconst fileReader = new FileReader()\n\t\tfileReader.onload = (e) => resolve(new Uint8Array(e.target?.result as any))\n\t\tfileReader.onerror = (e) => reject(e)\n\t\tfileReader.readAsArrayBuffer(file)\n\t})\n}\n\nexport async function manageUpload (tx: Transaction) {\n\tif (!tx.chunks?.chunks?.length) { return arweave.transactions.post(tx) }\n\tconst uploader = await arweave.transactions.getUploader(tx)\n\tconst storageKey = 'uploader:' + tx.id\n\tlocalStorage.setItem(storageKey, JSON.stringify(uploader))\n\tArweaveStore.uploads[tx.id] ??= {}\n\tArweaveStore.uploads[tx.id].upload = 0\n\twhile (!uploader.isComplete) {\n\t\tawait uploader.uploadChunk()\n\t\tlocalStorage.setItem(storageKey, JSON.stringify(uploader))\n\t\tArweaveStore.uploads[tx.id].upload = uploader.pctComplete\n\t}\n\tlocalStorage.removeItem(storageKey)\n\tsetTimeout(() => delete ArweaveStore.uploads[tx.id], 1000)\n\treturn uploader.lastResponseStatus\n}\n\nexport async function getFeeRange () {\n\tconst range = {\n\t\tdefault: null as null | BigNumber,\n\t\tmin: null as null | BigNumber,\n\t\tmax: new BigNumber('145605600')\n\t}\n\tconst ids = await getPending()\n\tif (ids.length <= 1000) { return range }\n\tconst txs = await getMempool(ids)\n\tconst fees = txs.map(tx => tx.node.fee.winston)\n\tconst sortedFees = fees.sort((a, b) => b - a)\n\tconst nextBlock = sortedFees.slice(0, 1000)\n\trange.min = (new BigNumber(nextBlock.slice(-1)[0])).plus('1')\n\trange.max = (new BigNumber(nextBlock[0])).plus('1')\n\trange.default = (new BigNumber(nextBlock.slice(-100)[0])).plus('1')\n\treturn range\n}\n\nexport function unpackTags (tags: { name: string, value: string }[]) {\n\tconst result = {} as { [key:string]: string }\n\tfor (const { name, value } of tags) { result[name] ??= value }\n\treturn result\n}\n\nexport function unpackTagsDuplicated (tags: { name: string, value: string }[]) {\n\tconst result = {} as { [key:string]: string[] }\n\tfor (const { name, value } of tags) { (result[name] ??= []).push(value) }\n\treturn result\n}","import { reactive } from 'vue'\nimport { arDB } from '@/store/ArweaveStore'\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { unpackTags } from '@/functions/Transactions'\nimport { getVerification } from 'arverify'\nimport { awaitEffect } from '@/functions/AsyncData'\n\n\n\nconst ProfileStore = reactive({\n\tarweaveId: {},\n\tarweaveIdStatus: {},\n\tarverify: {},\n\tarverifyStatus: {},\n})\n\nexport default ProfileStore\n\n\n\nexport async function getArweaveId (address) {\n\tif (!address || (ProfileStore.arweaveIdStatus[address] ??= {}).loading) { return }\n\tif (!address.match(/^[a-z0-9_-]{43}$/i)) { return }\n\tProfileStore.arweaveIdStatus[address].loading = true\n\tawait awaitEffect(() => InterfaceStore.windowVisible)\n\n\ttry {\n\t\tconst arweaveIdTx = (await arDB.search().from(address).tag('App-Name', 'arweave-id').findOne())[0]?.node\n\t\tif (!arweaveIdTx) { return }\n\t\tconst tags = unpackTags(arweaveIdTx.tags)\n\t\tif (tags.Image && !tags.Image.match(/^[a-z0-9_-]{43}$/i)) { delete tags.image }\n\t\tProfileStore.arweaveId[address] = tags\n\t} catch (e) {\n\t\tProfileStore.arweaveIdStatus[address].loading = false\n\t\tconsole.error(e)\n\t}\n}\n\nexport async function getArverify (address) {\n\tif (!address || (ProfileStore.arverifyStatus[address] ??= {}).loading) { return }\n\tif (!address.match(/^[a-z0-9_-]{43}$/i)) { return }\n\tProfileStore.arverifyStatus[address].loading = true\n\tawait awaitEffect(() => InterfaceStore.windowVisible)\n\n\ttry {\n\t\tProfileStore.arverify[address] = await getVerification(address)\n\t} catch (e) {\n\t\tProfileStore.arverifyStatus[address].loading = false\n\t\tconsole.error(e)\n\t}\n}\n\n\n\nif (import.meta.env.DEV) {\n\twindow.ProfileStore = ProfileStore\n}","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"#FFF\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11A2.98 2.98 0 0 1 22 15c0 1.65-1.35 3-3 3H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95A5.469 5.469 0 0 1 12 6m0-2C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96A7.49 7.49 0 0 0 12 4z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","\nexport default (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n}\n","<template>\n\t<div class=\"address-icon no-select\">\n\t\t<transition name=\"fade-fast\">\n\t\t\t<Identicon class=\"identicon\" v-if=\"isValid && address\" :address=\"address\" alt=\"wallet logo\" draggable=\"false\" @dragstart.prevent />\n\t\t\t<IconCloud v-else class=\"identicon cloud\" draggable=\"false\" @dragstart.prevent />\n\t\t</transition>\n\t\t<transition :name=\"hasTransition ? 'fade-fast' : null\">\n\t\t\t<img class=\"image\" v-if=\"isValid && arweaveId?.Image\" v-show=\"loaded\" @load=\"loaded = true\" :src=\"ArweaveStore.gatewayURL + arweaveId?.Image\" alt=\"wallet profile picture\" draggable=\"false\" @dragstart.prevent />\n\t\t</transition>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport ArweaveStore from '@/store/ArweaveStore'\nimport Identicon from '@/components/atomic/Identicon.vue'\nimport ProfileStore, { getArweaveId } from '@/store/ProfileStore'\nimport { computed, watch, ref } from 'vue'\nimport IconCloud from '@/assets/icons/cloud.svg?component'\n\nconst props = defineProps(['address'])\n\nconst isValid = computed(() => props.address?.match(/^[a-z0-9_-]{43}$/i))\nconst arweaveId = computed(() => ProfileStore.arweaveId[props.address])\nconst hasTransition = ref(!arweaveId.value)\nwatch(arweaveId, () => {\n\thasTransition.value = false\n\tsetTimeout(() => hasTransition.value = true, 200)\n})\nconst loaded = ref(false)\nwatch(() => props.address, async () => {\n\tloaded.value = false\n\tgetArweaveId(props.address)\n}, { immediate: true })\n</script>\n\n\n\n<style scoped>\n.address-icon {\n\tpadding: 12px;\n\tposition: relative;\n\toverflow: hidden;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.identicon {\n\tposition: absolute;\n\tpadding: inherit;\n\twidth: 100%;\n\theight: 100%;\n\tmax-width: 128px;\n\tmax-height: 128px;\n\tobject-fit: contain;\n}\n\n.image {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tobject-fit: cover;\n}\n\n.cloud {\n\t/* opacity: 0.2; */\n\tfilter: opacity(0.2);\n}\n</style>","<template>\n\t<transition name=\"fade\">\n\t\t<div v-if=\"dragOverlay\" class=\"dragOverlay\" />\n\t</transition>\n</template>\n\n\n\n<script setup>\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { computed } from 'vue'\n\nconst dragOverlay = computed(() => InterfaceStore.dragOverlay)\n</script>\n\n\n\n<style scoped>\n.dragOverlay {\n\tpointer-events: none;\n\tposition: absolute;\n\tbackground-image: radial-gradient(circle at center, #333, #222);\n\tbackground-position: center;\n\tbackground-repeat: no-repeat;\n\tbackground-origin: center;\n\tbackground-size: cover;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tz-index: 99999;\n\tborder-radius: inherit;\n\tfilter: opacity(0.6);\n}\n\n.dragOverlay::after {\n\tcontent: \"\";\n\ttext-align: center;\n\tbackground-image: url(\"@/assets/icons/drop.svg\");\n\tbackground-position: center;\n\tbackground-repeat: no-repeat;\n\tbackground-origin: center;\n\tbackground-size: 48px 48px;\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tz-index: 99999;\n}\n</style>","let db: IDBDatabase\n\nexport async function getDB () {\n\treturn new Promise<IDBDatabase>((resolve, reject) => {\n\t\tif (db) { return resolve(db) }\n\t\tconst req = indexedDB.open('app', 3)\n\t\treq.onupgradeneeded = upgrade\n\t\treq.onsuccess = () => { db = req.result; resolve(db) }\n\t\treq.onerror = () => reject(req.error)\n\t})\n}\n\n\n\nfunction upgrade (this: IDBOpenDBRequest, e: IDBVersionChangeEvent) {\n\tdb = this.result\n\tconst upgradeTransaction = this.transaction\n\tconst notifications = setStore(upgradeTransaction, 'notifications', { keyPath: 'id', autoIncrement: true })\n\tif (notifications) {\n\t\tsetIndex(notifications, 'origin', { unique: false })\n\t}\n\tconst messages = setStore(upgradeTransaction, 'messages', { keyPath: 'uuid' })\n\tif (messages) {\n\t\tsetIndex(messages, 'origin', { unique: false })\n\t\tsetIndex(messages, 'sessionId', { unique: false })\n\t\tsetIndex(messages, 'timestamp', { unique: false })\n\t}\n}\n\nconst setStore = (upgradeTransaction: IDBTransaction | null, name: string, options: IDBObjectStoreParameters) => {\n\treturn db.objectStoreNames.contains(name) ? upgradeTransaction?.objectStore(name) : db.createObjectStore(name, options)\n}\n\nconst setIndex = (store: IDBObjectStore, name: string, options: IDBIndexParameters) => {\n\tconst index = store.indexNames.contains(name) ? store.index(name) : undefined\n\tconst swap = index && (index.unique !== options.unique || index.multiEntry !== options.multiEntry)\n\tif (swap) { store.deleteIndex(name) }\n\tif (!index || swap) { store.createIndex(name, name, options) }\n}","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  \"xmlns:xlink\": \"http://www.w3.org/1999/xlink\",\n  viewBox: \"0 0 155 155\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"g\", {\n  fill: \"none\",\n  \"fill-rule\": \"evenodd\"\n}, [\n  /*#__PURE__*/_createElementVNode(\"image\", {\n    width: \"154\",\n    height: \"155\",\n    opacity: \".14\",\n    \"xlink:href\": \"data:image/png;base64,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\"\n  }),\n  /*#__PURE__*/_createElementVNode(\"path\", {\n    fill: \"#fff\",\n    d: \"M37 0v37H0V21.908c-.1-4.544 2.483-9.331 7.75-14.362C13.017 2.516 17.934 0 22.5 0H37zm22 0v96h95.993L155 27c-.204-5.678-2.756-11.598-7.653-17.759C142.449 3.081 136 0 128 0H59zM37.003 155v-37h-37v15.092c-.1 4.544 2.483 9.331 7.75 14.362 5.267 5.03 10.183 7.546 14.75 7.546h14.5zM118 155v-37h37v15.092c.1 4.544-2.483 9.331-7.75 14.362-5.267 5.03-10.184 7.546-14.75 7.546H118zM0 59h37v37H0zm59 59h37v37H59z\"\n  })\n], -1)\nconst _hoisted_3 = [\n  _hoisted_2\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_3))\n}\nexport default { render: render }","import TransportWebUSB from \"@ledgerhq/hw-transport-webusb\"\nimport ArweaveApp from \"@zondax/ledger-arweave\"\nimport { arweave, ArweaveAccount, ArweaveAPI, ArweaveProvider } from '@/store/ArweaveStore'\nimport LogoLedger from '@/assets/logos/ledger.svg?component'\nimport Transaction from 'arweave/web/lib/transaction'\nimport { ArweaveVerifier } from 'arweave-wallet-connector/lib/ArweaveWebWallet'\nimport { SignatureOptions } from 'arweave/web/lib/crypto/crypto-interface'\nimport { state } from '@/functions/Connect'\n\n\nasync function getTransport () {\n\tconsole.info(`Trying to connect via WebUSB...`)\n\treturn TransportWebUSB.create()\n}\n\nasync function getVersion () {\n\tconst transport = await getTransport()\n\tlet response = null\n\ttry {\n\t\tconst app = new ArweaveApp(transport)\n\t\tconsole.info(\"Requesting version\")\n\t\tresponse = await app.getVersion()\n\t\tif (response.returnCode !== ArweaveApp.ErrorCode.NoError) {\n\t\t\tconsole.error(`Error [${response.returnCode}] ${response.errorMessage}`)\n\t\t} else {\n\t\t\tconsole.info(`App Version ${response.major}.${response.minor}.${response.patch}`, response)\n\t\t}\n\t} finally { await transport.close() }\n\treturn response\n}\n\nasync function getAppInfo () {\n\tconst transport = await getTransport()\n\tlet response = null\n\ttry {\n\t\tconst app = new ArweaveApp(transport)\n\t\tconsole.info(\"Requesting app info\")\n\t\tresponse = await app.appInfo()\n\t\tif (response.returnCode !== ArweaveApp.ErrorCode.NoError) {\n\t\t\tconsole.error(`Error [${response.returnCode}] ${response.errorMessage}`)\n\t\t} else {\n\t\t\tconsole.info(\"Response received!\", response)\n\t\t}\n\t} finally { await transport.close() }\n\treturn response\n}\n\nasync function getInfo (request = false) {\n\tconst transport = await getTransport()\n\tlet response = null\n\ttry {\n\t\tconst app = new ArweaveApp(transport)\n\t\tconsole.info(\"Requesting address\")\n\t\tresponse = request ? await app.showAddress() : await app.getAddress()\n\t\tif (response.returnCode !== ArweaveApp.ErrorCode.NoError) {\n\t\t\tconsole.error(`Error [${response.returnCode}] ${response.errorMessage}`)\n\t\t} else {\n\t\t\tconsole.info(\"Response received!\", response)\n\t\t}\n\t} finally { await transport.close() }\n\treturn response\n}\n\nconst getAddress = async (request = false) => (await getInfo(request)).address\nconst getPublicKey = async () => (await getInfo()).owner\n\nasync function sign (tx: Transaction) {\n\tconst transport = await getTransport()\n\ttry {\n\t\tconst app = new ArweaveApp(transport)\n\t\tconst addr = await app.getAddress()\n\t\ttx.owner = addr.owner\n\t\tconst response = await app.sign(tx)\n\t\tconst id = await arweave.crypto.hash(response.signature)\n\t\tconst sigjs = {\n\t\t\towner: addr.owner,\n\t\t\tsignature: await arweave.utils.bufferTob64Url(response.signature),\n\t\t\tid: await arweave.utils.bufferTob64Url(id)\n\t\t}\n\t\tawait tx.setSignature(sigjs)\n\t\tconsole.info(\"Transaction signed\", tx)\n\t} finally { await transport.close() }\n\treturn tx\n}\n\n\n\n\n\nexport const metadata: Metadata = {\n\tisSupported: !!window.navigator.usb,\n\tname: 'Ledger',\n\ticon: LogoLedger,\n}\n\nexport const LedgerProviderData: ProviderData = {\n\t...metadata,\n\tgetImportData: async () => ({\n\t\tprovider: 'ledger',\n\t\tarweave: { key: await getAddress() },\n\t}),\n}\n\nexport class LedgerProvider extends ArweaveAccount implements Provider {\n\tstatic isProviderFor (wallet: WalletDataInterface) { return wallet.provider === 'ledger' }\n\tconstructor (wallet: WalletDataInterface) { super(wallet) }\n\tget metadata () { return metadata }\n\tasync signTransaction (tx: Transaction, options: SignatureOptions) {\n\t\tif (this.key !== await getAddress()) { throw new Error('Wrong account') }\n\t\tif (tx.owner && tx.owner !== await this.getPublicKey()) { throw 'error' }\n\t\treturn sign(tx)\n\t}\n\tasync getPublicKey () { return getPublicKey() }\n\tverifyMessage (message: Message | string) {\n\t\tconst verifier = new ArweaveVerifier()\n\t\t// @ts-ignore\n\t\tif (typeof message === 'string') { return !!verifier[message] }\n\t\t// @ts-ignore\n\t\treturn verifier[message.method]?.(...(message.params || [])) || false\n\t}\n\tasync runMessage (message: Message) {\n\t\tif (state.type === 'iframe') { return }\n\t\tif (!this.verifyMessage(message)) { throw 'params changed and are not valid anymore' }\n\t\tconst runner = new ArweaveAPI(this as any)\n\t\t// @ts-ignore\n\t\treturn runner[message.method]?.(...(message.params || []))\n\t}\n}","import { ArweaveProvider, arweave } from '@/store/ArweaveStore'\nimport { LedgerProvider } from '@/providers/Ledger'\nimport { Channel } from '@/functions/Channels'\nimport { passwordEncrypt, passwordDecrypt, pkcs8ToJwk } from '@/functions/Crypto'\nimport { download } from '@/functions/Utils'\nimport { generateMnemonic as generateM, validateMnemonic as validateM } from 'bip39-web-crypto'\n// @ts-ignore\nimport { getKeyPairFromMnemonic } from 'human-crypto-keys'\n// @ts-ignore\nimport wordlist from 'bip39-web-crypto/src/wordlists/english.json'\nimport { computed, reactive } from 'vue'\nimport type { JWKInterface } from 'arweave/web/lib/wallet'\n\n\n\nconst WalletsChannel = new Channel('wallets', undefined, [])\nexport const WalletsData = computed<WalletDataInterface[]>({\n\tget () { return WalletsChannel.state as any },\n\tset (value) { WalletsChannel.set(value) }\n})\n\n\n\nexport const ProviderRegistry = {\n\tarweave: ArweaveProvider,\n\tledger: LedgerProvider\n}\n\nfunction selectProvider (wallet: WalletDataInterface) {\n\tif (wallet.provider && ProviderRegistry[wallet.provider]) { return ProviderRegistry[wallet.provider] }\n\tfor (const provider of Object.values(ProviderRegistry)) { if (provider.isProviderFor?.(wallet)) { return provider } }\n\treturn ProviderRegistry['arweave']\n}\n\ntype GConstructor<T = {}> = new (...args: any[]) => T\nfunction setProvider<TBase extends GConstructor<Provider>> (Base: TBase) {\n\treturn class WalletProxy extends Base {\n\t\t#wallet: WalletDataInterface\n\t\tconstructor (...args: any[]) {\n\t\t\tsuper(...args)\n\t\t\tthis.#wallet = args[0]\n\t\t}\n\t\tget id () { return this.#wallet.id + '' }\n\t\tasync getPrivateKey () {\n\t\t\n\t\t}\n\t}\n}\n\n\n\nconst WalletsStore: { [id: string]: WalletProxy } = {}\nexport const Wallets = computed<WalletProxy[]>({\n\tget () {\n\t\tconst runningWallets = Object.keys(WalletsStore)\n\t\tconst storageWallets = WalletsData.value.map(w => w.id + '')\n\t\tfor (const id of [...runningWallets, ...storageWallets]) {\n\t\t\tif (runningWallets.includes(id) && !storageWallets.includes(id)) {\n\t\t\t\tWalletsStore[id].destructor?.()\n\t\t\t\tdelete WalletsStore[id]\n\t\t\t}\n\t\t\tif (!runningWallets.includes(id) && storageWallets.includes(id)) {\n\t\t\t\tconst wallet = WalletsData.value.find(w => w.id == id)!\n\t\t\t\tconst selectedProvider = selectProvider(wallet)!\n\t\t\t\tconst dynamicClass = setProvider(selectedProvider)\n\t\t\t\tWalletsStore[id] = new dynamicClass(wallet)\n\t\t\t}\n\t\t}\n\t\treturn Object.values(WalletsStore).sort((a, b) => WalletsData.value.findIndex(w => w.id == a.id) - WalletsData.value.findIndex(w => w.id == b.id))\n\t},\n\tset (value) {\n\t\tWalletsData.value = WalletsData.value.filter(w => value.find(v => v.id == w.id))\n\t\t\t.sort((a, b) => value.findIndex(w => w.id == a.id) - value.findIndex(w => w.id == b.id))\n\t}\n})\n\n\n\nexport function getWalletById (walletId?: number | string) {\n\treturn Wallets.value.find(wallet => wallet.id == walletId)\n}\n\nexport async function generateMnemonic () {\n\treturn generateM(undefined, undefined, wordlist)\n}\n\nexport async function validateMnemonic (mnemonic: string) {\n\treturn validateM(mnemonic, wordlist)\n}\n\nexport async function addMnemonic (mnemonic: string) {\n\tlet keyPair = await getKeyPairFromMnemonic(mnemonic, { id: 'rsa', modulusLength: 4096 }, { privateKeyFormat: 'pkcs8-der' })\n\tconst jwk = await pkcs8ToJwk(keyPair.privateKey)\n\tconsole.info('generated wallet')\n\treturn addWallet(jwk as JWKInterface)\n}\n\nexport async function addWallet (jwkObj: JWKInterface) {\n\tconst jwk = jwkObj || await arweave.wallets.generate()\n\tconst jwkString = JSON.stringify(jwk)\n\tconst existing = WalletsData.value.find(w => JSON.stringify(w.jwk) === jwkString)\n\tif (existing) { return existing.id }\n\tconst key = await arweave.wallets.jwkToAddress(jwk) as string\n\tif (!jwkObj) { download(key, jwkString) }\n\tconst wallet = { id: getNewId(), jwk }\n\tWalletsData.value.push(wallet)\n\treturn wallet.id\n}\n\nexport async function addAddress (addressSource: any) {\n\tlet key = typeof addressSource === 'string' && addressSource\n\tkey ||= addressSource.key\n\tkey ||= await addressSource.getActiveAddress?.()\n\tif (!key) { return }\n\tconst wallet = { id: getNewId(), arweave: { key } }\n\tWalletsData.value.push(wallet)\n\treturn wallet.id\n}\n\nexport async function addProvider (provider: ProviderData) {\n\tconst importData = await provider.getImportData()\n\tconst wallet = { id: getNewId(), ...importData }\n\tWalletsData.value.push(wallet)\n\treturn wallet.id\n}\n\nexport function deleteWallet (wallet: WalletDataInterface) {\n\tWallets.value = Wallets.value.filter(w => w.id !== wallet.id)\n}\n\nfunction getNewId () {\n\tlet i = 0\n\twhile (WalletsData.value.find(w => +w.id === i)) { i++ }\n\treturn i + ''\n}","import { getDB } from '@/store/IndexedDB'\nimport { Wallets } from '@/functions/Wallets'\n// @ts-ignore\nimport { v4 as uuidv4 } from 'uuid'\nimport { computed, reactive, watch } from 'vue'\nimport { awaitEffect } from '@/functions/AsyncData'\n\nconst errors = {\n\trejected: { code: 0, message: 'Rejected' },\n\t// JsonRpc spec\n\tparse: { code: -32700, message: 'Parse error' },\n\trequest: { code: -32600, message: 'Invalid request' },\n\tmethod: { code: -32601, message: 'Method not found' },\n\tparams: { code: -32602, message: 'Invalid params' },\n\tinternal: { code: -32603, message: 'Internal error' },\n}\nconst getError = (error: keyof typeof errors, data?: any) => ({ error: { ...errors[error], data } })\n\n\n\nexport default class JsonRpc {\n\tcallbacks\n\tstate\n\tstateWallet\n\twatchStop\n\n\tconstructor (callbacks: (message: any) => void, state: ConnectorState) {\n\t\tthis.callbacks = callbacks\n\t\tthis.state = state || reactive({})\n\t\tthis.state.messageQueue ??= []\n\t\tthis.stateWallet = computed(() => Wallets.value.find(w => w.id === this.state.walletId))\n\t\tthis.watchStop = watch(() => this.state.messageQueue, async () => {\n\t\t\tfor (const messageEntry of this.state.messageQueue) {\n\t\t\t\tif (!messageEntry || messageEntry.fulfilled) { continue }\n\t\t\t\tif (messageEntry.status === 'accepted') { this.runMessage(messageEntry) }\n\t\t\t\tif (messageEntry.status === 'rejected') {\n\t\t\t\t\tmessageEntry.fulfilled = true\n\t\t\t\t\tconst id = messageEntry.id\n\t\t\t\t\tawait this.updateMessage(messageEntry)\n\t\t\t\t\tif (id != null) { this.callbacks({ ...getError('rejected'), id }) }\n\t\t\t\t}\n\t\t\t}\n\t\t}, { deep: true })\n\t}\n\n\tasync pushMessage (message: unknown) {\n\t\tawait awaitEffect(() => this.stateWallet.value)\n\t\tif (!this.isMessage(message)) { return }\n\t\tif (this.state.messageQueue.find(m => m.id === message.id)) { return true }\n\t\tconst uuid = uuidv4() as string\n\t\tconst storedMessage: StoredMessage = {\n\t\t\tuuid,\n\t\t\torigin: this.state.origin,\n\t\t\tsessionId: '' + message.id + this.state.origin + this.state.session,\n\t\t\ttimestamp: Date.now(),\n\t\t\tstatus: undefined,\n\t\t\tfulfilled: false,\n\t\t\tmethod: message.method,\n\t\t\tparams: message.params,\n\t\t}\n\t\tconst messageEntry: MessageEntry = {\n\t\t\tuuid,\n\t\t\tid: message.id,\n\t\t\tstatus: undefined,\n\t\t\tfulfilled: false,\n\t\t}\n\t\tif (!await this.storeMessage(storedMessage)) { return true }\n\t\tthis.state.messageQueue.push(messageEntry)\n\t\treturn true\n\t}\n\n\tasync runMessage (messageEntry: MessageEntry) {\n\t\tconst id = messageEntry.id\n\t\tif (messageEntry.status !== 'accepted' || messageEntry.fulfilled) { return }\n\t\ttry {\n\t\t\tconst result = await this.stateWallet.value?.runMessage(await getMessage(messageEntry))\n\t\t\tif (result === undefined) { return }\n\t\t\tmessageEntry.fulfilled = true\n\t\t\tawait this.updateMessage(messageEntry)\n\t\t\tif (id != null) { this.callbacks({ result, id }) }\n\t\t} catch (e) {\n\t\t\tmessageEntry.fulfilled = true\n\t\t\tmessageEntry.status = 'error'\n\t\t\tconsole.error(e)\n\t\t\tawait this.updateMessage(messageEntry)\n\t\t\tif (id != null) { this.callbacks({ ...getError('internal'), id }) }\n\t\t}\n\t}\n\n\tisMessage (message: any) : message is Message {\n\t\tif (typeof message !== 'object') { return false }\n\t\tconst { method, params, id } = message\n\t\tif (id != null && typeof id !== 'number' && typeof id !== 'string') { return false }\n\t\tif (typeof method !== 'string') { id != null && this.callbacks({ ...getError('request'), id }); return false }\n\t\tif (!this.stateWallet.value?.verifyMessage(method)) { id != null && this.callbacks({ ...getError('method', method), id }); return false }\n\t\tif (params != null && !Array.isArray(params)) { id != null && this.callbacks({ ...getError('params', { type: 'Params must be sent as an array', method, params }), id }); return false }\n\t\tif (!this.stateWallet.value?.verifyMessage(message)) { id != null && this.callbacks({ ...getError('params', { type: 'Type error', method, params }), id }); return false }\n\t\treturn true\n\t}\n\t\n\tprivate async storeMessage (storedMessage: StoredMessage) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tconst db = await getDB()\n\t\t\tconst dbTx = db.transaction('messages', 'readwrite')\n\t\t\tdbTx.onerror = (e) => reject(e.target)\n\t\t\tdbTx.oncomplete = () => resolve(true)\n\t\t\tconst store = dbTx.objectStore('messages')\n\t\t\tconst index = store.index('sessionId')\n\t\t\tconst indexRequest = index.get(storedMessage.sessionId)\n\t\t\tindexRequest.onsuccess = () => {\n\t\t\t\tconst message = indexRequest.result\n\t\t\t\tif (message) { resolve(false); return }\n\t\t\t\tstore.add(storedMessage)\n\t\t\t}\n\t\t})\n\t}\n\t\n\tprivate async updateMessage (messageEntry: MessageEntry) {\n\t\treturn new Promise<void>(async (resolve, reject) => {\n\t\t\tconst db = await getDB()\n\t\t\tconst dbTx = db.transaction('messages', 'readwrite')\n\t\t\tdbTx.onerror = (e) => reject(e.target)\n\t\t\tdbTx.oncomplete = () => resolve()\n\t\t\tconst store = dbTx.objectStore('messages')\n\t\t\tconst storeRequest = store.get(messageEntry.uuid)\n\t\t\tstoreRequest.onsuccess = () => {\n\t\t\t\tconst message = storeRequest.result\n\t\t\t\tif (!message) { reject(new Error('message not found')); return }\n\t\t\t\tmessage.status = messageEntry.status\n\t\t\t\tmessage.fulfilled = messageEntry.fulfilled\n\t\t\t\tstore.put(message)\n\t\t\t}\n\t\t})\n\t}\n\n\tdestructor () { this.watchStop() }\n}\n\n\n\nexport async function getMessage (messageEntry: MessageEntry): Promise<StoredMessage> {\n\tconst db = await getDB()\n\tconst dbTx = db.transaction('messages', 'readonly')\n\tconst store = dbTx.objectStore('messages')\n\tconst storeRequest = store.get(messageEntry.uuid)\n\treturn new Promise(resolve => storeRequest.onsuccess = () => resolve(storeRequest.result))\n}","import Arweave from 'arweave'\nimport { state, states, connectorChannels, filterChannels, initConnectorChannel, hasStorageAccess, awaitStorageAccess } from '@/functions/Channels'\nimport JsonRpc from '@/functions/JsonRpc'\nimport { watch, watchEffect, computed, reactive, ref, Ref } from 'vue'\nimport { getWalletById } from '@/functions/Wallets'\nimport { awaitEffect } from '@/functions/AsyncData'\n\nlet windowRef: Window\nconst { origin, session } = state\nconst sharedState: Ref<ConnectorState | null> = ref(null)\nexport const connectors = computed(() => {\n\tconst allConnectors = Object.entries(connectorChannels.states)\n\t\t.filter(([key, val]) => key !== (origin + session) && val.walletId !== false)\n\t\t.map(([key, val]) => val)\n\tif (sharedState.value && sharedState.value?.walletId !== false) { allConnectors.push(sharedState.value) }\n\treturn allConnectors.sort((a, b) => a.timestamp - b.timestamp)\n})\n\n\n\nif (window.opener) {\n\tlocalStorage.setItem('global', '1')\n\tstate.type = 'popup'\n\twindowRef = window.opener\n\tinitConnector()\n} else if (window.parent && window.parent !== window) {\n\tstate.type = 'iframe'\n\twindowRef = window.parent\n\tinitConnector()\n} else {\n\tlocalStorage.setItem('global', '1')\n\tstate.type = 'client'\n\t// if sharedState.link was active for a connection and iframe is unloaded, disconnect\n\t// only show connections when popup or iframe is active\n}\n\nexport { state }\n\n\n\nasync function initConnector () {\n\tawait awaitStorageAccess()\n\tconst { state: connectorState, deleteChannel } = initConnectorChannel()\n\tsharedState.value = connectorState\n\tconst connect = () => {\n\t\t// todo reject transactions that are designated to current address\n\t\tif (!connectorState.walletId) { return }\n\t\tconst wallet = getWalletById(connectorState.walletId)\n\t\tif (!wallet) { return }\n\t\tpostMessage({ method: 'connect', params: wallet.key })\n\t}\n\tconst disconnect = () => { deleteChannel(); postMessage({ method: 'disconnect' }) }\n\twatch(() => connectorState.walletId, (id) => id === false ? disconnect() : connect())\n\twatchEffect(() => {\n\t\tconst linkedState = Object.entries(filterChannels({ origin, session, type: state.type === 'popup' ? 'iframe' : 'popup' }))[0]?.[1]\n\t\tif (linkedState) { connectorState.link = true }\n\t\tconst disconnectCondition = () => !linkedState && state.type === 'iframe' && connectorState.link && (connectorState.walletId == null || connectorState.walletId === false)\n\t\tif (disconnectCondition()) { setTimeout(() => disconnectCondition() && disconnect(), 500) }\n\t})\n\tconst jsonRpc = new JsonRpc(postMessage, connectorState)\n\twindow.addEventListener('message', (e) => {\n\t\tif (e.source !== windowRef || e.origin !== origin) { return }\n\t\tconsole.info(`${location.hostname}:${state.type}:`, e.data)\n\t\tjsonRpc.pushMessage(e.data)\n\t})\n\tif (state.type === 'iframe') { window.addEventListener('beforeunload', () => disconnect()) }\n\tpostMessage({ method: 'ready' })\n}\n\n\n\nfunction postMessage (message: Message) {\n\tif (!origin) { return }\n\twindowRef.postMessage({ ...message, jsonrpc: '2.0' }, origin)\n}\n\nexport function navigateBack () {\n\tif (!window.opener) { return }\n\ttry {\n\t\twindow.open('', 'parent')\n\t\twindow.opener.focus()\n\t} catch (e) { console.log(e) }\n}\n\nexport function navigateBackAvailable (origin, session) {\n\treturn window.opener && state.origin === origin && state.session === session\n}\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"#FFF\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M6 3H3v3c1.66 0 3-1.34 3-3zm8 0h-2a9 9 0 0 1-9 9v2c6.08 0 11-4.93 11-11zm-4 0H8c0 2.76-2.24 5-5 5v2c3.87 0 7-3.13 7-7zm0 18h2a9 9 0 0 1 9-9v-2c-6.07 0-11 4.93-11 11zm8 0h3v-3c-1.66 0-3 1.34-3 3zm-4 0h2c0-2.76 2.24-5 5-5v-2c-3.87 0-7 3.13-7 7z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"#FFF\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-8-2h2v-4h4v-2h-4V7h-2v4H7v2h4z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"#FFF\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46a.5.5 0 0 0-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65A.488.488 0 0 0 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1a.566.566 0 0 0-.18-.03c-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46a.5.5 0 0 0 .61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","<template>\n\t<nav class=\"toolbar\" id=\"nav\">\n\t\t<SlickList class=\"wallets\" :axis=\"axis\" :lockAxis=\"axis\" v-model:list=\"Wallets\" :pressDelay=\"150\" helperClass=\"dragging\" dir=\"ltr\">\n\t\t\t<SlickItem v-for=\"(wallet, i) in Wallets\" :index=\"i\" :key=\"wallet.key\" draggable=\"false\" class=\"drag-container\">\n\t\t\t\t<router-link :to=\"{ name: navTo, params: { walletId: wallet.id }, query: { ...$route.query } }\" custom v-slot=\"{ href, navigate }\">\n\t\t\t\t\t<button type=\"button\" class=\"icon wallet\" :href=\"href\" @click=\"select(wallet, navigate)\" :class=\"{ active: wallet.id == selected && links, accent: !links, verticalLayout }\" draggable=\"false\" @dragstart.prevent>\n\t\t\t\t\t\t<AddressIcon class=\"profile\" :address=\"wallet.key\" />\n\t\t\t\t\t</button>\n\t\t\t\t</router-link>\n\t\t\t</SlickItem>\n\t\t</SlickList>\n\t\t<transition name=\"fade-fast\">\n\t\t\t<div class=\"controls\" v-if=\"links\">\n\t\t\t\t<transition name=\"fade-fast\">\n\t\t\t\t\t<router-link v-if=\"connectors.length\" class=\"icon control\" :class=\"{ verticalLayout }\" to=\"/connect\" aria-label=\"Add Wallet\">\n\t\t\t\t\t\t<IconConnection class=\"small\" alt=\"Connections\" />\n\t\t\t\t\t</router-link>\n\t\t\t\t</transition>\n\t\t\t\t<router-link class=\"icon control\" :class=\"{ verticalLayout }\" to=\"/add\" aria-label=\"Add Wallet\">\n\t\t\t\t\t<IconAddBox class=\"small\" alt=\"Add Wallet\" />\n\t\t\t\t</router-link>\n\t\t\t\t<router-link class=\"icon control\" :class=\"{ verticalLayout }\" to=\"/settings\" aria-label=\"Settings\">\n\t\t\t\t\t<IconSettings class=\"small\" alt=\"Settings\" />\n\t\t\t\t</router-link>\n\t\t\t</div>\n\t\t</transition>\n\t\t<DragOverlay />\n\t</nav>\n</template>\n\n\n\n<script setup>\nimport AddressIcon from '@/components/atomic/AddressIcon.vue'\nimport DragOverlay from '@/components/atomic/DragOverlay.vue'\nimport { SlickList, SlickItem } from 'vue-slicksort'\nimport ArweaveStore from '@/store/ArweaveStore'\nimport InterfaceStore, { emitter } from '@/store/InterfaceStore'\nimport { connectors } from '@/functions/Connect'\nimport { Wallets } from '@/functions/Wallets'\nimport { computed, toRef } from 'vue'\nimport { useRoute } from 'vue-router'\n\nimport IconConnection from '@/assets/icons/connection.svg?component'\nimport IconAddBox from '@/assets/icons/add_box.svg?component'\nimport IconSettings from '@/assets/icons/settings.svg?component'\n\nconst route = useRoute()\nconst navTo = computed(() => route.matched[0]?.name === 'Wallet' ? null : 'TxList')\nconst select = (wallet, navigate) => {\n\temitter.emit('selectWallet', wallet?.key)\n\tif (links.value) { return navigate() }\n}\nconst selected = computed(() => {\n\tif (links.value) { return route.params.walletId }\n\treturn ArweaveStore.currentWallet?.id\n})\nconst verticalLayout = toRef(InterfaceStore.breakpoints, 'verticalLayout')\nconst axis = computed(() => verticalLayout.value ? 'x' : 'y')\nconst links = toRef(InterfaceStore.toolbar, 'links')\n</script>\n\n\n\n<style scoped>\n#nav {\n\tpadding: calc(var(--toolbar-spacing) / 2);\n\tuser-select: none;\n\tjustify-content: space-between;\n}\n\n.wallets {\n\tdisplay: flex;\n\tflex-direction: inherit;\n}\n\n.drag-container {\n\tz-index: 10;\n\tdisplay: flex;\n\twidth: calc(var(--toolbar-size) - var(--toolbar-spacing));\n\theight: calc(var(--toolbar-size) - var(--toolbar-spacing));\n}\n\n.icon {\n\tposition: relative;\n\tpadding: calc(var(--toolbar-spacing) / 2);\n\tflex: 1 1 0;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\ttransition: 0.2s ease;\n}\n\n.wallet {\n\topacity: var(--element-disabled-opacity);\n}\n\n.controls {\n\tdisplay: flex;\n\tflex-direction: inherit;\n\tmargin: calc(var(--toolbar-spacing) / 2) 0;\n}\n\n.verticalLayout .controls {\n\tmargin: 0 calc(var(--toolbar-spacing) / 2);\n}\n\n.control {\n\tborder-radius: var(--border-radius);\n\topacity: var(--element-secondary-opacity);\n\twidth: unset;\n\theight: unset;\n}\n\n.profile {\n\tbackground: var(--background3);\n\twidth: 100%;\n\theight: 100%;\n\tborder-radius: var(--border-radius3);\n\tposition: relative;\n\ttransition: 0.2s ease;\n}\n\n.small {\n\twidth: 24px;\n\theight: 24px;\n}\n\n.icon:hover {\n\topacity: 1;\n}\n\n.icon.active,\n.icon.accent,\n.icon.router-link-active {\n\topacity: 1;\n}\n\n.dragging .icon {\n\topacity: 1;\n}\n\n.dragging .icon > * {\n\ttransform: translateX(calc(100% + var(--toolbar-spacing) * 2));\n\tbox-shadow: 0 0 12px 1px #00000044;\n}\n\n[dir=\"rtl\"] .dragging .icon > * {\n\ttransform: translateX(calc(-100% - var(--toolbar-spacing) * 2));\n}\n\n.dragging .icon.verticalLayout > * {\n\ttransform: translateY(calc(100% + var(--toolbar-spacing) * 2));\n}\n\n.icon::before {\n\t--weight: 2px;\n\t--length: calc(100% - var(--toolbar-spacing));\n\t--offset: calc(var(--toolbar-spacing) / 2);\n\t--distance: -1px;\n\tcontent: '';\n\tbackground: var(--element-secondary);\n\tposition: absolute;\n\ttop: var(--offset);\n\tleft: var(--distance);\n\twidth: var(--weight);\n\theight: var(--length);\n\topacity: 0;\n\tborder-radius: 1px;\n\ttransition: 0.2s ease;\n}\n\n.icon.active::before,\n.icon.router-link-active::before {\n\topacity: 1;\n}\n\n.dragging .icon::before {\n\t--offset: 0;\n\t--distance: calc(var(--toolbar-spacing) / -2);\n\t--length: 100%;\n}\n\n.icon.verticalLayout::before {\n\ttop: var(--distance);\n\tleft: var(--offset);\n\twidth: var(--length);\n\theight: var(--weight);\n}\n\n[dir=\"rtl\"] .icon::before {\n\tleft: unset;\n\tright: var(--distance);\n}\n\n[dir=\"rtl\"] .icon.verticalLayout::before {\n\tleft: unset;\n\tright: var(--offset);\n}\n</style>\n","// src/client/build/vue.ts\nimport { ref } from \"vue\";\n\n// src/client/build/register.ts\nimport { Workbox, messageSW } from \"workbox-window\";\nvar autoUpdateMode = \"false\";\nvar auto = autoUpdateMode === \"true\";\nfunction registerSW(options = {}) {\n  const {\n    immediate = false,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisterError\n  } = options;\n  let wb;\n  let registration;\n  const updateServiceWorker = async (reloadPage = true) => {\n    if (!auto) {\n      if (reloadPage) {\n        wb == null ? void 0 : wb.addEventListener(\"controlling\", (event) => {\n          if (event.isUpdate)\n            window.location.reload();\n        });\n      }\n      if (registration && registration.waiting) {\n        await messageSW(registration.waiting, { type: \"SKIP_WAITING\" });\n      }\n    }\n  };\n  if (\"serviceWorker\" in navigator) {\n    wb = new Workbox(\"/sw.js\", { scope: \"/\" });\n    wb.addEventListener(\"activated\", (event) => {\n      if (event.isUpdate)\n        auto && window.location.reload();\n      else\n        onOfflineReady == null ? void 0 : onOfflineReady();\n    });\n    if (!auto) {\n      const showSkipWaitingPrompt = () => {\n        onNeedRefresh == null ? void 0 : onNeedRefresh();\n      };\n      wb.addEventListener(\"waiting\", showSkipWaitingPrompt);\n      wb.addEventListener(\"externalwaiting\", showSkipWaitingPrompt);\n    }\n    wb.register({ immediate }).then((r) => {\n      registration = r;\n      onRegistered == null ? void 0 : onRegistered(r);\n    }).catch((e) => {\n      onRegisterError == null ? void 0 : onRegisterError(e);\n    });\n  }\n  return updateServiceWorker;\n}\n\n// src/client/build/vue.ts\nfunction useRegisterSW(options = {}) {\n  const {\n    immediate = true,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisterError\n  } = options;\n  const needRefresh = ref(false);\n  const offlineReady = ref(false);\n  const updateServiceWorker = registerSW({\n    immediate,\n    onNeedRefresh() {\n      needRefresh.value = true;\n      onNeedRefresh == null ? void 0 : onNeedRefresh();\n    },\n    onOfflineReady() {\n      offlineReady.value = true;\n      onOfflineReady == null ? void 0 : onOfflineReady();\n    },\n    onRegistered,\n    onRegisterError\n  });\n  return {\n    updateServiceWorker,\n    offlineReady,\n    needRefresh\n  };\n}\nexport {\n  useRegisterSW\n};\n","<template>\n\t<transition name=\"fade\">\n\t\t<div v-if=\"updating\" class=\"overlay\"/>\n\t</transition>\n\t<transition name=\"fade-fast\">\n\t\t<button type=\"button\" class=\"update-available\" v-if=\"needRefresh\" @click=\"update()\">\n\t\t\t{{ updating ? 'Updating...' : 'Update ready, click to reload' }}\n\t\t</button>\n\t</transition>\n</template>\n\n\n\n<script setup>\nimport { state, states } from '@/functions/Channels'\nimport { useRegisterSW } from 'virtual:pwa-register/vue'\nimport { ref, watch } from 'vue'\n\nconst { needRefresh, updateServiceWorker } = useRegisterSW()\nlet autoUpdateActive = state.type !== 'popup'\nsetTimeout(() => autoUpdateActive = false, 10000)\nconst updating = ref(false)\nconst update = () => {\n\tupdating.value = true\n\tupdateServiceWorker()\n}\nwatch(() => needRefresh.value, (needed) => {\n\tconst otherInstance = Object.values(states).find(s => s.type !== 'popup')\n\tif (!needed || !autoUpdateActive || otherInstance) { return }\n\tupdate()\n}, { immediate: true })\nconst close = () => { needRefresh.value = false }\n</script>\n\n\n\n<style scoped>\n.overlay {\n\tposition: fixed;\n\tz-index: 10;\n\ttop: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground: #08080888;\n}\n\n.update-available {\n\tposition: fixed;\n\tz-index: 10;\n\tbottom: 0;\n\tbackground: var(--background);\n\tpadding: var(--spacing);\n\tborder-top: 0.5px solid var(--border);\n\tborder-right: 0.5px solid var(--border);\n\tborder-top-right-radius: var(--border-radius);\n}\n</style>","<template>\n\t<div class=\"app\" :class=\"{ verticalLayout, verticalContent, hasToolbar }\">\n\t\t<Toolbar v-if=\"hasToolbar\" class=\"box no-scrollbar\" @drop.prevent=\"droppedFiles\" />\n\t\t<router-view v-slot=\"{ Component }\" @drop.prevent=\"droppedFiles\">\n\t\t\t<div class=\"router\" :class=\"{ sticky }\">\n\t\t\t\t<transition :name=\"$route.meta.transition?.nameLayout\" mode=\"out-in\" @before-enter=\"emitter.emit('beforeEnter')\" @after-enter=\"emitter.emit('afterEnter')\" @before-leave=\"emitter.emit('beforeLeave')\" @after-leave=\"emitter.emit('afterLeave')\">\n\t\t\t\t\t<component :is=\"Component\" />\n\t\t\t\t</transition>\n\t\t\t\t<UpdateAvailable />\n\t\t\t</div>\n\t\t</router-view>\n\t\t<transition name=\"fade\">\n\t\t\t<div v-if=\"dragOverlay\" class=\"overlay\" />\n\t\t</transition>\n\t\t<div id=\"viewport\" />\n\t</div>\n</template>\n\n\n\n<script setup>\nimport Toolbar from '@/components/composed/Toolbar.vue'\nimport UpdateAvailable from '@/components/function/UpdateAvailable.vue'\nimport { Wallets } from '@/functions/Wallets'\nimport InterfaceStore, { emitter } from '@/store/InterfaceStore'\nimport { addWallet } from '@/functions/Wallets'\nimport { useRoute, useRouter } from 'vue-router'\nimport { ref, toRef } from 'vue'\n\nconst router = useRouter()\nconst route = useRoute()\n\nconst verticalLayout = toRef(InterfaceStore.breakpoints, 'verticalLayout')\nconst verticalContent = toRef(InterfaceStore.breakpoints, 'verticalContent')\nconst sticky = ref(false)\nemitter.on('beforeEnter', () => sticky.value = InterfaceStore.sticky)\nemitter.on('afterLeave', () => sticky.value = InterfaceStore.sticky)\nconst dragOverlay = toRef(InterfaceStore, 'dragOverlay')\nconst hasToolbar = toRef(InterfaceStore.toolbar, 'enabled')\nrouter.afterEach((to, from) => {\n\tdocument.title = to.meta.title ? to.meta.title + ' | Arweave Wallet' : 'Arweave Wallet'\n\tconst routes = router.options.routes\n\tconst findRecursiveHelper = (name, arr) => {\n\t\tconst result = findRecursive(name, arr)\n\t\treturn result.found ? result : null\n\t}\n\tconst findRecursive = (name, arr, position = 0, depth = 0) => {\n\t\tfor (const route of arr) {\n\t\t\tif (route.name === name) { return { found: true, position, depth } }\n\t\t\tposition++\n\t\t\tif (route.children) {\n\t\t\t\tconst recResult = findRecursive(name, route.children, position, depth + 1)\n\t\t\t\tposition += recResult.position\n\t\t\t\tif (recResult.found) { return { found: true, position, depth: recResult.depth } }\n\t\t\t}\n\t\t}\n\t\treturn { found: false, position, depth }\n\t}\n\tconst param = {\n\t\tto: findRecursiveHelper(to.name, routes),\n\t\tfrom: findRecursiveHelper(from.name, routes)\n\t}\n\tto.meta.transition = {}\n\tto.meta.transition.param = param\n\tto.meta.transition.name = param.to.position < param.from.position ? 'slide-down' : 'slide-up'\n\tto.meta.transition.nameLayout = convertTransitionName(to.meta.transition.name)\n\tif (to.params.walletId && from.params.walletId && to.params.walletId !== from.params.walletId) {\n\t\tconst toWallet = Wallets.value.findIndex(el => el.id == to.params.walletId)\n\t\tconst fromWallet = Wallets.value.findIndex(el => el.id == from.params.walletId)\n\t\tconst transition = toWallet < fromWallet ? 'slide-down' : 'slide-up'\n\t\tto.meta.transition.nameWallet = convertTransitionName(transition)\n\t}\n})\n\nconst convertTransitionName = (name) => {\n\tif (verticalLayout.value) {\n\t\tif (name === 'slide-down') { return 'slide-right' }\n\t\tif (name === 'slide-up') { return 'slide-left' }\n\t}\n\treturn name\n}\n\nemitter.on('afterEnter', () => route.meta.transition = {})\n\nconst droppedFiles = async (e) => {\n\tconst walletPromises = []\n\tfor (const file of e.dataTransfer.files) {\n\t\tconst walletPromise = addWallet(JSON.parse(await file.text()))\n\t\twalletPromises.push(walletPromise)\n\t}\n\tconst ids = (await Promise.all(walletPromises)).filter(e => e !== null).map(e => e.id)\n\tif (ids.length > 0) {\n\t\trouter.push({ name: 'EditWallet', query: { wallet: ids } })\n\t}\n}\n</script>\n\n\n\n<style scoped>\n.app {\n\tdisplay: flex;\n}\n\n.app:before {\n\toverflow: hidden;\n\tcontent: \"\";\n\tdisplay: block;\n\tposition: fixed;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\twidth: 100vw;\n\theight: 100%;\n\tz-index: -10;\n\tbackground: url(\"@/assets/background.svg\") no-repeat center center;\n\tbackground-size: cover;\n}\n\n.toolbar {\n\tflex: 0 0 auto;\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: auto;\n\toverflow: overlay;\n\tz-index: 10;\n\tbackground: var(--background);\n\theight: 100%;\n\twidth: var(--toolbar-size);\n\tposition: fixed;\n}\n\n.verticalLayout .toolbar {\n\theight: var(--toolbar-size);\n\twidth: 100%;\n\tflex-direction: row;\n}\n\n.router {\n\tposition: relative;\n\t--current-vh: 100vh;\n\t--current-vw: 100vw;\n\toverflow: hidden;\n}\n\n.router.sticky {\n\toverflow: unset;\n}\n\n#viewport {\n\tposition: fixed;\n\ttop: 0;\n}\n\n.router,\n#viewport {\n\twidth: 100%;\n\tmin-width: 0;\n}\n\n.hasToolbar .router,\n.hasToolbar #viewport {\n\tpadding-inline-start: var(--toolbar-size);\n}\n\n.hasToolbar:not(.verticalLayout) .router,\n\n.hasToolbar:not(.verticalLayout) #viewport {\n\t--current-vw: calc(100vw - var(--toolbar-size));\n\n}\n\n.hasToolbar.verticalLayout .router,\n.hasToolbar.verticalLayout #viewport {\n\t--current-vh: calc(100vh - var(--toolbar-size));\n\tpadding-inline-start: 0;\n\tpadding-top: var(--toolbar-size);\n}\n\n.overlay {\n\tpointer-events: none;\n\tposition: fixed;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tz-index: 1;\n\tbackground: #00000066;\n}\n</style>","const scriptRel = 'modulepreload';const seen = {};const base = '/';export const __vitePreload = function preload(baseModule, deps) {\n    // @ts-ignore\n    if (!__VITE_IS_MODERN__ || !deps || deps.length === 0) {\n        return baseModule();\n    }\n    return Promise.all(deps.map((dep) => {\n        // @ts-ignore\n        dep = `${base}${dep}`;\n        // @ts-ignore\n        if (dep in seen)\n            return;\n        // @ts-ignore\n        seen[dep] = true;\n        const isCss = dep.endsWith('.css');\n        const cssSelector = isCss ? '[rel=\"stylesheet\"]' : '';\n        // @ts-ignore check if the file is already preloaded by SSR markup\n        if (document.querySelector(`link[href=\"${dep}\"]${cssSelector}`)) {\n            return;\n        }\n        // @ts-ignore\n        const link = document.createElement('link');\n        // @ts-ignore\n        link.rel = isCss ? 'stylesheet' : scriptRel;\n        if (!isCss) {\n            link.as = 'script';\n            link.crossOrigin = '';\n        }\n        link.href = dep;\n        // @ts-ignore\n        document.head.appendChild(link);\n        if (isCss) {\n            return new Promise((res, rej) => {\n                link.addEventListener('load', res);\n                link.addEventListener('error', rej);\n            });\n        }\n    })).then(() => baseModule());\n}","<template>\n\t<div class=\"folding-layout\">\n\t\t<div class=\"left no-scrollbar\" :class=\"{ hasRight: hasRight() }\">\n\t\t\t<slot name=\"left\" />\n\t\t</div>\n\t\t<div class=\"right\">\n\t\t\t<slot name=\"right\" />\n\t\t</div>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { onUnmounted, toRef, useSlots, watch } from 'vue'\n\nconst slots = useSlots()\n\nconst verticalContent = toRef(InterfaceStore.breakpoints, 'verticalContent')\nwatch(() => verticalContent.value, (val) => val ? InterfaceStore.sticky = false : InterfaceStore.sticky = true, { immediate: true })\nonUnmounted(() => InterfaceStore.sticky = false)\nconst hasLeft = () => !!slots.left\nconst hasRight = () => !!slots.right\n</script>\n\n\n\n<style scoped>\n.folding-layout {\n\twidth: 100%;\n\tposition: relative;\n\tdisplay: flex;\n}\n\n.verticalContent .folding-layout {\n\tflex-direction: column;\n}\n\n.left {\n\toverflow: auto;\n\theight: var(--current-vh);\n\tmin-width: 0;\n\tposition: sticky;\n\ttop: 0;\n}\n\n.left.hasRight {\n\twidth: 40vw;\n\tz-index: 1;\n}\n\n.verticalContent .left {\n\tposition: relative;\n\twidth: 100%;\n\theight: auto;\n}\n\n.right {\n\twidth: 100%;\n\tmin-width: 0;\n\tflex: 1 1 0;\n}\n\n.verticalContent .right {\n\tpadding-inline-start: 0;\n}\n</style>","<template>\n\t<transition name=\"fade-fast\" mode=\"out-in\">\n\t\t<span class=\"ar\" :key=\"amountRounded\">\n\t\t\t{{ amountRounded || '' }}\n\t\t\t<span v-if=\"amountRounded\" class=\"symbol\">AR</span>\n\t\t</span>\n\t</transition>\n</template>\n\n\n\n<script setup>\nimport { computed } from 'vue'\n\nconst props = defineProps(['ar'])\nconst amountRounded = computed(() => {\n\tif (props.ar == null) { return null }\n\tconst FractionDigits = new Intl.NumberFormat(navigator.languages, { maximumFractionDigits: 3 }).format(props.ar)\n\tconst SignificantDigits = new Intl.NumberFormat(navigator.languages, { maximumSignificantDigits: 1 }).format(props.ar)\n\treturn FractionDigits.length >= SignificantDigits.length ? FractionDigits : SignificantDigits\n})\n</script>\n\n\n\n<style scoped>\n.ar {\n\twhite-space: nowrap;\n\tdisplay: inline-block;\n}\n\n.ar::before {\n\tcontent: \"\\200b\";\n}\n\n.symbol {\n\tfont-size: 0.75em;\n}\n</style>\n","<template>\n\t<transition name=\"fade-fast\" mode=\"out-in\">\n\t\t<span class=\"locale-currency\" :key=\"converted\">{{ converted || '' }}</span>\n\t</transition>\n</template>\n\n\n\n<script setup>\nimport { currency } from '@/store/ArweaveStore'\nimport { computed } from 'vue'\n\nconst props = defineProps(['ar'])\nconst currencyType = computed(() => currency.settings.currency)\nconst converted = computed(() => {\n\tif (props.ar == null || !currency.currentPrice.value) { return }\n\tconst num = currency.currentPrice.value * props.ar\n\treturn new Intl.NumberFormat(navigator.languages, { style: 'currency', currency: currencyType.value }).format(num)\n})\n</script>\n\n\n\n<style scoped>\n.locale-currency {\n\twhite-space: nowrap;\n\tdisplay: inline-block;\n}\n\n.locale-currency::before {\n\tcontent: \"\\200b\";\n}\n</style>","<template>\n\t<div class=\"address ellipsis\">\n\t\t<span class=\"address-tx ellipsis\">\n\t\t\t<slot></slot>\n\t\t\t<span class=\"text ellipsis\">{{ address }}</span>\n\t\t\t<svg v-if=\"arverify?.verified\" class=\"arverify\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n\t\t\t\t<path fill-rule=\"evenodd\" fill=\"currentColor\" d=\"M8.533.133a1.75 1.75 0 00-1.066 0l-5.25 1.68A1.75 1.75 0 001 3.48V7c0 1.566.32 3.182 1.303 4.682.983 1.498 2.585 2.813 5.032 3.855a1.7 1.7 0 001.33 0c2.447-1.042 4.049-2.357 5.032-3.855C14.68 10.182 15 8.566 15 7V3.48a1.75 1.75 0 00-1.217-1.667L8.533.133zm-.61 1.429a.25.25 0 01.153 0l5.25 1.68a.25.25 0 01.174.238V7c0 1.358-.275 2.666-1.057 3.86-.784 1.194-2.121 2.34-4.366 3.297a.2.2 0 01-.154 0c-2.245-.956-3.582-2.104-4.366-3.298C2.775 9.666 2.5 8.36 2.5 7V3.48a.25.25 0 01.174-.237l5.25-1.68zM11.28 6.28a.75.75 0 00-1.06-1.06L7.25 8.19l-.97-.97a.75.75 0 10-1.06 1.06l1.5 1.5a.75.75 0 001.06 0l3.5-3.5z\" />\n\t\t\t</svg>\n\t\t</span>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport ProfileStore, { getArverify } from '@/store/ProfileStore'\nimport { computed, watch } from 'vue'\n\nconst props = defineProps(['address'])\n\nconst arverify = computed(() => ProfileStore.arverify[props.address])\nwatch(() => props.address, async () => {\n\tgetArverify(props.address)\n}, { immediate: true })\n</script>\n\n\n\n<style scoped>\n.address-tx {\n\tdisplay: flex;\n\talign-items: center;\n\tuser-select: all;\n}\n\n.text {\n\tfont-family: monospace, monospace;\n\tfont-size: 1em;\n}\n\n.arverify {\n\tflex: 0 0 auto;\n\theight: 1em;\n\tmargin-inline-start: 4px;\n}\n</style>","<template>\n\t<span class=\"icon\">\n\t\t<transition name=\"fade-fast\" mode=\"out-in\">\n\t\t\t<component v-if=\"component\" :is=\"component\" />\n\t\t\t<svg v-else-if=\"iconData == 'loader'\" class=\"loader\" height=\"100\" width=\"100\" viewBox=\"0 0 100 100\" :class=\"{ spin: progress == null }\">\n\t\t\t\t<circle stroke=\"#ffffff22\" :stroke-width=\"thickness\" fill=\"transparent\" :r=\"normalizedRadius\" :cx=\"50\" :cy=\"50\" />\n\t\t\t\t<circle stroke=\"currentColor\" :stroke-dasharray=\"circumference + ' ' + circumference\" :style=\"{ strokeDashoffset }\" :stroke-width=\"thickness\" stroke-linecap=\"round\" fill=\"transparent\" :r=\"normalizedRadius\" :cx=\"50\" :cy=\"50\" @animationiteration=\"finishAnimation = false\" :class=\"{ spin: progress == null || finishAnimation }\" />\n\t\t\t</svg>\n\t\t\t<span v-else-if=\"isSymbol\" :key=\"'s' + iconData\" class=\"symbol no-select\">{{ iconData }}</span>\n\t\t\t<img v-else v-show=\"loaded\" @load=\"loaded = true\" class=\"img no-select\" :key=\"iconData\" :src=\"iconData\" draggable=\"false\" />\n\t\t</transition>\n\t</span>\n</template>\n\n\n\n<script setup>\nimport { computed, isRef, ref, watch } from 'vue'\n\nconst props = defineProps(['icon', 'progress'])\n\nconst iconData = computed(() => isRef(props.icon) ? props.icon.value : props.icon)\nconst component = computed(() => typeof iconData.value === 'object' ? iconData.value : null)\nconst isSymbol = computed(() => typeof iconData.value === 'string' && iconData.value.length <= 2)\nconst loaded = ref(false)\nwatch(() => iconData.value, () => loaded.value = false)\nconst thickness = 5\nconst normalizedRadius = 50 - thickness / 2\nconst circumference = normalizedRadius * 2 * Math.PI\nconst strokeDashoffset = computed(() => circumference - (props.progress ?? 25) / 100 * circumference)\nconst finishAnimation = ref(false)\nwatch(() => props.progress, (value, oldValue) => {\n\tif (value != null && oldValue == null) { finishAnimation.value = true }\n})\n</script>\n\n\n\n<style scoped>\n.icon {\n\tflex: 0 0 auto;\n\theight: 1em;\n\twidth: 1em;\n\tborder-radius: inherit;\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: center;\n\ttransition: 0.3s ease;\n}\n\n.img {\n\twidth: inherit;\n\theight: inherit;\n\tobject-fit: contain;\n}\n\n.symbol {\n\tfont-size: 1em;\n}\n\n.loader {\n\ttransform: rotate(-45deg);\n\ttransition: transform 0.5s ease;\n}\n\n.loader.spin {\n\ttransform: rotate(-135deg);\n}\n\ncircle.spin {\n\tanimation: loader-animation 2s infinite linear;\n\t/* animation-timing-function: cubic-bezier(0.6, 0.4, 0.4, 0.6); */\n}\n\n@keyframes loader-animation {\n\t0% {\n\t\ttransform: rotate(0deg);\n\t}\n\t100% {\n\t\ttransform: rotate(360deg);\n\t}\n}\n\nsvg {\n\twidth: 100%;\n\theight: 100%;\n}\n\ncircle {\n\ttransition: stroke-dashoffset 0.5s ease;\n\ttransform-origin: 50% 50%;\n}\n</style>","<template>\n\t<transition name=\"fade-fast\" mode=\"out-in\">\n\t\t<div class=\"wallet-info\" :key=\"wallet.key\">\n\t\t\t<div class=\"name\">\n\t\t\t\t<Icon class=\"logo\" :icon=\"walletInfo.icon\" />\n\t\t\t\t<div>{{ arweaveId?.Name || walletInfo.name }}</div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<Address class=\"secondary-text\" :address=\"wallet.key\" />\n\t\t\t</div>\n\t\t</div>\n\t</transition>\n</template>\n\n\n\n<script setup>\nimport Address from '@/components/atomic/Address.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport ProfileStore, { getArweaveId } from '@/store/ProfileStore'\nimport { computed, watch } from 'vue'\nimport LogoArweave from '@/assets/logos/arweave.svg?component'\n\nconst props = defineProps(['wallet'])\nconst arweaveId = computed(() => ProfileStore.arweaveId[props.wallet.key])\nconst walletInfo = computed(() => props.wallet.metadata || { icon: LogoArweave, name: 'Arweave wallet' })\nwatch(() => props.wallet.key, () => getArweaveId(props.wallet.key))\n</script>\n\n\n\n<style scoped>\n.name {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.logo {\n\tmargin-inline-end: 1em;\n}\n</style>\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"#FFF\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"#FFF\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","<template>\n\t<div class=\"wallet\">\n\t\t<FoldingLayout v-if=\"wallet\">\n\t\t\t<template #left>\n\t\t\t\t<transition :name=\"$route.meta.transition?.nameWallet\" mode=\"out-in\">\n\t\t\t\t\t<div class=\"user-info flex-column\" :key=\"wallet.key\">\n\t\t\t\t\t\t<Balance :wallet=\"wallet\" />\n\t\t\t\t\t\t<div class=\"actions\">\n\t\t\t\t\t\t\t<Action v-for=\"action in actions\" :key=\"action.name\" :to=\"{ name: action.name, query: { ...$route.query } }\" :icon=\"action.icon\" replace>{{ action.text }}</Action>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</transition>\n\t\t\t</template>\n\t\t\t<template #right>\n\t\t\t\t<div class=\"wallet-view\">\n\t\t\t\t\t<router-view v-slot=\"{ Component }\" class=\"router-view\" @before-enter=\"emitter.emit('beforeEnter')\">\n\t\t\t\t\t\t<transition :name=\"$route.meta.transition?.nameWallet || $route.meta.transition?.name\" mode=\"out-in\" @before-enter=\"emitter.emit('beforeEnter')\" @after-enter=\"emitter.emit('afterEnter')\" @before-leave=\"emitter.emit('beforeLeave')\" @after-leave=\"emitter.emit('afterLeave')\">\n\t\t\t\t\t\t\t<component :is=\"Component\" :key=\"$route.path.split('/').slice(0, 3).join('')\" />\n\t\t\t\t\t\t</transition>\n\t\t\t\t\t</router-view>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</FoldingLayout>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport FoldingLayout from '@/components/layout/FoldingLayout.vue'\nimport Balance from '@/components/composed/Balance.vue'\nimport Action from '@/components/atomic/Action.vue'\nimport { Wallets } from '@/functions/Wallets'\nimport { emitter } from '@/store/InterfaceStore'\nimport { watch } from 'vue'\n\nimport IconNorthEast from '@/assets/icons/north_east.svg?component'\nimport IconSwap from '@/assets/icons/swap.svg?component'\nimport IconCircle from '@/assets/icons/cloud_circle.svg?component'\n\nconst props = defineProps({ wallet: Object })\nconst actions = [\n\t{ name: 'Send', icon: IconNorthEast, text: 'Send' },\n\t{ name: 'TxList', icon: IconSwap, text: 'Transactions' },\n\t// { name: 'Tokens', icon: IconCircle, text: 'Tokens' },\n]\n</script>\n\n\n\n<style scoped>\n.wallet {\n\twidth: 100%;\n}\n\n.user-info {\n\tmax-width: var(--column-width);\n\tpadding: var(--spacing);\n\tpadding-inline-end: 0;\n}\n\n.verticalContent .user-info {\n\tmax-width: 100%;\n\tpadding: var(--spacing);\n}\n\n.wallet-view {\n\tpadding: var(--spacing);\n}\n\n.router-view {\n\tmax-width: var(--column-large-width);\n}\n\n.verticalContent .router-view {\n\tmax-width: 100%;\n}\n\n.actions {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.action {\n\tpadding: var(--spacing);\n\tborder-radius: var(--border-radius);\n}\n</style>","<template>\n\t<div class=\"tx-icon\" :class=\"{ isPending }\" :style=\"styleObject\">\n\t\t<svg v-if=\"direction === 'in' && !isData\" fill=\"currentColor\" class=\"tx-svg\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t\t<rect x=\"0\" y=\"0\" width=\"24\" height=\"24\" style=\"fill:none;fill-rule:nonzero;\" />\n\t\t\t<g transform=\"matrix(6.12323e-17,1,-1,6.12323e-17,24,0)\">\n\t\t\t\t<path d=\"M16.01,11L4,11L4,13L16.01,13L16.01,16L20,12L16.01,8L16.01,11Z\" style=\"fill-rule:nonzero;\" />\n\t\t\t</g>\n\t\t</svg>\n\t\t<svg v-else-if=\"direction === 'out' && !isData\" fill=\"currentColor\" class=\"tx-svg\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t\t<rect x=\"0\" y=\"0\" width=\"24\" height=\"24\" style=\"fill:none;fill-rule:nonzero;\" />\n\t\t\t<g transform=\"matrix(6.12323e-17,-1,1,6.12323e-17,0,24)\">\n\t\t\t\t<path d=\"M16.01,11L4,11L4,13L16.01,13L16.01,16L20,12L16.01,8L16.01,11Z\" style=\"fill-rule:nonzero;\" />\n\t\t\t</g>\n\t\t</svg>\n\t\t<svg v-else-if=\"direction === 'in' && !isValue\" fill=\"currentColor\" class=\"tx-svg\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t\t<path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n\t\t\t<path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3zm-5.55-8h-2.9v3H8l4 4 4-4h-2.55z\" />\n\t\t</svg>\n\t\t<svg v-else-if=\"direction === 'out' && !isValue\" fill=\"currentColor\" class=\"tx-svg\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t\t<path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n\t\t\t<path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3zM8 13h2.55v3h2.9v-3H16l-4-4z\" />\n\t\t</svg>\n\t\t<svg v-else-if=\"direction === 'in'\" fill=\"currentColor\" class=\"tx-svg\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t\t<g>\n\t\t\t\t<rect fill=\"none\" height=\"24\" width=\"24\" />\n\t\t\t\t<path d=\"M12,4c4.41,0,8,3.59,8,8s-3.59,8-8,8s-8-3.59-8-8S7.59,4,12,4 M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10 c5.52,0,10-4.48,10-10C22,6.48,17.52,2,12,2L12,2z M13,12l0-4h-2l0,4H8l4,4l4-4H13z\" />\n\t\t\t</g>\n\t\t</svg>\n\t\t<svg v-else-if=\"direction === 'out'\" fill=\"currentColor\" class=\"tx-svg\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t\t<g>\n\t\t\t\t<rect fill=\"none\" height=\"24\" width=\"24\" />\n\t\t\t\t<path d=\"M12,20c-4.41,0-8-3.59-8-8s3.59-8,8-8s8,3.59,8,8S16.41,20,12,20 M12,22c5.52,0,10-4.48,10-10c0-5.52-4.48-10-10-10 C6.48,2,2,6.48,2,12C2,17.52,6.48,22,12,22L12,22z M11,12l0,4h2l0-4h3l-4-4l-4,4H11z\" />\n\t\t\t</g>\n\t\t</svg>\n\t\t<transition name=\"fade\">\n\t\t\t<Icon v-if=\"isPending || uploadProgress\" icon=\"loader\" :progress=\"uploadProgress\" class=\"loader\"></Icon>\n\t\t</transition>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport Icon from '@/components/atomic/Icon.vue'\nimport ArweaveStore from '@/store/ArweaveStore'\nimport { computed } from 'vue'\n\nconst props = defineProps(['tx', 'direction'])\n\nconst isData = computed(() => (props.tx.data?.size || props.tx.data_size) > 0)\nconst isValue = computed(() => (props.tx.quantity?.winston || props.tx.quantity) > 0)\nconst isPending = computed(() => !props.tx.id || !props.tx.block)\nconst uploadProgress = computed(() => ArweaveStore.uploads[props.tx.id]?.upload)\nconst styleObject = computed(() => ({ 'color': isData.value && !isValue.value ? 'var(--orange)' : props.direction === 'in' ? 'var(--green)' : 'var(--red)' }))\n</script>\n\n\n\n<style scoped>\n.tx-icon {\n\tposition: relative;\n}\n\n.tx-svg {\n\tpadding: 8px;\n\twidth: 100%;\n\theight: 100%;\n\ttransition: padding 0.4s ease;\n}\n\n.isPending .tx-svg {\n\tpadding: 25%;\n}\n\n.loader {\n\twidth: 48px;\n\theight: 48px;\n}\n\n.loader {\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n}\n</style>","<template>\n\t<span>{{ date }} {{ time }}</span>\n</template>\n\n\n\n<script setup>\nimport { computed } from 'vue'\n\nconst props = defineProps(['timestamp'])\n\nconst date = computed(() => new Date(props.timestamp).toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' }))\nconst time = computed(() => new Date(props.timestamp).toLocaleTimeString())\n</script>","<template>\n\t<router-link :to=\"to\" custom v-slot=\"{ href, navigate }\">\n\t\t<component :is=\"tag\" :href=\"to && !$attrs.disabled ? href : null\" @click=\"(...params) => to && navigate(...params)\" v-bind=\"{ ...getScopeAttrs(), ...$attrs }\" :class=\"class\" :style=\"style\" :type=\"tag === 'button' ? 'button' : $attrs.type\">\n\t\t\t<slot />\n\t\t</component>\n\t</router-link>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport { computed, HTMLAttributes, StyleValue, useAttrs } from 'vue'\nimport { RouteLocationRaw } from 'vue-router'\n\nconst props = defineProps<{\n\tto?: RouteLocationRaw\n\tclass?: HTMLAttributes['class']\n\tstyle?: StyleValue\n}>()\nconst attrs = useAttrs()\n\nconst tag = computed(() => {\n\tif (!props.to && attrs.onClick) { return 'button' }\n\tif (attrs.disabled) { return 'span' }\n\treturn 'a'\n})\n</script>\n\n\n\n<script lang=\"ts\">\nexport default {\n\tinheritAttrs: false,\n\tmethods: {\n\t\tgetScopeAttrs () {\n\t\t\tconst scopeAttr = (this as any).$parent.$options.__scopeId\n\t\t\treturn scopeAttr ? { [scopeAttr]: '' } : {}\n\t\t}\n\t}\n}\n</script>","<template>\n\t<div class=\"tx-card no-scrollbar\" :class=\"{ verticalElement }\">\n\t\t<div class=\"tx-content\" :class=\"{ 'flex-row': !verticalElement, 'flex-column': verticalElement }\">\n\t\t\t<Link class=\"left reset\" :to=\"tx.id ? { name: 'Tx', params: { txId: tx.id } } : ''\">\n\t\t\t\t<TxIcon class=\"tx-icon\" :tx=\"tx\" :direction=\"direction\" />\n\t\t\t\t<div class=\"margin\" />\n\t\t\t\t<div>\n\t\t\t\t\t<Amount v-if=\"isValue\" :ar=\"value\" />\n\t\t\t\t\t<div v-else-if=\"isData\">{{ dataType || 'Data' }}</div>\n\t\t\t\t\t<div v-else>Transaction</div>\n\t\t\t\t\t<div class=\"secondary-text\">{{ context }}</div>\n\t\t\t\t</div>\n\t\t\t</Link>\n\t\t\t<div class=\"right\">\n\t\t\t\t<div class=\"right-content\">\n\t\t\t\t\t<div class=\"right-text\">\n\t\t\t\t\t\t<Address v-if=\"relativeAddress\" class=\"address\" :address=\"relativeAddress\" />\n\t\t\t\t\t\t<!-- <div v-else class=\"ellipsis\">\n\t\t\t\t\t\t\t<Amount :ar=\"tx.fee.ar\" />\n\t\t\t\t\t\t</div>-->\n\t\t\t\t\t\t<div class=\"secondary-text ellipsis\">\n\t\t\t\t\t\t\t<template v-if=\"status\">{{ status }}</template>\n\t\t\t\t\t\t\t<Date v-else-if=\"timestamp\" :timestamp=\"timestamp\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"margin\" />\n\t\t\t\t</div>\n\t\t\t\t<AddressIcon :key=\"relativeAddress\" :address=\"relativeAddress\" :class=\"{ empty: !relativeAddress }\" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport Address from '@/components/atomic/Address.vue'\nimport TxIcon from '@/components/atomic/TxIcon.vue'\nimport AddressIcon from '@/components/atomic/AddressIcon.vue'\nimport Date from '@/components/atomic/Date.vue'\nimport Link from '@/components/function/Link.vue'\nimport Amount from '@/components/composed/Amount.vue'\nimport ArweaveStore, { arweave } from '@/store/ArweaveStore'\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { unpackTags } from '@/functions/Transactions'\nimport { computed } from 'vue'\n\nconst props = defineProps(['tx', 'currentAddress'])\n\nconst tags = computed(() => unpackTags(props.tx.tags))\nconst timestamp = computed(() => props.tx.block?.timestamp * 1000)\nconst status = computed(() => {\n\tif (ArweaveStore.uploads[props.tx.id]) { return `Uploading ${ArweaveStore.uploads[props.tx.id].upload}%` }\n\tif (!props.tx.id) { return 'Awaiting approval' }\n\tif (!props.tx.block) { return 'Pending' }\n})\nconst direction = computed(() => props.tx.recipient && props.tx.recipient === props.currentAddress ? 'in' : 'out')\nconst relativeAddress = computed(() => direction.value === 'in' ? props.tx.owner.address : props.tx.recipient || props.tx.target)\nconst value = computed(() => props.tx.quantity?.ar || arweave.ar.winstonToAr(props.tx.quantity))\nconst isValue = computed(() => value.value > 0)\nconst isData = computed(() => (props.tx.data?.size || props.tx.data_size) > 0)\nconst dataType = computed(() => {\n\tconst type = tags.value['Content-Type']\n\tif (type === 'application/x.arweave-manifest+json') { return 'Folder' }\n\treturn type?.split('/').join(' ')\n})\nconst dataInfo = computed(() => tags.value['Service'] || tags.value['App-Name'] || tags.value['User-Agent']?.split('/')[0])\nconst context = computed(() => {\n\tconst fallback = isValue.value && isData.value ? 'Payment | Data' : isValue.value ? 'Payment' : isData.value ? 'Data' : props.tx.tags ? 'Tags' : 'Empty'\n\tconst dataTypeUsed = !isValue.value && isData.value\n\treturn (dataTypeUsed ? null : dataType.value) || dataInfo.value || fallback\n})\nconst verticalElement = computed(() => InterfaceStore.breakpoints.verticalLayout)\n</script>\n\n\n\n<style scoped>\n.tx-card {\n\toverflow: auto hidden;\n\tdisplay: inline;\n}\n\n.tx-content {\n\tposition: relative;\n\tjustify-content: space-between;\n}\n\n.verticalElement .tx-content {\n\tmin-width: 256px;\n}\n\n.left {\n\tflex: 0 0 auto;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.right {\n\tflex: 1 1 0;\n\tmin-width: 200px;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\talign-items: center;\n\tposition: relative;\n}\n\n.right-content {\n\tflex: 1 1 0;\n\tmin-width: 0;\n\tjustify-content: flex-end;\n\tdisplay: flex;\n}\n\n.right-text {\n\tflex: 0 1 auto;\n\tmin-width: 0;\n\ttext-align: end;\n\twhite-space: nowrap;\n}\n\n.margin {\n\tflex: 0 0 auto;\n\twidth: var(--spacing);\n}\n\n.address {\n\tmax-width: 200px;\n\tmargin-inline-start: auto;\n}\n\n.tx-icon,\n.address-icon {\n\twidth: 48px;\n\theight: 48px;\n\tflex: 0 0 auto;\n\tborder-radius: var(--border-radius2);\n}\n\n.address-icon {\n\tbackground: var(--background);\n}\n\n.address-icon.empty {\n\tpadding: 8px;\n\tbackground: none;\n}\n\n.cloud {\n\twidth: 48px;\n\theight: 48px;\n\tpadding: 8px;\n}\n\n.file-type {\n\twidth: 100%;\n\theight: 100%;\n\topacity: 0.2;\n}\n</style>","<template>\n\t<div v-if=\"queryName\" class=\"tabs\">\n\t\t<router-link class=\"tab\" v-for=\"tab in tabs\" :key=\"tab.name\" :to=\"{ query: { ...$route.query, [queryName]: tab.name.toLowerCase() } }\" :style=\"{ '--color': tab.color }\" :class=\"{ active: isActive(tab) }\" replace>{{ tab.name }}</router-link>\n\t</div>\n\t<div v-else class=\"tabs\">\n\t\t<button type=\"button\" class=\"tab\" v-for=\"tab in tabs\" :key=\"tab.name\" :style=\"{ '--color': tab.color }\" :class=\"{ active: model === tab.name }\" @click=\"model = tab.name\" :disabled=\"disabled\">{{ tab.name }}</button>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport { computed } from 'vue'\nimport { useRoute } from 'vue-router'\n\nconst props = defineProps(['queryName', 'tabs', 'modelValue', 'disabled'])\nconst emit = defineEmits(['update:modelValue'])\n\nconst model = computed({\n\tget () { return props.modelValue },\n\tset (value) { emit('update:modelValue', value) }\n})\nconst route = useRoute()\nconst isActive = (tab) => {\n\tconst currentQuery = route.query[props.queryName]\n\treturn currentQuery\n\t\t? currentQuery === tab.name.toLowerCase()\n\t\t: props.tabs.indexOf(tab) === 0\n}\n</script>\n\n\n\n<style scoped>\n.tabs {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-evenly;\n}\n\n.tab {\n\tpadding: 0.2em 0;\n\tflex: 1 1 0;\n\ttext-align: center;\n\tcursor: pointer;\n\tuser-select: none;\n\ttext-decoration: none;\n\ttransition: color 0.2s ease, opacity 0.2s ease;\n\topacity: var(--element-disabled-opacity);\n\tcolor: inherit;\n\tposition: relative;\n}\n\n.tab:hover {\n\topacity: 1;\n}\n\n.tab:disabled {\n\topacity: var(--element-disabled-opacity);\n\tcursor: unset;\n}\n\n.tab.active {\n\topacity: 1;\n\tcolor: var(--color);\n}\n\n.tab::before {\n\tcontent: \"\";\n\tbackground: var(--color);\n\twidth: 12px;\n\theight: 2px;\n\tborder-radius: 1px;\n\tposition: absolute;\n\tmargin: auto;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\topacity: 0.5;\n\ttransition: width 0.2s ease;\n}\n\n.tab.active::before {\n\twidth: 100%;\n\theight: 2px;\n\tbackground: var(--color);\n}\n</style>","<template>\n\t<div ref=\"observed\">\n\t\t<slot />\n\t</div>\n</template>\n\n\n\n<script setup>\nimport { onBeforeUnmount, onMounted, ref } from 'vue'\n\nconst props = defineProps({\n\tobserve: [Array, String],\n\tthreshold: { default: 0 },\n\tonce: { type: Boolean, default: false },\n})\nconst emit = defineEmits(['intersection', 'resize'])\n\nconst observed = ref(null)\n\nif (props.observe === 'intersection' || props.observe.includes('intersection')) {\n\tconst intersectionObserver = new IntersectionObserver((entries) => {\n\t\tif (entries[0].isIntersecting) { emit('intersection', entries[0], unobserve) }\n\t\tif (props.once) { unobserve() }\n\t}, { threshold: [props.threshold] })\n\tconst unobserve = () => intersectionObserver.unobserve(observed.value)\n\tonMounted(() => intersectionObserver.observe(observed.value))\n\tonBeforeUnmount(unobserve)\n}\n\nif (props.observe === 'resize' || props.observe.includes('resize')) {\n\tconst resizeObserver = new ResizeObserver((entries) => {\n\t\temit('resize', entries[0]?.contentRect, unobserve)\n\t\tif (props.once) { unobserve() }\n\t})\n\tconst unobserve = () => resizeObserver.unobserve(observed.value)\n\tonMounted(() => {\n\t\t// emit('resize', observed.value.getBoundingClientRect(), unobserve)\n\t\tresizeObserver.observe(observed.value)\n\t})\n\tonBeforeUnmount(unobserve)\n}\n</script>","<template>\n\t<div class=\"tx-list flex-column\">\n\t\t<Tabs queryName=\"view\" :tabs=\"tabs\" />\n\t\t<transition :name=\"transitionName\" mode=\"out-in\">\n\t\t\t<div class=\"flex-column\" :key=\"selectedQuery\">\n\t\t\t\t<transition-group name=\"fade-list-rise\">\n\t\t\t\t\t<TxCard class=\"card fade-list-item\" v-for=\"tx in txs\" :key=\"tx.node.id\" :tx=\"tx.node\" :currentAddress=\"wallet.key\" />\n\t\t\t\t</transition-group>\n\t\t\t\t<div v-if=\"!completedQuery\" class=\"loader-container\">\n\t\t\t\t\t<Icon icon=\"loader\" />\n\t\t\t\t</div>\n\t\t\t\t<Observer observe=\"intersection\" @intersection=\"fetchQuery\" class=\"bottom\" v-show=\"!fetchLoading && !completedQuery\" />\n\t\t\t</div>\n\t\t</transition>\n\t</div>\n</template>\n\n<script setup>\nimport TxCard from '@/components/composed/TxCard.vue'\nimport Tabs from '@/components/atomic/Tabs.vue'\nimport Observer from '@/components/function/Observer.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport { computed, onMounted, onBeforeUnmount, ref, watch } from 'vue'\nimport { useRoute } from 'vue-router'\n\nconst props = defineProps(['wallet'])\n\nconst fetchLoading = computed(() => props.wallet?.queriesStatus?.[selectedQuery.value]?.fetch)\nlet liveUpdate\nconst route = useRoute()\nconst selectedQuery = computed(() => route.query.view || 'all')\nconst txs = computed(() => props.wallet?.queries?.[selectedQuery.value] || [])\nconst completedQuery = computed(() => props.wallet?.queriesStatus?.[selectedQuery.value]?.completed)\nconst updateContent = () => props.wallet.updateTransactions(selectedQuery.value)\nconst fetchQuery = async () => {\n\tif (fetchLoading.value) { return }\n\tconsole.log('Queried', selectedQuery.value)\n\tawait props.wallet.fetchTransactions(selectedQuery.value)\n}\nonMounted(() => {\n\tliveUpdate = setInterval(updateContent, 10000)\n\tupdateContent()\n})\nonBeforeUnmount(() => {\n\tclearInterval(liveUpdate)\n})\nconst tabs = [\n\t{ name: 'All', color: 'var(--orange)' },\n\t{ name: 'Received', color: 'var(--green)' },\n\t{ name: 'Sent', color: 'var(--red)' },\n]\nconst transitionName = ref(null)\nwatch(() => selectedQuery.value, (state, prevState) => {\n\tconst toIndex = tabs.findIndex(el => el.name.toLowerCase() === state)\n\tconst fromIndex = tabs.findIndex(el => el.name.toLowerCase() === prevState)\n\ttransitionName.value = toIndex < fromIndex ? 'slide-right' : 'slide-left'\n\tsetTimeout(() => {\n\t\tclearInterval(liveUpdate)\n\t\tliveUpdate = setInterval(updateContent, 10000)\n\t\tupdateContent()\n\t})\n})\n</script>\n\n<style scoped>\n.tx-list {\n\tposition: relative;\n}\n\n.tabs {\n\tz-index: 1;\n}\n\n.bottom {\n\tposition: absolute;\n\tbottom: 0;\n\twidth: 100%;\n\theight: calc(200px + 40vh);\n}\n\n.loader-container {\n\tmin-height: 40vh;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 4em;\n\tcolor: #ffffff66;\n}\n\n.fade-appear-enter-active {\n\ttransition: opacity 0.8s ease;\n}\n\n.fade-appear-enter-from {\n\topacity: 0;\n}\n</style>\n","<template>\n\t<input class=\"input\" v-model=\"model\" ref=\"input\" @animationstart=\"handleAutofill\" @change=\"handleChange\" />\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\n\nconst props = defineProps(['modelValue'])\nconst emit = defineEmits(['update:modelValue'])\n\nconst model = computed({\n\tget () { return props.modelValue },\n\tset (value) { emit('update:modelValue', value) }\n})\nconst input = ref(undefined as undefined | HTMLInputElement)\nconst hasAutofill = ref(false)\nconst handleAutofill = (e: AnimationEvent) => {\n\tif (e.animationName.includes('onAutofill')) { hasAutofill.value = true }\n\tif (e.animationName.includes('onNotAutofill')) { hasAutofill.value = false }\n}\nconst handleChange = () => {\n\tif (hasAutofill.value) { setTimeout(() => input.value && (input.value.value = input.value.value)) }\n}\n</script>\n\n\n\n<style scoped>\n.input {\n\tfont-size: 1em;\n\toutline: none;\n\tborder: none;\n\tbackground-color: transparent;\n}\n\n.input:-webkit-autofill {\n\tanimation: onAutofill 1s 2;\n\ttransition: background-color 100000s, color 100000s;\n}\n\n.input:not(:-webkit-autofill) {\n\tanimation: onNotAutofill 1s 2;\n}\n\n@keyframes onAutofill {\n\tfrom { opacity: 1 }\n\tto { opacity: 1 }\n}\n\n@keyframes onNotAutofill {\n\tfrom { opacity: 1 }\n\tto { opacity: 1 }\n}\n</style>","<template>\n\t<div class=\"input input-box\" :class=\"{ focus }\">\n\t\t<Icon v-if=\"icon\" :icon=\"icon\" />\n\t\t<RawInput class=\"text\" v-model=\"model\" :placeholder=\"placeholder\" @focus=\"focus = true\" @blur=\"focus = false\" :disabled=\"disabled\" :id=\"id\" />\n\t\t<button v-for=\"action in actions\" class=\"action\" :key=\"action.icon\" @click=\"action.run\">\n\t\t\t<Icon :icon=\"action.icon\" />\n\t\t</button>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport Icon from '@/components/atomic/Icon.vue'\nimport RawInput from '@/components/function/RawInput.vue'\nimport { computed, ref, watch } from 'vue'\n\nconst props = defineProps(['modelValue', 'icon', 'placeholder', 'actions', 'autocomplete', 'mask', 'disabled', 'id'])\nconst emit = defineEmits(['update:modelValue'])\n\nconst model = computed({\n\tget () { return props.modelValue },\n\tset (value) { emit('update:modelValue', value) }\n})\nconst focus = ref(false)\nwatch(() => model.value, (newVal, oldVal) => {\n\tif (!props.mask) { return }\n\tif (!props.mask(newVal)) { model.value = oldVal }\n})\n</script>\n\n\n\n<style scoped>\n.input {\n\theight: 3.5em;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.icon {\n\tfont-size: 1.4em;\n\twidth: 2em;\n\topacity: var(--element-secondary-opacity);\n}\n\n.focus .icon {\n\topacity: 1;\n}\n\n.text {\n\theight: inherit;\n\tfont-size: 1em;\n\tpadding: 0 var(--spacing);\n\toutline: none;\n\tborder: none;\n\tflex: 1 1 auto;\n\tbackground-color: transparent;\n\tcolor: var(--element-secondary);\n\twidth: 100%;\n}\n\n.action {\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n}\n</style>","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"#FFF\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M12 5.9a2.1 2.1 0 1 1 0 4.2 2.1 2.1 0 0 1 0-4.2m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","<template>\n\t<div class=\"row flex-row\">\n\t\t<Input v-model.trim=\"model\" :icon=\"IconPerson\" placeholder=\"Address\" :mask=\"maskAddress\" :actions=\"actions\" :disabled=\"disabled\" :id=\"id\"/>\n\t\t<AddressIcon class=\"address-icon\" :address=\"model\"/>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport AddressIcon from '@/components/atomic/AddressIcon.vue'\nimport Input from '@/components/atomic/Input.vue'\nimport IconPerson from '@/assets/icons/person.svg'\nimport { computed } from 'vue'\n\nconst props = defineProps(['modelValue', 'actions', 'disabled', 'id'])\nconst emit = defineEmits(['update:modelValue'])\n\nconst model = computed({\n\tget () { return props.modelValue },\n\tset (value) { emit('update:modelValue', value) }\n})\nconst maskAddress = (address) => { return address.match(/^[a-z0-9_-]{0,43}$/i) }\n</script>\n\n\n\n<style scoped>\n.input {\n\tflex: 1 1 0;\n}\n\n.address-icon {\n\tflex: 0 0 auto;\n\twidth: 3.5em;\n\theight: 3.5em;\n\tpadding: 0;\n\tborder-radius: var(--border-radius);\n}\n\n.row {\n\tmin-height: 3em;\n\talign-items: center;\n\tjustify-content: space-between;\n}\n\n</style>","<template>\n\t<div class=\"input-ar input-box\" :class=\"{ focus }\">\n\t\t<div class=\"input\">\n\t\t\t<Icon :icon=\"LogoArweave\"></Icon>\n\t\t\t<RawInput v-model=\"model\" inputmode=\"numeric\" class=\"text\" placeholder=\"AR\" @focus=\"focus = 1\" @blur=\"focus = 0\" :disabled=\"disabled\" :id=\"id\" />\n\t\t</div>\n\t\t<div v-if=\"currentPrice\" class=\"spacer\"></div>\n\t\t<div v-if=\"currentPrice\" class=\"input\">\n\t\t\t<RawInput v-model=\"model2\" inputmode=\"numeric\" class=\"text right\" :placeholder=\"currencyType\" @focus=\"focus = 2\" @blur=\"focus = 0\" :disabled=\"disabled\" />\n\t\t\t<Icon :icon=\"currencySymbol\" />\n\t\t</div>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport RawInput from '@/components/function/RawInput.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport { currency } from '@/store/ArweaveStore'\nimport { computed, ref, watch } from 'vue'\nimport LogoArweave from '@/assets/logos/arweave.svg?component'\n\nconst props = defineProps(['modelValue', 'disabled', 'id'])\nconst emit = defineEmits(['update:modelValue'])\n\nconst model = computed({\n\tget () {\n\t\tconst value = props.modelValue\n\t\tif (focus.value === 0) {\n\t\t\tinput2.value = value && !isNaN(value) ? +(value * currentPrice.value).toFixed(2) : ''\n\t\t}\n\t\treturn value\n\t},\n\tset (value) {\n\t\tif (focus.value === 1 || focus.value === 0) {\n\t\t\tinput2.value = value && !isNaN(value) ? +(value * currentPrice.value).toFixed(2) : ''\n\t\t\temit('update:modelValue', value)\n\t\t}\n\t}\n})\nconst input2 = ref('')\nconst model2 = computed({\n\tget () { return input2.value },\n\tset (value) {\n\t\tif (focus.value === 2) {\n\t\t\tinput2.value = value\n\t\t\temit('update:modelValue', value && !isNaN(value) ? value / currentPrice.value : '')\n\t\t}\n\t}\n})\nconst currentPrice = currency.currentPrice\nconst currencyType = computed(() => currency.settings.currency)\nconst currencySymbol = computed(() => new Intl.NumberFormat(navigator.languages, { style: 'currency', currency: currencyType.value }).format(0).replace(/[\\w\\d\\.\\,\\s]/g, '') || '$')\nconst focus = ref(0)\nwatch(() => model.value, (newVal, oldVal) => {\n\tif (newVal < 0) { return model.value = '' }\n\tif (focus.value <= 1 && !newVal.match(/^(?:\\d*\\.?\\d*)?$/)) { model.value = oldVal }\n})\nwatch(() => model2.value, (newVal, oldVal) => {\n\tif (focus.value === 2 && !newVal.match(/^(?:\\d*\\.?\\d*)?$/)) { model2.value = oldVal }\n})\n</script>\n\n\n\n<style scoped>\n.input-ar {\n\t--height: 3.5em;\n\theight: var(--height);\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.vertical.input-ar {\n\t--height: 7em;\n\tflex-direction: column;\n}\n\n.input {\n\twidth: 100%;\n\theight: inherit;\n\tflex: 1 1 0;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\t/* background: var(--background3); */\n\tborder-radius: inherit;\n}\n\n.vertical .input {\n\theight: calc(var(--height) / 2);\n}\n\n.spacer {\n\twidth: 1px;\n\theight: 1.2em;\n\tbackground: #ffffff18;\n\ttransition: 0.3s ease;\n}\n\n.vertical .spacer {\n\tdisplay: none;\n}\n\n.focus .spacer {\n\tbackground: #ffffff60;\n}\n\n.icon {\n\tfont-size: 1.4em;\n\twidth: 2em;\n\topacity: var(--element-secondary-opacity);\n}\n\n.focus .icon {\n\topacity: 1;\n}\n\n.text {\n\theight: inherit;\n\tfont-size: 1em;\n\tpadding: 0 var(--spacing);\n\toutline: none;\n\tborder: none;\n\tflex: 1 1 auto;\n\tbackground-color: transparent;\n\tcolor: var(--element-secondary);\n\twidth: 100%;\n}\n\n.text.right {\n\ttext-align: end;\n}\n</style>","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"#FFF\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" }, null, -1)\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M14 17H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z\" }, null, -1)\nconst _hoisted_5 = [\n  _hoisted_2,\n  _hoisted_3,\n  _hoisted_4\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_5))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"#FFF\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"#FFF\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","<template>\n\t<div class=\"input-data input-box\" :class=\"{ focus }\" @drop.stop.prevent=\"handleFiles\">\n\t\t<textarea v-show=\"!isFile\" v-model=\"model\" @focus=\"focus = 1\" @blur=\"focus = 0\" :disabled=\"disabled\" :id=\"id\" :placeholder=\"placeholder\"></textarea>\n\t\t<transition name=\"fade\">\n\t\t\t<div v-if=\"!model && !dragOverlay\" class=\"overlay passthrough\">\n\t\t\t\t<div class=\"big-icon-container\">\n\t\t\t\t\t<IconText class=\"img\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"spacer\" />\n\t\t\t\t<div class=\"big-icon-container not-passthrough\">\n\t\t\t\t\t<label for=\"file-picker\" class=\"file-picker-label\">\n\t\t\t\t\t\t<IconDrop class=\"img\" />\n\t\t\t\t\t</label>\n\t\t\t\t\t<input type=\"file\" id=\"file-picker\" class=\"file-input\" @change=\"handleFiles\" :disabled=\"disabled\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-else-if=\"isFile\" class=\"overlay\">\n\t\t\t\t<div class=\"big-icon-container focus\">\n\t\t\t\t\t<IconCloud class=\"img\" />\n\t\t\t\t</div>\n\t\t\t\t<button class=\"clear\" @click=\"clearFiles\" type=\"button\">\n\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t<IconX class=\"icon no-select\" draggable=\"false\" />\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</transition>\n\t\t<DragOverlay />\n\t</div>\n</template>\n\n\n\n<script setup>\nimport DragOverlay from '@/components/atomic/DragOverlay.vue'\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { computed, ref, toRef, useAttrs } from 'vue'\n\nimport IconText from '@/assets/icons/text.svg?component'\nimport IconDrop from '@/assets/icons/drop.svg?component'\nimport IconCloud from '@/assets/icons/cloud.svg?component'\nimport IconX from '@/assets/icons/x.svg?component'\n\nconst props = defineProps(['modelValue', 'disabled', 'id', 'placeholder'])\nconst emit = defineEmits(['update:modelValue', 'files'])\nconst attrs = useAttrs()\n\nconst model = computed({\n\tget () { return props.modelValue },\n\tset (value) { emit('update:modelValue', value) }\n})\nconst focus = ref(0)\nconst dragOverlay = toRef(InterfaceStore, 'dragOverlay')\nconst handleFiles = (e) => {\n\tif (attrs.disabled) { return }\n\tif (e.dataTransfer?.files) { return emit('files', e.dataTransfer.files) }\n\tif (e.target?.files) { return emit('files', e.target.files) }\n}\nconst clearFiles = () => { emit('files', null) }\nconst isFile = computed(() => typeof model.value === \"object\")\n</script>\n\n\n\n<style scoped>\n.input-data {\n\theight: 12em;\n\tposition: relative;\n\toverflow: hidden;\n\tdisplay: flex;\n}\n\ntextarea {\n\tfont-family: inherit;\n\tresize: none;\n\twidth: 100%;\n\theight: 100%;\n\tfont-size: 1em;\n\tpadding: var(--spacing);\n\toutline: none;\n\tborder: none;\n\tbackground-color: transparent;\n\tcolor: var(--element-secondary);\n\ttext-align: inherit;\n}\n\n.overlay {\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.spacer {\n\twidth: 1px;\n\theight: 56px;\n\tmargin: 0 var(--spacing);\n\tbackground: #ffffff18;\n\ttransition: 0.3s ease;\n}\n\n.focus .spacer {\n\tbackground: #ffffff60;\n}\n\n.big-icon-container {\n\twidth: 48px;\n\theight: 48px;\n\tposition: relative;\n\tdisplay: flex;\n}\n\n.file-picker-label {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 1;\n\tcursor: pointer;\n}\n\n.img {\n\twidth: 100%;\n\theight: 100%;\n\topacity: 0.2;\n\ttransition: 0.3s ease;\n}\n\n.focus .img {\n\topacity: 0.6;\n}\n\n.file-input {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tborder-radius: var(--border-radius);\n\tdisplay: none;\n}\n\n.clear {\n\tposition: absolute;\n\theight: 100%;\n\tright: 0;\n}\n\n.passthrough {\n\tpointer-events: none;\n}\n\n.not-passthrough {\n\tpointer-events: auto;\n}\n\n/* extract */\n.icon-container {\n\tflex: 0 0 auto;\n\theight: 3em;\n\twidth: 3em;\n\tborder-radius: inherit;\n\tpadding: 3px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.icon {\n\theight: 1.4em;\n\twidth: 1.4em;\n\tobject-fit: contain;\n\topacity: var(--element-secondary-opacity);\n\ttransition: 0.3s ease;\n}\n\n.symbol {\n\tfont-size: 1.4em;\n\topacity: var(--element-secondary-opacity);\n\ttransition: 0.3s ease;\n}\n\n.focus .icon,\n.focus .symbol {\n\topacity: 1;\n}\n</style>","<template>\n\t<div v-if=\"schema.length > 0\" class=\"input-grid input-box\" :class=\"{ focus }\">\n\t\t<div v-for=\"(row, index) in schema\" :key=\"row.key\" class=\"row\">\n\t\t\t<div class=\"inputs\">\n\t\t\t\t<div v-for=\"(input, inputIndex) in row.items\" :key=\"row.key + input.name\" class=\"input\" :class=\"{ flip: row.items.length == 2 && inputIndex == 1 }\">\n\t\t\t\t\t<Icon v-if=\"input.icon\" :icon=\"input.icon\" />\n\t\t\t\t\t<RawInput v-model=\"input.value\" v-bind=\"input.attrs\" class=\"text\" :placeholder=\"input.name\" @focus=\"focus = (index + 1) * (inputIndex + 1)\" @blur=\"focus = 0\" :disabled=\"disabled\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button v-if=\"row.deletable\" class=\"remove\" @click=\"removeRow(index)\" type=\"button\">\n\t\t\t\t<Icon :icon=\"IconX\" />\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport RawInput from '@/components/function/RawInput.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport IconX from '@/assets/icons/x.svg?component'\nimport { ref } from 'vue'\n\nconst props = defineProps(['schema', 'disabled'])\n\nconst focus = ref(0)\nconst removeRow = (index) => props.schema.splice(index, 1)\n</script>\n\n\n\n<style scoped>\n.input-grid {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n\n.row {\n\twidth: 100%;\n\tdisplay: flex;\n}\n\n.inputs {\n\tflex: 1 1 0;\n\tmin-width: 0;\n\tdisplay: flex;\n}\n\n.vertical .inputs {\n\tflex-direction: column;\n}\n\n.input {\n\tflex: 1 1 auto;\n\tmin-width: 0;\n\theight: inherit;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder-radius: inherit;\n}\n\n.icon {\n\tfont-size: 1.4em;\n\twidth: 2em;\n\topacity: var(--element-secondary-opacity);\n}\n\n.focus .icon {\n\topacity: 1;\n}\n\n.text {\n\tflex: 1 1 0;\n\tmin-width: 0;\n\twidth: 0;\n\theight: 3.5em;\n\tfont-size: 1em;\n\tpadding: 0 var(--spacing);\n\toutline: none;\n\tborder: none;\n\tbackground-color: transparent;\n\tcolor: var(--element-secondary);\n}\n\n.input.flip {\n\tflex-direction: row-reverse;\n}\n\n.input.flip .text {\n\ttext-align: end;\n}\n\n.input-grid:not(.vertical) .input:not(.flip):not(:first-child)::before {\n\tcontent: \"\";\n\twidth: 1px;\n\theight: 1.2em;\n\tbackground: #ffffff18;\n\ttransition: 0.3s ease;\n}\n\n.input-grid:not(.vertical).focus .input:not(.flip):not(:first-child)::before {\n\tbackground: #ffffff60;\n}\n\n.input-grid:not(.vertical) .input.flip::after {\n\tcontent: \"\";\n\twidth: 1px;\n\theight: 1.2em;\n\tbackground: #ffffff18;\n\ttransition: 0.3s ease;\n}\n\n.input-grid:not(.vertical).focus .input.flip::after {\n\tbackground: #ffffff60;\n}\n\n.vertical .text:first-child {\n\tmargin-inline-start: 3em;\n}\n\n.remove {\n\tdisplay: flex;\n\talign-items: center;\n\topacity: 0.5;\n\ttransition: 0.1s ease;\n}\n\n.remove:hover {\n\topacity: 1;\n}\n</style>","<template>\n\t<div class=\"slider\" :class=\"{ focus: focus || hover, snapped, disabled: !settings.max }\" :style=\"{ '--thumb-width': thumbWidth + '%' }\">\n\t\t<div class=\"slider-container input-box\" :class=\"{ focus, hover }\">\n\t\t\t<input v-model=\"model\" type=\"range\" min=\"0\" :max=\"settings.max\" :disabled=\"!settings.max\" @focus=\"focus = true\" @blur=\"focus = false\" @mouseover=\"hover = true\" @mouseleave=\"hover = false\" @keydown=\"poke\" />\n\t\t\t<svg class=\"thumb\" role=\"presentation\" width=\"100%\" height=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t<rect :x=\"thumbPosition + '%'\" :width=\"thumbWidth + '%'\" y=\"0\" height=\"100%\" />\n\t\t\t</svg>\n\t\t</div>\n\t\t<svg v-if=\"rangeStart\" class=\"range\" role=\"presentation\" width=\"100%\" height=\"11\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<rect :x=\"rangeStart.toString() + '%'\" :width=\"rangeEnd.minus(rangeStart).toString() + '%'\" y=\"10\" height=\"1\" rx=\"0.5\" ry=\"0.5\" />\n\t\t</svg>\n\t\t<transition name=\"fade-fast\">\n\t\t\t<svg v-if=\"progress != null\" class=\"progress\" role=\"presentation\" width=\"100%\" height=\"11\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t<rect class=\"progress-rect\" x=\"0\" :width=\"progress + '%'\" y=\"10\" height=\"1\" rx=\"0.5\" ry=\"0.5\" />\n\t\t\t</svg>\n\t\t</transition>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport BigNumber from 'bignumber.js'\nimport { computed, ref } from 'vue'\n\nconst props = defineProps(['modelValue', 'settings', 'progress'])\nconst emit = defineEmits(['update:modelValue'])\n\nconst model = computed({\n\tget () { return props.modelValue },\n\tset (value) {\n\t\tconst snapTo = snap(value)\n\t\temit('update:modelValue', snapTo || value)\n\t}\n})\nconst snapped = ref(null)\nconst range = computed(() => props.settings.max ? new BigNumber(props.settings.max.minus(props.settings.min || '0')) : null)\nconst snapAmount = computed(() => range.value.dividedToIntegerBy('50'))\nconst pokeAmount = computed(() => range.value.dividedToIntegerBy('50'))\nconst snap = (e) => {\n\tsnapped.value = null\n\tif (!range.value) { return null }\n\tconst bigNumber = new BigNumber(e)\n\tconst result = { setting: null, distance: range.value }\n\tfor (const setting in props.settings) {\n\t\tif (!props.settings[setting]) { continue }\n\t\tconst distance = props.settings[setting].minus(bigNumber).absoluteValue()\n\t\tif (distance.lt(result.distance)) { result.setting = setting; result.distance = distance }\n\t}\n\tif (result.distance.lt(snapAmount.value)) {\n\t\tconst nearest = props.settings[result.setting].toString()\n\t\tif (['minRange', 'default', 'maxRange'].includes(result.setting)) { snapped.value = nearest }\n\t\treturn nearest\n\t}\n\treturn null\n}\nconst poke = (e) => {\n\tif (e.key !== 'ArrowLeft' && e.key !== 'ArrowRight' && e.key !== 'ArrowUp' && e.key !== 'ArrowDown' || !range.value) { return }\n\te.preventDefault()\n\tconst currentValue = new BigNumber(model.value)\n\tlet nextValue = null\n\tif (e.key === 'ArrowLeft' || e.key === 'ArrowDown') {\n\t\tnextValue = currentValue.minus(pokeAmount.value)\n\t\tif (nextValue.isLessThan(props.settings.min || 0)) { nextValue = props.settings.min || 0 }\n\t}\n\tif (e.key === 'ArrowRight' || e.key === 'ArrowUp') {\n\t\tnextValue = currentValue.plus(pokeAmount.value)\n\t\tif (nextValue.isGreaterThan(props.settings.max)) { nextValue = props.settings.max }\n\t}\n\tmodel.value = nextValue.toString()\n}\nconst focus = ref(false)\nconst hover = ref(false)\nconst rangeStart = computed(() => {\n\tif (!props.settings.minRange || !props.settings.maxRange || !range.value) { return null }\n\treturn props.settings.minRange.dividedBy(range.value).times('100')\n})\nconst rangeEnd = computed(() => {\n\tif (!props.settings.minRange || !props.settings.maxRange || !range.value) { return null }\n\treturn props.settings.maxRange.dividedBy(range.value).times('100')\n})\n\nconst thumbWidth = 4\nconst thumbPosition = computed(() => new BigNumber(model.value).dividedBy(range.value && range.value.gt(0) ? range.value : '1').times(100 - thumbWidth))\n</script>\n\n\n\n<style scoped>\n.slider {\n\t--height: 1.4em;\n\t--color: var(--element-secondary);\n\t--transition: 0.3s ease;\n\tposition: relative;\n}\n\n.slider-container {\n\twidth: 100%;\n\toverflow: hidden;\n\tposition: relative;\n}\n\n.thumb {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tpointer-events: none;\n\tfill: var(--color);\n\topacity: 0.2;\n\ttransition: var(--transition);\n}\n\n.focus .thumb {\n\topacity: 0.4;\n}\n\n.snapped.focus .thumb {\n\topacity: 1;\n}\n\n.disabled .thumb {\n\topacity: 0;\n}\n\ninput[type=\"range\"] {\n\tfont-size: 1rem;\n\tappearance: none;\n\t-webkit-appearance: none;\n\tposition: relative;\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\toutline: 0;\n\tborder-radius: inherit;\n\theight: var(--height);\n\twidth: 100%;\n\tbackground: transparent;\n\tcursor: pointer;\n\tdisplay: flex;\n\t/* overflow: hidden; */\n}\n\ninput[type=\"range\"]:focus {\n\toutline: 0;\n}\n\n.range,\n.progress {\n\tposition: absolute;\n\tfill: var(--color);\n\topacity: 0;\n\ttransition: var(--transition);\n}\n\n.focus .range {\n\topacity: 1;\n\tfilter: drop-shadow(0 -2px 6px #ffffff66);\n}\n\n.progress {\n\topacity: 0.4;\n\tfilter: drop-shadow(0 -2px 6px #ffffff66);\n}\n\n.progress-rect {\n\ttransition: width 0.2s ease;\n}\n\n/* -------------------------------------------- */\n\ninput[type=\"range\"]::-webkit-slider-runnable-track {\n\tborder: 0;\n\tbox-shadow: none;\n\theight: 100%;\n\twidth: 100%;\n}\n\ninput[type=\"range\"]::-moz-range-track {\n\tborder: 0;\n\tbox-shadow: none;\n\theight: 100%;\n\twidth: 100%;\n}\n\ninput[type=\"range\"]::-ms-track {\n\tborder: 0;\n\tbox-shadow: none;\n\tbox-sizing: border-box;\n\theight: 100%;\n\twidth: 100%;\n}\n\n/* -------------------------------------------- */\n\ninput[type=\"range\"]::-webkit-slider-thumb {\n\topacity: 0 !important;\n\tappearance: none;\n\t-webkit-appearance: none;\n\tmargin: 0;\n\tborder: 0;\n\tborder-radius: 0;\n\tbox-shadow: none;\n\topacity: 0.2;\n\twidth: var(--thumb-width);\n\theight: 100%;\n\tbackground: var(--color);\n\ttransition: var(--transition);\n}\n\ninput[type=\"range\"]::-moz-range-thumb {\n\topacity: 0 !important;\n\tborder: 0;\n\tborder-radius: 0;\n\tbox-shadow: none;\n\topacity: 0.2;\n\twidth: var(--thumb-width);\n\theight: 100%;\n\tbackground: var(--color);\n\ttransition: var(--transition);\n}\n\ninput[type=\"range\"]::-ms-thumb {\n\topacity: 0 !important;\n\tmargin-top: 0;\n\tborder: 0;\n\tborder-radius: 0;\n\tbox-shadow: none;\n\tbox-sizing: border-box;\n\topacity: 0.2;\n\twidth: var(--thumb-width);\n\theight: 100%;\n\tbackground: var(--color);\n\ttransition: var(--transition);\n}\n\n/* -------------------------------------------- */\n\ninput[type=\"range\"]:focus::-webkit-slider-thumb {\n\topacity: 1;\n}\n\ninput[type=\"range\"]:disabled::-webkit-slider-thumb {\n\topacity: 0;\n}\n\ninput[type=\"range\"]:focus::-moz-range-thumb {\n\topacity: 1;\n}\n\ninput[type=\"range\"]:disabled::-moz-range-thumb {\n\topacity: 0;\n}\n\ninput[type=\"range\"]:focus::-ms-thumb {\n\topacity: 1;\n}\n\ninput[type=\"range\"]:disabled::-ms-thumb {\n\topacity: 0;\n}\n\n/* -------------------------------------------- */\n\ninput[type=\"range\"]::-ms-fill-upper {\n\tbackground: transparent;\n\tborder: 0;\n}\n\ninput[type=\"range\"]::-ms-fill-lower {\n\tbackground: transparent;\n\tborder: 0;\n}\n</style>","<template>\n\t<div>\n\t\t<div>Size {{ txSizeDisplay }}</div>\n\t\t<div>\n\t\t\tFee\n\t\t\t<Amount :ar=\"userFeeAr\" />\n\t\t</div>\n\t\t<Slider v-model=\"slider\" :settings=\"sliderSettings\" :progress=\"progress\" />\n\t</div>\n</template>\n\n\n\n<script setup>\nimport Slider from '@/components/atomic/Slider.vue'\nimport Amount from '@/components/composed/Amount.vue'\nimport ArweaveStore, { arweave } from '@/store/ArweaveStore'\nimport BlockStore from '@/store/BlockStore'\nimport { getFeeRange } from '@/functions/Transactions'\nimport { debounce, humanFileSize } from '@/functions/Utils'\nimport axios from 'axios'\nimport BigNumber from 'bignumber.js'\nimport { computed, reactive, ref, watch } from 'vue'\n\nconst props = defineProps(['target', 'size'])\nconst emit = defineEmits(['update'])\n\nconst address = computed(() => props.target.slice(0,43).match(/^[a-z0-9_-]{43}$/i) ? props.target.slice(0,43) : '')\nconst txFee = ref(null)\nconst updateFee = async () => { txFee.value = await arweave.transactions.getPrice(props.size, address.value) }\nconst updateFeeDebounced = debounce(updateFee)\nupdateFee()\nwatch(() => address.value + props.size, () => {\n\ttxFee.value = null\n\tupdateFeeDebounced()\n})\n\nconst txSizeDisplay = computed(() => humanFileSize(props.size))\n\nconst range = reactive({})\ngetFeeRange().then(obj => Object.assign(range, obj))\nconst slider = ref('0')\nconst sliderSettings = computed(() => {\n\tconst result = {\n\t\tmin: new BigNumber('0'),\n\t\tminRange: factorInBaseFee(range.min),\n\t\tdefault: factorInBaseFee(range.default),\n\t\tmaxRange: factorInBaseFee(range.max),\n\t\tmax: factorInBaseFee(range.max),\n\t}\n\tslider.value = result.default || '0'\n\treturn result\n})\nconst factorInBaseFee = (fee) => {\n\tif (!fee || !txFee.value) { return null }\n\treturn fee.minus(txFee.value) > 0 ? fee.minus(txFee.value) : new BigNumber('0')\n}\n\nconst userFee = computed(() => {\n\tif (!txFee.value || !slider.value) { return null }\n\tconst txFeeBn = new BigNumber(txFee.value)\n\tconst sliderBn = new BigNumber(slider.value)\n\treturn txFeeBn.plus(sliderBn)\n})\nconst userFeeAr = computed(() => {\n\tif (!userFee.value) { return null }\n\treturn arweave.ar.winstonToAr(userFee.value)\n})\nwatch(userFeeAr, userFeeAr => emit('update', userFeeAr))\n\nconst progress = computed(() => BlockStore.mempoolStatus.progress)\n</script>\n\n\n\n<style scoped>\n.secondary {\n\tcolor: var(--element-secondary);\n}\n\n.small {\n\tfont-size: 0.75em;\n}\n\n.slider {\n\twidth: 100%;\n}\n</style>\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"#FFF\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16zM16 17H5V7h11l3.55 5L16 17z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","<template>\n\t<div class=\"send card\">\n\t\t<form>\n\t\t\t<!-- TODO Autocomplete local addrs -->\n\t\t\t<label for=\"target\">\n\t\t\t\t<h2 class=\"heading flex-row\">\n\t\t\t\t\t<IconNorthEast class=\"img\" />\n\t\t\t\t\t<span>Send</span>\n\t\t\t\t</h2>\n\t\t\t</label>\n\t\t\t<InputAddress v-model=\"model.target\" id=\"target\" />\n\t\t\t<div class=\"row bottom flex-row\">\n\t\t\t\t<div>\n\t\t\t\t\t<transition name=\"slide-up\">\n\t\t\t\t\t\t<div v-show=\"validation.target\" class=\"validation\">{{ validation.target }}</div>\n\t\t\t\t\t</transition>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<label for=\"quantity\">\n\t\t\t\t<h3 class=\"heading flex-row\">\n\t\t\t\t\t<span>Amount</span>\n\t\t\t\t</h3>\n\t\t\t</label>\n\t\t\t<InputAr v-model=\"model.quantity\" id=\"quantity\" />\n\t\t\t<div class=\"row bottom flex-row\">\n\t\t\t\t<div>\n\t\t\t\t\t<transition name=\"slide-up\">\n\t\t\t\t\t\t<div v-show=\"validation.quantity\" class=\"validation\">{{ validation.quantity }}</div>\n\t\t\t\t\t</transition>\n\t\t\t\t</div>\n\t\t\t\t<button type=\"button\" class=\"secondary\" @click=\"setMax\">Max</button>\n\t\t\t</div>\n\n\t\t\t<label for=\"data\">\n\t\t\t\t<h3 class=\"heading flex-row\">\n\t\t\t\t\t<span>Data</span>\n\t\t\t\t</h3>\n\t\t\t</label>\n\t\t\t<InputData v-model=\"model.data\" @files=\"filesAdded\" id=\"data\" />\n\t\t\t<div class=\"row bottom flex-row\">\n\t\t\t\t<div>\n\t\t\t\t\t<transition name=\"slide-up\">\n\t\t\t\t\t\t<div v-if=\"validation.data\" class=\"validation\">{{ validation.data }}</div>\n\t\t\t\t\t</transition>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"row flex-row\">\n\t\t\t\t<label for=\"add-tag\">\n\t\t\t\t\t<h3 class=\"heading flex-row\" style=\"display:block;\">\n\t\t\t\t\t\t<span>Tags</span>\n\t\t\t\t\t</h3>\n\t\t\t\t</label>\n\t\t\t\t<div v-if=\"!model.tags.length\">\n\t\t\t\t\t<button type=\"button\" class=\"secondary\" @click=\"addTag()\" id=\"add-tag\">Add</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<InputGrid :schema=\"model.tags\" />\n\t\t\t<div v-if=\"model.tags.length\" class=\"row bottom flex-row\">\n\t\t\t\t<div>\n\t\t\t\t\t<transition name=\"slide-up\">\n\t\t\t\t\t\t<div v-if=\"validation.tags\" class=\"validation\">{{ validation.tags }}</div>\n\t\t\t\t\t</transition>\n\t\t\t\t</div>\n\t\t\t\t<button type=\"button\" class=\"secondary\" @click=\"addTag()\" id=\"add-tag\">Add</button>\n\t\t\t</div>\n\n\t\t\t<div class=\"row flex-row\" style=\"align-items:flex-end; margin-top:3em;\">\n\t\t\t\t<SendFee :size=\"txSize\" :target=\"model.target\" @update=\"fee => txFee = fee\" />\n\t\t\t\t<Button @click=\"postTx\" :style=\"submitStyle\" :disabled=\"loading || !txFee || !wallet.signTransaction\" :icon=\"IconNorthEast\">Submit</Button>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<transition name=\"slide-up\">\n\t\t\t\t\t<div v-if=\"validation.global\" class=\"row bottom flex-row\" style=\"justify-content:center;\">\n\t\t\t\t\t\t<div style=\"text-align:center;\" class=\"validation\">{{ validation.global }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</transition>\n\t\t\t</div>\n\t\t</form>\n\t\t<!-- TODO QR -->\n\t</div>\n</template>\n\n\n\n<script setup>\nimport InputAddress from '@/components/atomic/InputAddress.vue';\nimport InputAr from '@/components/atomic/InputAr.vue'\nimport InputData from '@/components/atomic/InputData.vue'\nimport InputGrid from '@/components/atomic/InputGrid.vue'\nimport SendFee from '@/components/composed/SendFee.vue'\nimport Button from '@/components/atomic/Button.vue'\nimport { buildTransaction, manageUpload } from '@/functions/Transactions'\nimport { awaitEffect } from '@/functions/AsyncData'\nimport { addressHashToColor, addressToHash } from '@/functions/Utils'\nimport BigNumber from 'bignumber.js'\nimport { computed, markRaw, reactive, ref, watch } from 'vue'\nimport IconNorthEast from '@/assets/icons/north_east.svg?component'\nimport IconLabel from '@/assets/icons/label.svg?component'\n\nconst props = defineProps(['wallet', 'model'])\n\nconst setMax = async () => {\n\tconst balance = new BigNumber(props.wallet.balance)\n\tawait awaitEffect(() => txFee.value)\n\tprops.model.quantity = balance.minus(txFee.value).toString()\n}\n\nconst filesAdded = (files) => {\n\tlet contentTypeTag = props.model.tags.find(row => row.items[0].value === 'Content-Type')\n\tprops.model.data = files ? files[0] : ''\n\tif (props.model.data && props.model.data.type) {\n\t\tif (!contentTypeTag) {\n\t\t\tcontentTypeTag = tagSchema('Content-Type')\n\t\t\taddTag(contentTypeTag)\n\t\t}\n\t\tcontentTypeTag.items[1].value = props.model.data.type\n\t} else {\n\t\tconst index = props.model.tags.indexOf(contentTypeTag)\n\t\tprops.model.tags.splice(index, 1)\n\t}\n}\n\nconst tagSchema = (name, value) => ({\n\titems: [\n\t\t{ name: 'Tag', value: name || '', icon: markRaw(IconLabel) },\n\t\t{ name: 'Value', value: value || '' }\n\t], deletable: true, key: Math.random()\n})\nconst addTag = (tag) => props.model.tags.push(tag || tagSchema())\n\nconst txSize = computed(() => {\n\tconst data = props.model.data\n\treturn data.size || data.length || '0'\n})\nconst txFee = ref(null)\n\nconst getTagsFromSchema = (tagsSchema) => {\n\tconst result = []\n\tfor (const row of tagsSchema) { result.push({ name: row.items[0].value, value: row.items[1].value }) }\n\treturn result\n}\n\nconst loading = ref(false)\nconst validation = reactive({ target: '', quantity: '', data: '', tags: '' })\n\nconst isValid = () => {\n\tfor (const key in validation) { validation[key] = '' }\n\tlet result = true\n\tif (!props.model.data && !(props.model.quantity > 0)) {\n\t\tvalidation.global = \"A transaction must at least have data, or an address and amount\"\n\t\treturn\n\t}\n\tconst balance = new BigNumber(props.wallet.balance)\n\tif (balance.minus(txFee.value).minus(props.model.quantity || 0) < 0) {\n\t\tif (props.model.quantity > 0) {\n\t\t\tvalidation.quantity = \"Current balance too low\"; result = false\n\t\t} else {\n\t\t\tvalidation.data = \"Current balance too low\"; result = false\n\t\t}\n\t}\n\tconst tags = getTagsFromSchema(props.model.tags)\n\tlet tagLength = 0\n\tfor (const tag of tags) {\n\t\ttagLength += tag.name.length + tag.value.length\n\t\tif (tagLength > 2048) {\n\t\t\tvalidation.tags = \"Length of tags can't be greater than 2048\"; result = false\n\t\t}\n\t\tif (!tag.name.length || !tag.value.length) {\n\t\t\tvalidation.tags = \"Tags can't be empty\"; result = false\n\t\t}\n\t}\n\tif (props.model.target.length && props.model.target.length < 43) {\n\t\tvalidation.target = \"Invalid address\"; result = false\n\t}\n\tif (!props.model.target.length && props.model.quantity > 0) {\n\t\tvalidation.target = \"An address must be specified to send AR\"; result = false\n\t}\n\treturn result\n}\n\nconst resetForm = () => {\n\tprops.model.target = ''\n\tprops.model.quantity = ''\n\tprops.model.data = ''\n\tprops.model.tags = []\n\t// TODO reset the fee slider\n}\n\nconst postTx = async () => {\n\tif (loading.value || !isValid()) { return }\n\tloading.value = true\n\ttry {\n\t\tconst tx = await buildTransaction({\n\t\t\ttarget: props.model.target,\n\t\t\tar: props.model.quantity,\n\t\t\tarReward: txFee.value,\n\t\t\ttags: getTagsFromSchema(props.model.tags),\n\t\t\tdata: props.model.data,\n\t\t})\n\t\tawait props.wallet.signTransaction(tx)\n\t\tmanageUpload(tx)\n\t\tresetForm()\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n\tloading.value = false\n}\n\nconst addressHash = ref(null)\nwatch(() => props.wallet.key, async (val) => addressHash.value = await addressToHash(val), { immediate: true })\nconst addressHashColor = computed(() => addressHashToColor(addressHash.value).join(','))\nconst submitStyle = computed(() => ({\n\t'--border': `rgba(${addressHashColor.value},0.8)`,\n\t'--glow-color': `rgba(${addressHashColor.value},0.2)`,\n\t'background-image': `radial-gradient(circle at center, rgba(${addressHashColor.value},0.4),\n\trgba(${addressHashColor.value},0.3))`\n}))\n</script>\n\n\n\n<style scoped>\n.send {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.heading {\n\talign-items: center;\n}\n\n.row {\n\tmin-height: 3em;\n\talign-items: center;\n\tjustify-content: space-between;\n}\n\n.row.bottom {\n\tpadding-top: 1em;\n}\n\n.validation {\n\tcolor: var(--orange);\n}\n\n.img {\n\theight: 1em;\n}\n\n.secondary {\n\tcolor: var(--element-secondary);\n}\n\n.button {\n\twidth: 50%;\n}\n</style>","import { arweave } from '@/store/ArweaveStore'\nimport { smartweave } from 'smartweave'\nimport { reactive } from 'vue'\n\nconst SmartweaveStore = reactive({\n\tcontracts: {},\n})\n\n\n\nexport async function getContract (id) {\n\tSmartweaveStore.contracts[id] = await smartweave.readContract(arweave, id)\n\tconsole.log(SmartweaveStore.contracts)\n}\n\n// Testing\nif (import.meta.env.DEV) {\n\twindow.smartweave = smartweave\n\twindow.SmartweaveStore = SmartweaveStore\n\t// getContract('5hpzk2vzh-QiyvYqnVuaUFWr8--HfhcfK6HIix-ldJQ')\n}\n\nexport default SmartweaveStore\n","<template>\n\t<div class=\"token-card\">\n\t\t<div class=\"token-content\">\n\t\t\t<router-link class=\"left reset flex-row\" :to=\"{ name: 'Tx', params: { txId: txId } }\">\n\t\t\t\t<img class=\"img\" :src=\"img\" />\n\t\t\t\t<div>\n\t\t\t\t\t<div>{{ token.name }}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{ balance }}\n\t\t\t\t\t\t<span class=\"secondary-text\">{{ token.ticker }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</router-link>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport ArweaveStore from '@/store/ArweaveStore'\nimport SmartweaveStore from '@/store/SmartweaveStore'\nimport { computed } from 'vue'\n\nexport default {\n\tprops: ['txId', 'wallet'],\n\tsetup (props) {\n\t\tconst token = computed(() => SmartweaveStore.contracts[props.txId])\n\t\tconst img = computed(() => {\n\t\t\tif (!token.value.settings) { return }\n\t\t\tfor (const setting of token.value.settings) {\n\t\t\t\tif (setting[0] === 'communityLogo') {\n\t\t\t\t\treturn ArweaveStore.gatewayURL + setting[1]\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\tconst balance = computed(() => {\n\t\t\treturn new Intl.NumberFormat(navigator.languages).format(token.value.balances[props.wallet.key])\n\t\t})\n\t\treturn { token, img, balance }\n\t},\n}\n</script>\n\n<style scoped>\n.left {\n\talign-items: center;\n}\n\n.img {\n\twidth: 48px;\n\theight: 48px;\n}\n</style>","<template>\n\t<div>\n\t\t<div v-for=\"(value, key) in SmartweaveStore.contracts\" :key=\"key\">\n\t\t\t<TokenCard :txId=\"key\" :wallet=\"wallet\" class=\"card\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport TokenCard from '@/components/composed/TokenCard.vue'\nimport SmartweaveStore from '@/store/SmartweaveStore'\n\nexport default {\n\tcomponents: { TokenCard },\n\tprops: ['wallet'],\n\tsetup () {\n\t\treturn { SmartweaveStore }\n\t}\n}\n</script>\n\n<style scoped>\n</style>","import { createRouter, createWebHistory, createWebHashHistory, START_LOCATION } from 'vue-router'\nimport { Wallets, getWalletById } from '@/functions/Wallets'\nimport InterfaceStore, { emitter } from '@/store/InterfaceStore'\nimport { state } from '@/functions/Connect'\nimport Wallet from '@/views/Wallet.vue'\nimport TxList from '@/views/TxList.vue'\nimport Send from '@/views/Send.vue'\nimport Tokens from '@/views/Tokens.vue'\n\nconst routes = [\n\t{\n\t\tname: 'Wallet',\n\t\tpath: '/wallet/:walletId(\\\\d+)',\n\t\tcomponent: Wallet,\n\t\tprops: (route) => ({ wallet: getWalletById(route.params.walletId) }),\n\t\tbeforeEnter: (to) => {\n\t\t\tif (!Wallets.value[0]) { return { name: 'Welcome' } }\n\t\t\tif (!to.params.walletId || !getWalletById(to.params.walletId)) {\n\t\t\t\treturn { name: 'TxList', params: { walletId: Wallets.value[0].id } }\n\t\t\t}\n\t\t},\n\t\tchildren: [\n\t\t\t{\n\t\t\t\tname: 'Send',\n\t\t\t\tpath: 'send',\n\t\t\t\tcomponent: Send,\n\t\t\t\tmeta: { title: 'Send' },\n\t\t\t\tprops: (route) => ({\n\t\t\t\t\twallet: getWalletById(route.params.walletId),\n\t\t\t\t\tmodel: InterfaceStore.wallet.send\n\t\t\t\t}),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'TxList',\n\t\t\t\tpath: 'tx-list',\n\t\t\t\tcomponent: TxList,\n\t\t\t\tmeta: { title: 'Transactions' },\n\t\t\t\tprops: (route) => ({ wallet: getWalletById(route.params.walletId) }),\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Tokens',\n\t\t\t\tpath: 'tokens',\n\t\t\t\tcomponent: Tokens,\n\t\t\t\tmeta: { title: 'Tokens' },\n\t\t\t\tprops: (route) => ({ wallet: getWalletById(route.params.walletId) }),\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tname: 'Tx',\n\t\tpath: '/tx/:txId',\n\t\tcomponent: () => import('@/views/Tx.vue'),\n\t\tmeta: { title: 'Transaction' },\n\t\tprops: true,\n\t},\n\t{\n\t\tname: 'Profile',\n\t\tpath: '/profile/:key',\n\t\tcomponent: () => import('@/views/Profile.vue'),\n\t\tmeta: { title: 'Profile' },\n\t\tprops: true,\n\t},\n\t{\n\t\tpath: '/welcome',\n\t\tname: 'Welcome',\n\t\tcomponent: () => import('@/views/Welcome.vue'),\n\t\tmeta: {},\n\t},\n\t{\n\t\tpath: '/explore',\n\t\tname: 'Explore',\n\t\tcomponent: () => import('@/views/Explore.vue'),\n\t\tmeta: {},\n\t},\n\t{\n\t\tpath: '/connect',\n\t\tname: 'Connect',\n\t\tcomponent: () => import('@/views/Connect.vue'),\n\t\tmeta: { title: 'Connect' }\n\t},\n\t{\n\t\tpath: '/add',\n\t\tname: 'AddWallet',\n\t\tcomponent: () => import('@/views/AddWallet.vue'),\n\t\tmeta: { title: 'Add Wallets' }\n\t},\n\t{\n\t\tpath: '/edit',\n\t\tname: 'EditWallet',\n\t\tcomponent: () => import('@/views/EditWallet.vue'),\n\t\tmeta: { title: 'Edit Wallets' },\n\t},\n\t{\n\t\tpath: '/settings',\n\t\tname: 'Settings',\n\t\tcomponent: () => import('@/views/Settings.vue'),\n\t\tmeta: { title: 'Settings' },\n\t},\n\t{\n\t\tpath: '/demo',\n\t\tredirect: () => {\n\t\t\treturn { name: 'Welcome' }\n\t\t}\n\t},\n\t{\n\t\tpath: '/connector',\n\t\tname: 'Connector',\n\t\tcomponent: () => import('@/views/Connector.vue'),\n\t},\n\t{\n\t\tpath: '/:pathMatch(.*)*',\n\t\tredirect: () => {\n\t\t\tif (state.type === 'iframe') { InterfaceStore.toolbar.enabled = false; return { name: 'Connector' } }\n\t\t\tif (state.type === 'popup') { return { name: 'Connect' } }\n\t\t\treturn Wallets.value[0]\n\t\t\t\t? { name: 'TxList', params: { walletId: Wallets.value[0].id } }\n\t\t\t\t: { name: 'Welcome' }\n\t\t}\n\t},\n]\n\nconst router = createRouter({\n\thistory: import.meta.env.BASE_URL === '/' ? createWebHistory() : createWebHashHistory(),\n\troutes,\n\tscrollBehavior: (to, from, savedPosition) => new Promise((resolve) => {\n\t\tconst position = savedPosition || { top: 0 }\n\t\temitter.once('beforeEnter', () => resolve(position))\n\t})\n})\n\nexport default router\n","import { useRegisterSW } from 'virtual:pwa-register/vue'\n\n\n\nconst ServiceWrapper = {\n\tregistration: new Promise(resolve => useRegisterSW({ onRegistered (r) { resolve(r) } }))\n}\nexport default ServiceWrapper\n\n\n\nexport function showNotification (title, options) {\n\tif (!navigator.serviceWorker || !window.PushManager) { return }\n\treturn true\n}\n","import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport { plugin as Slicksort } from 'vue-slicksort'\nimport '@/assets/animations.css'\nimport '@/assets/style.css'\n\nimport SW from '@/functions/sw'\nSW.registration.then(r => setInterval(() => r.update(), 60 * 60 * 1000))\n\nconst app = createApp(App)\napp.use(router, Slicksort)\napp.mount('#app')"],"names":["Buffer","_hoisted_1","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","_openBlock","_createElementBlock","render","origin","session","ArDB","Transaction","ArweaveApp","generateM","validateM","uuidv4","messageSW","Workbox","_hoisted_5","_createTextVNode","_renderList","SW","Slicksort"],"mappings":"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"}