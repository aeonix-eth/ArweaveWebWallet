{"version":3,"file":"Connect.9eb75d5c.js","sources":["../../src/components/layout/Carousel.vue","../../src/components/composed/WalletSelector.vue","../../src/components/composed/WalletTabs.vue","../../src/components/atomic/Expand.vue","../../src/assets/icons/notification.svg?component","../../src/components/composed/TxCardExtension.vue","../../src/components/composed/PermissionCard.vue","../../src/components/composed/PermissionSettings.vue","../../src/assets/icons/launch.svg?component","../../src/components/composed/ConnectionCard.vue","../../src/views/Connect.vue"],"sourcesContent":["<template>\n\t<div ref=\"root\" class=\"carousel flex-row no-scrollbar\" :style=\"style\">\n\t\t<transition-group name=\"fade-list\">\n\t\t\t<div v-if=\"options?.overscroll\" class=\"margin fade-list-item\" key=\"margin1\" />\n\t\t\t<slot />\n\t\t\t<div v-if=\"options?.overscroll\" class=\"margin fade-list-item\" key=\"margin2\" />\n\t\t</transition-group>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport { awaitEffect } from '@/functions/AsyncData'\nimport { onMounted, onBeforeUnmount, ref, computed, watch, nextTick, inject } from 'vue'\n\nconst props = defineProps<{\n\tmodelValue?: number\n\toptions: {\n\t\talign?: ScrollLogicalPosition\n\t\toverscroll: boolean\n\t\timmediate?: boolean\n\t\tawaitTransition?: boolean\n\t}\n}>()\nconst emit = defineEmits(['update:modelValue'])\nconst parentTransitionState = inject('transitionState', null as any)\n\nconst model = computed<number | undefined>({\n\tget () { return props.modelValue },\n\tset (value) { emit('update:modelValue', value) }\n})\nconst root = ref(null as null | HTMLElement)\nconst calcOffset = (el: HTMLElement) => {\n\tif (!el || !root.value) { return }\n\tif (props.options.align === 'center') { return el.offsetLeft + el.offsetWidth / 2 - root.value.offsetWidth! / 2 }\n\tif (props.options.align === 'end') { return el.offsetLeft + el.offsetWidth - root.value.offsetWidth! }\n\treturn el.offsetLeft\n}\nconst elements = computed(() => {\n\trefresh.value\n\tif (!root.value?.children) { return [] }\n\treturn Array(...root.value.children).filter(e => !e.classList.contains('margin')) as HTMLElement[]\n})\nconst style = computed(() => ({\n\t'--position': props.options?.align || 'start',\n}))\nconst effect = async (index?: number, instant?: boolean) => {\n\tif (!instant && props.options.awaitTransition) { await awaitEffect(() => !parentTransitionState.running) }\n\tindex = Math.max(index || 0, 0)\n\troot.value?.scroll({\n\t\tleft: calcOffset(elements.value[index]),\n\t\tbehavior: instant ? 'instant' as any : 'smooth',\n\t})\n}\nlet observer: MutationObserver\nconst refresh = ref(0)\nonMounted(async () => {\n\tobserver = new MutationObserver(async () => { refresh.value++ })\n\tobserver.observe(root.value!, { subtree: false, childList: true })\n\tawait nextTick()\n\tawait awaitEffect(() => elements.value.length)\n\tsetTimeout(() => {\n\t\tconst hasInitSlide = !props.options.immediate && model.value && model.value > 0 || false\n\t\tif (!hasInitSlide) { effect(model.value, true) }\n\t\telse { effect(0, true) }\n\t\twatch(model, v => effect(v), { immediate: hasInitSlide })\n\t})\n})\nonBeforeUnmount(() => observer && observer.disconnect())\n</script>\n\n\n\n<style scoped>\n.carousel {\n\t--position: start;\n\tscroll-snap-type: x mandatory;\n\toverflow: auto;\n\twhite-space: nowrap;\n\tdisplay: block; /* for transitions */\n\tline-height: 0;\n\toverscroll-behavior-x: contain;\n\tposition: relative;\n}\n\n.carousel > :deep(*) {\n\tline-height: var(--line-height);\n}\n\n.carousel > :deep(*:not(.margin)) {\n\tscroll-snap-align: var(--position);\n}\n\n.margin {\n\twidth: 100%;\n\tdisplay: inline-block;\n}\n</style>","<template>\n\t<div class=\"wallet-selector\">\n\t\t<button v-if=\"model\" type=\"button\" @click=\"$emit('selectWallet')\" class=\"tab\" :class=\"{ active }\">\n\t\t\t<AddressIcon :address=\"address\" />\n\t\t</button>\n\t\t<button v-if=\"exit\" class=\"exit\" type=\"button\" @click=\"$emit('exit')\">\n\t\t\t<div class=\"exit-background\" />\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n\t\t\t\t<path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n\t\t\t\t<path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\" />\n\t\t\t</svg>\n\t\t</button>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport AddressIcon from '@/components/atomic/AddressIcon.vue'\nimport { computed } from 'vue'\nimport { getWalletById } from '@/functions/Wallets'\n\nconst props = defineProps({ modelValue: String, default: String, exit: Boolean, active: Boolean })\nconst emit = defineEmits(['update:modelValue', 'selectWallet', 'exit'])\n\nconst model = computed<string | undefined>({\n\tget () { return props.modelValue || props.default },\n\tset (value) { emit('update:modelValue', value) }\n})\n\nconst address = computed(() => getWalletById(model.value)?.key)\n</script>\n\n\n\n<style scoped>\n.wallet-selector {\n\t--spacing: var(--toolbar-spacing);\n\tdisplay: flex;\n}\n\n.wallet-selector > * + * {\n\tmargin-inline-start: var(--spacing);\n}\n\n.tab {\n\topacity: 0.5;\n\ttransition: 0.2s ease;\n}\n\n.tab.active {\n\topacity: 1;\n}\n\n.address-icon {\n\twidth: 40px;\n\theight: 40px;\n\tpadding: 8px;\n\tbackground: var(--background);\n\tborder-radius: var(--border-radius);\n}\n\n.exit {\n\twidth: 40px;\n\theight: 40px;\n\tcolor: var(--red);\n\tposition: relative;\n\tflex: 0 0 auto;\n}\n\n.exit-background {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tborder-radius: var(--border-radius);\n\tbackground: var(--red);\n\topacity: 0.1;\n}\n\n.exit svg {\n\twidth: 100%;\n\theight: 100%;\n\tpadding: 20%;\n}\n</style>","<template>\n\t<div class=\"wallet-tabs\">\n\t\t<Carousel v-model=\"carouselIndex\" :options=\"{ align: 'center', overscroll: true, immediate: true }\">\n\t\t\t<button v-for=\"Wallet in Wallets\" :key=\"Wallet.id\" type=\"button\" @click=\"model = Wallet.id\" class=\"tab\" :class=\"{ active: Wallet.id == model }\">\n\t\t\t\t<AddressIcon :address=\"Wallet.key\" />\n\t\t\t</button>\n\t\t</Carousel>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport Carousel from '@/components/layout/Carousel.vue'\nimport AddressIcon from '@/components/atomic/AddressIcon.vue'\nimport { computed } from 'vue'\nimport { Wallets } from '@/functions/Wallets'\n\nconst props = defineProps(['modelValue'])\nconst emit = defineEmits(['update:modelValue'])\n\nconst model = computed({\n\tget () { return props.modelValue },\n\tset (value) { emit('update:modelValue', value) }\n})\n\nconst carouselIndex = computed(() => Wallets.value.findIndex(w => w.id === model.value))\n</script>\n\n\n\n<style scoped>\n.wallet-tabs {\n\tdisplay: flex;\n}\n\n.tab {\n\topacity: 0.2;\n\ttransition: 0.2s ease;\n}\n\n.tab.active,\n.tab:hover {\n\topacity: 1;\n}\n\n.address-icon {\n\twidth: 40px;\n\theight: 40px;\n\tpadding: 8px;\n\tbackground: var(--background);\n\tborder-radius: var(--border-radius);\n}\n\n.carousel {\n\tflex: 1 1 0;\n}\n</style>","<template>\n\t<button type=\"button\" class=\"expand\" @click=\"expanded = !expanded\">\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" :class=\"{ expanded }\">\n\t\t\t<path d=\"M24 24H0V0h24v24z\" fill=\"none\" opacity=\".87\" />\n\t\t\t<path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z\" />\n\t\t</svg>\n\t</button>\n</template>\n\n\n\n<script setup>\nimport { computed } from 'vue'\n\nconst props = defineProps(['modelValue'])\nconst emit = defineEmits(['update:modelValue'])\n\nconst expanded = computed({\n\tget () { return props.modelValue },\n\tset (value) { emit('update:modelValue', value) }\n})\n</script>\n\n\n\n<style scoped>\n.expand {\n\tcursor: pointer;\n\twidth: 1.5em;\n\theight: 1.5em;\n\tdisplay: flex;\n}\n\nsvg {\n\twidth: 100%;\n\theight: 100%;\n\ttransition: 0.2s ease;\n}\n\nsvg.expanded {\n\ttransform: rotate(180deg);\n}\n</style>","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"#FFF\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","<template>\n\t<div class=\"tx-card-extension\">\n\t\t<div v-if=\"tx.tags.length || tx.data_size\" class=\"flex-row\" style=\"justify-content:space-between;\">\n\t\t\t<div v-if=\"tx.tags.length\">Tags:</div>\n\t\t\t<div v-if=\"tx.data_size\">Data: {{ humanFileSize(tx.data_size) }}</div>\n\t\t</div>\n\t\t<ul v-if=\"tx.tags.length\" class=\"tags secondary-text\">\n\t\t\t<li v-for=\"tag in tx.tags\">\n\t\t\t\t{{ tag.name + ' | ' + tag.value }}\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport Address from '@/components/atomic/Address.vue'\nimport ArweaveStore, { arweave } from '@/store/ArweaveStore'\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { unpackTags } from '@/functions/Transactions'\nimport { humanFileSize } from '@/functions/Utils'\nimport { computed } from 'vue'\n\nconst props = defineProps(['tx'])\n\n// owner - verify\n// tags\n// data_size\n// data\n// reward\n\nconst verticalElement = computed(() => InterfaceStore.breakpoints.verticalLayout)\n</script>\n\n\n\n<style scoped>\n.tags {\n\twhite-space: normal;\n}\n\nul {\n\tpadding-inline-start: 1em;\n\tmargin-block-start: 0;\n}\n</style>","<template>\n\t<div v-show=\"message\" class=\"permission-card\">\n\t\t<template v-if=\"message?.method === 'signTransaction'\">\n\t\t\t<TxCard :tx=\"tx\" />\n\t\t\t<TxCardExtension :tx=\"tx\" />\n\t\t</template>\n\t\t<template v-else-if=\"message?.method === 'getPublicKey'\" class=\"permission-card\">\n\t\t\tShare the public key\n\t\t</template>\n\t\t<template v-else-if=\"message?.method === 'getArweaveConfig'\" class=\"permission-card\">\n\t\t\tShare the arweave config\n\t\t</template>\n\t\t<template v-else-if=\"message?.method === 'sign'\" class=\"permission-card\">\n\t\t\tSign data\n\t\t</template>\n\t\t<template v-else-if=\"message?.method === 'decrypt'\" class=\"permission-card\">\n\t\t\tDecrypt data\n\t\t</template>\n\t\t<transition name=\"fade\" mode=\"out-in\">\n\t\t\t<ActionList v-if=\"!messageEntry.status\" :actions=\"actions\" />\n\t\t\t<ActionList v-else :actions=\"actionsPending\" />\n\t\t</transition>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport TxCard from '@/components/composed/TxCard.vue'\nimport TxCardExtension from '@/components/composed/TxCardExtension.vue'\nimport ActionList from '@/components/composed/ActionsList.vue'\nimport { getMessage } from '@/functions/JsonRpc'\nimport { ArweaveVerifier } from 'arweave-wallet-connector/lib/ArweaveWebWallet'\nimport { computed, ref, watch } from 'vue'\n\nimport IconY from '@/assets/icons/y.svg?component'\nimport IconX from '@/assets/icons/x.svg?component'\nimport IconConnection from '@/assets/icons/connection.svg?component'\n\nconst props = defineProps<{ messageEntry: MessageEntry }>()\n\nconst message = ref(null as null | StoredMessage)\n\nconst tx = computed(() => {\n\tif (message.value?.method !== 'signTransaction') { return }\n\tconst receivedTx = message.value?.params?.[0] as Parameters<ArweaveVerifier['signTransaction']>[0]\n\tconst tags = receivedTx.tags?.map(({name, value}) => ({ name: window.atob(name), value: window.atob(value) }))\n\treturn { ...receivedTx, tags }\n})\n\nwatch(() => props.messageEntry, async () => {\n\tmessage.value = await getMessage(props.messageEntry)\n}, { immediate: true })\n\nconst actions = [\n\t{ name: 'Accept', icon: IconY, run: () => props.messageEntry.status = 'accepted' },\n\t{ name: 'Reject', icon: IconX, run: () => props.messageEntry.status = 'rejected' },\n]\nconst actionsPending = [{ name: 'Pending', icon: IconConnection, run: () => {} }]\n</script>\n\n\n\n<style scoped>\n.actions-list {\n\tjustify-content: space-around;\n}\n</style>","<template>\n\t<div class=\"connection-card flex-column no-scrollbar\">\n\t\t<div key=\"connect\">{{ displayKeys.connect }}</div>\n\t\t<div v-for=\"method in methods\" :key=\"method\">{{ displayKeys[method] }}</div>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport { getWalletById } from '@/functions/Wallets'\nimport { computed, ref, toRef, watch } from 'vue'\nimport IconConnection from '@/assets/icons/connection.svg?component'\n\nconst props = defineProps<{ walletId?: string }>()\n\nconst displayKeys = {\n\tconnect: 'Connect automatically',\n\tsignTransaction: 'Sign transaction',\n\tgetPublicKey: 'Share public key',\n\tsign: 'Sign arbitrary data',\n\tdecrypt: 'Decrypt data',\n\tgetArweaveConfig: 'Share arweave gateway configuration',\n} as const\n\nconst getInstanceProperties = (wallet?: Provider) => {\n\tif (!wallet || wallet.options && !wallet.options.permissions) { return [] }\n\treturn Object.getOwnPropertyNames(Object.getPrototypeOf(wallet.messageRunner))\n\t\t.filter(prop => wallet.messageRunner[prop] && prop !== 'constructor')\n}\nconst wallet = computed(() => getWalletById(props.walletId))\nconst methods = computed(() => getInstanceProperties(wallet.value))\n\n\n</script>\n\n\n\n<style scoped>\n\n</style>","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"#fff\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", { d: \"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z\" }, null, -1)\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_4))\n}\nexport default { render: render }","<template>\n\t<div class=\"connection-card flex-column no-scrollbar\">\n\t\t<div class=\"flex-row\">\n\t\t\t<button type=\"button\" class=\"info flex-row\" @click=\"navigateBack\" :disabled=\"!navigateBackAvailable(state.origin, state.session)\">\n\t\t\t\t<IconBackground :img=\"state.appInfo?.logo\" :icon=\"IconConnection\" />\n\t\t\t\t<div style=\"min-width: 0;\">\n\t\t\t\t\t<div class=\"ellipsis\">{{ state.appInfo?.name || 'Connector' }}</div>\n\t\t\t\t\t<div class=\"secondary-text ellipsis\">{{ state.origin }}</div>\n\t\t\t\t</div>\n\t\t\t\t<Icon v-if=\"navigateBackAvailable(state.origin, state.session)\" :icon=\"IconLaunch\" />\n\t\t\t</button>\n\t\t\t<WalletSelector v-model=\"state.walletId\" :default=\"defaultId\" :exit=\"true\" :active=\"!selectActive\" @selectWallet=\"selectWallet\" @exit=\"disconnect\" />\n\t\t</div>\n\t\t<div class=\"flex-column\" style=\"flex: 1 1 0;\">\n\t\t\t<Tabs :tabs=\"tabs\" v-model=\"currentTab\" :disabled=\"!currentId\" />\n\t\t\t<div class=\"container\">\n\t\t\t\t<TransitionsManager :vector=\"transitionName\" axis=\"x\">\n\t\t\t\t\t<div class=\"container-scroll\" :key=\"contentKey\">\n\t\t\t\t\t\t<transition-group name=\"fade-list\">\n\t\t\t\t\t\t\t<WalletTabs v-if=\"selectActive\" v-model=\"currentId\" class=\"fade-list-item\" key=\"-1\" />\n\t\t\t\t\t\t\t<div class=\"page-container\" key=\"0\">\n\t\t\t\t\t\t\t\t<TransitionsManager :vector=\"transitionName\" axis=\"x\">\n\t\t\t\t\t\t\t\t\t<div :key=\"(currentId || '') + currentTab\" class=\"content\">\n\t\t\t\t\t\t\t\t\t\t<div v-if=\"currentTab === 'Requests'\">\n\t\t\t\t\t\t\t\t\t\t\t<transition-group name=\"fade-list\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"fade-list-item\" key=\"0\" :style=\"{ padding: 0, border: 0, outline: '0.5px solid var(--border)' }\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<div v-if=\"connectionFeed?.length === 0 && state.walletId && state.walletId === currentId\" class=\"status fade-list-item\" key=\"1\">Connected</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Notification v-if=\"currentId !== state.walletId\" :data=\"connectData\" class=\"fade-list-item\" key=\"2\">{{ connectData.content }}</Notification>\n\t\t\t\t\t\t\t\t\t\t\t\t<PermissionCard v-for=\"messageEntry in connectionFeed\" :key=\"messageEntry.uuid\" :messageEntry=\"messageEntry\" style=\"padding: var(--spacing);\" class=\"flex-column fade-list-item\" />\n\t\t\t\t\t\t\t\t\t\t\t</transition-group>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div v-else-if=\"currentTab === 'Permissions'\">\n\t\t\t\t\t\t\t\t\t\t\t<transition-group name=\"fade-list\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"fade-list-item\" key=\"0\" :style=\"{ padding: 0, border: 0, outline: '0.5px solid var(--border)' }\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"status fade-list-item\" key=\"1\">WIP</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<PermissionSettings :walletId=\"currentId\" class=\"fade-list-item\" key=\"2\" />\n\t\t\t\t\t\t\t\t\t\t\t</transition-group>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</TransitionsManager>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</transition-group>\n\t\t\t\t\t</div>\n\t\t\t\t</TransitionsManager>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport WalletSelector from '@/components/composed/WalletSelector.vue'\nimport WalletTabs from '@/components/composed/WalletTabs.vue'\nimport Tabs from '@/components/atomic/Tabs.vue'\nimport IconBackground from '@/components/atomic/IconBackground.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport Notification from '@/components/composed/Notification.vue'\nimport PermissionCard from '@/components/composed/PermissionCard.vue'\nimport PermissionSettings from '@/components/composed/PermissionSettings.vue'\nimport { getWalletById, Wallets } from '@/functions/Wallets'\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { navigateBack, navigateBackAvailable } from '@/functions/Connect'\nimport { computed, ref, toRef, watch } from 'vue'\n\nimport IconConnection from '@/assets/icons/connection.svg?component'\nimport IconY from '@/assets/icons/y.svg?component'\nimport IconX from '@/assets/icons/x.svg?component'\nimport IconLaunch from '@/assets/icons/launch.svg?component'\nimport TransitionsManager from '@/components/visual/TransitionsManager.vue'\n\nconst props = defineProps<{ state: ConnectorState }>()\n\nconst defaultId = Wallets.value[0]?.id\nconst addresses = computed(() => Wallets.value.map(wallet => wallet.key))\nconst currentId = ref(props.state.walletId || defaultId)\nconst defaultWallet = computed(() => getWalletById(defaultId))\nconst tabs = [\n\t{ name: 'Requests', color: 'var(--orange)' },\n\t{ name: 'Permissions', color: 'var(--green)' },\n]\nconst currentTab = ref(currentId.value ? tabs[0].name : null)\nwatch(() => props.state.walletId, (walletId) => {\n\tif (!walletId) { return }\n\tselectEnabled.value = false\n\tcurrentId.value = walletId\n\tcurrentTab.value = tabs[0].name\n})\n\nconst disconnect = () => props.state.walletId = false\nconst connect = () => {\n\tselectEnabled.value = false\n\tprops.state.walletId = currentId.value + ''\n}\nconst goBack = () => {\n\tif (!props.state.walletId) { return }\n\tif (currentId.value !== (props.state.walletId || Wallets.value[0]?.id)) { contentKey.value++ }\n\tselectEnabled.value = false\n\tcurrentId.value = props.state.walletId\n}\n\nconst selectEnabled = ref(!props.state.walletId)\nconst selectActive = computed(() => selectEnabled.value && Wallets.value.length > 1)\nconst contentKey = ref(0)\nconst selectWallet = () => {\n\tif (!selectEnabled.value) { selectEnabled.value = true; return }\n\tif (currentId.value !== (props.state.walletId || Wallets.value[0]?.id)) { contentKey.value++ }\n\tcurrentId.value = props.state.walletId || Wallets.value[0]?.id\n\tselectEnabled.value = false\n}\n\nconst connectData = computed(() => {\n\tconst content = !props.state.walletId ?\n\t\t`Connect to ${props.state.appInfo?.name || props.state.origin} from the account ${currentId.value}`\n\t\t: `Switch to ${currentId.value}`\n\treturn {\n\t\ttitle: props.state.walletId ? 'Switch' : 'Connect',\n\t\ttimestamp: Date.now(), // todo\n\t\tactions: [\n\t\t\t{ name: 'Connect', icon: IconY, run: connect },\n\t\t\t{ name: !props.state.walletId ? 'Switch' : 'Cancel', icon: IconX, run: !props.state.walletId ? selectWallet : goBack },\n\t\t],\n\t\texpanded: true,\n\t\tcontent,\n\t}\n})\n\n\n\nconst connectionFeed = computed(() => {\n\tif (currentId.value !== props.state.walletId) { return [] }\n\treturn props.state.messageQueue?.filter((m) => !m.fulfilled)\n})\n\n\n\nconst verticalLayout = toRef(InterfaceStore.breakpoints, 'verticalLayout')\nconst transitionName = ref(null as null | number)\nconst selectTransitionName = (val: number, oldVal: number) => transitionName.value = val - oldVal\nwatch(() => tabs.findIndex(tab => tab.name === currentTab.value), selectTransitionName)\nwatch(() => Wallets.value.findIndex(wallet => wallet.id === currentId.value), selectTransitionName)\n</script>\n\n\n\n<style scoped>\n.connection-card {\n\toverflow-y: auto;\n}\n\n.flex-row {\n\talign-items: center;\n}\n\n.info {\n\tflex: 1 1 0;\n\tmin-width: 0;\n\toverflow: hidden;\n}\n\n.wallet-selector {\n\tflex: 0 0 auto;\n\tjustify-content: flex-end;\n}\n\n.fade-list-item {\n\tpadding: var(--spacing);\n\tborder-bottom: 0.5px solid var(--border);\n\tposition: relative;\n}\n\n.wallet-tabs {\n\tpadding: var(--spacing) 0;\n\tjustify-content: center;\n\twidth: 100%;\n\tz-index: 0;\n\tborder-bottom: 0;\n}\n\n.container {\n\tflex: 1 1 0;\n\tbackground: var(--background);\n\tborder-radius: var(--border-radius) var(--border-radius) 0 0;\n\talign-items: center;\n\tjustify-content: flex-start;\n\toverflow: hidden;\n\tposition: relative;\n\tmin-height: min(300px, calc(var(--current-vh) - calc(var(--spacing) + 5px)));\n}\n\n.container-scroll {\n\toverflow: hidden auto;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.page-container {\n\theight: 100%;\n\tposition: relative;\n}\n\n.content {\n\twidth: 100%;\n\theight: 100%;\n\tposition: relative;\n}\n\n.status {\n\theight: 8em;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tcolor: #444;\n}\n\n.content > * > * {\n\tbackground: var(--background);\n\twidth: 100%;\n}\n\n.notification {\n\t/*width: 100%;*/\n\t/*padding: var(--spacing);*/\n\t/*border-bottom: 0.5px solid var(--border);*/\n}\n\n.icon-background {\n\tflex: 0 0 auto;\n}\n\n.icon {\n\topacity: var(--element-secondary-opacity);\n}\n</style>","<template>\n\t<div class=\"connect flex-column\">\n\t\t<Carousel v-model=\"currentConnectorIndex\" :options=\"{ align: 'start', overscroll: true }\" class=\"connectors\">\n\t\t\t<div v-for=\"connector in connectors\" :key=\"connector.session\" class=\"connection-card-container  fade-list-item\">\n\t\t\t\t<ConnectionCard :state=\"connector\" class=\"box\" />\n\t\t\t</div>\n\t\t</Carousel>\n\t\t<div class=\"bottom-info secondary-text\" style=\"opacity: 0.0; pointer-events: none;\">\n\t\t\t<div>All Channels {{ Object.keys(states).length }}</div>\n\t\t\t<div v-for=\"(extState, name) in states\" :key=\"name\">{{ extState }}</div>\n\t\t</div>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport Carousel from '@/components/layout/Carousel.vue'\nimport ConnectionCard from '@/components/composed/ConnectionCard.vue'\nimport AddressIcon from '@/components/atomic/AddressIcon.vue'\nimport Address from '@/components/atomic/Address.vue'\nimport Button from '@/components/atomic/Button.vue'\nimport ArweaveStore from '@/store/ArweaveStore'\nimport InterfaceStore from '@/store/InterfaceStore'\nimport { state, states } from '@/functions/Channels'\nimport { connectors } from '@/functions/Connect'\nimport { computed, onBeforeUnmount, ref } from 'vue'\n\nconst currentConnectorIndex = ref(connectors.value.findIndex(value => value.origin === state.origin && value.session === state.session))\n\n\t\t// const test = ref(false)\n\t\t// const testing = () => {\n\t\t// \ttest.value = !test.value\n\t\t// \tsetTimeout(testing, 4000)\n\t\t// }\n\t\t// testing()\n\t\t// const connectorsComp = computed(() => test.value ? [connectors.value[0], connectors.value[2]] : connectors.value)\n\t\t// InterfaceStore.toolbar.links = false\n\t\t// onBeforeUnmount(() => InterfaceStore.toolbar.links = true)\n</script>\n\n\n\n<style scoped>\n.connect {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n\n.connectors {\n\twidth: 100%;\n\tmin-height: var(--current-vh);\n}\n\n.connection-card-container {\n\theight: var(--current-vh);\n\twidth: var(--current-vw);\n\tmax-width: var(--column-width-small);\n\tpadding: 0;\n\tdisplay: inline-block;\n}\n\n.connection-card {\n\tpadding: var(--spacing);\n\tpadding-bottom: 0;\n\theight: 100%;\n}\n\n.wallet {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: space-evenly;\n}\n\n.address-icon {\n\twidth: 128px;\n\theight: 128px;\n\tborder-radius: var(--border-radius);\n}\n\n.bottom-info {\n\tposition: absolute;\n\tbottom: 0;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: flex-end;\n}\n\n.fade-list-leave-active {\n\tposition: absolute !important;\n\t/* scroll-snap-align: none; */\n}\n\n.fade-list-enter-active {\n\t/* scroll-snap-align: none; */\n}\n\n.fade-list-move {\n\t/* scroll-snap-align: none; */\n}\n</style>"],"names":["_hoisted_1","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","_openBlock","_createElementBlock","render"],"mappings":"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"}