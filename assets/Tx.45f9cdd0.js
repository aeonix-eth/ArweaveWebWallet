import{l as j,d as C,e as l,o as n,y as k,x as m,a as s,R as V,u as e,r as Y,w as $,c as r,s as h,Y as p,C as K,D as X,a9 as U,a2 as Z,E as u,a7 as b,af as R,P as H,ak as ee,p as te,a3 as ae,a4 as se}from"./vendor.eb613411.js";import{_ as z,a as ne,A as I,B as oe,u as re,L as le,b as ie,T as B,c as W,d as O,g as de,I as ce,F as ue,e as D,n as A,h as _e,f as ve,i as he,j as pe,k as q}from"./index.28feeb54.js";import{I as me}from"./download.51a079b9.js";import{P as F}from"./ProfilePreview.10d1c17e.js";import{O as fe}from"./OverlayPrompt.ed3c8b68.js";const ye={class:"frame-scroller"},ge=["src"],xe=j({props:["src"],emits:["load"],setup(_,{emit:o}){const a=C(null),t=C(null),v=C(null),g=f=>{console.log(f),t.value=f.contentRect.width/f.contentRect.height},i=()=>{v.value=a.value&&a.value.naturalWidth/a.value.naturalHeight,o("load")},c=l(()=>t.value&&v.value&&t.value<v.value),w=l(()=>t.value&&v.value&&t.value>=v.value);return(f,L)=>(n(),k(ne,{onResize:g,class:V(["img",{x:e(c),y:e(w)}])},{default:m(()=>[s("div",ye,[s("img",{ref_key:"imgRef",ref:a,src:_.src,onLoad:i},null,40,ge)])]),_:1},8,["class"]))}});var ke=z(xe,[["__scopeId","data-v-0f93abca"]]);const be=b("Load large file"),we={key:"json",class:"selector data-container box"},Ie={class:"raw"},Se=j({props:["tx"],setup(_){const o=_,a=Y({handler:void 0,payload:void 0,loaded:!1,intent:!1}),t=l(()=>I.gatewayURL+o.tx.id),v=l(()=>"https://arcode.studio/#/"+o.tx.id+"?theme=dark-blue&hideToolbar=true"),g=async()=>{if(!o.tx||o.tx.data?.size==="0"||o.tx.data?.size==null)return;const i=re(o.tx.tags);if(i["Bundle-Version"])return a.loaded=!0,a.handler={is:R(le),attrs:{query:ie({bundledIn:o.tx.id}),component:R(B),componentProps:{options:{space:!0}},class:["column"]},containerAttrs:{class:["data-container","column-container"]}};if(i["Content-Type"]==="application/x.arweave-manifest+json"||i["Content-Type"]==="text/html"||i["Content-Type"]==="application/pdf")return a.handler={is:"iframe",attrs:{src:t.value,class:["hover"]},containerAttrs:{class:["iframe-container"]}};if(i["Content-Type"]?.split("/")[0]==="video")return a.handler={is:"iframe",attrs:{src:t.value},containerAttrs:{class:["iframe-container"]}};if(o.tx.data.size>104857600&&!a.intent)return a.handler="intent";if(i["Content-Type"]?.split("/")[0]==="image")return a.handler={is:R(ke),attrs:{src:t.value},containerAttrs:{class:["img-container"]}};if(i["App-Name"]==="SmartWeaveContract"||i["App-Name"]==="SmartWeaveContractSource")return a.handler={is:"iframe",attrs:{src:v.value},containerAttrs:{class:["iframe-container"]}};a.handler="raw";try{if(a.payload=(await W.api.get(o.tx.id)).data,a.payload[0]==="{")try{a.payload=JSON.stringify(JSON.parse(a.payload),null,2),a.handler="json"}catch{}}catch{}};return $(()=>o.tx.id,()=>{a.handler=void 0,a.payload=void 0,a.loaded=!1,a.intent=!1,g()},{immediate:!0}),$(()=>a.intent,()=>{a.intent&&g()}),(i,c)=>e(a).handler==="intent"?(n(),r("div",{key:0,onClick:c[0]||(c[0]=w=>e(a).intent=!0),class:"selector data-container box",style:{display:"flex","justify-content":"center","padding-top":"5em"}},[h(oe,{icon:e(me)},{default:m(()=>[be]),_:1},8,["icon"])])):e(a).handler==="json"||e(a).handler==="raw"?(n(),r("div",we,[s("pre",Ie,p(e(a).payload),1)])):e(a).handler?K((n(),r("div",U({key:2},e(a).handler.containerAttrs,{class:"selector box"}),[(n(),k(Z(e(a).handler.is),U(e(a).handler.attrs,{onLoad:c[1]||(c[1]=w=>e(a).loaded=!0)}),null,16))],16)),[[X,e(a).loaded]]):u("",!0)}});var Ae=z(Se,[["__scopeId","data-v-e9171198"]]);const y=_=>(ae("data-v-0a898390"),_=_(),se(),_),Ce={key:0,style:{position:"relative",width:"100%","min-height":"var(--current-vh)",color:"var(--element-secondary)"}},Le={key:0},Te={key:1},Re={class:"meta flex-column"},De={class:"box",style:{padding:"0"}},$e={key:1,class:"spacer"},Be={key:2,class:"divider"},je=y(()=>s("h3",null,"Transaction",-1)),ze={class:"flex-column"},Pe={key:0},Ne=["href"],Ue={key:1},He=["href"],Oe={class:"secondary-text"},qe=b("ID:\xA0"),Fe={key:3},Ve=y(()=>s("h3",null,"Bundle",-1)),We={class:"flex-column"},Ee={class:"secondary-text"},Je=b("ID:\xA0"),Ge={key:4},Me=y(()=>s("h3",null,"Pending",-1)),Qe={key:5},Ye=y(()=>s("h3",null,"Block",-1)),Ke={key:0,class:"secondary-text"},Xe=y(()=>s("div",{class:"spacer"},null,-1)),Ze={class:"secondary-text"},et=b("ID:\xA0"),tt=y(()=>s("h3",null,"Data",-1)),at=b(" Fee: "),st={key:6},nt=y(()=>s("h3",null,"Tags",-1)),ot=[nt],rt={key:0,style:{background:"var(--background2)","border-radius":"var(--border-radius)"}},lt=j({props:{txId:null},setup(_){const o=_,a=O(H(o,"txId")),t=a.state,v=a.queryStatus,g=l(()=>t.value?.bundledIn?.id),c=O(g).state,w=l(()=>I.gatewayURL&&new URL(I.gatewayURL).hostname),f=l(()=>t.value?.bundledIn?.id||o.txId),L=de({params:f,query:async d=>(await W.transactions.getStatus(d)).status,completed:d=>!f.value||t.value?.block||d&&d!==404,seconds:30}).state,E=l(()=>t.value?.owner&&q(t.value?.owner.address)),J=l(()=>t.value?.recipient&&q(t.value?.recipient)),P=l(()=>t.value?.data?.size!=="0"),G=l(()=>!t.value?.block),M=l(()=>{if(!t.value?.block)return"";const d=new Date(t.value?.block.timestamp*1e3);return d.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})+" "+d.toLocaleTimeString()}),N=l(()=>A.value?.height&&t.value?.block?.height&&A.value?.height-t.value?.block?.height+1),S=l(()=>{if(!t.value?.tags)return;const d=[];for(const x of t.value?.tags)d.push({items:[{name:"",value:x.name,attrs:{disabled:!0}},{name:"",value:x.value,attrs:{disabled:!0}}]});return d}),Q=H(ce.breakpoints,"verticalContent"),T=C(0);return $(t,(d,x)=>{if(!!x){if(x?.bundledIn?.id===o.txId)return T.value=-1;T.value=1}}),(d,x)=>(n(),k(pe,{vector:T.value,axis:"x"},{default:m(()=>[e(t)?(n(),k(ue,{key:_.txId},ee({left:m(()=>[s("div",Re,[s("div",De,[s("div",{class:"box-padding flex-column",style:te([e(S).length&&"padding-bottom: 0"])},[h(B,{tx:e(t),options:{half:!0}},null,8,["tx"]),e(t).recipient?(n(),k(F,{key:0,wallet:e(J)},null,8,["wallet"])):u("",!0),e(t).recipient?(n(),r("div",$e)):u("",!0),e(t).recipient?(n(),r("div",Be)):u("",!0),h(F,{wallet:e(E)},null,8,["wallet"]),s("div",null,[je,s("div",ze,[s("div",null,[e(P)?(n(),r("div",Pe,[s("a",{href:e(I).gatewayURL+e(t).id,target:"_blank"},p(e(w)),9,Ne)])):u("",!0),e(t).data?.type==="application/x.arweave-manifest+json"?(n(),r("div",Ue,[s("a",{href:e(I).gatewayURL+"tx/"+e(t).id+"/data.json",target:"_blank"},"Manifest",8,He)])):u("",!0)]),s("div",Oe,[h(D,{address:e(t).id},{default:m(()=>[qe]),_:1},8,["address"])])])]),e(t).bundledIn?.id?(n(),r("div",Fe,[Ve,s("div",We,[e(c)?(n(),k(B,{key:0,tx:e(c),options:{space:!0}},null,8,["tx"])):u("",!0),s("div",Ee,[h(D,{address:e(t).bundledIn?.id},{default:m(()=>[Je]),_:1},8,["address"])])])])):u("",!0),e(G)?(n(),r("div",Ge,[Me,s("div",null,"Status: "+p(e(L)?e(L):"..."),1)])):(n(),r("div",Qe,[Ye,s("div",null,[b(" Height: "+p(e(t).block.height)+" ",1),e(A)?.height?(n(),r("span",Ke,"/ "+p(e(A).height)+" ("+p(e(N))+" confirmation"+p(e(N)>1?"s":"")+")",1)):u("",!0)]),s("div",null,p(e(M)),1),Xe,s("div",Ze,[h(D,{address:e(t).block.id},{default:m(()=>[et]),_:1},8,["address"])])])),s("div",null,[tt,s("div",null,"Size: "+p(e(_e)(e(t).data.size)),1),s("div",null,[at,h(ve,{ar:e(t).fee.ar},null,8,["ar"])])]),e(S).length?(n(),r("div",st,ot)):u("",!0)],4),e(S).length?(n(),r("div",rt,[h(he,{schema:e(S),disabled:""},null,8,["schema"])])):u("",!0)])])]),_:2},[e(t)&&e(P)?{name:"right",fn:m(()=>[h(Ae,{tx:e(t),class:V({inline:!e(Q)})},null,8,["tx","class"])])}:void 0]),1024)):(n(),r("div",Ce,[h(fe,{options:{icon:"loader"},class:"box"},{default:m(()=>[e(v).error?(n(),r("h2",Le,p(e(v).error),1)):(n(),r("h2",Te,"Loading"))]),_:1})]))]),_:1},8,["vector"]))}});var vt=z(lt,[["__scopeId","data-v-0a898390"]]);export{vt as default};
//# sourceMappingURL=Tx.45f9cdd0.js.map
