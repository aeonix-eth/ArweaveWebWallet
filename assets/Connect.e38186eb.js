var ye=Object.defineProperty,he=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var ee=(e,a,s)=>a in e?ye(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,R=(e,a)=>{for(var s in a||(a={}))ke.call(a,s)&&ee(e,s,a[s]);if(Z)for(var s of Z(a))be.call(a,s)&&ee(e,s,a[s]);return e},te=(e,a)=>he(e,xe(a));import{W as E,X as $e,e as b,d as T,a8 as we,ak as Ie,w as P,a9 as Ce,o as t,c as n,q as f,s as I,D as $,$ as ae,aa as N,n as F,u,P as D,a1 as H,a2 as U,a as r,F as C,l as L,i as Ve,x as z,V as B,z as Se,C as Te,T as ze,a5 as j,a0 as Be,t as Me}from"./vendor.241c16ad.js";import{_ as V,j as se,k as q,d as ne,l as A,m as W,o as Ae,I as le,h as Ee,p as Le,T as Pe,q as oe,r as ie,s as je,t as O,B as We,v as ce,w as de,x as Ne,y as De,z as ue,C as re,D as ve}from"./index.669536e6.js";import{I as _e}from"./y.f9a54597.js";const Oe={class:"margin fade-list-item",key:"margin1"},Re={class:"margin fade-list-item",key:"margin2"},Fe=E({props:{modelValue:null,options:null},emits:["update:modelValue"],setup(e,{emit:a}){const s=e,c=$e("transitionState",null),l=b({get(){return s.modelValue},set(d){a("update:modelValue",d)}}),o=T(null),m=d=>{if(!(!d||!o.value))return s.options.align==="center"?d.offsetLeft+d.offsetWidth/2-o.value.offsetWidth/2:s.options.align==="end"?d.offsetLeft+d.offsetWidth-o.value.offsetWidth:d.offsetLeft},x=b(()=>{var d;return w.value,((d=o.value)==null?void 0:d.children)?Array(...o.value.children).filter(i=>!i.classList.contains("margin")):[]}),g=b(()=>{var d;return{"--position":((d=s.options)==null?void 0:d.align)||"start"}}),k=async(d,i)=>{var v;!i&&s.options.awaitTransition&&await se(()=>!c.running),d=Math.max(d||0,0),(v=o.value)==null||v.scroll({left:m(x.value[d]),behavior:i?"instant":"smooth"})};let y;const w=T(0);return we(async()=>{y=new MutationObserver(async()=>{w.value++}),y.observe(o.value,{subtree:!1,childList:!0}),await Ie(),await se(()=>x.value.length),setTimeout(()=>{const d=!s.options.immediate&&l.value&&l.value>0||!1;k(d?0:l.value,!0),P(l,i=>k(i),{immediate:d})})}),Ce(()=>y&&y.disconnect()),(d,i)=>(t(),n("div",{ref_key:"root",ref:o,class:"carousel flex-row no-scrollbar",style:F(u(g))},[f(N,{name:"fade-list"},{default:I(()=>{var v,_;return[((v=e.options)==null?void 0:v.overscroll)?(t(),n("div",Oe)):$("",!0),ae(d.$slots,"default",{},void 0,!0),((_=e.options)==null?void 0:_.overscroll)?(t(),n("div",Re)):$("",!0)]}),_:3})],4))}});var me=V(Fe,[["__scopeId","data-v-5e316723"]]);const fe=e=>(H("data-v-7b045f16"),e=e(),U(),e),He={class:"wallet-selector"},Ue=fe(()=>r("div",{class:"exit-background"},null,-1)),qe=fe(()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[r("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})],-1)),Ke=[Ue,qe],Xe=E({props:{modelValue:String,default:String,exit:Boolean,active:Boolean},emits:["update:modelValue","selectWallet","exit"],setup(e,{emit:a}){const s=e,c=b({get(){return s.modelValue||s.default},set(o){a("update:modelValue",o)}}),l=b(()=>{var o;return(o=q(c.value))==null?void 0:o.key});return(o,m)=>(t(),n("div",He,[u(c)?(t(),n("button",{key:0,type:"button",onClick:m[0]||(m[0]=x=>o.$emit("selectWallet")),class:D(["tab",{active:e.active}])},[f(ne,{address:u(l)},null,8,["address"])],2)):$("",!0),e.exit?(t(),n("button",{key:1,class:"exit",type:"button",onClick:m[1]||(m[1]=x=>o.$emit("exit"))},Ke)):$("",!0)]))}});var Ge=V(Xe,[["__scopeId","data-v-7b045f16"]]);const Qe={class:"wallet-tabs"},Ye=["onClick"],Je=E({props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:a}){const s=e,c=b({get(){return s.modelValue},set(o){a("update:modelValue",o)}}),l=b(()=>A.value.findIndex(o=>o.id===c.value));return(o,m)=>(t(),n("div",Qe,[f(me,{modelValue:u(l),"onUpdate:modelValue":m[0]||(m[0]=x=>Ve(l)?l.value=x:null),options:{align:"center",overscroll:!0,immediate:!0}},{default:I(()=>[(t(!0),n(C,null,L(u(A),x=>(t(),n("button",{key:x.id,type:"button",onClick:g=>c.value=x.id,class:D(["tab",{active:x.id==u(c)}])},[f(ne,{address:x.key},null,8,["address"])],10,Ye))),128))]),_:1},8,["modelValue"])]))}});var Ze=V(Je,[["__scopeId","data-v-35e1b97b"]]);const et={class:"icon-background"},tt={props:["icon","img"],setup(e){return(a,s)=>(t(),n("div",et,[e.img?(t(),z(W,{key:0,class:"page-logo",icon:e.img},null,8,["icon"])):(t(),z(W,{key:1,class:"page-logo placeholder",icon:e.icon},null,8,["icon"]))]))}};var ge=V(tt,[["__scopeId","data-v-7bef1ba0"]]);const pe=e=>(H("data-v-9a5c4e1a"),e=e(),U(),e),at=pe(()=>r("path",{d:"M24 24H0V0h24v24z",fill:"none",opacity:".87"},null,-1)),st=pe(()=>r("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"},null,-1)),nt=[at,st],lt={props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:a}){const s=e,c=b({get(){return s.modelValue},set(l){a("update:modelValue",l)}});return(l,o)=>(t(),n("button",{type:"button",class:"expand",onClick:o[0]||(o[0]=m=>c.value=!u(c))},[(t(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:D({expanded:u(c)})},nt,2))]))}};var ot=V(lt,[["__scopeId","data-v-9a5c4e1a"]]);const it={class:"actions-list flex-row"},ct=["onClick"],dt={props:["actions"],setup(e){return(a,s)=>(t(),n("div",it,[(t(!0),n(C,null,L(e.actions,c=>(t(),n("button",{key:c.name,onClick:c.run,type:"button",class:"action flex-row"},[f(W,{icon:c.icon},null,8,["icon"]),r("div",null,B(c.name),1)],8,ct))),128))]))}};var K=V(dt,[["__scopeId","data-v-99d382fa"]]);const ut={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFF"},rt=r("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),vt=r("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"},null,-1),_t=[rt,vt];function mt(e,a){return t(),n("svg",ut,_t)}var ft={render:mt};const gt={class:"flex-row"},pt={class:"flex-row",style:{flex:"1 1 0"}},yt={class:"content"},ht={class:"title"},xt={class:"secondary-text"},kt={props:["data"],setup(e){return(a,s)=>(t(),n("div",{class:D(["notification",{expanded:e.data.expanded}])},[r("div",gt,[r("div",pt,[f(ge,{icon:e.data.icon||u(ft),img:e.data.img},null,8,["icon","img"]),r("div",yt,[e.data.expanded?(t(),z(Ae,{key:0,class:"secondary-text",timestamp:e.data.timestamp},null,8,["timestamp"])):$("",!0),r("div",ht,B(e.data.title),1),r("div",xt,[ae(a.$slots,"default",{},void 0,!0)]),e.data.expanded?(t(),z(K,{key:1,actions:e.data.actions},null,8,["actions"])):$("",!0)])]),f(ot,{modelValue:e.data.expanded,"onUpdate:modelValue":s[0]||(s[0]=c=>e.data.expanded=c)},null,8,["modelValue"])])],2))}};var bt=V(kt,[["__scopeId","data-v-7ece1c50"]]);const $t={class:"tx-card-extension"},wt={key:0,class:"flex-row",style:{"justify-content":"space-between"}},It={key:0},Ct={key:1},Vt={key:1,class:"tags secondary-text"},St={props:["tx"],setup(e){return b(()=>le.breakpoints.verticalLayout),(a,s)=>(t(),n("div",$t,[e.tx.tags.length||e.tx.data_size?(t(),n("div",wt,[e.tx.tags.length?(t(),n("div",It,"Tags:")):$("",!0),e.tx.data_size?(t(),n("div",Ct,"Data: "+B(u(Ee)(e.tx.data_size)),1)):$("",!0)])):$("",!0),e.tx.tags.length?(t(),n("ul",Vt,[(t(!0),n(C,null,L(e.tx.tags,c=>(t(),n("li",null,B(c.name+" | "+c.value),1))),256))])):$("",!0)]))}};var Tt=V(St,[["__scopeId","data-v-5ae3361a"]]);const zt={class:"permission-card"},Bt=j(" Share the public key "),Mt=j(" Share the arweave config "),At=j(" Sign data "),Et=j(" Decrypt data "),Lt=E({props:{messageEntry:null},setup(e){const a=e,s=T(null),c=b(()=>{var g,k,y,w;if(((g=s.value)==null?void 0:g.method)!=="signTransaction")return;const m=(y=(k=s.value)==null?void 0:k.params)==null?void 0:y[0],x=(w=m.tags)==null?void 0:w.map(({name:d,value:i})=>({name:window.atob(d),value:window.atob(i)}));return te(R({},m),{tags:x})});P(()=>a.messageEntry,async()=>{s.value=await Le(a.messageEntry)},{immediate:!0});const l=[{name:"Accept",icon:_e,run:()=>a.messageEntry.status="accepted"},{name:"Reject",icon:oe,run:()=>a.messageEntry.status="rejected"}],o=[{name:"Pending",icon:ie,run:()=>{}}];return(m,x)=>{var g,k,y,w,d;return Se((t(),n("div",zt,[((g=s.value)==null?void 0:g.method)==="signTransaction"?(t(),n(C,{key:0},[f(Pe,{tx:u(c)},null,8,["tx"]),f(Tt,{tx:u(c)},null,8,["tx"])],64)):((k=s.value)==null?void 0:k.method)==="getPublicKey"?(t(),n(C,{key:1},[Bt],64)):((y=s.value)==null?void 0:y.method)==="getArweaveConfig"?(t(),n(C,{key:2},[Mt],64)):((w=s.value)==null?void 0:w.method)==="sign"?(t(),n(C,{key:3},[At],64)):((d=s.value)==null?void 0:d.method)==="decrypt"?(t(),n(C,{key:4},[Et],64)):$("",!0),f(ze,{name:"fade",mode:"out-in"},{default:I(()=>[e.messageEntry.status?(t(),z(K,{key:1,actions:o})):(t(),z(K,{key:0,actions:l}))]),_:1})],512)),[[Te,s.value]])}}});var Pt=V(Lt,[["__scopeId","data-v-0e1a76fc"]]);const jt={class:"flex-column no-scrollbar"},Wt=["disabled","onClick"],Nt=j(" Apply "),Dt=E({props:{state:null,walletId:null},setup(e){const a=e,s={connect:"Connect automatically",signTransaction:"Sign transaction",getPublicKey:"Share public key",sign:"Sign arbitrary data",decrypt:"Decrypt data",getArweaveConfig:"Share arweave gateway configuration"},c=i=>Object.getOwnPropertyNames(Object.getPrototypeOf((i==null?void 0:i.messageRunner)||{})).filter(v=>{var _;return!((_=i==null?void 0:i.messageRunner.getMethodMetadata(v))==null?void 0:_.unavailable)&&v!=="constructor"&&v!=="getMethodMetadata"}).map(v=>{var _;return{name:v,displayName:s[v]||v,disabled:(_=i==null?void 0:i.messageRunner.getMethodMetadata(v))==null?void 0:_.userIntent}}),l=b(()=>q(a.walletId)),o=b(()=>[...c(l.value)]),m=i=>g.value&&(g.value[i]=!g.value[i]),x=je("connectionSettings:",a.state.origin,{}),g=T(void 0),k=T(void 0);P(l,i=>{var v,_,M;!(i==null?void 0:i.uuid)||((v=x.state).value||(v.value={}),k.value=(_=x.state.value)[M=i.uuid]||(_[M]={}),g.value=R({},k.value))},{immediate:!0});const y=([i,v])=>{var M;const _=((M=k.value)==null?void 0:M[i])||!1;if(v!==_)return!0},w=b(()=>g.value?Object.entries(g.value).find(y):!1),d=()=>{if(!g.value||!k.value)return!1;Object.entries(g.value).filter(y).forEach(([i,v])=>k.value&&(k.value[i]=v))};return(i,v)=>(t(),n("div",jt,[(t(!0),n(C,null,L(u(o),_=>(t(),n("button",{key:_.name,disabled:_.disabled,class:"row method",onClick:M=>m(_.name)},[r("div",null,B(_.displayName),1),f(O,{vector:g.value[_.name]?1:-1,axis:"y"},{default:I(()=>[(t(),n("div",{key:g.value[_.name]},B(g.value[_.name]?"Allow":"Ask"),1))]),_:2},1032,["vector"])],8,Wt))),128)),f(O,null,{default:I(()=>[u(w)?(t(),z(We,{key:0,onClick:v[0]||(v[0]=_=>d())},{default:I(()=>[Nt]),_:1})):$("",!0)]),_:1})]))}});var Ot=V(Dt,[["__scopeId","data-v-81b70f2e"]]);const Rt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#fff"},Ft=r("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Ht=r("path",{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},null,-1),Ut=[Ft,Ht];function qt(e,a){return t(),n("svg",Rt,Ut)}var Kt={render:qt};const Xt=e=>(H("data-v-f8226c46"),e=e(),U(),e),Gt={class:"connection-card flex-column no-scrollbar"},Qt={class:"flex-row"},Yt=["disabled"],Jt={style:{"min-width":"0"}},Zt={class:"ellipsis"},ea={class:"secondary-text ellipsis"},ta={class:"flex-column",style:{flex:"1 1 0"}},aa={class:"container"},sa=Xt(()=>r("div",null,"Add wallet",-1)),na={class:"page-container",key:"0"},la={key:0},oa={class:"status fade-list-item",key:"1"},ia={key:1},ca=E({props:{state:null},setup(e){var G;const a=e,s=Be(),c=(G=A.value[0])==null?void 0:G.id;b(()=>A.value.map(p=>p.key));const l=T(a.state.walletId||c);b(()=>q(c));const o=[{name:"Requests",color:"var(--orange)"},{name:"Permissions",color:"var(--green)"}],m=T(l.value?o[0].name:null);P(()=>a.state.walletId,p=>{!p||(y.value=!1,l.value=p,m.value=o[0].name)});const x=()=>a.state.walletId=!1,g=()=>{y.value=!1,a.state.walletId=l.value+""},k=()=>{var p;!a.state.walletId||(l.value!==(a.state.walletId||((p=A.value[0])==null?void 0:p.id))&&d.value++,y.value=!1,l.value=a.state.walletId)},y=T(!a.state.walletId),w=b(()=>y.value&&A.value.length>1),d=T(0),i=()=>{var p,h;if(!y.value){y.value=!0;return}l.value!==(a.state.walletId||((p=A.value[0])==null?void 0:p.id))&&d.value++,l.value=a.state.walletId||((h=A.value[0])==null?void 0:h.id),y.value=!1},v=b(()=>{var h;const p=a.state.walletId?`Switch to ${l.value}`:`Connect to ${((h=a.state.appInfo)==null?void 0:h.name)||a.state.origin} from the account ${l.value}`;return{title:a.state.walletId?"Switch":"Connect",timestamp:Date.now(),actions:[{name:"Connect",icon:_e,run:g},{name:a.state.walletId?"Cancel":"Switch",icon:oe,run:a.state.walletId?k:i}],expanded:!0,content:p}}),_=b(()=>{var p;return l.value!==a.state.walletId?[]:(p=a.state.messageQueue)==null?void 0:p.filter(h=>!h.fulfilled)});Me(le.breakpoints,"verticalLayout");const M=T(null),X=(p,h)=>M.value=p-h;return P(()=>o.findIndex(p=>p.name===m.value),X),P(()=>A.value.findIndex(p=>p.id===l.value),X),(p,h)=>{var Q,Y;return t(),n("div",Gt,[r("div",Qt,[r("button",{type:"button",class:"info flex-row",onClick:h[0]||(h[0]=(...S)=>u(ce)&&u(ce)(...S)),disabled:!u(de)(e.state.origin,e.state.session)},[f(ge,{img:(Q=e.state.appInfo)==null?void 0:Q.logo,icon:u(ie)},null,8,["img","icon"]),r("div",Jt,[r("div",Zt,B(((Y=e.state.appInfo)==null?void 0:Y.name)||"Connector"),1),r("div",ea,B(e.state.origin),1)]),u(de)(e.state.origin,e.state.session)?(t(),z(W,{key:0,icon:u(Kt)},null,8,["icon"])):$("",!0)],8,Yt),f(Ge,{modelValue:e.state.walletId,"onUpdate:modelValue":h[1]||(h[1]=S=>e.state.walletId=S),default:u(c),exit:!0,active:!u(w),onSelectWallet:i,onExit:x},null,8,["modelValue","default","active"])]),r("div",ta,[f(Ne,{tabs:o,modelValue:m.value,"onUpdate:modelValue":h[2]||(h[2]=S=>m.value=S),disabled:!l.value},null,8,["modelValue","disabled"]),r("div",aa,[f(O,{vector:M.value,axis:"x"},{default:I(()=>[u(A).length?(t(),n("div",{class:"container-scroll",key:d.value},[f(N,{name:"fade-list"},{default:I(()=>[u(w)?(t(),z(Ze,{modelValue:l.value,"onUpdate:modelValue":h[4]||(h[4]=S=>l.value=S),class:"fade-list-item",key:"-1"},null,8,["modelValue"])):$("",!0),r("div",na,[f(O,{vector:M.value,axis:"x"},{default:I(()=>[(t(),n("div",{key:(l.value||"")+m.value,class:"content"},[m.value==="Requests"?(t(),n("div",la,[f(N,{name:"fade-list"},{default:I(()=>{var S;return[r("div",{class:"fade-list-item",key:"0",style:F({padding:0,border:0,outline:"0.5px solid var(--border)"})},null,4),((S=u(_))==null?void 0:S.length)===0&&e.state.walletId&&e.state.walletId===l.value?(t(),n("div",oa,"Connected")):$("",!0),l.value!==e.state.walletId?(t(),z(bt,{data:u(v),class:"fade-list-item",key:"2"},{default:I(()=>[j(B(u(v).content),1)]),_:1},8,["data"])):$("",!0),(t(!0),n(C,null,L(u(_),J=>(t(),z(Pt,{key:J.uuid,messageEntry:J,style:{padding:"var(--spacing)"},class:"flex-column fade-list-item"},null,8,["messageEntry"]))),128))]}),_:1})])):m.value==="Permissions"?(t(),n("div",ia,[f(N,{name:"fade-list"},{default:I(()=>[r("div",{class:"fade-list-item",key:"0",style:F({padding:0,border:0,outline:"0.5px solid var(--border)"})},null,4),f(Ot,{state:e.state,walletId:l.value,class:"fade-list-item",key:"2"},null,8,["state","walletId"])]),_:1})])):$("",!0)]))]),_:1},8,["vector"])])]),_:1})])):(t(),n("div",{key:0,class:"status flex-column",style:{color:"inherit",cursor:"pointer"},onClick:h[3]||(h[3]=S=>u(s).push("/add"))},[f(W,{icon:u(De),style:{"font-size":"3em","margin-top":"40%"}},null,8,["icon"]),sa]))]),_:1},8,["vector"])])])])}}});var da=V(ca,[["__scopeId","data-v-f8226c46"]]);const ua={class:"connect flex-column"},ra={class:"bottom-info secondary-text",style:{opacity:"0.0","pointer-events":"none"}},va=E({setup(e){const a=T(ue.value.findIndex(s=>s.origin===re.origin&&s.session===re.session));return(s,c)=>(t(),n("div",ua,[f(me,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=l=>a.value=l),options:{align:"start",overscroll:!0},class:"connectors"},{default:I(()=>[(t(!0),n(C,null,L(u(ue),l=>(t(),n("div",{key:l.session,class:"connection-card-container fade-list-item"},[f(da,{state:l,class:"box"},null,8,["state"])]))),128))]),_:1},8,["modelValue"]),r("div",ra,[r("div",null,"All Channels "+B(Object.keys(u(ve)).length),1),(t(!0),n(C,null,L(u(ve),(l,o)=>(t(),n("div",{key:o},B(l),1))),128))])]))}});var pa=V(va,[["__scopeId","data-v-7c3f5fef"]]);export{pa as default};
//# sourceMappingURL=Connect.e38186eb.js.map
