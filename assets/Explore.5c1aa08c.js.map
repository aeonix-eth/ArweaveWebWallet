{"version":3,"file":"Explore.5c1aa08c.js","sources":["../../src/functions/UtilsVue.ts","../../src/components/composed/GlobalSearch.vue","../../src/components/composed/BlockCard.vue","../../src/components/composed/BlockCarousel.vue","../../src/views/Explore.vue"],"sourcesContent":["import { customRef } from 'vue'\n\nexport function useDebouncedRef<T>(value: T, delay = 200) {\n\tlet timeout: any\n\treturn customRef((track, trigger) => {\n\t\treturn {\n\t\t\tget() {\n\t\t\t\ttrack()\n\t\t\t\treturn value\n\t\t\t},\n\t\t\tset(newValue: T) {\n\t\t\t\tclearTimeout(timeout)\n\t\t\t\ttimeout = setTimeout(() => {\n\t\t\t\t\tvalue = newValue\n\t\t\t\t\ttrigger()\n\t\t\t\t}, delay)\n\t\t\t}\n\t\t}\n\t})\n}","<template>\n\t<div class=\"global-search\">\n\t\t<div class=\"input-container\">\n\t\t\t<Input v-model=\"search\" :actions=\"[searchAction]\" placeholder=\"Search - address, transaction id, username, app name\" style=\"flex:1 1 0;\" />\n\t\t</div>\n\t\t<TransitionsManager>\n\t\t\t<div v-if=\"search.length\" class=\"results input-box\">\n\t\t\t\t<div class=\"query-list input-box flex-column\">\n\t\t\t\t\t<div v-if=\"wallet\" class=\"flex-column\">\n\t\t\t\t\t\t<div class=\"secondary-text\">User</div>\n\t\t\t\t\t\t<ProfileCard :wallet=\"wallet\" compact=\"true\" />\n\t\t\t\t\t\t<div />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"secondary-text\">Transactions</div>\n\t\t\t\t\t<List :query=\"topQuery\" :component=\"TxCard\" :component-props=\"{ options: { currentAddress: wallet?.key } }\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</TransitionsManager>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport Input from '@/components/atomic/Input.vue'\nimport List from '@/components/layout/List.vue'\nimport IconSearch from '@/assets/icons/search.svg?component'\nimport { computed } from 'vue'\nimport { arweaveQuery, queryAggregator } from '@/store/ArweaveStore'\nimport TxCard from '@/components/composed/TxCard.vue'\nimport TransitionsManager from '@/components/visual/TransitionsManager.vue'\nimport ProfileCard from '@/components/composed/ProfileCard.vue'\nimport { getAccountByAddress } from '@/functions/Wallets'\nimport { useDebouncedRef } from '@/functions/UtilsVue'\n\n\nconst search = useDebouncedRef('', 1000)\nconst isId = computed(() => search.value.match(/^[a-z0-9_-]{43}$/i))\nconst searchAction = { run: () => {}, icon: IconSearch }\n\nconst wallet = computed(() => isId.value && userTxQuery?.state?.value?.length && getAccountByAddress(search.value))\n\nconst userTxQuery = queryAggregator([\n\tarweaveQuery(computed(() => isId.value ? { owners: [search.value] } : undefined), 'global search user'),\n\tarweaveQuery(computed(() => isId.value ? { recipients: [search.value] } : undefined), 'global search user'),\n])\n\nconst nameQuery = queryAggregator([\n\tarweaveQuery(computed(() => !isId.value ? { tags: [{ name: 'App-Name', values: ['arweave-id'] }, { name: 'Name', values: [search.value] }] } : undefined)),\n\tarweaveQuery(computed(() => !isId.value ? { tags: [{ name: 'App-Name', values: [search.value] }] } : undefined)),\n\tarweaveQuery(computed(() => !isId.value && search.value.toLowerCase() !== search.value ? { tags: [{ name: 'App-Name', values: [search.value.toLowerCase()] }] } : undefined)),\n])\n\nconst topQuery = queryAggregator([\n\tarweaveQuery(computed(() => isId.value ? { ids: [search.value] } : undefined)),\n\tuserTxQuery,\n\tnameQuery,\n])\n</script>\n\n\n\n<style scoped>\n.global-search {\n\tposition: relative;\n}\n\n.input-container {\n\tbackground: var(--background2);\n\tborder-radius: var(--border-radius);\n\tposition: relative;\n\tz-index: 2;\n}\n\n.results {\n\ttop: calc(100% - var(--border-radius));\n\tbackground: var(--background2);\n\tborder-top-left-radius: 0;\n\tborder-top-right-radius: 0;\n\tposition: absolute;\n\twidth: 100%;\n\tmax-height: calc(var(--current-vh) * 0.8);\n\toverflow: hidden;\n\tz-index: 1;\n}\n\n.query-list {\n\tborder: 0;\n\tborder-radius: 0;\n\tpadding: var(--spacing);\n\tmax-height: calc(var(--current-vh) * 0.8);\n\toverflow: auto;\n}\n\n.result {\n}\n</style>","<template>\n\t<ListContainer class=\"block-card\">\n\t\t<template #header>\n\t\t\t<Observer @intersection=\"visible = true\" :threshold=\"0.5\">\n\t\t\t\t<div class=\"flex-row\" style=\"align-items: center; justify-content: space-between; flex-wrap: wrap;\">\n\t\t\t\t\t<h2 class=\"flex-row\" style=\"align-items: center;\">\n\t\t\t\t\t\t<Icon :icon=\"IconCube\" style=\"font-size: 1.5em; color: var(--orange);\" />\n\t\t\t\t\t\t<span>Block {{ block.node.height }}</span>\n\t\t\t\t\t</h2>\n\t\t\t\t\t<TransitionsManager>\n\t\t\t\t\t\t<div v-if=\"blockData\" style=\"text-align: end; flex: 1 1 auto;\">\n\t\t\t\t\t\t\t<div>{{ blockData.txs?.length }} Transactions | {{ humanFileSize(blockData.block_size) }}</div>\n\t\t\t\t\t\t\t<div><Date :timestamp=\"blockData.timestamp * 1000\" /></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</TransitionsManager>\n\t\t\t\t</div>\n\t\t\t</Observer>\n\t\t</template>\n\t\t<template #default>\n\t\t\t<div v-if=\"visible\" class=\"container-scroll\">\n\t\t\t\t<List :query=\"txsQuery\" :component=\"TxCard\" :componentProps=\"{ options: { space: true } }\" />\n\t\t\t</div>\n\t\t</template>\n\t</ListContainer>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport ListContainer from '@/components/layout/ListContainer.vue'\nimport Date from '@/components/atomic/Date.vue'\nimport TransitionsManager from '@/components/visual/TransitionsManager.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport TxCard from '@/components/composed/TxCard.vue'\nimport List from '@/components/layout/List.vue'\nimport Observer from '@/components/function/Observer.vue'\nimport IconCube from '@/assets/icons/cube.svg?component'\nimport { ref } from 'vue'\nimport { arweave, arweaveQuery } from '@/store/ArweaveStore'\nimport { humanFileSize } from '@/functions/Utils'\nimport { getAsyncData } from '@/functions/AsyncData'\n\nconst props = defineProps<{ block: any }>()\n\nconst visible = ref(false)\nconst txsQuery = arweaveQuery({ block: { min: props.block.node.height, max: props.block.node.height } })\nconst blockData = getAsyncData({\n\tname: 'single block header',\n\tawaitEffect: () => visible.value,\n\tquery: async () => arweave.blocks.get(props.block.node.id),\n\tseconds: 10,\n\tcompleted: state => state\n}).state\n</script>\n\n\n\n<style scoped>\n.container-scroll {\n\theight: 100%;\n\toverflow: hidden auto;\n}\n\n.list {\n\tpadding: var(--spacing);\n}\n</style>","<template>\n\t<div class=\"block-carousel\">\n\t\t<Carousel v-model=\"index\" :options=\"{ align: 'center', overscroll: true, immediate: true }\" @start=\"start\" @end=\"end\" class=\"block-carousel\">\n\t\t\t<div v-for=\"block in state\" :key=\"block.node.id\" class=\"block fade-list-item\">\n\t\t\t\t<BlockCard :block=\"block\" class=\"box\" />\n\t\t\t</div>\n\t\t\t<div v-if=\"canMine && state.length\" class=\"block fade-list-item box flex-column\" style=\"align-items: center; justify-content: center\">\n\t\t\t\t<Icon :icon=\"IconCube\" style=\"font-size: 4em; opacity: 0.8;\" />\n\t\t\t\t<Button @click=\"mine\">Mine new block</Button>\n\t\t\t</div>\n\t\t</Carousel>\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport Carousel from '@/components/layout/Carousel.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport IconCube from '@/assets/icons/cube.svg?component'\nimport { ref, computed, watch } from 'vue'\nimport ArweaveStore, { arweaveQueryBlocks, networkInfo } from '@/store/ArweaveStore'\nimport BlockCard from '@/components/composed/BlockCard.vue'\nimport Button from '@/components/atomic/Button.vue'\n\n\nconst index = ref(undefined as undefined | number)\nconst query = arweaveQueryBlocks({})\nconst state = computed(() => query.state.value && [...query.state.value].reverse())\nwatch(state, (state, oldState) => !oldState?.length && state?.length && (index.value = state.length - 1))\n\nconst canMine = computed(() => networkInfo.value?.network?.includes('arlocal'))\nconst mine = async () => {\n\tawait fetch(ArweaveStore.gatewayURL + 'mine')\n\tawait query.updateQuery.getState(true)\n\tsetTimeout(() => index.value = state.value!.length - 1, 500)\n}\n\nconst start = (val: IntersectionObserverEntry) => val.isIntersecting && query?.fetchQuery.query()\nconst end = (val: IntersectionObserverEntry) => val.isIntersecting\n</script>\n\n\n\n<style>\n.block-carousel {\n\tdisplay: flex;\n\tjustify-content: stretch;\n\tflex-direction: column;\n\tmin-height: 500px;\n\twidth: 100%;\n}\n\n.carousel {\n\theight: 100%;\n\tflex: 1 1 0;\n}\n\n.block {\n\tpadding-top: var(--spacing);\n\theight: 100%;\n\twidth: var(--current-vw);\n\tmax-width: var(--column-width-small);\n\t/*padding: 0;*/\n\tdisplay: inline-flex;\n\tflex-direction: column;\n}\n\n.box {\n\tflex: 1 1 0;\n}\n</style>","<template>\n\t<div class=\"settings\">\n\t\t<div class=\"container\">\n\t\t\t<div class=\"column\">\n\t\t\t\t<GlobalSearch />\n\t\t\t\t<div class=\"group\">\n\t\t\t\t\t<h2><span style=\"text-transform: capitalize;\">{{ gatewayHostname }}</span> Gateway State</h2>\n\t\t\t\t\t<div class=\"flex-column\">\n\t\t\t\t\t\t<div>Peers: {{ networkInfo?.peers ?? '...' }}</div>\n\t\t\t\t\t\t<div>Queue: {{ networkInfo?.queue_length ?? '...' }}</div>\n\t\t\t\t\t\t<div>State Latency: {{ networkInfo?.node_state_latency ?? '...' }}</div>\n\t\t\t\t\t\t<div>Pending Transactions: {{ pendingList?.length ?? '...' }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"group\">\n\t\t\t\t\t<h2>Weave State</h2>\n\t\t\t\t\t<div class=\"flex-column\">\n\t\t\t\t\t\t<div>Network Height: {{ networkInfo?.height ?? '...' }}</div>\n\t\t\t\t\t\t<div>Weave Size: {{ currentBlock?.weave_size && humanFileSize(currentBlock?.weave_size) || '...' }}</div>\n\t\t\t\t\t\t<div>Endowment Pool: <Amount :winston=\"currentBlock?.reward_pool\" /></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<BlockCarousel />\n\t</div>\n</template>\n\n\n\n<script setup lang=\"ts\">\nimport ArweaveStore, { currentBlock, networkInfo } from '@/store/ArweaveStore'\nimport { humanFileSize } from '@/functions/Utils'\nimport Amount from '@/components/composed/Amount.vue'\nimport { pendingList } from '@/store/BlockStore'\nimport GlobalSearch from '@/components/composed/GlobalSearch.vue'\nimport BlockCarousel from '@/components/composed/BlockCarousel.vue'\nimport { computed } from 'vue'\n\nconst gatewayHostname = computed(() => ArweaveStore.gatewayURL && new URL(ArweaveStore.gatewayURL).hostname)\n</script>\n\n\n\n<style scoped>\n.settings {\n\tmin-height: var(--current-vh);\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n\n.container {\n\tbackground: var(--background2);\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\toutline: 0.5px solid var(--border);\n}\n\n.column {\n\tpadding: var(--spacing);\n\twidth: 100%;\n\tmax-width: var(--column-width);\n}\n\n.group {\n\tmargin-top: 3em;\n}\n\n.wallet-options {\n\tborder-radius: var(--border-radius);\n}\n\n.block-carousel {\n\tflex: 1 0 auto;\n}\n</style>"],"names":[],"mappings":"kuBAEmC,YAAA,EAAU,EAAa,CACrD,GAAA,GACG,MAAA,GAAU,CAAC,EAAO,IACjB,EACN,KAAM,CACC,WACC,CACR,EACA,IAAI,EAAa,CAChB,aAAa,CAAO,EACpB,EAAU,WAAW,IAAM,CAClB,EAAA,EACA,KACN,CAAK,CACT,CAAA,EAED,CACF,4XCiBM,KAAA,GAAS,GAAgB,GAAI,GAAI,EACjC,EAAO,EAAS,IAAM,EAAO,MAAM,MAAM,mBAAmB,CAAC,EAC7D,EAAe,CAAE,IAAK,IAAM,CAAA,EAAI,KAAM,GAEtC,EAAS,EAAS,IAAM,EAAK,OAAS,GAAa,OAAO,OAAO,QAAU,EAAoB,EAAO,KAAK,CAAC,EAE5G,EAAc,EAAgB,CACnC,EAAa,EAAS,IAAM,EAAK,MAAQ,CAAE,OAAQ,CAAC,EAAO,KAAK,CAAM,EAAA,MAAS,EAAG,oBAAoB,EACtG,EAAa,EAAS,IAAM,EAAK,MAAQ,CAAE,WAAY,CAAC,EAAO,KAAK,CAAM,EAAA,MAAS,EAAG,oBAAoB,CAAA,CAC1G,EAEK,EAAY,EAAgB,CACjC,EAAa,EAAS,IAAM,AAAC,EAAK,MAA6G,OAArG,CAAE,KAAM,CAAC,CAAE,KAAM,WAAY,OAAQ,CAAC,YAAY,CAAA,EAAK,CAAE,KAAM,OAAQ,OAAQ,CAAC,EAAO,KAAK,CAAG,CAAA,EAAe,CAAC,EACzJ,EAAa,EAAS,IAAM,AAAC,EAAK,MAAmE,OAA3D,CAAE,KAAM,CAAC,CAAE,KAAM,WAAY,OAAQ,CAAC,EAAO,KAAK,EAAG,CAAM,CAAS,CAAC,EAC/G,EAAa,EAAS,IAAM,CAAC,EAAK,OAAS,EAAO,MAAM,YAAY,IAAM,EAAO,MAAQ,CAAE,KAAM,CAAC,CAAE,KAAM,WAAY,OAAQ,CAAC,EAAO,MAAM,YAAY,CAAC,CAAG,CAAA,GAAM,MAAS,CAAC,CAAA,CAC5K,EAEK,EAAW,EAAgB,CAChC,EAAa,EAAS,IAAM,EAAK,MAAQ,CAAE,IAAK,CAAC,EAAO,KAAK,GAAM,MAAS,CAAC,EAC7E,EACA,CAAA,CACA,m5BCbK,EAAU,EAAI,EAAK,EACnB,EAAW,EAAa,CAAE,MAAO,CAAE,IAAK,EAAM,MAAM,KAAK,OAAQ,IAAK,EAAM,MAAM,KAAK,QAAU,EACjG,EAAY,EAAa,CAC9B,KAAM,sBACN,YAAa,IAAM,EAAQ,MAC3B,MAAO,SAAY,EAAQ,OAAO,IAAI,EAAM,MAAM,KAAK,EAAE,EACzD,QAAS,GACT,UAAW,AAAS,GAAA,CACpB,CAAA,EAAE,+5BC1BG,KAAA,GAAQ,EAAI,MAA+B,EAC3C,EAAQ,EAAmB,CAAA,CAAE,EAC7B,EAAQ,EAAS,IAAM,EAAM,MAAM,OAAS,CAAC,GAAG,EAAM,MAAM,KAAK,EAAE,QAAS,CAAA,EAClF,EAAM,EAAO,CAAC,EAAO,IAAa,CAAC,GAAU,QAAU,GAAO,QAAW,GAAM,MAAQ,EAAM,OAAS,EAAE,EAElG,KAAA,GAAU,EAAS,IAAM,EAAY,OAAO,SAAS,SAAS,SAAS,CAAC,EACxE,EAAO,SAAY,CAClB,KAAA,OAAM,EAAa,WAAa,MAAM,EACtC,KAAA,GAAM,YAAY,SAAS,EAAI,EACrC,WAAW,IAAM,EAAM,MAAQ,EAAM,MAAO,OAAS,EAAG,GAAG,CAAA,EAGtD,EAAQ,AAAC,GAAmC,EAAI,gBAAkB,GAAO,WAAW,QACpF,EAAM,AAAC,GAAmC,EAAI,84BCA9C,KAAA,GAAkB,EAAS,IAAM,EAAa,YAAc,GAAI,KAAI,EAAa,UAAU,EAAE,QAAQ"}