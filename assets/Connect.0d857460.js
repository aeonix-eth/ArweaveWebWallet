var _e=Object.defineProperty,me=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var Y=(e,a,s)=>a in e?_e(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,D=(e,a)=>{for(var s in a||(a={}))ge.call(a,s)&&Y(e,s,a[s]);if(X)for(var s of X(a))ye.call(a,s)&&Y(e,s,a[s]);return e},Q=(e,a)=>me(e,fe(a));import{Y as A,Z as pe,e as x,d as V,aa as he,am as xe,w as z,ab as be,o as t,c as n,x as f,y as $,G as k,a1 as ke,ac as O,q as U,u as r,R as Z,a3 as Ie,a4 as we,a as p,F as C,p as E,i as $e,z as S,X as M,D as Ce,E as Ve,T as Se,a7 as L,a2 as Te,t as Pe}from"./vendor.73e19f7e.js";import{_ as B,j as J,k as W,i as ee,l as j,m as R,I as te,h as Be,o as Me,T as je,p as Ae,q as ae,r as Ee,s as N,B as ze,t as se,v as ne,w as Le,x as Oe,y as le,z as oe,C as ie}from"./index.9bfdbd22.js";import{I as re}from"./y.a42d9e14.js";import{P as We}from"./ProfilePreview.dbcb97a2.js";import{O as ue}from"./OverlayPrompt.a0c5e019.js";const Re={class:"margin fade-list-item",key:"margin1"},Ne={class:"margin fade-list-item",key:"margin2"},De=A({props:{modelValue:null,options:null},emits:["update:modelValue"],setup(e,{emit:a}){const s=e,c=pe("transitionState",null),l=x({get(){return s.modelValue},set(i){a("update:modelValue",i)}}),u=V(null),g=i=>{if(!(!i||!u.value))return s.options.align==="center"?i.offsetLeft+i.offsetWidth/2-u.value.offsetWidth/2:s.options.align==="end"?i.offsetLeft+i.offsetWidth-u.value.offsetWidth:i.offsetLeft},v=x(()=>{var i;return w.value,((i=u.value)==null?void 0:i.children)?Array(...u.value.children).filter(o=>!o.classList.contains("margin")):[]}),m=x(()=>{var i;return{"--position":((i=s.options)==null?void 0:i.align)||"start"}}),h=async(i,o)=>{var d;!o&&s.options.awaitTransition&&await J(()=>!c.running),i=Math.max(i||0,0),(d=u.value)==null||d.scroll({left:g(v.value[i]),behavior:o?"instant":"smooth"})};let y;const w=V(0);return he(async()=>{y=new MutationObserver(async()=>{w.value++}),y.observe(u.value,{subtree:!1,childList:!0}),await xe(),await J(()=>v.value.length),setTimeout(()=>{const i=!s.options.immediate&&l.value&&l.value>0||!1;h(i?0:l.value,!0),z(l,o=>h(o),{immediate:i})})}),be(()=>y&&y.disconnect()),(i,o)=>(t(),n("div",{ref_key:"root",ref:u,class:"carousel flex-row no-scrollbar",style:U(r(m))},[f(O,{name:"fade-list"},{default:$(()=>{var d,_;return[((d=e.options)==null?void 0:d.overscroll)?(t(),n("div",Re)):k("",!0),ke(i.$slots,"default",{},void 0,!0),((_=e.options)==null?void 0:_.overscroll)?(t(),n("div",Ne)):k("",!0)]}),_:3})],4))}});var ce=B(De,[["__scopeId","data-v-5e316723"]]);const de=e=>(Ie("data-v-7b045f16"),e=e(),we(),e),Ue={class:"wallet-selector"},qe=de(()=>p("div",{class:"exit-background"},null,-1)),Fe=de(()=>p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[p("path",{d:"M0 0h24v24H0V0z",fill:"none"}),p("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})],-1)),He=[qe,Fe],Ke=A({props:{modelValue:String,default:String,exit:Boolean,active:Boolean},emits:["update:modelValue","selectWallet","exit"],setup(e,{emit:a}){const s=e,c=x({get(){return s.modelValue||s.default},set(u){a("update:modelValue",u)}}),l=x(()=>{var u;return(u=W(c.value))==null?void 0:u.key});return(u,g)=>(t(),n("div",Ue,[r(c)?(t(),n("button",{key:0,type:"button",onClick:g[0]||(g[0]=v=>u.$emit("selectWallet")),class:Z(["tab",{active:e.active}])},[f(ee,{address:r(l)},null,8,["address"])],2)):k("",!0),e.exit?(t(),n("button",{key:1,class:"exit",type:"button",onClick:g[1]||(g[1]=v=>u.$emit("exit"))},He)):k("",!0)]))}});var Ge=B(Ke,[["__scopeId","data-v-7b045f16"]]);const Xe={class:"wallet-tabs"},Ye=["onClick"],Qe=A({props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:a}){const s=e,c=x({get(){return s.modelValue},set(u){a("update:modelValue",u)}}),l=x(()=>j.value.findIndex(u=>u.id===c.value));return(u,g)=>(t(),n("div",Xe,[f(ce,{modelValue:r(l),"onUpdate:modelValue":g[0]||(g[0]=v=>$e(l)?l.value=v:null),options:{align:"center",overscroll:!0,immediate:!0}},{default:$(()=>[(t(!0),n(C,null,E(r(j),v=>(t(),n("button",{key:v.id,type:"button",onClick:m=>c.value=v.id,class:Z(["tab",{active:v.id==r(c)}])},[f(ee,{address:v.key},null,8,["address"])],10,Ye))),128))]),_:1},8,["modelValue"])]))}});var Ze=B(Qe,[["__scopeId","data-v-35e1b97b"]]);const Je={class:"icon-background"},et={props:["icon","img"],setup(e){return(a,s)=>(t(),n("div",Je,[e.img?(t(),S(R,{key:0,class:"page-logo",icon:e.img},null,8,["icon"])):(t(),S(R,{key:1,class:"page-logo placeholder",icon:e.icon},null,8,["icon"]))]))}};var tt=B(et,[["__scopeId","data-v-7bef1ba0"]]);const at={class:"tx-card-extension"},st={key:0,class:"flex-row",style:{"justify-content":"space-between"}},nt={key:0},lt={key:1},ot={key:1,class:"tags secondary-text no-scrollbar"},it={props:["tx"],setup(e){return x(()=>te.breakpoints.verticalLayout),(a,s)=>(t(),n("div",at,[e.tx.tags.length||e.tx.data_size?(t(),n("div",st,[e.tx.tags.length?(t(),n("div",nt,"Tags:")):k("",!0),e.tx.data_size?(t(),n("div",lt,"Data: "+M(r(Be)(e.tx.data_size)),1)):k("",!0)])):k("",!0),e.tx.tags.length?(t(),n("ul",ot,[(t(!0),n(C,null,E(e.tx.tags,c=>(t(),n("li",null,M(c.name+" | "+c.value),1))),256))])):k("",!0)]))}};var rt=B(it,[["__scopeId","data-v-5ee7fb30"]]);const ut={class:"actions-list flex-row"},ct=["onClick"],dt=A({props:{actions:null},setup(e){return(a,s)=>(t(),n("div",ut,[(t(!0),n(C,null,E(e.actions,c=>(t(),n("button",{key:c.name,onClick:c.run,type:"button",class:"action flex-row"},[f(R,{icon:c.icon},null,8,["icon"]),p("div",null,M(c.name),1)],8,ct))),128))]))}});var ve=B(dt,[["__scopeId","data-v-7477f216"]]);const vt={class:"permission-card"},_t=L(" Share the public key "),mt=L(" Share the arweave config "),ft=L(" Sign data "),gt=L(" Decrypt data "),yt=A({props:{messageEntry:null},setup(e){const a=e,s=V(null),c=x(()=>{var m,h,y,w;if(((m=s.value)==null?void 0:m.method)!=="signTransaction")return;const g=(y=(h=s.value)==null?void 0:h.params)==null?void 0:y[0],v=(w=g.tags)==null?void 0:w.map(({name:i,value:o})=>({name:window.atob(i),value:window.atob(o)}));return Q(D({},g),{tags:v})});z(()=>a.messageEntry,async()=>{s.value=await Me(a.messageEntry)},{immediate:!0});const l=[{name:"Accept",icon:re,run:()=>a.messageEntry.status="accepted"},{name:"Reject",icon:Ae,run:()=>a.messageEntry.status="rejected"}],u=[{name:"Pending",icon:ae,run:()=>{}}];return(g,v)=>{var m,h,y,w,i;return Ce((t(),n("div",vt,[((m=s.value)==null?void 0:m.method)==="signTransaction"?(t(),n(C,{key:0},[f(je,{tx:r(c)},null,8,["tx"]),f(rt,{tx:r(c)},null,8,["tx"])],64)):((h=s.value)==null?void 0:h.method)==="getPublicKey"?(t(),n(C,{key:1},[_t],64)):((y=s.value)==null?void 0:y.method)==="getArweaveConfig"?(t(),n(C,{key:2},[mt],64)):((w=s.value)==null?void 0:w.method)==="sign"?(t(),n(C,{key:3},[ft],64)):((i=s.value)==null?void 0:i.method)==="decrypt"?(t(),n(C,{key:4},[gt],64)):k("",!0),f(Se,{name:"fade",mode:"out-in"},{default:$(()=>[e.messageEntry.status?(t(),S(ve,{key:1,actions:u})):(t(),S(ve,{key:0,actions:l}))]),_:1})],512)),[[Ve,s.value]])}}});var pt=B(yt,[["__scopeId","data-v-0e1a76fc"]]);const ht={class:"flex-column no-scrollbar"},xt=["disabled","onClick"],bt=L(" Apply "),kt=A({props:{state:null,walletId:null},setup(e){const a=e,s={connect:"Connect automatically",signTransaction:"Sign transaction",getPublicKey:"Share public key",sign:"Sign arbitrary data",decrypt:"Decrypt data",getArweaveConfig:"Share arweave gateway configuration"},c=o=>Object.getOwnPropertyNames(Object.getPrototypeOf((o==null?void 0:o.messageRunner)||{})).filter(d=>{var _;return!((_=o==null?void 0:o.messageRunner.getMethodMetadata(d))==null?void 0:_.unavailable)&&d!=="constructor"&&d!=="getMethodMetadata"}).map(d=>{var _;return{name:d,displayName:s[d]||d,disabled:(_=o==null?void 0:o.messageRunner.getMethodMetadata(d))==null?void 0:_.userIntent}}),l=x(()=>W(a.walletId)),u=x(()=>[...c(l.value)]),g=o=>m.value&&(m.value[o]=!m.value[o]),v=Ee("connectionSettings:",a.state.origin,{}),m=V(void 0),h=V(void 0);z(l,o=>{var d,_,T;!(o==null?void 0:o.uuid)||((d=v.state).value||(d.value={}),h.value=(_=v.state.value)[T=o.uuid]||(_[T]={}),m.value=D({},h.value))},{immediate:!0});const y=([o,d])=>{var T;const _=((T=h.value)==null?void 0:T[o])||!1;if(d!==_)return!0},w=x(()=>m.value?Object.entries(m.value).find(y):!1),i=()=>{if(!m.value||!h.value)return!1;Object.entries(m.value).filter(y).forEach(([o,d])=>h.value&&(h.value[o]=d))};return(o,d)=>(t(),n("div",ht,[(t(!0),n(C,null,E(r(u),_=>(t(),n("button",{key:_.name,disabled:_.disabled,class:"row method",onClick:T=>g(_.name)},[p("div",null,M(_.displayName),1),f(N,{vector:m.value[_.name]?1:-1,axis:"y"},{default:$(()=>[(t(),n("div",{key:m.value[_.name]},M(m.value[_.name]?"Allow":"Ask"),1))]),_:2},1032,["vector"])],8,xt))),128)),f(N,null,{default:$(()=>[r(w)?(t(),S(ze,{key:0,onClick:d[0]||(d[0]=_=>i())},{default:$(()=>[bt]),_:1})):k("",!0)]),_:1})]))}});var It=B(kt,[["__scopeId","data-v-81b70f2e"]]);const wt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},$t=p("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Ct=p("path",{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},null,-1),Vt=[$t,Ct];function St(e,a){return t(),n("svg",wt,Vt)}var Tt={render:St};const Pt={class:"connection-card flex-column no-scrollbar"},Bt={class:"flex-row"},Mt=["disabled"],jt={style:{"min-width":"0"}},At={class:"ellipsis"},Et={class:"secondary-text ellipsis"},zt={class:"flex-column",style:{flex:"1 1 0"}},Lt={class:"container"},Ot={class:"page-container",key:"0"},Wt={key:0},Rt={class:"status fade-list-item",key:"1"},Nt={key:1},Dt=A({props:{state:null},setup(e){var F;const a=e,s=Te(),c=(F=j.value[0])==null?void 0:F.id;x(()=>j.value.map(b=>b.key));const l=V(a.state.walletId||c),u=x(()=>W(l.value));x(()=>W(c));const g=[{name:"Requests",color:"var(--orange)"},{name:"Permissions",color:"var(--green)"}],v=V(l.value?g[0].name:null);z(()=>a.state.walletId,b=>{!b||(y.value=!1,l.value=b,v.value=g[0].name)});const m=()=>a.state.walletId=!1,h=()=>{y.value=!1,a.state.walletId=l.value+""},y=V(!a.state.walletId),w=x(()=>y.value&&j.value.length>1),i=V(0),o=()=>{var b,I;if(!y.value){y.value=!0;return}l.value!==(a.state.walletId||((b=j.value[0])==null?void 0:b.id))&&i.value++,l.value=a.state.walletId||((I=j.value[0])==null?void 0:I.id),y.value=!1},d=x(()=>({actions:[{name:a.state.walletId?"Switch":"Connect",icon:re,run:h}],inline:!0})),_=x(()=>{var b;return l.value!==a.state.walletId?[]:(b=a.state.messageQueue)==null?void 0:b.filter(I=>!I.fulfilled)});Pe(te.breakpoints,"verticalLayout");const T=V(null),q=(b,I)=>T.value=b-I;return z(()=>g.findIndex(b=>b.name===v.value),q),z(()=>j.value.findIndex(b=>b.id===l.value),q),(b,I)=>{var H,K;return t(),n("div",Pt,[p("div",Bt,[p("button",{type:"button",class:"info flex-row",onClick:I[0]||(I[0]=(...P)=>r(se)&&r(se)(...P)),disabled:!r(ne)(e.state.origin,e.state.session)},[f(tt,{img:(H=e.state.appInfo)==null?void 0:H.logo,icon:r(ae)},null,8,["img","icon"]),p("div",jt,[p("div",At,M(((K=e.state.appInfo)==null?void 0:K.name)||"Connector"),1),p("div",Et,M(e.state.origin),1)]),r(ne)(e.state.origin,e.state.session)?(t(),S(R,{key:0,icon:r(Tt)},null,8,["icon"])):k("",!0)],8,Mt),f(Ge,{modelValue:e.state.walletId,"onUpdate:modelValue":I[1]||(I[1]=P=>e.state.walletId=P),default:r(c),exit:!0,active:!r(w),onSelectWallet:o,onExit:m},null,8,["modelValue","default","active"])]),p("div",zt,[f(Le,{tabs:g,modelValue:v.value,"onUpdate:modelValue":I[2]||(I[2]=P=>v.value=P),disabled:!l.value},null,8,["modelValue","disabled"]),p("div",Lt,[f(N,{vector:T.value,axis:"x"},{default:$(()=>[r(j).length?(t(),n("div",{class:"container-scroll",key:i.value},[f(O,{name:"fade-list"},{default:$(()=>[r(w)?(t(),S(Ze,{modelValue:l.value,"onUpdate:modelValue":I[3]||(I[3]=P=>l.value=P),class:"fade-list-item",key:"-1"},null,8,["modelValue"])):k("",!0),p("div",Ot,[f(N,{vector:T.value,axis:"x"},{default:$(()=>[(t(),n("div",{key:(l.value||"")+v.value,class:"content"},[v.value==="Requests"?(t(),n("div",Wt,[f(O,{name:"fade-list"},{default:$(()=>{var P;return[p("div",{class:"fade-list-item",key:"0",style:U({padding:0,border:0,outline:"0.5px solid var(--border)"})},null,4),((P=r(_))==null?void 0:P.length)===0&&e.state.walletId&&e.state.walletId===l.value?(t(),n("div",Rt,"Connected")):k("",!0),l.value!==e.state.walletId?(t(),S(ue,{options:r(d),class:"fade-list-item",key:"2"},{default:$(()=>[r(u)?(t(),S(We,{key:0,wallet:r(u)},null,8,["wallet"])):k("",!0)]),_:1},8,["options"])):k("",!0),(t(!0),n(C,null,E(r(_),G=>(t(),S(pt,{key:G.uuid,messageEntry:G,style:{padding:"var(--spacing)"},class:"flex-column fade-list-item"},null,8,["messageEntry"]))),128))]}),_:1})])):v.value==="Permissions"?(t(),n("div",Nt,[f(O,{name:"fade-list"},{default:$(()=>[p("div",{class:"fade-list-item",key:"0",style:U({padding:0,border:0,outline:"0.5px solid var(--border)"})},null,4),f(It,{state:e.state,walletId:l.value,class:"fade-list-item",key:"2"},null,8,["state","walletId"])]),_:1})])):k("",!0)]))]),_:1},8,["vector"])])]),_:1})])):(t(),S(ue,{key:0,options:{action:{icon:r(Oe),name:"Add wallet",run:()=>r(s).push("/add")}}},null,8,["options"]))]),_:1},8,["vector"])])])])}}});var Ut=B(Dt,[["__scopeId","data-v-2260253c"]]);const qt={class:"connect flex-column"},Ft={class:"bottom-info secondary-text",style:{opacity:"0.0","pointer-events":"none"}},Ht=A({setup(e){const a=V(le.value.findIndex(s=>s.origin===oe.origin&&s.session===oe.session));return(s,c)=>(t(),n("div",qt,[f(ce,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=l=>a.value=l),options:{align:"start",overscroll:!0},class:"connectors"},{default:$(()=>[(t(!0),n(C,null,E(r(le),l=>(t(),n("div",{key:l.session,class:"connection-card-container fade-list-item"},[f(Ut,{state:l,class:"box"},null,8,["state"])]))),128))]),_:1},8,["modelValue"]),p("div",Ft,[p("div",null,"All Channels "+M(Object.keys(r(ie)).length),1),(t(!0),n(C,null,E(r(ie),(l,u)=>(t(),n("div",{key:u},M(l),1))),128))])]))}});var Jt=B(Ht,[["__scopeId","data-v-7c3f5fef"]]);export{Jt as default};
//# sourceMappingURL=Connect.0d857460.js.map
