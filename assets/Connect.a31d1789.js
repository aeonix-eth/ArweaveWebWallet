var re=Object.defineProperty,ve=Object.defineProperties;var _e=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var X=(e,a,n)=>a in e?re(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,U=(e,a)=>{for(var n in a||(a={}))me.call(a,n)&&X(e,n,a[n]);if(Q)for(var n of Q(a))fe.call(a,n)&&X(e,n,a[n]);return e},Y=(e,a)=>ve(e,_e(a));import{C as G,L as ye}from"./ListContainer.f4bbdc60.js";import{Y as E,e as b,o as t,c as s,u as o,Q as H,s as m,E as h,a4 as ge,a5 as pe,a as g,x as I,F as C,n as O,i as xe,y as w,X as P,d as T,w as z,C as be,D as ke,T as he,a7 as N,a2 as Ie,k as Ce,ac as F,p as J}from"./vendor.06acf495.js";import{_ as j,j as R,i as Z,k as B,l as W,I as ee,h as we,m as $e,T as Ve,o as Se,p as te,q as Pe,r as D,B as Te,s as ae,t as se,v as je,w as Be,x as ne,y as le,z as oe}from"./index.1aa01aa1.js";import{I as ie}from"./y.722de430.js";import{P as Ae}from"./ProfilePreview.1d3ae4bc.js";import{I as Ee,O as ue}from"./OverlayPrompt.c5b9f0e5.js";const ce=e=>(ge("data-v-7b045f16"),e=e(),pe(),e),Oe={class:"wallet-selector"},Le=ce(()=>g("div",{class:"exit-background"},null,-1)),Me=ce(()=>g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[g("path",{d:"M0 0h24v24H0V0z",fill:"none"}),g("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})],-1)),ze=[Le,Me],Ne=E({props:{modelValue:String,default:String,exit:Boolean,active:Boolean},emits:["update:modelValue","selectWallet","exit"],setup(e,{emit:a}){const n=e,i=b({get(){return n.modelValue||n.default},set(r){a("update:modelValue",r)}}),l=b(()=>{var r;return(r=R(i.value))==null?void 0:r.key});return(r,f)=>(t(),s("div",Oe,[o(i)?(t(),s("button",{key:0,type:"button",onClick:f[0]||(f[0]=c=>r.$emit("selectWallet")),class:H(["tab",{active:e.active}])},[m(Z,{address:o(l)},null,8,["address"])],2)):h("",!0),e.exit?(t(),s("button",{key:1,class:"exit",type:"button",onClick:f[1]||(f[1]=c=>r.$emit("exit"))},ze)):h("",!0)]))}});var Re=j(Ne,[["__scopeId","data-v-7b045f16"]]);const We={class:"wallet-tabs"},De=["onClick"],Ue=E({props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:a}){const n=e,i=b({get(){return n.modelValue},set(r){a("update:modelValue",r)}}),l=b(()=>B.value.findIndex(r=>r.id===i.value));return(r,f)=>(t(),s("div",We,[m(G,{modelValue:o(l),"onUpdate:modelValue":f[0]||(f[0]=c=>xe(l)?l.value=c:null),options:{align:"center",overscroll:!0,immediate:!0}},{default:I(()=>[(t(!0),s(C,null,O(o(B),c=>(t(),s("button",{key:c.id,type:"button",onClick:v=>i.value=c.id,class:H(["tab",{active:c.id==o(i)}])},[m(Z,{address:c.key},null,8,["address"])],10,De))),128))]),_:1},8,["modelValue"])]))}});var Fe=j(Ue,[["__scopeId","data-v-35e1b97b"]]);const Ke={class:"icon-background"},qe={props:["icon","img"],setup(e){return(a,n)=>(t(),s("div",Ke,[e.img?(t(),w(W,{key:0,class:"page-logo",icon:e.img},null,8,["icon"])):(t(),w(W,{key:1,class:"page-logo placeholder",icon:e.icon},null,8,["icon"]))]))}};var Qe=j(qe,[["__scopeId","data-v-7bef1ba0"]]);const Xe={class:"tx-card-extension"},Ye={key:0,class:"flex-row",style:{"justify-content":"space-between"}},Ge={key:0},He={key:1},Je={key:1,class:"tags secondary-text no-scrollbar"},Ze={props:["tx"],setup(e){return b(()=>ee.breakpoints.verticalLayout),(a,n)=>(t(),s("div",Xe,[e.tx.tags.length||e.tx.data_size?(t(),s("div",Ye,[e.tx.tags.length?(t(),s("div",Ge,"Tags:")):h("",!0),e.tx.data_size?(t(),s("div",He,"Data: "+P(o(we)(e.tx.data_size)),1)):h("",!0)])):h("",!0),e.tx.tags.length?(t(),s("ul",Je,[(t(!0),s(C,null,O(e.tx.tags,i=>(t(),s("li",null,P(i.name+" | "+i.value),1))),256))])):h("",!0)]))}};var et=j(Ze,[["__scopeId","data-v-5ee7fb30"]]);const tt={class:"actions-list flex-row"},at=["onClick"],st=E({props:{actions:null},setup(e){return(a,n)=>(t(),s("div",tt,[(t(!0),s(C,null,O(e.actions,i=>(t(),s("button",{key:i.name,onClick:i.run,type:"button",class:"action flex-row"},[m(W,{icon:i.icon},null,8,["icon"]),g("div",null,P(i.name),1)],8,at))),128))]))}});var de=j(st,[["__scopeId","data-v-7477f216"]]);const nt={class:"permission-card"},lt=N(" Share the public key "),ot=N(" Share the arweave config "),it=N(" Sign data "),ut=N(" Decrypt data "),ct=E({props:{messageEntry:null},setup(e){const a=e,n=T(null),i=b(()=>{var v,k,p,$;if(((v=n.value)==null?void 0:v.method)!=="signTransaction")return;const f=(p=(k=n.value)==null?void 0:k.params)==null?void 0:p[0],c=($=f.tags)==null?void 0:$.map(({name:S,value:u})=>({name:window.atob(S),value:window.atob(u)}));return Y(U({},f),{tags:c})});z(()=>a.messageEntry,async()=>{n.value=await $e(a.messageEntry)},{immediate:!0});const l=[{name:"Accept",icon:ie,run:()=>a.messageEntry.status="accepted"},{name:"Reject",icon:Se,run:()=>a.messageEntry.status="rejected"}],r=[{name:"Pending",icon:te,run:()=>{}}];return(f,c)=>{var v,k,p,$,S;return be((t(),s("div",nt,[((v=n.value)==null?void 0:v.method)==="signTransaction"?(t(),s(C,{key:0},[m(Ve,{tx:o(i)},null,8,["tx"]),m(et,{tx:o(i)},null,8,["tx"])],64)):((k=n.value)==null?void 0:k.method)==="getPublicKey"?(t(),s(C,{key:1},[lt],64)):((p=n.value)==null?void 0:p.method)==="getArweaveConfig"?(t(),s(C,{key:2},[ot],64)):(($=n.value)==null?void 0:$.method)==="sign"?(t(),s(C,{key:3},[it],64)):((S=n.value)==null?void 0:S.method)==="decrypt"?(t(),s(C,{key:4},[ut],64)):h("",!0),m(he,{name:"fade",mode:"out-in"},{default:I(()=>[e.messageEntry.status?(t(),w(de,{key:1,actions:r})):(t(),w(de,{key:0,actions:l}))]),_:1})],512)),[[ke,n.value]])}}});var dt=j(ct,[["__scopeId","data-v-0e1a76fc"]]);const rt={class:"flex-column no-scrollbar"},vt=["disabled","onClick"],_t=N(" Apply "),mt=E({props:{state:null,walletId:null},setup(e){const a=e,n={connect:"Connect automatically",signTransaction:"Sign transaction",getPublicKey:"Share public key",sign:"Sign arbitrary data",decrypt:"Decrypt data",getArweaveConfig:"Share arweave gateway configuration"},i=u=>Object.getOwnPropertyNames(Object.getPrototypeOf((u==null?void 0:u.messageRunner)||{})).filter(_=>{var d;return!((d=u==null?void 0:u.messageRunner.getMethodMetadata(_))==null?void 0:d.unavailable)&&_!=="constructor"&&_!=="getMethodMetadata"}).map(_=>{var d;return{name:_,displayName:n[_]||_,disabled:(d=u==null?void 0:u.messageRunner.getMethodMetadata(_))==null?void 0:d.userIntent}}),l=b(()=>R(a.walletId)),r=b(()=>[...i(l.value)]),f=u=>v.value&&(v.value[u]=!v.value[u]),c=Pe("connectionSettings:",a.state.origin,{}),v=T(void 0),k=T(void 0);z(l,u=>{var _,d,V;!(u==null?void 0:u.uuid)||((_=c.state).value||(_.value={}),k.value=(d=c.state.value)[V=u.uuid]||(d[V]={}),v.value=U({},k.value))},{immediate:!0});const p=([u,_])=>{var V;const d=((V=k.value)==null?void 0:V[u])||!1;if(_!==d)return!0},$=b(()=>v.value?Object.entries(v.value).find(p):!1),S=()=>{if(!v.value||!k.value)return!1;Object.entries(v.value).filter(p).forEach(([u,_])=>k.value&&(k.value[u]=_))};return(u,_)=>(t(),s("div",rt,[(t(!0),s(C,null,O(o(r),d=>(t(),s("button",{key:d.name,disabled:d.disabled,class:"row method",onClick:V=>f(d.name)},[g("div",null,P(d.displayName),1),m(D,{vector:v.value[d.name]?1:-1,axis:"y"},{default:I(()=>[(t(),s("div",{key:v.value[d.name]},P(v.value[d.name]?"Allow":"Ask"),1))]),_:2},1032,["vector"])],8,vt))),128)),m(D,null,{default:I(()=>[o($)?(t(),w(Te,{key:0,onClick:_[0]||(_[0]=d=>S())},{default:I(()=>[_t]),_:1})):h("",!0)]),_:1})]))}});var ft=j(mt,[["__scopeId","data-v-81b70f2e"]]);const yt={class:"flex-row"},gt=["disabled"],pt={style:{"min-width":"0"}},xt={class:"ellipsis"},bt={class:"secondary-text ellipsis"},kt={class:"page-container",key:"0"},ht={key:0},It={class:"status fade-list-item",key:"1"},Ct={key:1},wt=E({props:{state:null},setup(e){var q;const a=e,n=Ie(),i=(q=B.value[0])==null?void 0:q.id;b(()=>B.value.map(y=>y.key));const l=T(a.state.walletId||i),r=b(()=>R(l.value));b(()=>R(i));const f=[{name:"Requests",color:"var(--orange)"},{name:"Permissions",color:"var(--green)"}],c=T(l.value?f[0].name:null);z(()=>a.state.walletId,y=>{!y||(p.value=!1,l.value=y,c.value=f[0].name)});const v=()=>a.state.walletId=!1,k=()=>{p.value=!1,a.state.walletId=l.value+""},p=T(!a.state.walletId),$=b(()=>p.value&&B.value.length>1),S=T(0),u=()=>{var y,x;if(!p.value){p.value=!0;return}l.value!==(a.state.walletId||((y=B.value[0])==null?void 0:y.id))&&S.value++,l.value=a.state.walletId||((x=B.value[0])==null?void 0:x.id),p.value=!1},_=b(()=>({actions:[{name:a.state.walletId?"Switch":"Connect",icon:ie,run:k}],inline:!0})),d=b(()=>{var y;return l.value!==a.state.walletId?[]:(y=a.state.messageQueue)==null?void 0:y.filter(x=>!x.fulfilled)});Ce(ee.breakpoints,"verticalLayout");const V=T(null),K=(y,x)=>V.value=y-x;return z(()=>f.findIndex(y=>y.name===c.value),K),z(()=>B.value.findIndex(y=>y.id===l.value),K),(y,x)=>(t(),w(ye,{class:"connection-card flex-column no-scrollbar"},{header:I(()=>{var A,L;return[g("div",yt,[g("button",{type:"button",class:"info flex-row",onClick:x[0]||(x[0]=(...M)=>o(ae)&&o(ae)(...M)),disabled:!o(se)(e.state.origin,e.state.session)},[m(Qe,{img:(A=e.state.appInfo)==null?void 0:A.logo,icon:o(te)},null,8,["img","icon"]),g("div",pt,[g("div",xt,P(((L=e.state.appInfo)==null?void 0:L.name)||"Connector"),1),g("div",bt,P(e.state.origin),1)]),o(se)(e.state.origin,e.state.session)?(t(),w(W,{key:0,icon:o(Ee)},null,8,["icon"])):h("",!0)],8,gt),m(Re,{modelValue:e.state.walletId,"onUpdate:modelValue":x[1]||(x[1]=M=>e.state.walletId=M),default:o(i),exit:!0,active:!o($),onSelectWallet:u,onExit:v},null,8,["modelValue","default","active"])]),m(je,{tabs:f,modelValue:c.value,"onUpdate:modelValue":x[2]||(x[2]=M=>c.value=M),disabled:!l.value},null,8,["modelValue","disabled"])]}),default:I(()=>[m(D,{vector:V.value,axis:"x"},{default:I(()=>[o(B).length?(t(),s("div",{class:"container-scroll",key:S.value},[m(F,{name:"fade-list"},{default:I(()=>[o($)?(t(),w(Fe,{modelValue:l.value,"onUpdate:modelValue":x[3]||(x[3]=A=>l.value=A),class:"fade-list-item",key:"-1"},null,8,["modelValue"])):h("",!0),g("div",kt,[m(D,{vector:V.value,axis:"x"},{default:I(()=>[(t(),s("div",{key:(l.value||"")+c.value,class:"content"},[c.value==="Requests"?(t(),s("div",ht,[m(F,{name:"fade-list"},{default:I(()=>{var A;return[g("div",{class:"fade-list-item",key:"0",style:J({padding:0,border:0,outline:"0.5px solid var(--border)"})},null,4),((A=o(d))==null?void 0:A.length)===0&&e.state.walletId&&e.state.walletId===l.value?(t(),s("div",It,"Connected")):h("",!0),l.value!==e.state.walletId?(t(),w(ue,{options:o(_),class:"fade-list-item",key:"2"},{default:I(()=>[o(r)?(t(),w(Ae,{key:0,wallet:o(r)},null,8,["wallet"])):h("",!0)]),_:1},8,["options"])):h("",!0),(t(!0),s(C,null,O(o(d),L=>(t(),w(dt,{key:L.uuid,messageEntry:L,style:{padding:"var(--spacing)"},class:"flex-column fade-list-item"},null,8,["messageEntry"]))),128))]}),_:1})])):c.value==="Permissions"?(t(),s("div",Ct,[m(F,{name:"fade-list"},{default:I(()=>[g("div",{class:"fade-list-item",key:"0",style:J({padding:0,border:0,outline:"0.5px solid var(--border)"})},null,4),m(ft,{state:e.state,walletId:l.value,class:"fade-list-item",key:"2"},null,8,["state","walletId"])]),_:1})])):h("",!0)]))]),_:1},8,["vector"])])]),_:1})])):(t(),w(ue,{key:0,options:{action:{icon:o(Be),name:"Add wallet",run:()=>o(n).push("/add")}}},null,8,["options"]))]),_:1},8,["vector"])]),_:1}))}});var $t=j(wt,[["__scopeId","data-v-385ae859"]]);const Vt={class:"connect flex-column"},St={class:"bottom-info secondary-text",style:{opacity:"0.0","pointer-events":"none"}},Pt=E({setup(e){const a=T(ne.value.findIndex(n=>n.origin===le.origin&&n.session===le.session));return(n,i)=>(t(),s("div",Vt,[m(G,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=l=>a.value=l),options:{align:"start",overscroll:!0},class:"connectors"},{default:I(()=>[(t(!0),s(C,null,O(o(ne),l=>(t(),s("div",{key:l.session,class:"connection-card-container fade-list-item"},[m($t,{state:l,class:"box"},null,8,["state"])]))),128))]),_:1},8,["modelValue"]),g("div",St,[g("div",null,"All Channels "+P(Object.keys(o(oe)).length),1),(t(!0),s(C,null,O(o(oe),(l,r)=>(t(),s("div",{key:r},P(l),1))),128))])]))}});var Mt=j(Pt,[["__scopeId","data-v-2d1eb42c"]]);export{Mt as default};
//# sourceMappingURL=Connect.a31d1789.js.map
