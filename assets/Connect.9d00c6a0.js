import{C as J,L as se}from"./ListContainer.b5b5a71b.js";import{_ as P,d as A,c as p,a2 as V,o as e,g as a,q as c,w as f,Z as w,$ as B,n as le,u as s,V as oe,a3 as ie,a as h,X as W,I as ee,x as _,t as j,O as de,r as $,k as T,a4 as ce,y as re,z as ue,T as F,a5 as q,a1 as ve,R as me,S as ge,b as x,h as O,a6 as te,a7 as fe,a8 as ae,a9 as D,aa as X,ab as pe,v as L,B as _e,ac as ye,F as be,ad as G,ae as Q,af as he,ag as xe,ah as we,ai as M,K as Y,aj as E,ak as ke,al as Z,am as Ie}from"./index.fdbcb30d.js";import{P as Ce}from"./ProfilePreview.e49cc275.js";import{I as $e}from"./launch.a51a3e02.js";import{O as K}from"./OverlayPrompt.fa646bb3.js";const Se={class:"wallet-tabs"},Ve=["onClick"],Pe=A({props:["modelValue"],emits:["update:modelValue"],setup(t,{emit:o}){const l=t,i=p({get(){return l.modelValue},set(u){o("update:modelValue",u)}}),n=p(()=>V.value.findIndex(u=>u.id===i.value));return(u,d)=>(e(),a("div",Se,[c(J,{modelValue:s(n),"onUpdate:modelValue":d[0]||(d[0]=r=>ie(n)?n.value=r:null),options:{align:"center",overscroll:!0,immediate:!0}},{default:f(()=>[(e(!0),a(w,null,B(s(V),r=>(e(),a("button",{key:r.id,type:"button",onClick:g=>i.value=r.id,class:le(["tab",{active:r.id==s(i)}])},[c(oe,{address:r.key},null,8,["address"])],10,Ve))),128))]),_:1},8,["modelValue"])]))}});var Te=P(Pe,[["__scopeId","data-v-35e1b97b"]]);const je={class:"icon-background"},Ee={props:["icon","img"],setup(t){return(o,l)=>(e(),a("div",je,[t.img?(e(),h(W,{key:0,class:"page-logo",icon:t.img},null,8,["icon"])):(e(),h(W,{key:1,class:"page-logo placeholder",icon:t.icon},null,8,["icon"]))]))}};var Ae=P(Ee,[["__scopeId","data-v-7f69d89a"]]);const Be={class:"tx-card-extension"},Oe={key:0,class:"flex-row",style:{"justify-content":"space-between"}},Ne={key:0},ze={key:1},Re={key:1,class:"tags secondary-text no-scrollbar"},Le={props:["tx"],setup(t){return p(()=>ee.breakpoints.verticalLayout),(o,l)=>(e(),a("div",Be,[t.tx.tags.length||t.tx.data_size?(e(),a("div",Oe,[t.tx.tags.length?(e(),a("div",Ne,"Tags:")):_("",!0),t.tx.data_size?(e(),a("div",ze,"Data: "+j(s(de)(t.tx.data_size)),1)):_("",!0)])):_("",!0),t.tx.tags.length?(e(),a("ul",Re,[(e(!0),a(w,null,B(t.tx.tags,i=>(e(),a("li",null,j(i.name+" | "+i.value),1))),256))])):_("",!0)]))}};var H=P(Le,[["__scopeId","data-v-5ee7fb30"]]);const ne=t=>(me("data-v-558bc70a"),t=t(),ge(),t),Me={class:"permission-card"},We=ne(()=>x("span",null,"Sign transaction",-1)),De=ne(()=>x("span",null,"Sign transaction and upload",-1)),Ke=O(" Share the public key "),Ue=O(" Share the arweave config "),Fe=O(" Sign data "),qe=O(" Decrypt data "),Xe=A({props:{messageEntry:null},setup(t){const o=t,l=$(null),i=p(()=>{if(l.value?.method!=="signTransaction"&&l.value?.method!=="dispatch")return;const d=l.value?.params?.[0],r=d.tags?.map(({name:g,value:k})=>({name:window.atob(g),value:window.atob(k)}));return{...d,tags:r}});T(()=>o.messageEntry,async()=>{l.value=await ce(o.messageEntry)},{immediate:!0});const n=[{name:"Accept",icon:te,run:()=>o.messageEntry.status="accepted"},{name:"Reject",icon:fe,run:()=>o.messageEntry.status="rejected"}],u=[{name:"Pending",icon:ae,run:()=>{}}];return(d,r)=>re((e(),a("div",Me,[l.value?.method==="signTransaction"?(e(),a(w,{key:0},[We,c(F,{tx:s(i)},null,8,["tx"]),c(H,{tx:s(i)},null,8,["tx"])],64)):_("",!0),l.value?.method==="dispatch"?(e(),a(w,{key:1},[De,c(F,{tx:s(i)},null,8,["tx"]),c(H,{tx:s(i)},null,8,["tx"])],64)):l.value?.method==="getPublicKey"?(e(),a(w,{key:2},[Ke],64)):l.value?.method==="getArweaveConfig"?(e(),a(w,{key:3},[Ue],64)):l.value?.method==="sign"?(e(),a(w,{key:4},[Fe],64)):l.value?.method==="decrypt"?(e(),a(w,{key:5},[qe],64)):_("",!0),c(ve,{name:"fade",mode:"out-in"},{default:f(()=>[t.messageEntry.status?(e(),h(q,{key:1,actions:u})):(e(),h(q,{key:0,actions:n}))]),_:1})],512)),[[ue,l.value]])}});var Ge=P(Xe,[["__scopeId","data-v-558bc70a"]]);const Qe={class:"flex-column no-scrollbar"},Ye=["disabled","onClick"],Ze=O(" Apply "),He=A({props:{state:null,walletId:null},setup(t){const o=t,l={connect:"Connect automatically",signTransaction:"Sign transaction",getPublicKey:"Share public key",sign:"Sign arbitrary data",decrypt:"Decrypt data",getArweaveConfig:"Share arweave gateway configuration"},i=v=>Object.getOwnPropertyNames(Object.getPrototypeOf(v?.messageRunner||{})).filter(m=>{if(!(m==="constructor"||m==="methodMap"||!v))return!X(v,m)?.unavailable}).map(m=>({name:m,displayName:l[m]||m,disabled:X(v,m)?.userIntent})),n=p(()=>D(o.walletId)),u=p(()=>[...i(n.value)]),d=v=>g.value&&(g.value[v]=!g.value[v]),r=pe("connectionSettings:",o.state.origin,{}),g=$(void 0),k=$(void 0);T(n,v=>{!v?.uuid||(r.state.value||={},k.value=r.state.value[v.uuid]||={},g.value={...k.value})},{immediate:!0});const S=([v,m])=>{const y=k.value?.[v]||!1;if(m!==y)return!0},N=p(()=>g.value?Object.entries(g.value).find(S):!1),z=()=>{if(!g.value||!k.value)return!1;Object.entries(g.value).filter(S).forEach(([v,m])=>k.value&&(k.value[v]=m))};return(v,m)=>(e(),a("div",Qe,[(e(!0),a(w,null,B(s(u),y=>(e(),a("button",{key:y.name,disabled:y.disabled,class:"row method",onClick:R=>d(y.name)},[x("div",null,j(y.displayName),1),c(L,{vector:g.value[y.name]?1:-1,axis:"y"},{default:f(()=>[(e(),a("div",{key:g.value[y.name]},j(g.value[y.name]?"Allow":"Ask"),1))]),_:2},1032,["vector"])],8,Ye))),128)),c(L,null,{default:f(()=>[s(N)?(e(),h(_e,{key:0,onClick:m[0]||(m[0]=y=>z())},{default:f(()=>[Ze]),_:1})):_("",!0)]),_:1})]))}});var Je=P(He,[["__scopeId","data-v-41a1ea1c"]]);const et={class:"flex-row"},tt=["disabled"],at={style:{"min-width":"0"}},nt={class:"ellipsis"},st={class:"secondary-text ellipsis"},lt={class:"page-container",key:"0"},ot={key:0},it={class:"status fade-list-item",key:"1"},dt={key:1},ct=A({props:{state:null},setup(t){const o=t,l=ye(),i=V.value[0]?.id;p(()=>V.value.map(b=>b.key));const n=$(o.state.walletId||i),u=p(()=>D(n.value));p(()=>D(i));const d=[{name:"Requests",color:"var(--orange)"},{name:"Permissions",color:"var(--green)"}],r=$(n.value?d[0].name:null);T(()=>o.state.walletId,b=>{!b||(S.value=!1,n.value=b,r.value=d[0].name)});const g=()=>o.state.walletId=!1,k=()=>{S.value=!1,o.state.walletId=n.value+""},S=$(!o.state.walletId),N=p(()=>S.value&&V.value.length>1),z=$(0),v=()=>{if(!S.value){S.value=!0;return}n.value!==(o.state.walletId||V.value[0]?.id)&&z.value++,n.value=o.state.walletId||V.value[0]?.id,S.value=!1},m=p(()=>({actions:[{name:o.state.walletId?"Switch":"Connect",icon:te,run:k}]})),y=p(()=>n.value!==o.state.walletId?[]:o.state.messageQueue?.filter(b=>!b.fulfilled));be(ee.breakpoints,"verticalLayout");const R=$(null),U=(b,I)=>R.value=b-I;return T(()=>d.findIndex(b=>b.name===r.value),U),T(()=>V.value.findIndex(b=>b.id===n.value),U),(b,I)=>(e(),h(se,{class:"connection-card flex-column no-scrollbar"},{header:f(()=>[x("div",et,[x("button",{type:"button",class:"info flex-row",onClick:I[0]||(I[0]=(...C)=>s(G)&&s(G)(...C)),disabled:!s(Q)(t.state.origin,t.state.session)},[c(Ae,{img:t.state.appInfo?.logo,icon:s(ae)},null,8,["img","icon"]),x("div",at,[x("div",nt,j(t.state.appInfo?.name||"Connector"),1),x("div",st,j(t.state.origin),1)]),s(Q)(t.state.origin,t.state.session)?(e(),h(W,{key:0,icon:s($e)},null,8,["icon"])):_("",!0)],8,tt),c(he,{modelValue:t.state.walletId,"onUpdate:modelValue":I[1]||(I[1]=C=>t.state.walletId=C),active:!s(N),onSelectWallet:v,onExit:g},null,8,["modelValue","active"])]),c(xe,{tabs:d,modelValue:r.value,"onUpdate:modelValue":I[2]||(I[2]=C=>r.value=C),disabled:!n.value},null,8,["modelValue","disabled"])]),default:f(()=>[c(L,{vector:R.value,axis:"x"},{default:f(()=>[s(V).length?(e(),a("div",{class:"container-scroll",key:z.value},[c(M,{name:"fade-list"},{default:f(()=>[s(N)?(e(),h(Te,{modelValue:n.value,"onUpdate:modelValue":I[3]||(I[3]=C=>n.value=C),class:"fade-list-item",key:"-1"},null,8,["modelValue"])):_("",!0),x("div",lt,[c(L,{vector:R.value,axis:"x"},{default:f(()=>[(e(),a("div",{key:(n.value||"")+r.value,class:"content"},[r.value==="Requests"?(e(),a("div",ot,[c(M,{name:"fade-list"},{default:f(()=>[x("div",{class:"fade-list-item",key:"0",style:Y({padding:0,border:0,outline:"0.5px solid var(--border)"})},null,4),s(y)?.length===0&&t.state.walletId&&t.state.walletId===n.value?(e(),a("div",it,"Connected")):_("",!0),n.value!==t.state.walletId?(e(),h(K,{options:s(m),inline:!0,class:"fade-list-item",key:"2"},{default:f(()=>[s(u)?(e(),h(Ce,{key:0,wallet:s(u)},null,8,["wallet"])):_("",!0)]),_:1},8,["options"])):_("",!0),(e(!0),a(w,null,B(s(y),C=>(e(),h(Ge,{key:C.uuid,messageEntry:C,style:{padding:"var(--spacing)"},class:"flex-column fade-list-item"},null,8,["messageEntry"]))),128))]),_:1})])):r.value==="Permissions"?(e(),a("div",dt,[c(M,{name:"fade-list"},{default:f(()=>[x("div",{class:"fade-list-item",key:"0",style:Y({padding:0,border:0,outline:"0.5px solid var(--border)"})},null,4),c(Je,{state:t.state,walletId:n.value,class:"fade-list-item",key:"2"},null,8,["state","walletId"])]),_:1})])):_("",!0)]))]),_:1},8,["vector"])])]),_:1})])):(e(),h(K,{key:0,options:{action:{icon:s(we),name:"Add wallet",run:()=>s(l).push("/add")}}},null,8,["options"]))]),_:1},8,["vector"])]),_:1}))}});var rt=P(ct,[["__scopeId","data-v-d7a3ed62"]]);const ut={class:"connect flex-column"},vt={key:0,class:"connection-card-container fade-list-item",style:{position:"relative"}},mt=A({setup(t){const o=p(()=>({action:{icon:Ie,name:"Connect to "+i.value,run:()=>Z("connect")}})),l=$(E.value.findIndex(n=>n.origin===ke.value.origin)),i=$();return Z("state").then(n=>{!n||(i.value=n.origin,T(()=>E.value,()=>{const u=E.value.findIndex(d=>d.origin===i.value);if(u<0&&l.value>=0)return l.value=u;if(l.value<0)return setTimeout(()=>l.value=u)},{immediate:!0}))}),(n,u)=>(e(),a("div",ut,[c(J,{modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=d=>l.value=d),options:{align:"start",overscroll:!0},class:"connectors"},{default:f(()=>[!s(E).length&&i.value?(e(),a("div",vt,[c(K,{options:s(o)},null,8,["options"])])):_("",!0),(e(!0),a(w,null,B(s(E),d=>(e(),a("div",{key:d.origin+d.session,class:"connection-card-container fade-list-item"},[c(rt,{state:d,class:"box"},null,8,["state"])]))),128))]),_:1},8,["modelValue"])]))}});var bt=P(mt,[["__scopeId","data-v-3e46ecbe"]]);export{bt as default};
//# sourceMappingURL=Connect.9d00c6a0.js.map
