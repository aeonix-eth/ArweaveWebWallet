{"version":3,"file":"AddWallet.ecd20a44.js","sources":["../../src/views/AddWallet.vue"],"sourcesContent":["<template>\n\t<div class=\"add-wallet flex-column\">\n\t\t<div class=\"card\">\n\t\t\t<h2 style=\"display:flex; justify-content:space-between;\">\n\t\t\t\t<span>Passphrase</span>\n\t\t\t\t<span>Key file</span>\n\t\t\t</h2>\n\t\t\t<div class=\"flex-column\">\n\t\t\t\t<InputData v-model=\"passphraseInput\" @files=\"importFile\" :disabled=\"isCreatingWallet\" placeholder=\"Import passphrase or key file\" />\n\t\t\t\t<div />\n\t\t\t\t<Button v-if=\"!isCreatingWallet && !passphraseInput.length\" @click=\"create()\" :disabled=\"passphraseInput.length && !isPassphrase\" :icon=\"LogoArweave\">Create new wallet</Button>\n\t\t\t\t<Button v-else-if=\"isCreatingWallet\" :disabled=\"createdWallet == null\" @click=\"goToCreatedWallet\" :icon=\"createdWallet == null ? 'loader' : ''\">{{ createdWallet == null ? 'Generating, write down the passphrase' : 'Passphrase saved? Click here to proceed' }}</Button>\n\t\t\t\t<Button v-else :disabled=\"!isPassphrase || isGeneratingWallet\" @click=\"confirmPassphrase\">Import passphrase</Button>\n\t\t\t</div>\n\t\t\t<transition name=\"fade-fast\" mode=\"in-out\">\n\t\t\t\t<div v-if=\"popup.enabled\" :key=\"popup.message\" class=\"overlay flex-column\">\n\t\t\t\t\t<div style=\"flex:1 1 auto; display:flex; flex-direction:column; align-items:center; justify-content:space-evenly; margin-bottom:var(--spacing);\">\n\t\t\t\t\t\t<Icon v-if=\"popup.icon\" :icon=\"popup.icon\" style=\"font-size: 2em;\" />\n\t\t\t\t\t\t{{ popup.message }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"actions-container flex-row\">\n\t\t\t\t\t\t<Button v-for=\"action in popup.actions\" :key=\"action.name\" @click=\"action.action\">{{ action.name }}</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</transition>\n\t\t</div>\n\t\t<div class=\"card\">\n\t\t\t<h2>Hardware</h2>\n\t\t\t<template v-for=\"provider in hardwareProviders\" :key=\"provider.name\">\n\t\t\t\t<Button :disabled=\"!provider.isSupported\" @click=\"importProvider(provider)\" :icon=\"provider.icon\">\n\t\t\t\t\t{{ provider.name }} {{ !provider.isSupported ? ' not supported for this browser' : '' }}\n\t\t\t\t</Button>\n\t\t\t</template>\n\t\t</div>\n\t\t<div class=\"card\">\n\t\t\t<h2>Address Only</h2>\n\t\t\t<InputAddress v-model=\"targetInput\" :actions=\"[importAddressOnlyAction]\" @keydown.enter=\"importAddressOnlyAction.run()\" />\n\t\t</div>\n\t</div>\n</template>\n\n\n\n<script setup>\nimport InputData from '@/components/atomic/InputData.vue'\nimport InputAddress from '@/components/atomic/InputAddress.vue';\nimport Button from '@/components/atomic/Button.vue'\nimport Icon from '@/components/atomic/Icon.vue'\nimport { LedgerProviderData } from '@/providers/Ledger.ts'\nimport { arweave } from '@/store/ArweaveStore'\nimport { addWallet, addAddress, generateMnemonic, validateMnemonic, addMnemonic, addProvider } from '@/functions/Wallets.ts'\nimport { computed, reactive, ref } from 'vue'\nimport { useRouter } from 'vue-router'\n\nimport LogoArweave from '@/assets/logos/arweave.svg?component'\nimport IconAddBox from '@/assets/icons/add_box.svg?component'\n\nconst router = useRouter()\nconst passphraseInput = ref('')\nconst targetInput = ref('')\nconst maskAddress = (address) => { return address.match(/^[a-z0-9_-]{0,43}$/i) }\nconst popup = reactive({})\nconst isPassphrase = computed(() => passphraseInput.value.trim().split(/\\s+/g).length >= 12)\nconst isCreatingWallet = ref(false)\nconst isGeneratingWallet = ref(false)\nconst createdWallet = ref(null)\nconst create = async () => {\n\tisCreatingWallet.value = true\n\tpassphraseInput.value = await generateMnemonic()\n\tconst id = addMnemonic(passphraseInput.value)\n\tsetTimeout(async () => createdWallet.value = await id, 10000)\n}\nconst goToCreatedWallet = () => {\n\trouter.push({ name: 'EditWallet', query: { wallet: createdWallet.value } })\n}\nconst importPassphrase = async () => {\n\tisGeneratingWallet.value = true\n\tconst id = addMnemonic(passphraseInput.value)\n\tpopup.enabled = true\n\tpopup.icon = 'loader'\n\tpopup.message = 'Importing'\n\tpopup.actions = []\n\trouter.push({ name: 'EditWallet', query: { wallet: await id } })\n}\nconst confirmPassphrase = async () => {\n\tif (await validateMnemonic(passphraseInput.value)) { return importPassphrase() }\n\tpopup.enabled = true\n\tpopup.icon = ''\n\tpopup.message = 'This passphrase is not valid, do you want to import it anyway?'\n\tpopup.actions = [\n\t\t{ name: 'Back', action: () => popup.enabled = false },\n\t\t{ name: 'Import Passphrase', action: () => importPassphrase() }\n\t]\n}\nconst importFile = async (file) => {\n\tif (!file) { return }\n\tconst id = await addWallet(JSON.parse(await file[0].text()))\n\trouter.push({ name: 'EditWallet', query: { wallet: id } })\n}\nconst importProvider = async (provider) => {\n\tconst id = await addProvider(provider)\n\trouter.push({ name: 'EditWallet', query: { wallet: id } })\n}\nconst hardwareProviders = [LedgerProviderData]\nconst importAddressOnlyAction = { icon: IconAddBox, run: async () => {\n\tconst id = await addAddress(targetInput.value)\n\trouter.push({ name: 'EditWallet', query: { wallet: id } })\n}}\n</script>\n\n\n\n<style scoped>\n.add-wallet {\n\twidth: 100%;\n\tmin-height: var(--current-vh);\n\tpadding: var(--spacing);\n\talign-items: center;\n}\n\n.card {\n\twidth: 100%;\n\tmax-width: var(--column-width);\n\toverflow: hidden;\n}\n\n.input-data {\n\ttext-align: center;\n}\n\n.actions-container {\n\twidth: 100%;\n}\n\n.button {\n\tbackground-image: radial-gradient(circle at center, #81a1c166, #81a1c133);\n\theight: 5em;\n\tfont-size: 1.1em;\n\twidth: 100%;\n}\n\n.overlay {\n\tbackground: inherit;\n\tborder-radius: inherit;\n\tpadding: inherit;\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tz-index: 10;\n\talign-items: center;\n\tjustify-content: space-evenly;\n}\n</style>"],"names":[],"mappings":"m9BAyDA,KAAM,GAAS,IACT,EAAkB,EAAI,IACtB,EAAc,EAAI,IAElB,EAAQ,EAAS,IACjB,EAAe,EAAS,IAAM,EAAgB,MAAM,OAAO,MAAM,QAAQ,QAAU,IACnF,EAAmB,EAAI,IACvB,EAAqB,EAAI,IACzB,EAAgB,EAAI,MACpB,EAAS,SAAY,CAC1B,EAAiB,MAAQ,GACzB,EAAgB,MAAQ,KAAM,KAC9B,KAAM,GAAK,EAAY,EAAgB,OACvC,WAAW,SAAY,EAAc,MAAQ,KAAM,GAAI,MAElD,EAAoB,IAAM,CAC/B,EAAO,KAAK,CAAE,KAAM,aAAc,MAAO,CAAE,OAAQ,EAAc,UAE5D,EAAmB,SAAY,CACpC,EAAmB,MAAQ,GAC3B,KAAM,GAAK,EAAY,EAAgB,OACvC,EAAM,QAAU,GAChB,EAAM,KAAO,SACb,EAAM,QAAU,YAChB,EAAM,QAAU,GAChB,EAAO,KAAK,CAAE,KAAM,aAAc,MAAO,CAAE,OAAQ,KAAM,OAEpD,EAAoB,SAAY,CACrC,GAAI,KAAM,GAAiB,EAAgB,OAAU,MAAO,KAC5D,EAAM,QAAU,GAChB,EAAM,KAAO,GACb,EAAM,QAAU,iEAChB,EAAM,QAAU,CACf,CAAE,KAAM,OAAQ,OAAQ,IAAM,EAAM,QAAU,IAC9C,CAAE,KAAM,oBAAqB,OAAQ,IAAM,OAGvC,EAAa,KAAO,IAAS,CAClC,GAAI,CAAC,EAAQ,OACb,KAAM,GAAK,KAAM,GAAU,KAAK,MAAM,KAAM,GAAK,GAAG,SACpD,EAAO,KAAK,CAAE,KAAM,aAAc,MAAO,CAAE,OAAQ,MAE9C,EAAiB,KAAO,IAAa,CAC1C,KAAM,GAAK,KAAM,GAAY,GAC7B,EAAO,KAAK,CAAE,KAAM,aAAc,MAAO,CAAE,OAAQ,MAE9C,EAAoB,CAAC,IACrB,EAA0B,CAAE,KAAM,EAAY,IAAK,SAAY,CACpE,KAAM,GAAK,KAAM,GAAW,EAAY,OACxC,EAAO,KAAK,CAAE,KAAM,aAAc,MAAO,CAAE,OAAQ"}