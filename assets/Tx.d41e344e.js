import{_ as $,d as j,r as z,c as d,o as s,a as f,w as v,b as n,n as Q,u as e,e as ee,f as K,g as c,A as I,h as y,i as te,j as ae,k as U,m as C,L as ne,l as se,T as V,p as T,q as u,B as oe,s as q,t as m,v as A,x as _,y as ie,z as re,C as ce,D as W,E as F,F as J,G as de,I as le,H as ue,J as ve,K as he,M as P,N as R,O as pe,P as _e,Q as me,R as fe,S as ge,U as E}from"./index.2767f377.js";import{I as xe}from"./download.0ee2b345.js";import{P as G}from"./ProfilePreview.dfe19b51.js";import{O as ye}from"./OverlayPrompt.018f54c6.js";const be={class:"frame-scroller"},we=["src"],ke=j({props:["src"],emits:["load"],setup(l,{emit:o}){const h=z(null),a=z(null),t=z(null),g=i=>{console.log(i),a.value=i.contentRect.width/i.contentRect.height},S=()=>{t.value=h.value&&h.value.naturalWidth/h.value.naturalHeight,o("load")},w=d(()=>a.value&&t.value&&a.value<t.value),r=d(()=>a.value&&t.value&&a.value>=t.value);return(i,x)=>(s(),f(ee,{onResize:g,class:Q(["img",{x:e(w),y:e(r)}])},{default:v(()=>[n("div",be,[n("img",{ref_key:"imgRef",ref:h,src:l.src,onLoad:S},null,40,we)])]),_:1},8,["class"]))}});var Ie=$(ke,[["__scopeId","data-v-0f93abca"]]);const Se={controls:""},Ce=["src","type"],Te=y(" Not supported "),Ae=j({props:{tx:null},setup(l){const o=l,h=d(()=>K(o.tx.tags));return(a,t)=>(s(),c("video",Se,[n("source",{src:e(I).gatewayURL+l.tx.id,type:e(h)["Content-Type"]},null,8,Ce),Te]))}});var M=$(Ae,[["__scopeId","data-v-67247f52"]]);const ze=y("Load large file"),Le={key:"json",class:"selector data-container min-height box"},De={key:1,class:"raw"},Re={key:2,class:"selector"},$e=j({props:["tx"],setup(l){const o=l;te(r=>({"7f3de542":g.value}));const h=d(()=>I.gatewayURL+o.tx.id),a=d(()=>"https://arcode.studio/#/"+o.tx.id+"?theme=dark-blue&hideToolbar=true"),t=ae({handler:void 0,payload:void 0,loaded:!1,intent:!1}),g=z(void 0);U(()=>o.tx.id,()=>{t.handler=void 0,t.payload=void 0,t.loaded=!1,t.intent=!1,g.value="pre-wrap",S()},{immediate:!0}),U(()=>t.intent,()=>t.intent&&S());async function S(){if(!o.tx||o.tx.data?.size==="0"||o.tx.data?.size==null)return;const r=K(o.tx.tags);if(r["Bundle-Version"])return t.loaded=!0,t.handler={is:C(ne),attrs:{query:se({bundledIn:o.tx.id}),component:C(V),componentProps:{options:{space:!0}},class:["column"]},containerAttrs:{class:["data-container","column-container","padding"]}};if(r["Content-Type"]==="application/x.arweave-manifest+json"||r["Content-Type"]==="text/html"||r["Content-Type"]==="application/pdf")return t.handler={is:"iframe",attrs:{src:h.value,class:["hover"]},containerAttrs:{class:["iframe-container","fixed-height"]}};if(r["Content-Type"]?.split("/")[0]==="video")return t.loaded=!0,t.handler={is:C(M),attrs:{tx:o.tx},containerAttrs:{class:["iframe-container"]}};if(r["Content-Type"]?.split("/")[0]==="audio")return t.loaded=!0,t.handler={is:C(M),attrs:{tx:o.tx},containerAttrs:{class:["iframe-container"]}};if(o.tx.data.size>104857600&&!t.intent)return t.handler="intent";if(r["Content-Type"]?.split("/")[0]==="image")return t.handler={is:C(Ie),attrs:{src:h.value},containerAttrs:{class:["img-container"]}};if(r["App-Name"]==="SmartWeaveContract"||r["App-Name"]==="SmartWeaveContractSource")return t.handler={is:"iframe",attrs:{src:a.value},containerAttrs:{class:["iframe-container","fixed-height"]}};t.handler="raw";try{r["Content-Type"]==="application/gzip"&&(t.payload??=await w(o.tx.id))}catch(i){console.error(i)}try{t.payload??=(await T.api.get(o.tx.id)).data}catch{}try{t.payload??=await T.transactions.getData(o.tx.id,{decode:!0,string:!0})}catch{}if(t.payload?.[0]==="{"||t.payload?.[0]==="[")try{t.payload=JSON.stringify(JSON.parse(t.payload),null,2),g.value="pre"}catch{}t.loaded=!0}async function w(r){let i;try{i??=(await T.api.get(r,{responseType:"blob"})).data}catch{}try{i??=new Blob([await T.transactions.getData(r,{decode:!0})])}catch{}const x=new DecompressionStream("gzip"),B=i.stream().pipeThrough(x);return(await new Response(B).blob()).text()}return(r,i)=>(s(),f(A,null,{default:v(()=>[e(t).handler==="intent"?(s(),c("div",{key:0,onClick:i[0]||(i[0]=x=>e(t).intent=!0),class:"selector data-container min-height box",style:{display:"flex","justify-content":"center","padding-top":"5em"}},[u(oe,{icon:e(xe)},{default:v(()=>[ze]),_:1},8,["icon"])])):e(t).handler==="raw"?(s(),c("div",Le,[u(A,null,{default:v(()=>[e(t).loaded?(s(),c("pre",De,m(e(t).payload),1)):(s(),f(q,{key:0,class:"loader"}))]),_:1})])):e(t).handler?(s(),c("div",Re,[u(A,null,{default:v(()=>[e(t).loaded?_("",!0):(s(),f(q,{key:0,class:"loader"}))]),_:1}),u(A,null,{default:v(()=>[ie(n("div",W(e(t).handler.containerAttrs,{class:"box"}),[(s(),f(ce(e(t).handler.is),W(e(t).handler.attrs,{onLoad:i[1]||(i[1]=x=>e(t).loaded=!0)}),null,16))],16),[[re,e(t).loaded]])]),_:1})])):_("",!0)]),_:1}))}});var je=$($e,[["__scopeId","data-v-6cc786c4"]]);const b=l=>(fe("data-v-a814d1ac"),l=l(),ge(),l),Be={key:0,style:{position:"relative",width:"100%","min-height":"var(--current-vh)",color:"var(--element-secondary)"}},Ne={key:0},Pe={key:1},Ue={class:"meta flex-column"},Ve={class:"box",style:{padding:"0"}},He={key:1,class:"spacer"},Oe={key:2,class:"divider"},qe=b(()=>n("h3",null,"Transaction",-1)),We={class:"flex-column"},Fe={key:0},Je=["href"],Ee={key:1},Ge=["href"],Me={class:"secondary-text"},Qe=y("ID:\xA0"),Ke={key:3},Xe=b(()=>n("h3",null,"Bundle",-1)),Ye={class:"flex-column"},Ze={class:"secondary-text"},et=y("ID:\xA0"),tt={key:4},at=b(()=>n("h3",null,"Pending",-1)),nt={key:5},st=b(()=>n("h3",null,"Block",-1)),ot={key:0,class:"secondary-text"},it=b(()=>n("div",{class:"spacer"},null,-1)),rt={class:"secondary-text"},ct=y("ID:\xA0"),dt=b(()=>n("h3",null,"Data",-1)),lt=y(" Fee: "),ut={key:6},vt=b(()=>n("h3",null,"Tags",-1)),ht=[vt],pt={key:0,style:{background:"var(--background2)","border-radius":"var(--border-radius)"}},_t=j({props:{txId:null},setup(l){const o=l,h=F(J(o,"txId")),a=h.state,t=h.queryStatus,g=d(()=>a.value?.bundledIn?.id),w=F(g).state,r=d(()=>I.gatewayURL&&new URL(I.gatewayURL).hostname),i=d(()=>a.value?.bundledIn?.id||o.txId),x=de({name:"single tx status",params:i,query:async p=>(await T.transactions.getStatus(p)).status,completed:p=>!i.value||a.value?.block||p&&p!==404,seconds:30}).state,B=d(()=>a.value?.owner&&E(a.value?.owner.address)),H=d(()=>a.value?.recipient&&E(a.value?.recipient)),L=d(()=>a.value?.data?.size!=="0"),X=d(()=>!a.value?.block),Y=d(()=>{if(!a.value?.block)return"";const p=new Date(a.value?.block.timestamp*1e3);return p.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})+" "+p.toLocaleTimeString()}),O=d(()=>R.value?.height&&a.value?.block?.height&&R.value?.height-a.value?.block?.height+1),D=d(()=>{if(!a.value?.tags)return;const p=[];for(const k of a.value?.tags)p.push({items:[{name:"",value:k.name,attrs:{disabled:!0}},{name:"",value:k.value,attrs:{disabled:!0}}]});return p}),Z=J(le.breakpoints,"verticalContent"),N=z(0);return U(a,(p,k)=>{if(!!k){if(k?.bundledIn?.id===o.txId)return N.value=-1;N.value=1}}),(p,k)=>(s(),f(A,{vector:N.value,axis:"x"},{default:v(()=>[e(a)?(s(),f(ue,{key:l.txId},ve({left:v(()=>[n("div",Ue,[n("div",Ve,[n("div",{class:"box-padding flex-column",style:he([e(D).length&&"padding-bottom: 0"])},[u(V,{tx:e(a),options:{half:!0}},null,8,["tx"]),e(a).recipient?(s(),f(G,{key:0,wallet:e(H)},null,8,["wallet"])):_("",!0),e(a).recipient?(s(),c("div",He)):_("",!0),e(a).recipient?(s(),c("div",Oe)):_("",!0),u(G,{wallet:e(B)},null,8,["wallet"]),n("div",null,[qe,n("div",We,[e(L)?(s(),c("div",Fe,[n("a",{href:e(I).gatewayURL+e(a).id,target:"_blank"},m(e(r)),9,Je)])):_("",!0),e(a).data?.type==="application/x.arweave-manifest+json"?(s(),c("div",Ee,[n("a",{href:e(I).gatewayURL+"tx/"+e(a).id+"/data.json",target:"_blank"},"Manifest",8,Ge)])):_("",!0),n("div",Me,[u(P,{tx:e(a).id},{default:v(()=>[Qe]),_:1},8,["tx"])])])]),e(a).bundledIn?.id?(s(),c("div",Ke,[Xe,n("div",Ye,[e(w)?(s(),f(V,{key:0,tx:e(w),options:{space:!0}},null,8,["tx"])):_("",!0),n("div",Ze,[u(P,{tx:e(a).bundledIn?.id},{default:v(()=>[et]),_:1},8,["tx"])])])])):_("",!0),e(X)?(s(),c("div",tt,[at,n("div",null,"Status: "+m(e(x)?e(x):"..."),1)])):(s(),c("div",nt,[st,n("div",null,[y(" Height: "+m(e(a).block.height)+" ",1),e(R)?.height?(s(),c("span",ot,"/ "+m(e(R).height)+" ("+m(e(O))+" confirmation"+m(e(O)>1?"s":"")+")",1)):_("",!0)]),n("div",null,m(e(Y)),1),it,n("div",rt,[u(P,{block:e(a).block.id},{default:v(()=>[ct]),_:1},8,["block"])])])),n("div",null,[dt,n("div",null,"Size: "+m(e(pe)(e(a).data.size)),1),n("div",null,[lt,u(_e,{ar:e(a).fee.ar},null,8,["ar"])])]),e(D).length?(s(),c("div",ut,ht)):_("",!0)],4),e(D).length?(s(),c("div",pt,[u(me,{schema:e(D),disabled:""},null,8,["schema"])])):_("",!0)])])]),_:2},[e(a)&&e(L)?{name:"right",fn:v(()=>[u(je,{tx:e(a),class:Q({inline:!e(Z)})},null,8,["tx","class"])])}:void 0]),1024)):(s(),c("div",Be,[u(ye,{options:{icon:"loader"},class:"box"},{default:v(()=>[e(t).error?(s(),c("h2",Ne,m(e(t).error),1)):(s(),c("h2",Pe,"Loading"))]),_:1})]))]),_:1},8,["vector"]))}});var yt=$(_t,[["__scopeId","data-v-a814d1ac"]]);export{yt as default};
//# sourceMappingURL=Tx.d41e344e.js.map
