import{d as z,r as L,c,o as n,j as y,h as _,e as s,l as Q,u as e,a as i,V as x,aq as ee,q as te,w as U,af as T,g as u,t as m,W as v,m as ae,p as se,k as ne,a2 as H,U as O,ar as oe,n as re,a3 as le,a4 as ie}from"./vendor.cc129a20.js";import{_ as B,a as ce,u as K,A as I,L as de,b as ue,T as V,c as A,B as _e,d as F,e as C,f as J,g as pe,I as he,F as ve,h as P,n as R,i as me,j as ye,k as fe,l as E}from"./index.dfeb5663.js";import{I as ge}from"./download.a85a3369.js";import{P as G}from"./ProfilePreview.43beecc6.js";import{O as xe}from"./OverlayPrompt.7efa44c3.js";const be={class:"frame-scroller"},ke=["src"],we=z({props:["src"],emits:["load"],setup(d,{emit:o}){const p=L(null),a=L(null),t=L(null),f=r=>{console.log(r),a.value=r.contentRect.width/r.contentRect.height},S=()=>{t.value=p.value&&p.value.naturalWidth/p.value.naturalHeight,o("load")},k=c(()=>a.value&&t.value&&a.value<t.value),l=c(()=>a.value&&t.value&&a.value>=t.value);return(r,g)=>(n(),y(ce,{onResize:f,class:Q(["img",{x:e(k),y:e(l)}])},{default:_(()=>[s("div",be,[s("img",{ref_key:"imgRef",ref:p,src:d.src,onLoad:S},null,40,ke)])]),_:1},8,["class"]))}});var Ie=B(we,[["__scopeId","data-v-0f93abca"]]);const Se={controls:""},Te=["src","type"],Ae=x(" Not supported "),Ce=z({props:{tx:null},setup(d){const o=d,p=c(()=>K(o.tx.tags));return(a,t)=>(n(),i("video",Se,[s("source",{src:e(I).gatewayURL+d.tx.id,type:e(p)["Content-Type"]},null,8,Te),Ae]))}});var M=B(Ce,[["__scopeId","data-v-67247f52"]]);const Le=x("Load large file"),$e={key:"json",class:"selector data-container min-height box"},De={key:1,class:"raw"},Re={key:2,class:"selector"},ze=z({props:["tx"],setup(d){const o=d;ee(l=>({"238bea0f":f.value}));const p=c(()=>I.gatewayURL+o.tx.id),a=c(()=>"https://arcode.studio/#/"+o.tx.id+"?theme=dark-blue&hideToolbar=true"),t=te({handler:void 0,payload:void 0,loaded:!1,intent:!1}),f=L(void 0);U(()=>o.tx.id,()=>{t.handler=void 0,t.payload=void 0,t.loaded=!1,t.intent=!1,f.value="pre-wrap",S()},{immediate:!0}),U(()=>t.intent,()=>t.intent&&S());async function S(){if(!o.tx||o.tx.data?.size==="0"||o.tx.data?.size==null)return;const l=K(o.tx.tags);if(l["Bundle-Version"])return t.loaded=!0,t.handler={is:T(de),attrs:{query:ue({bundledIn:o.tx.id}),component:T(V),componentProps:{options:{space:!0}},class:["column"]},containerAttrs:{class:["data-container","column-container","padding"]}};if(l["Content-Type"]==="application/x.arweave-manifest+json"||l["Content-Type"]==="text/html"||l["Content-Type"]==="application/pdf")return t.handler={is:"iframe",attrs:{src:p.value,class:["hover"]},containerAttrs:{class:["iframe-container","fixed-height"]}};if(l["Content-Type"]?.split("/")[0]==="video")return t.loaded=!0,t.handler={is:T(M),attrs:{tx:o.tx},containerAttrs:{class:["iframe-container"]}};if(l["Content-Type"]?.split("/")[0]==="audio")return t.loaded=!0,t.handler={is:T(M),attrs:{tx:o.tx},containerAttrs:{class:["iframe-container"]}};if(o.tx.data.size>104857600&&!t.intent)return t.handler="intent";if(l["Content-Type"]?.split("/")[0]==="image")return t.handler={is:T(Ie),attrs:{src:p.value},containerAttrs:{class:["img-container"]}};if(l["App-Name"]==="SmartWeaveContract"||l["App-Name"]==="SmartWeaveContractSource")return t.handler={is:"iframe",attrs:{src:a.value},containerAttrs:{class:["iframe-container","fixed-height"]}};t.handler="raw";try{l["Content-Type"]==="application/gzip"&&(t.payload??=await k(o.tx.id))}catch(r){console.error(r)}try{t.payload??=(await A.api.get(o.tx.id)).data}catch{}try{t.payload??=await A.transactions.getData(o.tx.id,{decode:!0,string:!0})}catch{}if(t.payload[0]==="{"||t.payload[0]==="[")try{t.payload=JSON.stringify(JSON.parse(t.payload),null,2),f.value="pre"}catch{}t.loaded=!0}async function k(l){let r;try{r??=(await A.api.get(l,{responseType:"blob"})).data}catch{}try{r??=new Blob([await A.transactions.getData(l,{decode:!0})])}catch{}const g=new DecompressionStream("gzip"),N=r.stream().pipeThrough(g);return(await new Response(N).blob()).text()}return(l,r)=>(n(),y(C,null,{default:_(()=>[e(t).handler==="intent"?(n(),i("div",{key:0,onClick:r[0]||(r[0]=g=>e(t).intent=!0),class:"selector data-container min-height box",style:{display:"flex","justify-content":"center","padding-top":"5em"}},[u(_e,{icon:e(ge)},{default:_(()=>[Le]),_:1},8,["icon"])])):e(t).handler==="raw"?(n(),i("div",$e,[u(C,null,{default:_(()=>[e(t).loaded?(n(),i("pre",De,m(e(t).payload),1)):(n(),y(F,{key:0,class:"loader"}))]),_:1})])):e(t).handler?(n(),i("div",Re,[u(C,null,{default:_(()=>[e(t).loaded?v("",!0):(n(),y(F,{key:0,class:"loader"}))]),_:1}),u(C,null,{default:_(()=>[ae(s("div",H(e(t).handler.containerAttrs,{class:"box"}),[(n(),y(ne(e(t).handler.is),H(e(t).handler.attrs,{onLoad:r[1]||(r[1]=g=>e(t).loaded=!0)}),null,16))],16),[[se,e(t).loaded]])]),_:1})])):v("",!0)]),_:1}))}});var Be=B(ze,[["__scopeId","data-v-7a7714f9"]]);const b=d=>(le("data-v-a814d1ac"),d=d(),ie(),d),Ne={key:0,style:{position:"relative",width:"100%","min-height":"var(--current-vh)",color:"var(--element-secondary)"}},je={key:0},Pe={key:1},Ue={class:"meta flex-column"},Ve={class:"box",style:{padding:"0"}},qe={key:1,class:"spacer"},We={key:2,class:"divider"},He=b(()=>s("h3",null,"Transaction",-1)),Oe={class:"flex-column"},Fe={key:0},Je=["href"],Ee={key:1},Ge=["href"],Me={class:"secondary-text"},Qe=x("ID:\xA0"),Ke={key:3},Xe=b(()=>s("h3",null,"Bundle",-1)),Ye={class:"flex-column"},Ze={class:"secondary-text"},et=x("ID:\xA0"),tt={key:4},at=b(()=>s("h3",null,"Pending",-1)),st={key:5},nt=b(()=>s("h3",null,"Block",-1)),ot={key:0,class:"secondary-text"},rt=b(()=>s("div",{class:"spacer"},null,-1)),lt={class:"secondary-text"},it=x("ID:\xA0"),ct=b(()=>s("h3",null,"Data",-1)),dt=x(" Fee: "),ut={key:6},_t=b(()=>s("h3",null,"Tags",-1)),pt=[_t],ht={key:0,style:{background:"var(--background2)","border-radius":"var(--border-radius)"}},vt=z({props:{txId:null},setup(d){const o=d,p=J(O(o,"txId")),a=p.state,t=p.queryStatus,f=c(()=>a.value?.bundledIn?.id),k=J(f).state,l=c(()=>I.gatewayURL&&new URL(I.gatewayURL).hostname),r=c(()=>a.value?.bundledIn?.id||o.txId),g=pe({name:"single tx status",params:r,query:async h=>(await A.transactions.getStatus(h)).status,completed:h=>!r.value||a.value?.block||h&&h!==404,seconds:30}).state,N=c(()=>a.value?.owner&&E(a.value?.owner.address)),q=c(()=>a.value?.recipient&&E(a.value?.recipient)),$=c(()=>a.value?.data?.size!=="0"),X=c(()=>!a.value?.block),Y=c(()=>{if(!a.value?.block)return"";const h=new Date(a.value?.block.timestamp*1e3);return h.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})+" "+h.toLocaleTimeString()}),W=c(()=>R.value?.height&&a.value?.block?.height&&R.value?.height-a.value?.block?.height+1),D=c(()=>{if(!a.value?.tags)return;const h=[];for(const w of a.value?.tags)h.push({items:[{name:"",value:w.name,attrs:{disabled:!0}},{name:"",value:w.value,attrs:{disabled:!0}}]});return h}),Z=O(he.breakpoints,"verticalContent"),j=L(0);return U(a,(h,w)=>{if(!!w){if(w?.bundledIn?.id===o.txId)return j.value=-1;j.value=1}}),(h,w)=>(n(),y(C,{vector:j.value,axis:"x"},{default:_(()=>[e(a)?(n(),y(ve,{key:d.txId},oe({left:_(()=>[s("div",Ue,[s("div",Ve,[s("div",{class:"box-padding flex-column",style:re([e(D).length&&"padding-bottom: 0"])},[u(V,{tx:e(a),options:{half:!0}},null,8,["tx"]),e(a).recipient?(n(),y(G,{key:0,wallet:e(q)},null,8,["wallet"])):v("",!0),e(a).recipient?(n(),i("div",qe)):v("",!0),e(a).recipient?(n(),i("div",We)):v("",!0),u(G,{wallet:e(N)},null,8,["wallet"]),s("div",null,[He,s("div",Oe,[e($)?(n(),i("div",Fe,[s("a",{href:e(I).gatewayURL+e(a).id,target:"_blank"},m(e(l)),9,Je)])):v("",!0),e(a).data?.type==="application/x.arweave-manifest+json"?(n(),i("div",Ee,[s("a",{href:e(I).gatewayURL+"tx/"+e(a).id+"/data.json",target:"_blank"},"Manifest",8,Ge)])):v("",!0),s("div",Me,[u(P,{tx:e(a).id},{default:_(()=>[Qe]),_:1},8,["tx"])])])]),e(a).bundledIn?.id?(n(),i("div",Ke,[Xe,s("div",Ye,[e(k)?(n(),y(V,{key:0,tx:e(k),options:{space:!0}},null,8,["tx"])):v("",!0),s("div",Ze,[u(P,{tx:e(a).bundledIn?.id},{default:_(()=>[et]),_:1},8,["tx"])])])])):v("",!0),e(X)?(n(),i("div",tt,[at,s("div",null,"Status: "+m(e(g)?e(g):"..."),1)])):(n(),i("div",st,[nt,s("div",null,[x(" Height: "+m(e(a).block.height)+" ",1),e(R)?.height?(n(),i("span",ot,"/ "+m(e(R).height)+" ("+m(e(W))+" confirmation"+m(e(W)>1?"s":"")+")",1)):v("",!0)]),s("div",null,m(e(Y)),1),rt,s("div",lt,[u(P,{block:e(a).block.id},{default:_(()=>[it]),_:1},8,["block"])])])),s("div",null,[ct,s("div",null,"Size: "+m(e(me)(e(a).data.size)),1),s("div",null,[dt,u(ye,{ar:e(a).fee.ar},null,8,["ar"])])]),e(D).length?(n(),i("div",ut,pt)):v("",!0)],4),e(D).length?(n(),i("div",ht,[u(fe,{schema:e(D),disabled:""},null,8,["schema"])])):v("",!0)])])]),_:2},[e(a)&&e($)?{name:"right",fn:_(()=>[u(Be,{tx:e(a),class:Q({inline:!e(Z)})},null,8,["tx","class"])])}:void 0]),1024)):(n(),i("div",Ne,[u(xe,{options:{icon:"loader"},class:"box"},{default:_(()=>[e(t).error?(n(),i("h2",je,m(e(t).error),1)):(n(),i("h2",Pe,"Loading"))]),_:1})]))]),_:1},8,["vector"]))}});var bt=B(vt,[["__scopeId","data-v-a814d1ac"]]);export{bt as default};
//# sourceMappingURL=Tx.2967d63a.js.map
